2025-03-17 10:57:47,287 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 10:57:47,287 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 10:57:47,288 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 10:57:48,123 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 10:57:48,248 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 10:57:48,330 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 10:57:48,622 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 10:57:48,623 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 10:57:49,560 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 10:57:49,560 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 10:57:49,560 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 10:57:49,701 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 10:57:49,701 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 10:57:49,763 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 10:57:49,763 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 10:57:49,763 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 10:57:49,803 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 10:57:50,195 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 10:57:50,265 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 10:57:50,265 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 10:57:50,265 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 10:57:50,430 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 10:57:50,430 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 10:57:52,769 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 10:57:52,770 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 10:57:52,850 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 10:57:52,850 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 10:57:52,850 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 10:57:53,594 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 10:57:53,594 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 10:57:53,616 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 10:57:53,617 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 10:57:53,617 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 10:57:53,663 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 10:57:53,709 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 10:57:53,753 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 10:57:54,006 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 10:57:54,006 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 10:57:54,007 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 10:57:54,007 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 10:57:54,863 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 10:57:54,864 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 10:57:54,864 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 10:57:54,864 - wireless_ap_test - INFO - MQTT Process Check: 29944 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30171 root      1920 S    ash -c ps | grep mosquitto
30173 root      1920 S    grep mosquitto
2025-03-17 10:57:54,885 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 10:57:54,972 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 10:58:05,222 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 10:58:05,222 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - Validation Results:
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - DTS Failures: ["instanceName (expected 'test_instance3', got '')", 'DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - clean up if statement
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 10:58:05,243 - wireless_ap_test - ERROR - No sections found to delete
2025-03-17 10:58:05,244 - wireless_ap_test - INFO - Validation completed with success: False
2025-03-17 10:58:05,244 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 2, Failed: 1
2025-03-17 10:58:26,339 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 10:58:26,339 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 10:58:26,340 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 10:58:27,171 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 10:58:27,300 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 10:58:27,382 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 10:58:27,670 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 10:58:27,670 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 10:58:28,585 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 10:58:28,585 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 10:58:28,586 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 10:58:28,729 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 10:58:28,729 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 10:58:28,790 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 10:58:28,790 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 10:58:28,790 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 10:58:28,832 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 10:58:29,215 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 10:58:29,283 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 10:58:29,283 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 10:58:29,283 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 10:58:29,449 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 10:58:29,449 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 10:58:31,794 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 10:58:31,794 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 10:58:31,875 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 10:58:31,875 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 10:58:31,875 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 10:58:32,742 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 10:58:32,742 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 10:58:32,742 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 10:58:32,742 - wireless_ap_test - INFO - MQTT Process Check: 30241 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30394 root      1920 S    ash -c ps | grep mosquitto
30396 root      1920 R    grep mosquitto
2025-03-17 10:58:32,764 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 10:58:32,764 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 10:58:32,764 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 10:58:32,850 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 10:58:32,933 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 10:58:42,972 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 10:58:42,972 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - Validation Results:
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - clean up if statement
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 10:58:42,993 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 10:58:42,993 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 10:58:42,994 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 10:58:43,038 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 10:58:43,081 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 10:58:43,124 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 10:58:43,380 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 10:58:43,380 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 10:58:43,380 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 3, Failed: 0
2025-03-17 11:01:13,153 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:01:13,153 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:01:13,154 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:01:14,026 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:01:14,156 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:01:14,239 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:01:14,523 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:01:14,523 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 11:01:14,523 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:01:15,446 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:01:15,446 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:01:15,446 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:01:15,590 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:01:15,590 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:01:15,651 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:01:15,651 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:01:15,651 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:01:15,693 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:01:16,092 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:01:16,163 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:01:16,163 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:01:16,163 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:01:16,336 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:01:16,337 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:01:18,677 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:01:18,677 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:01:18,760 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:01:18,760 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:01:18,760 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 11:01:19,500 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 11:01:19,500 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:01:19,522 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:01:19,522 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:01:19,523 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:01:19,569 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:01:19,616 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:01:19,661 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:01:19,918 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 11:01:19,918 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 11:01:19,918 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 11:01:19,918 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:01:20,773 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:01:20,773 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:01:20,773 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:01:20,773 - wireless_ap_test - INFO - MQTT Process Check: 30589 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30816 root      1920 S    ash -c ps | grep mosquitto
30818 root      1920 S    grep mosquitto
2025-03-17 11:01:20,793 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 11:01:20,878 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:01:31,003 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:01:31,004 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:01:31,004 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:01:31,004 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 11:01:31,004 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:01:31,005 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 11:01:31,005 - wireless_ap_test - INFO - DTS Failures: ["instanceName (expected 'test_instance3', got '')", 'DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 11:01:31,005 - wireless_ap_test - INFO - clean up if statement
2025-03-17 11:01:31,005 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:01:31,026 - wireless_ap_test - ERROR - No sections found to delete
2025-03-17 11:01:31,027 - wireless_ap_test - INFO - Validation completed with success: False
2025-03-17 11:01:31,027 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 2, Failed: 1
2025-03-17 11:01:36,177 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:01:36,178 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:01:36,178 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:01:37,015 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:01:37,140 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:01:37,220 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:01:37,508 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:01:37,509 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 11:01:37,509 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:01:38,428 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:01:38,428 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:01:38,428 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:01:38,571 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:01:38,571 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:01:38,631 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:01:38,631 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:01:38,631 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:01:38,673 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:01:39,055 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:01:39,124 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:01:39,124 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:01:39,124 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:01:39,289 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:01:39,289 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:01:41,627 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:01:41,627 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:01:41,708 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:01:41,708 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:01:41,708 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 11:01:42,452 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 11:01:42,452 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:01:42,475 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:01:42,475 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:01:42,475 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:01:42,521 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:01:42,571 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:01:42,616 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:01:42,870 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 11:01:42,870 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 11:01:42,870 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 11:01:42,871 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:01:43,728 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:01:43,728 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:01:43,728 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:01:43,728 - wireless_ap_test - INFO - MQTT Process Check: 30885 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
31104 root      1920 S    ash -c ps | grep mosquitto
31106 root      1920 S    grep mosquitto
2025-03-17 11:01:43,748 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 11:01:43,831 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:01:50,322 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:01:50,322 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:01:50,322 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:01:51,174 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:01:51,299 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:01:51,384 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:01:51,664 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:01:51,664 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:01:52,600 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:01:52,600 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:01:52,600 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:01:52,741 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:01:52,741 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:01:52,802 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:01:52,802 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:01:52,802 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:01:52,843 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:01:53,235 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:01:53,304 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:01:53,304 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:01:53,304 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:01:53,470 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:01:53,470 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:01:55,807 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:01:55,807 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:01:55,889 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:01:55,889 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:01:55,889 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:01:56,773 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:01:56,773 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:01:56,773 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:01:56,773 - wireless_ap_test - INFO - MQTT Process Check: 31164 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
31321 root      1920 S    ash -c ps | grep mosquitto
31323 root      1920 R    grep mosquitto
2025-03-17 11:01:56,800 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:01:56,800 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:01:56,800 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:01:56,888 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:01:56,971 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:01:56,971 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:01:56,971 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:01:56,971 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:01:56,971 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:01:56,972 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:01:56,972 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:02:07,016 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:02:07,016 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:02:07,016 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:02:07,016 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:02:07,017 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:02:07,017 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:02:07,017 - wireless_ap_test - INFO - clean up if statement
2025-03-17 11:02:07,017 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:02:07,039 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:02:07,039 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:02:07,039 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:02:07,083 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:02:07,128 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:02:07,172 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:02:07,428 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 11:02:07,428 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:02:07,429 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 3, Failed: 0
2025-03-17 11:05:21,751 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:05:21,751 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:05:21,752 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:05:22,608 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:05:22,737 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:05:22,820 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:05:23,100 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:05:23,100 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:05:24,074 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:05:24,074 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:05:24,074 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:05:24,214 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:05:24,214 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:05:24,275 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:05:24,275 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:05:24,275 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:05:24,316 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:05:24,705 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:05:24,773 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:05:24,773 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:05:24,773 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:05:24,940 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:05:24,941 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:05:27,284 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:05:27,284 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:05:27,365 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:05:27,365 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:05:27,365 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:05:28,237 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:05:28,237 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:05:28,237 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:05:28,237 - wireless_ap_test - INFO - MQTT Process Check: 31535 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
31689 root      1920 S    ash -c ps | grep mosquitto
31691 root      1920 R    grep mosquitto
2025-03-17 11:05:28,258 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:05:28,258 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:05:28,258 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:05:28,343 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:05:28,424 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:05:38,504 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:05:38,504 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:05:38,504 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:05:38,504 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:05:38,504 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:05:38,505 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:05:38,505 - wireless_ap_test - INFO - clean up if statement
2025-03-17 11:05:38,505 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:05:38,526 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:05:38,526 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:05:38,527 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:05:38,570 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:05:38,614 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:05:38,658 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:05:38,908 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 11:05:38,909 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:05:38,909 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 3, Failed: 0
2025-03-17 11:05:45,834 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='all', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:05:45,835 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:05:45,835 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:05:47,103 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 11:05:48,509 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:05:48,509 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:05:50,121 - wireless_ap_test - INFO - Filled username
2025-03-17 11:05:50,248 - wireless_ap_test - INFO - Filled password
2025-03-17 11:05:50,407 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:05:51,024 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:05:52,027 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 11:05:53,294 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 11:05:53,294 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 11:05:54,333 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 11:05:54,334 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 11:05:55,523 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 11:05:56,525 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 11:05:56,525 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 11:05:57,712 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 11:05:57,754 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 11:05:57,775 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 11:05:57,801 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 11:05:57,943 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 11:05:58,084 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 11:06:00,274 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 11:06:00,274 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 11:06:00,291 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:06:00,291 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 11:06:00,306 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 11:06:00,475 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:06:01,483 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 11:06:01,483 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 11:06:01,498 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 11:06:01,678 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 11:06:01,689 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 11:06:01,689 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 11:06:01,689 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker - mqtt_broker
2025-03-17 11:06:03,698 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 11:06:04,131 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:06:04,131 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:06:05,434 - wireless_ap_test - INFO - Filled username
2025-03-17 11:06:05,556 - wireless_ap_test - INFO - Filled password
2025-03-17 11:06:05,717 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:06:06,362 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:06:07,364 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:06:08,581 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:06:08,581 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:06:09,823 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:06:09,823 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 11:06:11,558 - wireless_ap_test - INFO - Clicking add button
2025-03-17 11:06:12,715 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 11:06:13,217 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 11:06:13,217 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 11:06:14,625 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 11:06:14,626 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 11:06:14,626 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 11:06:17,124 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 11:06:17,124 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 11:06:17,124 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 11:06:21,661 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 11:06:21,662 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 11:06:21,662 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 11:06:22,544 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 11:06:23,047 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 11:06:25,882 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 11:06:28,053 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 11:06:28,053 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 11:06:30,431 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 11:06:32,166 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 11:06:34,387 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 11:06:34,387 - wireless_ap_test - INFO - Saving configuration
2025-03-17 11:06:39,586 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 11:06:39,586 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 11:06:39,586 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 11:06:40,445 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:06:40,445 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:06:40,445 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:06:40,445 - wireless_ap_test - INFO - MQTT Process Check: 31912 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
32177 root      1920 S    ash -c ps | grep mosquitto
32179 root      1920 S    grep mosquitto
2025-03-17 11:06:40,467 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:06:40,467 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:06:40,467 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:06:40,561 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:06:40,646 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:06:40,646 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:06:40,646 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:06:40,647 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:06:40,647 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:06:40,647 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:06:40,647 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:06:50,690 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:06:50,690 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:06:50,690 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:06:50,690 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:06:50,690 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:06:50,690 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:06:50,691 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:06:58,140 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 11:06:58,140 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 11:06:58,140 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:07:01,494 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:07:01,623 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:07:01,706 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:07:01,990 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:07:01,990 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 11:07:01,990 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 11:07:01,991 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:07:02,250 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:07:02,250 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 11:07:02,250 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 11:07:02,370 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 11:07:02,371 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 11:07:02,462 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:07:02,462 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 11:07:02,463 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:07:02,463 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:07:03,371 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:07:03,371 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:07:03,371 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:07:03,544 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:07:03,544 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:07:03,623 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:07:03,623 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:07:03,623 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:07:03,674 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:07:04,080 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:07:04,150 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:07:04,150 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:07:04,150 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:07:04,319 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:07:04,319 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:07:06,657 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:07:06,657 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:07:06,739 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:07:06,739 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:07:06,740 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 11:07:06,740 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 11:07:06,740 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 11:07:06,977 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 11:07:07,164 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "3", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 11:07:07,164 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 11:07:07,164 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 11:07:07,230 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:07:07,230 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:07:07,230 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:07:07,230 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 11:07:07,231 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 11:07:07,231 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:07:07,231 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:07:08,098 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:07:08,098 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:07:08,098 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:07:08,098 - wireless_ap_test - INFO - MQTT Process Check: 32387 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
32512 root      1920 S    ash -c ps | grep mosquitto
32514 root      1920 R    grep mosquitto
2025-03-17 11:07:08,120 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:07:08,120 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:07:08,120 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:07:08,207 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:07:08,290 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:07:18,335 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:07:18,336 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:07:18,336 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:07:18,336 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:07:18,336 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:07:18,336 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:07:18,336 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:07:18,337 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 11:11:25,835 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='all', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:11:25,835 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:11:25,836 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:11:27,160 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 11:11:28,425 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:11:28,425 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:11:30,041 - wireless_ap_test - INFO - Filled username
2025-03-17 11:11:30,168 - wireless_ap_test - INFO - Filled password
2025-03-17 11:11:30,338 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:11:30,963 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:11:31,969 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 11:11:33,215 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 11:11:33,215 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 11:11:34,216 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 11:11:34,216 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 11:11:35,418 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 11:11:36,421 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 11:11:36,421 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 11:11:37,599 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 11:11:37,623 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 11:11:37,652 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 11:11:37,675 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 11:11:37,826 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 11:11:37,973 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 11:11:40,170 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 11:11:40,170 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 11:11:40,190 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:11:40,191 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 11:11:40,212 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 11:11:40,387 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:11:41,397 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 11:11:41,397 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 11:11:41,421 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 11:11:41,607 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 11:11:41,621 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 11:11:41,621 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 11:11:41,622 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker - mqtt_broker
2025-03-17 11:11:43,632 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 11:11:44,094 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:11:44,094 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:11:45,335 - wireless_ap_test - INFO - Filled username
2025-03-17 11:11:45,469 - wireless_ap_test - INFO - Filled password
2025-03-17 11:11:45,635 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:11:46,265 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:11:47,270 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:11:48,499 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:11:48,499 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:11:49,776 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:11:49,776 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 11:11:51,520 - wireless_ap_test - INFO - Clicking add button
2025-03-17 11:11:51,596 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-17 11:11:51,596 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-17 11:11:51,597 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-17 11:11:51,597 - wireless_ap_test - ERROR - Error in data_to_server - data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-17 11:11:54,999 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:11:55,128 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:11:55,211 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:11:55,495 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:11:55,496 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 11:11:55,496 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 11:11:55,496 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:11:55,757 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:11:55,757 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 11:11:55,757 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 11:11:55,877 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 11:11:55,877 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 11:11:55,971 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:11:55,971 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 11:11:55,971 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:11:55,972 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 11:11:55,972 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker - mqtt_broker
2025-03-17 11:11:55,972 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 11:11:55,972 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker - mqtt_broker
2025-03-17 11:11:55,972 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:11:56,879 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 11:11:56,879 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:11:56,879 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:11:57,049 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:11:57,049 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:11:57,133 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 11:11:57,133 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:11:57,133 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:11:57,183 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:11:57,600 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 11:11:57,673 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 11:11:57,673 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:11:57,673 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:11:57,849 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 11:11:57,849 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:12:00,207 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:12:00,207 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:12:00,293 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:12:00,293 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:12:00,293 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 11:12:00,293 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 11:12:00,293 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 11:12:00,717 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "3", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 11:12:00,717 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 11:12:00,717 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 11:12:00,784 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 11:12:00,784 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 11:12:00,784 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 11:12:00,784 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 11:12:00,784 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 11:12:00,785 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:12:00,785 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:12:01,673 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:12:01,674 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:12:01,674 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:12:01,674 - wireless_ap_test - INFO - MQTT Process Check: 526 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
  656 root      1920 S    ash -c ps | grep mosquitto
  658 root      1920 S    grep mosquitto
2025-03-17 11:12:01,697 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:12:01,697 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:12:01,698 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:12:01,785 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:12:11,926 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:12:11,926 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:12:11,926 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:12:11,926 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:12:11,926 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:12:11,926 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:12:11,927 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:12:11,927 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 11:12:12,696 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 11:12:12,696 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:12:12,729 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:12:12,730 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:12:12,730 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:12:12,730 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 11:12:12,778 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 11:12:12,833 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:12:12,877 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:12:12,921 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:12:13,174 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 11:12:13,174 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 5, Failed: 2
2025-03-17 11:12:45,138 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='all', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:12:45,139 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:12:45,139 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:12:46,395 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 11:12:47,698 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:12:47,699 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:12:49,337 - wireless_ap_test - INFO - Filled username
2025-03-17 11:12:49,467 - wireless_ap_test - INFO - Filled password
2025-03-17 11:12:49,630 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:12:50,252 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:12:51,257 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 11:12:52,643 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 11:12:52,643 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 11:12:53,611 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 11:12:53,612 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 11:12:54,808 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 11:12:55,810 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 11:12:55,810 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 11:12:56,992 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 11:12:57,009 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 11:12:57,031 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 11:12:57,051 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 11:12:57,197 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 11:12:57,331 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 11:12:59,508 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 11:12:59,508 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 11:12:59,524 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:12:59,524 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 11:12:59,539 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 11:12:59,712 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:13:00,723 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 11:13:00,723 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 11:13:00,738 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 11:13:00,914 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 11:13:00,925 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 11:13:00,925 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 11:13:00,925 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker - mqtt_broker
2025-03-17 11:13:02,934 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 11:13:03,441 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:13:03,441 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:13:04,655 - wireless_ap_test - INFO - Filled username
2025-03-17 11:13:04,775 - wireless_ap_test - INFO - Filled password
2025-03-17 11:13:04,937 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:13:05,569 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:13:06,572 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:13:07,836 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:13:07,836 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:13:09,079 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:13:09,079 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 11:13:10,841 - wireless_ap_test - INFO - Clicking add button
2025-03-17 11:13:12,011 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 11:13:12,513 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 11:13:12,513 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 11:13:13,968 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 11:13:13,968 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 11:13:13,968 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 11:13:16,517 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 11:13:16,517 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 11:13:16,517 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 11:13:21,229 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 11:13:21,229 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 11:13:21,229 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 11:13:22,136 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 11:13:22,638 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 11:13:25,491 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 11:13:27,680 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 11:13:27,681 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 11:13:30,097 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 11:13:31,932 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 11:13:34,169 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 11:13:34,169 - wireless_ap_test - INFO - Saving configuration
2025-03-17 11:13:39,480 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 11:13:39,480 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 11:13:39,480 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 11:13:40,391 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:13:40,391 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:13:40,391 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:13:40,391 - wireless_ap_test - INFO - MQTT Process Check: 526 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 1129 root      1920 S    ash -c ps | grep mosquitto
 1131 root      1920 R    grep mosquitto
2025-03-17 11:13:40,414 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:13:40,414 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:13:40,414 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:13:40,504 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:13:40,591 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:13:50,636 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:13:50,636 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:13:50,636 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:13:50,636 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:13:50,636 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:13:50,636 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:13:50,637 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:13:58,090 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 11:13:58,090 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 11:13:58,090 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:14:01,470 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:14:01,596 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:14:01,679 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:14:01,958 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:14:01,958 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 11:14:01,958 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 11:14:01,958 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:14:02,226 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:14:02,226 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 11:14:02,226 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 11:14:02,348 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 11:14:02,348 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 11:14:02,440 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:14:02,440 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 11:14:02,440 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:14:02,440 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:14:03,415 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:14:03,415 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:14:03,415 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:14:03,593 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:14:03,593 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:14:03,666 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:14:03,666 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:14:03,666 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:14:03,715 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:14:04,104 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:14:04,173 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:14:04,173 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:14:04,173 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:14:04,338 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:14:04,338 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:14:06,677 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:14:06,677 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:14:06,760 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:14:06,760 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:14:06,760 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 11:14:06,760 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 11:14:06,760 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:14:07,010 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:14:07,010 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 11:14:07,203 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "3", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 11:14:07,203 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 11:14:07,203 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 11:14:07,285 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:14:07,285 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:14:07,285 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:14:07,285 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 11:14:07,285 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 11:14:07,285 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:14:07,285 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:14:08,171 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:14:08,171 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:14:08,171 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:14:08,171 - wireless_ap_test - INFO - MQTT Process Check: 1331 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 1465 root      1920 S    ash -c ps | grep mosquitto
 1467 root      1920 R    grep mosquitto
2025-03-17 11:14:08,194 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:14:08,194 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:14:08,194 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:14:08,281 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:14:18,405 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:14:18,405 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:14:18,405 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:14:18,405 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:14:18,405 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:14:18,405 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:14:18,405 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:14:18,406 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 11:14:19,151 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 11:14:19,151 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:14:19,173 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:14:19,174 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:14:19,174 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:14:19,234 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:14:19,286 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:14:19,331 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:14:19,586 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 11:14:19,586 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:02:58,717 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='all', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:02:58,717 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:02:58,717 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:03:00,877 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:03:02,417 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:03:02,419 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:03:04,308 - wireless_ap_test - INFO - Filled username
2025-03-17 12:03:04,443 - wireless_ap_test - INFO - Filled password
2025-03-17 12:03:04,646 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:03:05,308 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:03:06,312 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:03:07,725 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:03:07,725 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:03:08,891 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:03:08,891 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:03:10,099 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:03:11,101 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:03:11,102 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:03:12,309 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:03:12,355 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:03:12,395 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:03:12,429 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:03:12,588 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:03:12,743 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:03:14,967 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:03:14,967 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:03:14,989 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:03:14,989 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:03:15,007 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:03:15,199 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:03:16,212 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:03:16,212 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:03:16,236 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:03:16,425 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:03:16,456 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:03:16,457 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:03:18,472 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:03:18,955 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:03:18,957 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:03:20,282 - wireless_ap_test - INFO - Filled username
2025-03-17 12:03:20,435 - wireless_ap_test - INFO - Filled password
2025-03-17 12:03:20,623 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:03:21,275 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:03:22,280 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:03:23,623 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:03:23,623 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:03:24,973 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:03:24,974 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:03:26,743 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:03:27,923 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:03:28,425 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:03:28,426 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:03:30,105 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:03:30,105 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:03:30,105 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:03:32,681 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:03:32,682 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:03:32,682 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:03:37,519 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:03:37,519 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:03:37,519 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:03:38,444 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:03:38,945 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:03:41,905 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:03:44,098 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:03:44,098 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:03:46,527 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:03:48,443 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:03:50,710 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:03:50,710 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:03:55,942 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:03:55,942 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:03:55,942 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:03:56,820 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:03:56,820 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:03:56,820 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:03:56,821 - wireless_ap_test - INFO - MQTT Process Check: 1331 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 3279 root      1920 S    ash -c ps | grep mosquitto
 3281 root      1920 S    grep mosquitto
2025-03-17 12:03:56,845 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:03:56,845 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:03:56,846 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:03:56,934 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:04:07,110 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:04:07,110 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:04:07,110 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:04:07,110 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:04:07,110 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:04:07,110 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:04:07,111 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:04:09,116 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:09,117 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:04:09,118 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:04:09,118 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:10,503 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:04:10,636 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:04:10,718 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:04:11,001 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:04:11,002 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:04:11,002 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:04:11,002 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:04:11,265 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:04:11,265 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:04:11,265 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:04:11,397 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:04:11,397 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:04:11,488 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:04:11,488 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:04:11,488 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:04:11,488 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:04:12,353 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:04:12,354 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:04:12,354 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:04:12,522 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:04:12,522 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:04:12,594 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:04:12,594 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:04:12,594 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:04:12,643 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:04:13,058 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:04:13,128 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:04:13,128 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:04:13,128 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:04:13,301 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:04:13,301 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:04:15,660 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:04:15,661 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:04:15,744 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:04:15,744 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:04:15,744 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:04:15,745 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:04:15,745 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:04:15,985 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:04:15,985 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:04:16,168 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:04:16,168 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:04:16,168 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:04:16,236 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:04:16,236 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:04:16,236 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:04:16,236 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:04:16,236 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:04:16,237 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:04:16,237 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 12:04:17,126 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:04:17,126 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:04:17,126 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:04:17,126 - wireless_ap_test - INFO - MQTT Process Check: 3437 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 3561 root      1920 S    ash -c ps | grep mosquitto
 3563 root      1920 S    grep mosquitto
2025-03-17 12:04:17,150 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:04:17,150 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:04:17,150 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:04:17,239 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:04:27,364 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:04:27,364 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:27,366 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:04:27,366 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:27,366 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:04:28,140 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:04:28,140 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:04:28,163 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:04:28,164 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:04:28,164 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:04:28,164 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:04:28,212 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:04:28,261 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:04:28,307 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:04:28,352 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:28,612 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:05:44,229 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:05:44,229 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:05:44,230 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:05:45,550 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:05:46,846 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:05:46,848 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:05:48,712 - wireless_ap_test - INFO - Filled username
2025-03-17 12:05:48,854 - wireless_ap_test - INFO - Filled password
2025-03-17 12:05:49,131 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:05:49,852 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:05:50,858 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:05:52,476 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:05:52,476 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:05:53,782 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:05:53,782 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:05:54,985 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:05:55,988 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:05:55,988 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:05:57,230 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:05:57,264 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:05:57,291 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:05:57,333 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:05:57,488 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:05:57,638 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:05:59,841 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:05:59,842 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:05:59,861 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:05:59,862 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:05:59,880 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:06:00,069 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:06:01,078 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:06:01,078 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:06:01,105 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:06:01,295 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:06:01,321 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:06:01,322 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:06:03,336 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:06:03,809 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:06:03,810 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:06:05,058 - wireless_ap_test - INFO - Filled username
2025-03-17 12:06:05,197 - wireless_ap_test - INFO - Filled password
2025-03-17 12:06:05,376 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:06:06,016 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:06:07,025 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:06:08,340 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:06:08,340 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:06:09,674 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:06:09,675 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:06:11,465 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:06:12,659 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:06:13,161 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:06:13,161 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:06:14,649 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:06:14,649 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:06:14,649 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:06:17,270 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:06:17,270 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:06:17,270 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:06:22,136 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:06:22,136 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:06:22,137 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:06:23,041 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:06:23,543 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:06:26,468 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:06:28,669 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:06:28,669 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:06:31,083 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:06:32,989 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:06:35,250 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:06:35,250 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:06:40,470 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:06:40,470 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:06:40,470 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:06:41,417 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:06:41,418 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:06:41,418 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:06:41,418 - wireless_ap_test - INFO - MQTT Process Check: 3437 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 4096 root      1920 S    ash -c ps | grep mosquitto
 4098 root      1920 S    grep mosquitto
2025-03-17 12:06:41,442 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:06:41,442 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:06:41,442 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:06:41,533 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:06:51,674 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:06:51,674 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:06:51,674 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:06:51,674 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:06:51,674 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:06:51,675 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:06:51,675 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:06:53,680 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:06:53,681 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:06:53,681 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:06:53,682 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:06:55,049 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:06:55,181 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:06:55,263 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:06:55,544 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:06:55,545 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:06:55,545 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:06:55,545 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:06:55,810 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:06:55,810 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:06:55,810 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:06:55,932 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:06:55,932 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:06:56,020 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:06:56,020 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:06:56,020 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:06:56,020 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:06:56,952 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:06:56,952 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:06:56,952 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:06:57,136 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:06:57,136 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:06:57,207 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:06:57,207 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:06:57,207 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:06:57,259 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:06:57,669 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:06:57,742 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:06:57,742 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:06:57,742 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:06:57,915 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:06:57,915 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:07:00,277 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:07:00,277 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:07:00,363 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:07:00,364 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:07:00,364 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:07:00,364 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:07:00,364 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:07:00,790 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:07:00,790 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:07:00,790 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:07:00,858 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:07:00,858 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:07:00,858 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:07:00,858 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:07:00,858 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:07:00,858 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:07:00,858 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 12:07:01,723 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:07:01,723 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:07:01,723 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:07:01,723 - wireless_ap_test - INFO - MQTT Process Check: 4251 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 4375 root      1920 S    ash -c ps | grep mosquitto
 4377 root      1920 S    grep mosquitto
2025-03-17 12:07:01,746 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:07:01,746 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:07:01,746 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:07:01,842 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:07:11,970 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:07:11,970 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:07:11,970 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:07:11,970 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:07:11,970 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:07:11,970 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:07:12,718 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:07:12,718 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:07:12,740 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:07:12,741 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:07:12,741 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:07:12,741 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:07:12,792 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:07:12,853 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:07:12,897 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:07:12,943 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:07:13,201 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:07:13,201 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:07:13,202 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:07:13,202 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:07:13,202 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:07:13,202 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:07:13,203 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:07:13,203 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:11:07,054 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:11:07,055 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:11:07,056 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:11:08,541 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:11:09,997 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:11:09,997 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:11:11,629 - wireless_ap_test - INFO - Filled username
2025-03-17 12:11:11,760 - wireless_ap_test - INFO - Filled password
2025-03-17 12:11:11,950 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:11:12,581 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:11:13,584 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:11:14,803 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:11:14,803 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:11:15,798 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:11:15,798 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:11:16,983 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:11:17,985 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:11:17,986 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:11:19,170 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:11:19,195 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:11:19,218 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:11:19,241 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:11:19,385 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:11:19,524 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:11:21,717 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:11:21,717 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:11:21,737 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:11:21,737 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:11:21,757 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:11:21,952 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:11:22,961 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:11:22,961 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:11:22,978 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:11:23,162 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:11:23,173 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:11:23,173 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:11:25,182 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:11:25,478 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:11:25,479 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:11:26,749 - wireless_ap_test - INFO - Filled username
2025-03-17 12:11:26,871 - wireless_ap_test - INFO - Filled password
2025-03-17 12:11:27,043 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:11:27,685 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:11:28,687 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:11:29,912 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:11:29,912 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:11:31,128 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:11:31,128 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:11:32,855 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:11:34,024 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:11:34,526 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:11:34,526 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:11:35,959 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:11:35,959 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:11:35,959 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:11:38,485 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:11:38,486 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:11:38,486 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:11:43,115 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:11:43,116 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:11:43,116 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:11:44,009 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:11:44,512 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:11:47,379 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:11:49,567 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:11:49,567 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:11:51,986 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:11:53,756 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:11:55,996 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:11:55,996 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:12:01,208 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:12:01,208 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:12:01,208 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:12:02,114 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:12:02,114 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:12:02,114 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:12:02,114 - wireless_ap_test - INFO - MQTT Process Check: 4251 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 4926 root      1920 S    ash -c ps | grep mosquitto
 4928 root      1920 S    grep mosquitto
2025-03-17 12:12:02,137 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:12:02,137 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:12:02,138 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:12:02,238 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:12:17,419 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:12:17,420 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:12:17,420 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:12:17,420 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:12:17,420 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:12:17,420 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:12:17,420 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:12:19,426 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:12:19,427 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:12:19,428 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:12:19,428 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:12:20,852 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:12:20,979 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:12:21,063 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:12:21,351 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:12:21,351 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:12:21,351 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:12:21,352 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:12:21,611 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:12:21,611 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:12:21,611 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:12:21,739 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:12:21,739 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:12:21,826 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:12:21,826 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:12:21,826 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:12:21,827 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:12:22,689 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:12:22,689 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:12:22,689 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:12:22,849 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:12:22,849 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:12:22,918 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:12:22,919 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:12:22,919 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:12:22,969 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:12:23,382 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:12:23,455 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:12:23,455 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:12:23,455 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:12:23,627 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:12:23,627 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:12:25,985 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:12:25,985 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:12:26,068 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:12:26,068 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:12:26,068 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:12:26,068 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:12:26,068 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:12:26,493 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:12:26,493 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:12:26,493 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:12:26,562 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:12:26,562 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:12:26,562 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:12:26,562 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:12:26,563 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:12:26,563 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:12:26,563 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:12:27,447 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:12:27,447 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:12:27,447 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:12:27,447 - wireless_ap_test - INFO - MQTT Process Check: 5081 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 5205 root      1920 S    ash -c ps | grep mosquitto
 5207 root      1920 S    grep mosquitto
2025-03-17 12:12:27,482 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:12:27,482 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:12:27,483 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:12:27,569 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:12:39,896 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:12:39,896 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:12:39,896 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:12:39,896 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:12:39,896 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:12:39,896 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:12:40,642 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:12:40,643 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:12:40,666 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:12:40,666 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:12:40,666 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:12:40,666 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:12:40,715 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:12:40,763 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:12:40,811 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:12:40,856 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:12:41,115 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:12:41,115 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:12:51,661 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:12:51,661 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:12:51,662 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:12:52,882 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:12:54,034 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:12:54,035 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:12:55,684 - wireless_ap_test - INFO - Filled username
2025-03-17 12:12:55,813 - wireless_ap_test - INFO - Filled password
2025-03-17 12:12:55,977 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:12:56,608 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:12:57,613 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:12:58,838 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:12:58,839 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:12:59,867 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:12:59,867 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:13:01,048 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:13:02,049 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:13:02,049 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:13:03,235 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:13:03,258 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:13:03,281 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:13:03,312 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:13:03,468 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:13:03,608 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:13:05,826 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:13:05,826 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:13:05,843 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:13:05,843 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:13:05,861 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:13:06,053 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:13:07,065 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:13:07,066 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:13:07,084 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:13:07,270 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:13:07,282 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:13:07,282 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:13:09,291 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:13:09,712 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:13:09,712 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:13:10,851 - wireless_ap_test - INFO - Filled username
2025-03-17 12:13:10,985 - wireless_ap_test - INFO - Filled password
2025-03-17 12:13:11,145 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:13:11,774 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:13:12,777 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:13:14,002 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:13:14,002 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:13:15,244 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:13:15,244 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:13:16,998 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:13:18,172 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:13:18,674 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:13:18,674 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:13:20,112 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:13:20,113 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:13:20,113 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:13:22,668 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:13:22,669 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:13:22,669 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:13:27,320 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:13:27,320 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:13:27,320 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:13:28,224 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:13:28,727 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:13:31,609 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:13:33,804 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:13:33,804 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:13:36,210 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:13:38,025 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:13:40,286 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:13:40,286 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:13:45,496 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:13:45,496 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:13:45,497 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:13:46,396 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:13:46,397 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:13:46,397 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:13:46,397 - wireless_ap_test - INFO - MQTT Process Check: 5081 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 5658 root      1920 S    ash -c ps | grep mosquitto
 5660 root      1920 S    grep mosquitto
2025-03-17 12:13:46,420 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:13:46,420 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:13:46,421 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:13:46,507 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:13:46,589 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:13:46,589 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:13:46,589 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:13:46,589 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:13:46,589 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:13:46,590 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:13:46,590 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:13:56,630 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:13:56,630 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:13:56,631 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:13:56,631 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:13:56,631 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:13:56,631 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:13:56,631 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:13:58,637 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:13:58,639 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:13:58,639 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:13:58,639 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:14:00,022 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:14:00,150 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:14:00,235 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:14:00,522 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:14:00,523 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:14:00,523 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:14:00,523 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:14:00,805 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:14:00,805 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:14:00,805 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:14:00,930 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:14:00,930 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:14:01,046 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:14:01,046 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:14:01,046 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:14:01,046 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:14:01,909 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:14:01,909 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:14:01,909 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:14:02,073 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:14:02,073 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:14:02,144 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:14:02,144 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:14:02,144 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:14:02,198 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:14:02,613 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:14:02,685 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:14:02,685 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:14:02,685 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:14:02,858 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:14:02,858 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:14:05,217 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:14:05,217 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:14:05,309 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:14:05,309 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:14:05,309 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:14:05,309 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:14:05,310 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:14:05,549 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:14:05,734 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:14:05,734 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:14:05,734 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:14:05,801 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:14:05,802 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:14:05,802 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:14:05,802 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:14:05,802 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:14:05,802 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:14:05,802 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:14:06,665 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:14:06,665 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:14:06,666 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:14:06,666 - wireless_ap_test - INFO - MQTT Process Check: 5809 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 5939 root      1920 S    ash -c ps | grep mosquitto
 5941 root      1920 S    grep mosquitto
2025-03-17 12:14:06,688 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:14:06,688 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:14:06,688 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:14:06,776 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:14:19,175 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:14:19,175 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:14:19,175 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:14:19,175 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:14:19,175 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:14:19,175 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:14:19,924 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:14:19,924 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:14:19,948 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:14:19,948 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:14:19,948 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:14:19,948 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:14:19,999 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:14:20,047 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:14:20,098 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:14:20,146 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:14:20,402 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:16:55,521 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:16:55,521 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:16:55,521 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:16:56,781 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:16:57,949 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:16:57,949 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:16:59,603 - wireless_ap_test - INFO - Filled username
2025-03-17 12:16:59,730 - wireless_ap_test - INFO - Filled password
2025-03-17 12:16:59,894 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:17:00,563 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:17:01,565 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:17:02,830 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:17:02,831 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:17:03,894 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:17:03,894 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:17:05,080 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:17:06,082 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:17:06,082 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:17:07,320 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:17:07,346 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:17:07,374 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:17:07,400 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:17:07,549 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:17:07,698 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:17:09,909 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:17:09,909 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:17:09,930 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:17:09,931 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:17:09,947 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:17:10,125 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:17:11,137 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:17:11,138 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:17:11,155 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:17:11,343 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:17:11,356 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:17:11,356 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:17:13,368 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:17:13,798 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:17:13,798 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:17:14,976 - wireless_ap_test - INFO - Filled username
2025-03-17 12:17:15,107 - wireless_ap_test - INFO - Filled password
2025-03-17 12:17:15,270 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:17:15,913 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:17:16,914 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:17:18,151 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:17:18,151 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:17:19,403 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:17:19,403 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:17:21,197 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:17:22,368 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:17:22,872 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:17:22,872 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:17:24,342 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:17:24,342 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:17:24,342 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:17:26,889 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:17:26,889 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:17:26,889 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:17:31,547 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:17:31,547 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:17:31,547 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:17:32,456 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:17:32,959 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:17:35,837 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:17:38,025 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:17:38,025 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:17:40,429 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:17:42,245 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:17:44,504 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:17:44,505 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:17:49,715 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:17:49,715 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:17:49,715 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:17:50,608 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:17:50,608 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:17:50,609 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:17:50,609 - wireless_ap_test - INFO - MQTT Process Check: 5809 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 6453 root      1920 S    ash -c ps | grep mosquitto
 6455 root      1920 S    grep mosquitto
2025-03-17 12:17:50,633 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:17:50,633 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:17:50,633 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:17:50,722 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:17:50,809 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:17:50,809 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:17:50,810 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:17:50,810 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:17:50,810 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:17:50,810 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:17:50,810 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:18:00,861 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:18:00,861 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:18:00,861 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:18:00,861 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:18:00,861 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:18:00,861 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:18:00,862 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:18:02,867 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:18:02,869 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:18:02,869 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:18:02,869 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:18:04,241 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:18:04,368 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:18:04,450 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:18:04,740 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:18:04,741 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:18:04,741 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:18:04,741 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:18:05,008 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:18:05,008 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:18:05,008 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:18:05,152 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:18:05,152 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:18:05,248 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:18:05,248 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:18:05,248 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:18:05,248 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:18:06,121 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:18:06,121 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:18:06,121 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:18:06,291 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:18:06,292 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:18:06,362 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:18:06,363 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:18:06,363 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:18:06,415 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:18:06,837 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:18:06,909 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:18:06,909 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:18:06,909 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:18:07,079 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:18:07,079 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:18:09,440 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:18:09,440 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:18:09,524 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:18:09,524 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:18:09,524 - wireless_ap_test - INFO - Running validation after SSH data_to_server with latest MQTT and DTS configs
2025-03-17 12:18:10,397 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:18:10,397 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:18:10,397 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:18:10,397 - wireless_ap_test - INFO - MQTT Process Check: 6599 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 6725 root      1920 S    ash -c ps | grep mosquitto
 6727 root      1920 S    grep mosquitto
2025-03-17 12:18:10,419 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:18:10,419 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:18:10,420 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:18:10,509 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:18:20,648 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:18:20,648 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:18:20,895 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:18:21,076 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:18:21,076 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:18:21,076 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:18:21,147 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:18:21,147 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:18:21,147 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:18:21,147 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:18:21,147 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:18:21,147 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:18:21,147 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:18:22,038 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:18:22,039 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:18:22,039 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:18:22,039 - wireless_ap_test - INFO - MQTT Process Check: 6599 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 6758 root      1920 S    ash -c ps | grep mosquitto
 6760 root      1920 S    grep mosquitto
2025-03-17 12:18:22,061 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:18:22,061 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:18:22,061 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:18:22,150 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:18:32,282 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:18:32,283 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:18:32,283 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:18:32,283 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:18:32,283 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:18:32,283 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:18:32,283 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 12:18:32,284 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:18:32,284 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:18:32,284 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:18:32,284 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:18:32,284 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:18:33,063 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:18:33,063 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:18:33,087 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:18:33,087 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:18:33,087 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:18:33,087 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:18:33,135 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:18:33,183 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:18:33,229 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:18:33,273 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:18:33,531 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:18:33,531 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:18:33,532 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:18:33,532 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:18:33,532 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:18:33,532 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:18:33,532 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:18:33,533 - wireless_ap_test - INFO - Test execution completed. Total: 8, Passed: 7, Failed: 1
2025-03-17 12:25:33,790 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:25:33,790 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:25:33,790 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:25:35,121 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:25:36,473 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:25:36,473 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:25:38,426 - wireless_ap_test - INFO - Filled username
2025-03-17 12:25:38,554 - wireless_ap_test - INFO - Filled password
2025-03-17 12:25:38,775 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:25:39,430 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:25:40,436 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:25:41,822 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:25:41,823 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:25:43,023 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:25:43,023 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:25:44,219 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:25:45,221 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:25:45,221 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:25:46,405 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:25:46,425 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:25:46,444 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:25:46,465 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:25:46,605 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:25:46,745 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:25:48,983 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:25:48,983 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:25:49,013 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:25:49,013 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:25:49,038 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:25:49,270 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:25:50,282 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:25:50,282 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:25:50,301 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:25:50,488 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:25:50,508 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:25:50,509 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:25:52,521 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:25:52,876 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:25:52,876 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:25:54,200 - wireless_ap_test - INFO - Filled username
2025-03-17 12:25:54,323 - wireless_ap_test - INFO - Filled password
2025-03-17 12:25:54,491 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:25:55,125 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:25:56,127 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:25:57,355 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:25:57,355 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:25:58,586 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:25:58,586 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:26:00,382 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:26:01,553 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:26:02,055 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:26:02,055 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:26:03,640 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:26:03,640 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:26:03,640 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:26:06,249 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:26:06,249 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:26:06,249 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:26:10,931 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:26:10,931 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:26:10,931 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:26:11,857 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:26:12,359 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:26:15,269 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:26:17,459 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:26:17,459 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:26:19,881 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:26:21,754 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:26:24,017 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:26:24,018 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:26:29,238 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:26:29,238 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:26:29,238 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:26:30,132 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:26:30,132 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:26:30,133 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:26:30,133 - wireless_ap_test - INFO - MQTT Process Check: 6599 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 7387 root      1920 S    ash -c ps | grep mosquitto
 7389 root      1920 S    grep mosquitto
2025-03-17 12:26:30,156 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:26:30,156 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:26:30,157 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:26:30,249 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:26:40,386 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:26:40,386 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:26:40,386 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:26:40,386 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:26:40,386 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:26:40,386 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:26:40,386 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:26:42,391 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:26:42,392 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:26:42,392 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:26:42,392 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:26:43,827 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:26:43,956 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:26:44,041 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:26:44,320 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:26:44,321 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:26:44,321 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:26:44,321 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:26:44,589 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:26:44,589 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:26:44,589 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:26:44,706 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:26:44,706 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:26:44,794 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:26:44,794 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:26:44,795 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:26:44,795 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:26:45,658 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:26:45,658 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:26:45,658 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:26:45,828 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:26:45,828 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:26:45,898 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:26:45,898 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:26:45,898 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:26:45,948 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:26:46,373 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:26:46,447 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:26:46,447 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:26:46,447 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:26:46,623 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:26:46,623 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:26:48,989 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:26:48,989 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:26:49,078 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:26:49,079 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:26:49,079 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:26:49,079 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:26:49,079 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:26:49,321 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:26:49,321 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:26:49,321 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:26:49,509 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:26:49,509 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:26:49,509 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:26:49,577 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:26:49,577 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:26:49,577 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:26:49,577 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:26:49,578 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:26:49,578 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:26:49,578 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:26:50,520 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:26:50,520 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:26:50,520 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:26:50,520 - wireless_ap_test - INFO - MQTT Process Check: 7537 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 7665 root      1920 S    ash -c ps | grep mosquitto
 7667 root      1920 S    grep mosquitto
2025-03-17 12:26:50,542 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:26:50,542 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:26:50,542 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:26:50,638 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:27:00,785 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:27:00,785 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:27:00,786 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:27:00,786 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:27:00,786 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:27:00,786 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:27:00,786 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 12:27:00,787 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:27:00,787 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:27:00,787 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:27:00,787 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:27:00,787 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:27:01,568 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:27:01,568 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:27:01,592 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:27:01,592 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:27:01,592 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:27:01,592 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:27:01,642 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:27:01,689 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:27:01,735 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:27:01,780 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:27:02,037 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:27:02,037 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:27:02,037 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:27:02,037 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:27:02,037 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:27:02,038 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:27:02,038 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:27:02,038 - wireless_ap_test - ERROR - Test execution failed: name 'all_results' is not defined
2025-03-17 12:27:21,665 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:27:21,666 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:27:21,666 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:27:22,975 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:27:24,110 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:27:24,111 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:27:25,675 - wireless_ap_test - INFO - Filled username
2025-03-17 12:27:25,802 - wireless_ap_test - INFO - Filled password
2025-03-17 12:27:26,068 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:27:26,705 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:27:27,709 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:27:28,945 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:27:28,945 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:27:29,925 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:27:29,925 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:27:31,118 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:27:32,120 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:27:32,120 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:27:33,304 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:27:33,323 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:27:33,346 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:27:33,369 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:27:33,518 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:27:33,656 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:27:35,848 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:27:35,848 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:27:35,867 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:27:35,867 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:27:35,878 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:27:36,053 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:27:37,063 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:27:37,063 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:27:37,076 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:27:37,270 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:27:37,281 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:27:37,281 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:27:39,289 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:27:39,711 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:27:39,712 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:27:40,949 - wireless_ap_test - INFO - Filled username
2025-03-17 12:27:41,070 - wireless_ap_test - INFO - Filled password
2025-03-17 12:27:41,240 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:27:41,883 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:27:42,886 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:27:44,167 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:27:44,167 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:27:45,472 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:27:45,473 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:27:47,251 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:27:48,419 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:27:48,922 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:27:48,922 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:27:50,393 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:27:50,393 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:27:50,393 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:27:52,943 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:27:52,943 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:27:52,943 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:27:57,650 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:27:57,650 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:27:57,650 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:27:58,595 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:27:59,097 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:28:02,006 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:28:04,206 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:28:04,206 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:28:06,635 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:28:08,485 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:28:10,747 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:28:10,747 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:28:15,965 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:28:15,965 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:28:15,965 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:28:16,856 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:28:16,856 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:28:16,856 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:28:16,856 - wireless_ap_test - INFO - MQTT Process Check: 7537 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 8128 root      1920 S    ash -c ps | grep mosquitto
 8130 root      1920 S    grep mosquitto
2025-03-17 12:28:16,880 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:28:16,881 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:28:16,881 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:28:16,971 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:28:17,058 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:28:27,107 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:28:27,107 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:28:27,108 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:28:27,108 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:28:27,108 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:28:27,108 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:28:27,108 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:28:29,114 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:28:29,116 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:28:29,116 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:28:29,116 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:28:30,486 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:28:30,615 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:28:30,698 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:28:30,986 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:28:30,986 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:28:30,986 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:28:30,987 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:28:31,247 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:28:31,247 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:28:31,247 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:28:31,365 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:28:31,366 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:28:31,456 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:28:31,456 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:28:31,456 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:28:31,456 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:28:32,321 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:28:32,321 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:28:32,321 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:28:32,486 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:28:32,486 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:28:32,557 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:28:32,557 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:28:32,557 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:28:32,607 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:28:33,031 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:28:33,105 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:28:33,105 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:28:33,105 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:28:33,281 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:28:33,281 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:28:35,639 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:28:35,639 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:28:35,724 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:28:35,724 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:28:35,724 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:28:35,724 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:28:35,724 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:28:36,149 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:28:36,149 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:28:36,150 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:28:36,219 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:28:36,219 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:28:36,219 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:28:36,219 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:28:36,219 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:28:36,220 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:28:36,220 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:28:37,101 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:28:37,101 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:28:37,101 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:28:37,101 - wireless_ap_test - INFO - MQTT Process Check: 8284 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 8408 root      1920 S    ash -c ps | grep mosquitto
 8410 root      1920 R    grep mosquitto
2025-03-17 12:28:37,124 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:28:37,124 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:28:37,124 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:28:37,211 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:28:47,337 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:28:47,337 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:28:47,337 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:28:47,337 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:28:47,337 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:28:47,337 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:28:48,090 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:28:48,091 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:28:48,114 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:28:48,115 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:28:48,115 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:28:48,115 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:28:48,164 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:28:48,212 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:28:48,259 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:28:48,305 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:28:48,564 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:28:48,564 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:29:00,312 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:29:00,313 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:29:00,313 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:29:01,599 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:29:02,728 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:29:02,729 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:29:04,317 - wireless_ap_test - INFO - Filled username
2025-03-17 12:29:04,445 - wireless_ap_test - INFO - Filled password
2025-03-17 12:29:04,612 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:29:05,261 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:29:06,267 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:29:07,492 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:29:07,492 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:29:08,474 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:29:08,474 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:29:09,660 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:29:10,663 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:29:10,663 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:29:11,878 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:29:11,903 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:29:11,929 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:29:11,951 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:29:12,097 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:29:12,236 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:29:14,440 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:29:14,440 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:29:14,458 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:29:14,459 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:29:14,477 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:29:14,644 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:29:15,656 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:29:15,656 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:29:15,673 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:29:15,862 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:29:15,875 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:29:15,876 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:29:17,888 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:29:18,340 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:29:18,340 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:29:19,518 - wireless_ap_test - INFO - Filled username
2025-03-17 12:29:19,650 - wireless_ap_test - INFO - Filled password
2025-03-17 12:29:19,805 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:29:20,428 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:29:21,431 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:29:22,654 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:29:22,654 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:29:23,883 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:29:23,883 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:29:25,611 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:29:26,777 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:29:27,279 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:29:27,279 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:29:28,714 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:29:28,715 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:29:28,715 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:29:31,227 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:29:31,227 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:29:31,227 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:29:35,874 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:29:35,874 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:29:35,874 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:29:36,768 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:29:37,271 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:29:40,120 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:29:42,305 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:29:42,305 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:29:44,683 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:29:46,506 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:29:48,750 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:29:48,750 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:29:53,958 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:29:53,958 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:29:53,958 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:29:54,825 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:29:54,825 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:29:54,825 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:29:54,826 - wireless_ap_test - INFO - MQTT Process Check: 8284 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 8863 root      1920 S    ash -c ps | grep mosquitto
 8865 root      1920 R    grep mosquitto
2025-03-17 12:29:54,847 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:29:54,848 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:29:54,848 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:29:54,937 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:30:05,063 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:30:05,063 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:30:05,063 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:30:05,063 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:30:05,063 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:30:05,063 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:30:05,063 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:30:07,067 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:30:07,069 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:30:07,069 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:30:07,069 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:30:08,436 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:30:08,570 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:30:08,653 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:30:08,931 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:30:08,931 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:30:08,932 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:30:08,932 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:30:09,202 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:30:09,202 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:30:09,202 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:30:09,323 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:30:09,324 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:30:09,424 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:30:09,424 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:30:09,425 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:30:09,425 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:30:10,289 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:30:10,289 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:30:10,290 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:30:10,454 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:30:10,454 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:30:10,527 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:30:10,527 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:30:10,527 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:30:10,575 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:30:10,995 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:30:11,066 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:30:11,066 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:30:11,066 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:30:11,239 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:30:11,239 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:30:13,599 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:30:13,599 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:30:13,683 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:30:13,683 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:30:13,683 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:30:14,441 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:30:14,441 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:30:14,464 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:30:14,464 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:30:14,464 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:30:14,464 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:30:14,515 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:30:14,562 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:30:14,608 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:30:14,652 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:30:15,163 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:30:15,163 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:30:15,163 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:30:15,328 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 12:30:15,328 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 12:30:15,328 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 12:30:15,561 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 12:30:15,561 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 12:30:15,561 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 12:30:15,561 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 12:30:15,705 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 12:30:15,706 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 12:30:15,706 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 12:30:15,706 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 12:30:15,849 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 12:30:15,849 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 12:30:15,849 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 12:30:15,850 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 12:30:15,850 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 12:30:15,850 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 12:30:15,850 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 12:30:16,072 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 12:30:16,072 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Delete request:
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 12:30:16,326 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 12:30:16,326 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:30:16,326 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:30:17,198 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:30:17,198 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:30:17,199 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:30:17,199 - wireless_ap_test - INFO - MQTT Process Check: 9012 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 9228 root      1920 S    ash -c ps | grep mosquitto
 9230 root      1920 S    grep mosquitto
2025-03-17 12:30:17,219 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 12:30:17,301 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 12:30:17,392 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:30:27,446 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:30:27,446 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - DTS Failures: ["instanceName (expected 'test_instance3', got '')", 'DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - Final validation completed with success: False
2025-03-17 12:30:27,448 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:30:27,449 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:30:27,449 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:30:27,449 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:30:27,449 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:30:28,205 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:30:28,205 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:30:28,227 - wireless_ap_test - ERROR - No sections found to delete
2025-03-17 12:30:28,227 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:30:28,227 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:30:28,227 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - Delete request:
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 12:30:28,228 - wireless_ap_test - WARNING - Failed to delete Data to Server configuration: Not connected to API, call connect() first
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:30:53,053 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:30:53,054 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:30:53,054 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:30:54,543 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:30:55,755 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:30:55,755 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:30:57,432 - wireless_ap_test - INFO - Filled username
2025-03-17 12:30:57,562 - wireless_ap_test - INFO - Filled password
2025-03-17 12:30:57,720 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:30:58,353 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:30:59,355 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:31:00,584 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:31:00,584 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:31:01,572 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:31:01,572 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:31:02,756 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:31:03,759 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:31:03,760 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:31:04,963 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:31:04,988 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:31:05,008 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:31:05,034 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:31:05,180 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:31:05,324 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:31:07,532 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:31:07,532 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:31:07,548 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:31:07,548 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:31:07,564 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:31:07,737 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:31:08,748 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:31:08,748 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:31:08,764 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:31:08,953 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:31:08,965 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:31:08,965 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:31:10,975 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:31:11,401 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:31:11,402 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:31:12,567 - wireless_ap_test - INFO - Filled username
2025-03-17 12:31:12,696 - wireless_ap_test - INFO - Filled password
2025-03-17 12:31:12,860 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:31:13,501 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:31:14,504 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:31:15,723 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:31:15,724 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:31:16,938 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:31:16,938 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:31:18,687 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:31:19,854 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:31:20,355 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:31:20,355 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:31:21,780 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:31:21,780 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:31:21,780 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:31:24,301 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:31:24,302 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:31:24,302 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:31:28,920 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:31:28,921 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:31:28,921 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:31:29,794 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:31:30,297 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:31:33,128 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:31:35,307 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:31:35,307 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:31:37,685 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:31:39,467 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:31:41,708 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:31:41,708 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:31:46,906 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:31:46,907 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:31:46,907 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:31:47,765 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:31:47,765 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:31:47,765 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:31:47,766 - wireless_ap_test - INFO - MQTT Process Check: 9012 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 9663 root      1920 S    ash -c ps | grep mosquitto
 9665 root      1920 R    grep mosquitto
2025-03-17 12:31:47,787 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:31:47,787 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:31:47,788 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:31:47,875 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:31:47,958 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:31:47,958 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:31:47,959 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:31:47,959 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:31:47,959 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:31:47,959 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:31:47,959 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:31:58,000 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:31:58,000 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:31:58,000 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:31:58,000 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:31:58,000 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:31:58,000 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:31:58,000 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:32:00,005 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:32:00,007 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:32:00,007 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:32:00,007 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:32:01,366 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:32:01,492 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:32:01,575 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:32:01,855 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:32:01,856 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:32:01,856 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:32:01,856 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:32:02,120 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:32:02,120 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:32:02,120 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:32:02,243 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:32:02,243 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:32:02,333 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:32:02,333 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:32:02,334 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:32:02,334 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:32:03,201 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:32:03,201 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:32:03,201 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:32:03,364 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:32:03,364 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:32:03,432 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:32:03,432 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:32:03,432 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:32:03,482 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:32:03,908 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:32:03,978 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:32:03,978 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:32:03,978 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:32:04,149 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:32:04,149 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:32:06,505 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:32:06,505 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:32:06,588 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:32:06,588 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:32:06,588 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:32:07,340 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:32:07,340 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:32:07,364 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:32:07,364 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:32:07,364 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:32:07,364 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:32:07,414 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:32:07,461 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:32:07,507 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:32:07,551 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:32:08,052 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:32:08,052 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:32:08,052 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:32:08,052 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:32:08,222 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 12:32:08,222 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 12:32:08,222 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 12:32:08,309 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 12:32:08,309 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 12:32:08,310 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 12:32:08,310 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 12:32:08,310 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 12:32:08,310 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 12:32:08,310 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 12:32:08,457 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 12:32:08,457 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 12:32:08,457 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 12:32:08,457 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 12:32:08,598 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 12:32:08,598 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 12:32:08,598 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 12:32:08,598 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 12:32:08,739 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 12:32:08,739 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 12:32:08,739 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 12:32:08,740 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 12:32:08,740 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 12:32:08,740 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 12:32:08,740 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 12:32:08,963 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 12:32:08,964 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Delete request:
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 12:32:09,215 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 12:32:09,215 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:32:09,215 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:32:10,091 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:32:10,091 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:32:10,091 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:32:10,091 - wireless_ap_test - INFO - MQTT Process Check: 9818 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
10030 root      1920 S    ash -c ps | grep mosquitto
10032 root      1920 S    grep mosquitto
2025-03-17 12:32:10,113 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 12:32:10,195 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 12:32:10,283 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 12:32:10,283 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 12:32:10,283 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 12:32:10,284 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 12:32:10,284 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 12:32:10,284 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 12:32:10,284 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:32:20,327 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:32:20,327 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:32:20,327 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:32:20,327 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 12:32:20,328 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:32:20,328 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 12:32:20,328 - wireless_ap_test - INFO - DTS Failures: ["instanceName (expected 'test_instance3', got '')", 'DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - Final validation completed with success: False
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:32:21,089 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:32:21,089 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:32:21,111 - wireless_ap_test - ERROR - No sections found to delete
2025-03-17 12:32:21,111 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - Delete request:
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 12:32:21,112 - wireless_ap_test - WARNING - Failed to delete Data to Server configuration: Not connected to API, call connect() first
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:32:21,113 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 13:03:39,337 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:03:39,337 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:03:39,337 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:03:40,636 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:03:41,933 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:03:41,933 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:03:43,615 - wireless_ap_test - INFO - Filled username
2025-03-17 13:03:43,742 - wireless_ap_test - INFO - Filled password
2025-03-17 13:03:43,921 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:03:44,588 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:03:45,603 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:03:46,972 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:03:46,972 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:03:48,178 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:03:48,178 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:03:49,361 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:03:50,364 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:03:50,364 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:03:51,542 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:03:51,565 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:03:51,587 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:03:51,614 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:03:51,759 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:03:51,896 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:03:54,087 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:03:54,087 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:03:54,115 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:03:54,115 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:03:54,134 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:03:54,333 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:03:55,344 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:03:55,344 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:03:55,362 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:03:55,543 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:03:55,555 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:03:55,555 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:03:57,563 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:03:57,851 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:03:57,851 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:03:59,160 - wireless_ap_test - INFO - Filled username
2025-03-17 13:03:59,299 - wireless_ap_test - INFO - Filled password
2025-03-17 13:03:59,468 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:04:00,105 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:04:01,108 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:04:02,335 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:04:02,335 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:04:03,694 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:04:03,694 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:04:05,450 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:04:06,616 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:04:07,117 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:04:07,117 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:04:08,604 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:04:08,604 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:04:08,604 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:04:11,151 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:04:11,151 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:04:11,152 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:04:15,815 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:04:15,815 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:04:15,815 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:04:16,705 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:04:17,207 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:04:20,043 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:04:22,322 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:04:22,322 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:04:24,697 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:04:26,430 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:04:28,663 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:04:28,663 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:04:33,860 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:04:33,860 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:04:33,860 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 13:04:34,723 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:04:34,723 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:04:34,723 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:04:34,723 - wireless_ap_test - INFO - MQTT Process Check: 9818 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
11224 root      1920 S    ash -c ps | grep mosquitto
11226 root      1920 S    grep mosquitto
2025-03-17 13:04:34,746 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:04:34,746 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:04:34,746 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:04:34,834 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:04:34,919 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:04:34,919 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:04:34,919 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:04:34,919 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:04:34,919 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:04:34,920 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:04:34,920 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:04:45,013 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:04:45,013 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:04:45,013 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:04:45,013 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:04:45,013 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:04:45,013 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:04:45,014 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 13:04:47,019 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:04:47,021 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 13:04:47,021 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 13:04:47,021 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:04:48,418 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:04:48,544 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:04:48,628 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:04:48,911 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:04:48,912 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:04:48,912 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:04:48,912 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:04:49,189 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:04:49,189 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:04:49,189 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:04:49,309 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:04:49,309 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:04:49,419 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:04:49,420 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:04:49,420 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:04:49,420 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:04:50,293 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 13:04:50,293 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:04:50,293 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:04:50,472 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:04:50,472 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:04:50,550 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 13:04:50,550 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:04:50,550 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:04:50,603 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:04:51,020 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 13:04:51,094 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 13:04:51,095 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:04:51,095 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:04:51,275 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 13:04:51,275 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:04:53,642 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:04:53,642 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:04:53,726 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:04:53,726 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:04:53,726 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:04:53,727 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:04:53,727 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:04:54,169 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:04:54,170 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 13:04:54,170 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 13:04:54,239 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 13:04:54,239 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 13:04:54,239 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 13:04:54,240 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:04:54,240 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 13:04:54,240 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:04:54,240 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 13:04:55,114 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:04:55,114 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:04:55,114 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:04:55,114 - wireless_ap_test - INFO - MQTT Process Check: 11376 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
11503 root      1920 S    ash -c ps | grep mosquitto
11505 root      1920 S    grep mosquitto
2025-03-17 13:04:55,137 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:04:55,137 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:04:55,137 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:04:55,226 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:04:55,310 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:04:55,311 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:04:55,311 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:04:55,312 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:04:55,312 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:04:55,312 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:04:55,312 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:05:05,352 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:05:05,352 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:05:05,352 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:05:05,352 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:05:05,352 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:05:05,352 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:05:06,101 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:05:06,101 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:05:06,125 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:05:06,125 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:05:06,125 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:05:06,125 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 13:05:06,172 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:05:06,218 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:05:06,265 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 13:05:06,312 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:05:06,563 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 13:05:06,563 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:05:06,563 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:05:06,563 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 13:05:06,563 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:05:06,564 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 13:05:06,564 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 13:05:06,564 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 13:06:12,057 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:06:12,057 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:06:12,058 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:06:13,553 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:06:15,008 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:06:15,009 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:06:16,839 - wireless_ap_test - INFO - Filled username
2025-03-17 13:06:16,978 - wireless_ap_test - INFO - Filled password
2025-03-17 13:06:17,152 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:06:17,802 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:06:18,805 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:06:20,130 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:06:20,131 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:06:21,281 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:06:21,282 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:06:22,512 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:06:23,515 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:06:23,515 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:06:24,732 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:06:24,767 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:06:24,796 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:06:24,832 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:06:24,998 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:06:25,160 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:06:27,430 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:06:27,430 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:06:27,456 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:06:27,456 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:06:27,487 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:06:27,724 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:06:28,733 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:06:28,733 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:06:28,768 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:06:28,974 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:06:29,029 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:06:29,030 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:06:29,030 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:06:31,047 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:06:31,563 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:06:31,563 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:06:32,881 - wireless_ap_test - INFO - Filled username
2025-03-17 13:06:33,035 - wireless_ap_test - INFO - Filled password
2025-03-17 13:06:33,216 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:06:33,852 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:06:34,854 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:06:36,185 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:06:36,185 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:06:37,644 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:06:37,644 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:06:39,426 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:06:40,607 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:06:41,110 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:06:41,110 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:06:42,649 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:06:42,649 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:06:42,649 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:06:45,233 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:06:45,234 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:06:45,234 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:06:50,069 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:06:50,069 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:06:50,069 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:06:50,981 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:06:51,483 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:06:54,435 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:06:56,627 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:06:56,627 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:06:59,094 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:07:00,978 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:07:03,247 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:07:03,247 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:07:08,478 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:07:08,478 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:07:08,478 - wireless_ap_test - INFO - Running validation after GUI data_to_server with latest MQTT config
2025-03-17 13:07:09,370 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:07:09,370 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:07:09,370 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:07:09,370 - wireless_ap_test - INFO - MQTT Process Check: 11376 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
12035 root      1920 S    ash -c ps | grep mosquitto
12037 root      1920 S    grep mosquitto
2025-03-17 13:07:09,394 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:07:09,394 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:07:09,394 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:07:09,481 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:07:09,564 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:07:19,843 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:07:19,843 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:07:19,843 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:07:19,843 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:07:19,843 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:07:19,843 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:07:19,844 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:07:27,300 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:07:27,300 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:07:27,300 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:07:29,855 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: 'tuple' object has no attribute 'get'
2025-03-17 13:07:29,855 - wireless_ap_test - ERROR - Test execution failed: tuple indices must be integers or slices, not str
2025-03-17 13:08:47,670 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:08:47,671 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:08:47,671 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:08:49,080 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:08:50,499 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:08:50,499 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:08:52,304 - wireless_ap_test - INFO - Filled username
2025-03-17 13:08:52,442 - wireless_ap_test - INFO - Filled password
2025-03-17 13:08:52,707 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:08:53,362 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:08:54,367 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:08:55,775 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:08:55,775 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:08:56,810 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:08:56,810 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:08:58,010 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:08:59,013 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:08:59,013 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:09:00,194 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:09:00,217 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:09:00,242 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:09:00,266 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:09:00,410 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:09:00,555 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:09:02,755 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:09:02,755 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:09:02,772 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:09:02,772 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:09:02,786 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:09:02,960 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:09:03,971 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:09:03,971 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:09:03,986 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:09:04,173 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:09:04,195 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:09:04,196 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:09:04,196 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:09:06,205 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:09:06,636 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:09:06,637 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:09:07,826 - wireless_ap_test - INFO - Filled username
2025-03-17 13:09:07,954 - wireless_ap_test - INFO - Filled password
2025-03-17 13:09:08,124 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:09:08,757 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:09:09,759 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:09:10,966 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:09:10,967 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:09:12,253 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:09:12,253 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:09:14,004 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:09:15,175 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:09:15,677 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:09:15,677 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:09:17,107 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:09:17,107 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:09:17,107 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:09:19,628 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:09:19,629 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:09:19,629 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:09:24,249 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:09:24,249 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:09:24,249 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:09:25,130 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:09:25,631 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:09:28,464 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:09:30,651 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:09:30,651 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:09:33,055 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:09:34,813 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:09:37,046 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:09:37,046 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:09:42,245 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:09:42,245 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:09:42,245 - wireless_ap_test - INFO - Running validation after GUI data_to_server with latest MQTT config
2025-03-17 13:09:43,103 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:09:43,103 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:09:43,103 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:09:43,103 - wireless_ap_test - INFO - MQTT Process Check: 11376 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
12497 root      1920 S    ash -c ps | grep mosquitto
12499 root      1920 S    grep mosquitto
2025-03-17 13:09:43,125 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:09:43,125 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:09:43,126 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:09:43,211 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:09:43,292 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:09:43,293 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:09:43,293 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:09:43,293 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:09:43,293 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:09:43,294 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:09:43,294 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:09:53,337 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:09:53,337 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:09:53,337 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:09:53,337 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:09:53,337 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:09:53,337 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:09:53,337 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:10:00,792 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:10:00,792 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:10:00,792 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:10:03,330 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: 'tuple' object has no attribute 'get'
2025-03-17 13:10:03,330 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: 'tuple' object has no attribute 'get'
2025-03-17 13:10:03,331 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:10:03,331 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:10:03,331 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:10:03,576 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:10:03,576 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:10:03,576 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:10:03,623 - wireless_ap_test - ERROR - Failed to configure MQTT Broker via API: 'tuple' object has no attribute 'get'
2025-03-17 13:10:03,669 - wireless_ap_test - ERROR - Fallback approach also failed: 'tuple' object has no attribute 'get'
2025-03-17 13:10:03,669 - wireless_ap_test - ERROR - MQTT Broker API test failed: 'tuple' object has no attribute 'get'
2025-03-17 13:10:03,669 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:10:03,669 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:10:03,669 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:10:03,670 - wireless_ap_test - INFO - Cleanup completed for api test mqtt_broker
2025-03-17 13:10:05,672 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:10:05,672 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:10:05,672 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:10:05,918 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:10:05,918 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:10:05,918 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:10:05,918 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: 'tuple' object has no attribute 'get'
2025-03-17 13:10:05,918 - wireless_ap_test - ERROR - Data to Server API test failed: 'tuple' object has no attribute 'get'
2025-03-17 13:10:05,918 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:10:05,919 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 13:10:05,919 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:10:05,919 - wireless_ap_test - INFO - Running validation for api test with MQTT config
2025-03-17 13:10:06,716 - wireless_ap_test - ERROR - Validation failed: 'tuple' object has no attribute 'get'
2025-03-17 13:10:06,717 - wireless_ap_test - INFO - Validation for api test completed with success: False
2025-03-17 13:10:06,717 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:10:06,717 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 13:10:06,717 - wireless_ap_test - INFO - Cleanup completed for api test data_to_server
2025-03-17 13:10:08,719 - wireless_ap_test - INFO - Test execution completed. Total: 8, Passed: 3, Failed: 5
2025-03-17 13:11:14,994 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:11:14,994 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:11:14,995 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:11:16,467 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:11:17,806 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:11:17,807 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:11:19,448 - wireless_ap_test - INFO - Filled username
2025-03-17 13:11:19,577 - wireless_ap_test - INFO - Filled password
2025-03-17 13:11:19,739 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:11:20,388 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:11:21,394 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:11:22,652 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:11:22,652 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:11:23,623 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:11:23,623 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:11:24,808 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:11:25,813 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:11:25,813 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:11:26,983 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:11:27,008 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:11:27,033 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:11:27,059 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:11:27,204 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:11:27,346 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:11:29,561 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:11:29,561 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:11:29,579 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:11:29,579 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:11:29,595 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:11:29,775 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:11:30,788 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:11:30,788 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:11:30,807 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:11:30,986 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:11:30,998 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:11:30,998 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:11:30,998 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:11:33,009 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:11:33,422 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:11:33,422 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:11:34,586 - wireless_ap_test - INFO - Filled username
2025-03-17 13:11:34,725 - wireless_ap_test - INFO - Filled password
2025-03-17 13:11:34,893 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:11:35,511 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:11:36,513 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:11:37,774 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:11:37,774 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:11:38,996 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:11:38,996 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:11:40,727 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:11:41,891 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:11:42,392 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:11:42,392 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:11:43,812 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:11:43,812 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:11:43,812 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:11:46,355 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:11:46,355 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:11:46,355 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:11:50,958 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:11:50,958 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:11:50,958 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:11:51,849 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:11:52,350 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:11:55,203 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:11:57,374 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:11:57,374 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:11:59,752 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:12:01,518 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:12:03,761 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:12:03,761 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:12:08,961 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:12:08,961 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:12:08,961 - wireless_ap_test - INFO - Running validation after GUI data_to_server with latest MQTT config
2025-03-17 13:12:09,834 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:12:09,834 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:12:09,834 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:12:09,834 - wireless_ap_test - INFO - MQTT Process Check: 11376 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
12971 root      1920 S    ash -c ps | grep mosquitto
12973 root      1920 S    grep mosquitto
2025-03-17 13:12:09,868 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:12:09,868 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:12:09,868 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:12:09,955 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:12:10,038 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:12:20,132 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:12:20,132 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:12:20,132 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:12:20,132 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:12:20,132 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:12:20,132 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:12:20,133 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:12:27,572 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:12:27,572 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:12:27,573 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:12:30,105 - wireless_ap_test - WARNING - Expected dictionary for scenario but got <class 'tuple'>
2025-03-17 13:12:30,105 - wireless_ap_test - WARNING - Expected dictionary for scenario but got <class 'tuple'>
2025-03-17 13:12:30,105 - wireless_ap_test - ERROR - Invalid scenario_config type: <class 'tuple'>
2025-03-17 13:12:30,105 - wireless_ap_test - ERROR - Invalid scenario_config type: <class 'tuple'>
2025-03-17 13:12:30,106 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 3, Failed: 0
2025-03-17 13:14:56,219 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:14:56,219 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:14:56,220 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:14:57,470 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:14:58,621 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:14:58,621 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:15:00,237 - wireless_ap_test - INFO - Filled username
2025-03-17 13:15:00,361 - wireless_ap_test - INFO - Filled password
2025-03-17 13:15:00,527 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:15:01,175 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:15:02,179 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:15:03,476 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:15:03,476 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:15:04,475 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:15:04,475 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:15:05,664 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:15:06,667 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:15:06,667 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:15:07,847 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:15:07,867 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:15:07,894 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:15:07,919 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:15:08,068 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:15:08,214 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:15:10,411 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:15:10,412 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:15:10,429 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:15:10,429 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:15:10,444 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:15:10,608 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:15:11,621 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:15:11,621 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:15:11,642 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:15:11,841 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:15:11,855 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:15:11,855 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:15:11,855 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:15:13,873 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:15:14,291 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:15:14,291 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:15:15,452 - wireless_ap_test - INFO - Filled username
2025-03-17 13:15:15,586 - wireless_ap_test - INFO - Filled password
2025-03-17 13:15:15,756 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:15:16,448 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:15:17,449 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:15:18,640 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:15:18,641 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:15:19,842 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:15:19,842 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:15:21,557 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:15:22,723 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:15:23,226 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:15:23,226 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:15:24,631 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:15:24,631 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:15:24,631 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:15:27,131 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:15:27,131 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:15:27,131 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:15:31,741 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:15:31,741 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:15:31,741 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:15:32,677 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:15:33,180 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:15:36,064 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:15:38,241 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:15:38,241 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:15:40,617 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:15:42,394 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:15:44,610 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:15:44,610 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:15:49,807 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:15:49,807 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:15:49,807 - wireless_ap_test - INFO - Running validation after GUI data_to_server with MQTT config
2025-03-17 13:15:50,689 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:15:50,689 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:15:50,689 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:15:50,689 - wireless_ap_test - INFO - MQTT Process Check: 11376 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13461 root      1920 S    ash -c ps | grep mosquitto
13463 root      1920 S    grep mosquitto
2025-03-17 13:15:50,711 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:15:50,711 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:15:50,712 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:15:50,798 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:15:50,886 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:15:50,886 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:15:50,886 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:15:50,886 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:15:50,887 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:15:50,887 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:15:50,887 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:16:01,013 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:16:01,013 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:16:01,013 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:16:01,013 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:16:01,013 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:16:01,013 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:16:01,014 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:16:08,545 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:16:08,545 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:16:08,545 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:16:11,070 - wireless_ap_test - INFO - Running MQTT broker SSH test for scenario mqtt_broker
2025-03-17 13:16:11,896 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:16:12,024 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:16:12,105 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:16:12,386 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:16:12,386 - wireless_ap_test - INFO - Running Data to Server SSH test for scenario data_to_server
2025-03-17 13:16:12,387 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:16:13,323 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 13:16:13,324 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:16:13,324 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:16:13,474 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:16:13,475 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:16:13,534 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 13:16:13,534 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:16:13,535 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:16:13,576 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:16:13,962 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 13:16:14,031 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 13:16:14,031 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:16:14,031 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:16:14,196 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 13:16:14,196 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:16:16,536 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:16:16,536 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:16:16,618 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:16:16,618 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:16:16,618 - wireless_ap_test - INFO - Running validation for SSH tests with MQTT and DTS configs
2025-03-17 13:16:17,484 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:16:17,484 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:16:17,484 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:16:17,484 - wireless_ap_test - INFO - MQTT Process Check: 13583 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13735 root      1920 S    ash -c ps | grep mosquitto
13737 root      1920 S    grep mosquitto
2025-03-17 13:16:17,505 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:16:17,506 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:16:17,506 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:16:17,591 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:16:27,714 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:16:27,714 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:16:27,714 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:16:27,714 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:16:27,714 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:16:27,714 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:16:27,715 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:16:27,715 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:16:28,459 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:16:28,460 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:16:28,482 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:16:28,482 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:16:28,482 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:16:28,528 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:16:28,584 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:16:28,645 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:16:28,909 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 13:16:28,909 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - Cleanup completed for Data to Server SSH test
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - Cleanup completed for MQTT broker SSH test
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - Running MQTT broker API test for scenario mqtt_broker
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:16:28,911 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:16:29,174 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:16:29,174 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:16:29,174 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:16:29,307 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:16:29,308 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:16:29,411 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:16:29,411 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:16:29,411 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:16:29,411 - wireless_ap_test - INFO - Running Data to Server API test for scenario data_to_server
2025-03-17 13:16:29,411 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:16:29,412 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:16:29,412 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:16:29,704 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:16:29,704 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:16:29,704 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:16:29,704 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:16:29,879 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:16:29,879 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:16:29,879 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:16:29,967 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:16:29,967 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:16:29,967 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:16:29,967 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:16:29,968 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:16:29,968 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:16:29,968 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:16:30,119 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:16:30,119 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:16:30,119 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:16:30,119 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:16:30,259 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:16:30,260 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:16:30,260 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:16:30,260 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:16:30,425 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:16:30,425 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:16:30,425 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:16:30,425 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:16:30,425 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:16:30,426 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:16:30,426 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:16:30,680 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:16:30,681 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:16:30,872 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:16:30,872 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:16:30,872 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:16:30,873 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:16:30,873 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:16:30,873 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:16:30,873 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:16:30,943 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:16:30,943 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:16:30,943 - wireless_ap_test - INFO - Running validation for API tests with MQTT and DTS configs
2025-03-17 13:16:31,807 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:16:31,808 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:16:31,808 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:16:31,808 - wireless_ap_test - INFO - MQTT Process Check: 13876 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13905 root      1920 S    ash -c ps | grep mosquitto
13907 root      1920 S    grep mosquitto
2025-03-17 13:16:31,828 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 13:16:31,912 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 13:16:31,999 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:16:42,045 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:16:42,045 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:16:42,045 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:16:42,045 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - DTS Failures: ["instanceName (expected 'test_instance3', got '')", 'DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:16:42,047 - wireless_ap_test - WARNING - Failed to delete Data to Server configuration: Not connected to API, call connect() first
2025-03-17 13:16:42,047 - wireless_ap_test - INFO - Cleanup completed for Data to Server API test
2025-03-17 13:16:42,047 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:16:42,047 - wireless_ap_test - INFO - Cleanup completed for MQTT broker API test
2025-03-17 13:16:42,047 - wireless_ap_test - INFO - Test execution completed. Total: 9, Passed: 8, Failed: 1
2025-03-17 13:16:57,510 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:16:57,510 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:16:57,511 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:16:58,772 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:16:59,959 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:16:59,960 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:17:01,522 - wireless_ap_test - INFO - Filled username
2025-03-17 13:17:01,643 - wireless_ap_test - INFO - Filled password
2025-03-17 13:17:01,816 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:17:02,446 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:17:03,449 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:17:04,666 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:17:04,666 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:17:05,616 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:17:05,616 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:17:06,798 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:17:07,800 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:17:07,800 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:17:08,969 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:17:08,988 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:17:09,008 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:17:09,032 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:17:09,178 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:17:09,311 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:17:11,501 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:17:11,502 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:17:11,519 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:17:11,519 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:17:11,532 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:17:11,707 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:17:12,716 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:17:12,716 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:17:12,729 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:17:12,907 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:17:12,927 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:17:12,928 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:17:12,928 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:17:14,941 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:17:15,325 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:17:15,325 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:17:16,643 - wireless_ap_test - INFO - Filled username
2025-03-17 13:17:16,765 - wireless_ap_test - INFO - Filled password
2025-03-17 13:17:16,925 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:17:17,542 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:17:18,545 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:17:19,752 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:17:19,753 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:17:20,977 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:17:20,977 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:17:22,726 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:17:23,893 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:17:24,395 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:17:24,395 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:17:25,821 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:17:25,821 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:17:25,821 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:17:28,350 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:17:28,351 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:17:28,351 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:17:33,274 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:17:33,274 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:17:33,274 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:17:34,201 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:17:34,703 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:17:37,579 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:17:39,764 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:17:39,765 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:17:42,164 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:17:43,943 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:17:46,162 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:17:46,162 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:17:51,367 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:17:51,367 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:17:51,367 - wireless_ap_test - INFO - Running validation after GUI data_to_server with MQTT config
2025-03-17 13:17:52,259 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:17:52,259 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:17:52,260 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:17:52,260 - wireless_ap_test - INFO - MQTT Process Check: 13876 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
14274 root      1920 S    ash -c ps | grep mosquitto
14276 root      1920 S    grep mosquitto
2025-03-17 13:17:52,283 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:17:52,283 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:17:52,283 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:17:52,378 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:17:52,464 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:17:52,464 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:17:52,464 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:17:52,465 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:17:52,465 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:17:52,465 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:17:52,465 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:18:02,509 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:18:02,509 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:18:02,509 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:18:02,509 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:18:02,509 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:18:02,510 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:18:02,510 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:18:10,034 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:18:10,034 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:18:10,034 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:18:12,580 - wireless_ap_test - INFO - Running MQTT broker SSH test for scenario mqtt_broker
2025-03-17 13:18:13,417 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:18:13,542 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:18:13,623 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:18:13,903 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:18:13,903 - wireless_ap_test - INFO - Running Data to Server SSH test for scenario data_to_server
2025-03-17 13:18:13,904 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:18:14,948 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 13:18:14,948 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:18:14,948 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:18:15,093 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:18:15,094 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:18:15,165 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 13:18:15,165 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:18:15,165 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:18:15,208 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:18:15,600 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 13:18:15,670 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 13:18:15,671 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:18:15,671 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:18:15,837 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 13:18:15,837 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:18:18,178 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:18:18,178 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:18:18,260 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:18:18,260 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:18:18,260 - wireless_ap_test - INFO - Running validation for SSH tests with MQTT and DTS configs
2025-03-17 13:18:19,142 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:18:19,142 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:18:19,142 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:18:19,142 - wireless_ap_test - INFO - MQTT Process Check: 14398 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
14551 root      1920 S    ash -c ps | grep mosquitto
14553 root      1920 S    grep mosquitto
2025-03-17 13:18:19,177 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:18:19,177 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:18:19,177 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:18:19,262 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:18:29,386 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:18:29,387 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:18:30,143 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:18:30,143 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:18:30,165 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:18:30,165 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:18:30,165 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:18:30,210 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:18:30,256 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:18:30,300 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:18:30,558 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 13:18:30,558 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:18:30,558 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:18:30,558 - wireless_ap_test - INFO - Cleanup completed for Data to Server SSH test
2025-03-17 13:18:30,558 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:18:30,559 - wireless_ap_test - INFO - Cleanup completed for MQTT broker SSH test
2025-03-17 13:18:30,559 - wireless_ap_test - INFO - Running MQTT broker API test for scenario mqtt_broker
2025-03-17 13:18:30,559 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:18:30,559 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:18:30,559 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:18:30,810 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:18:30,811 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:18:30,811 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:18:30,933 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:18:30,933 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:18:31,025 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:18:31,025 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:18:31,025 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:18:31,026 - wireless_ap_test - INFO - Running Data to Server API test for scenario data_to_server
2025-03-17 13:18:31,026 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:18:31,026 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:18:31,026 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:18:31,268 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:18:31,268 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:18:31,268 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:18:31,268 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:18:31,268 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:18:31,269 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:18:31,269 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:18:31,269 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:18:31,269 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:18:31,269 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:18:31,442 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:18:31,442 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:18:31,442 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:18:31,682 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:18:31,682 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:18:31,682 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:18:31,682 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:18:31,827 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:18:31,827 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:18:31,828 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:18:31,828 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:18:32,239 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:18:32,239 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:18:32,434 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:18:32,434 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:18:32,435 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:18:32,435 - wireless_ap_test - INFO - Running validation for API tests with MQTT and DTS configs
2025-03-17 13:18:33,308 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:18:33,308 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:18:33,308 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:18:33,308 - wireless_ap_test - INFO - MQTT Process Check: 14688 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
14721 root      1920 S    ash -c ps | grep mosquitto
14723 root      1920 S    grep mosquitto
2025-03-17 13:18:33,332 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:18:33,332 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:18:33,332 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:18:33,423 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:18:43,564 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:18:43,565 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:18:43,641 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:18:43,641 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:18:43,641 - wireless_ap_test - INFO - Cleanup completed for Data to Server API test
2025-03-17 13:18:43,641 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:18:43,641 - wireless_ap_test - INFO - Cleanup completed for MQTT broker API test
2025-03-17 13:18:43,642 - wireless_ap_test - INFO - Test execution completed. Total: 9, Passed: 9, Failed: 0
2025-03-17 13:24:57,845 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:24:57,845 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:24:57,845 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 13:24:57,846 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:24:57,846 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 13:24:59,074 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:25:00,255 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:25:00,256 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:25:01,893 - wireless_ap_test - INFO - Filled username
2025-03-17 13:25:02,026 - wireless_ap_test - INFO - Filled password
2025-03-17 13:25:02,186 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:25:02,831 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:25:03,833 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:25:05,039 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:25:05,039 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:25:06,029 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:25:06,029 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:25:07,220 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:25:08,221 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:25:08,222 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:25:09,426 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:25:09,454 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:25:09,476 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:25:09,498 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:25:09,643 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:25:09,783 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:25:11,976 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:25:11,976 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:25:11,990 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:25:11,990 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:25:12,005 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:25:12,173 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:25:13,182 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:25:13,182 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:25:13,203 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:25:13,378 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:25:13,391 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:25:13,392 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:25:13,392 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:25:15,401 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:25:15,809 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:25:15,810 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:25:16,943 - wireless_ap_test - INFO - Filled username
2025-03-17 13:25:17,069 - wireless_ap_test - INFO - Filled password
2025-03-17 13:25:17,238 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:25:17,869 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:25:18,872 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:25:20,087 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:25:20,088 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:25:21,067 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:25:21,068 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:25:22,254 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:25:23,255 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:25:23,255 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:25:24,473 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:25:24,499 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:25:24,521 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:25:24,545 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:25:24,689 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:25:24,835 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:25:27,031 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:25:27,031 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:25:27,046 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:25:27,046 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:25:27,057 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:25:27,227 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:25:28,239 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:25:28,239 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:25:28,252 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:25:28,459 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:25:28,471 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:25:28,471 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:25:28,471 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:25:30,478 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:25:30,937 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:25:30,938 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:25:32,070 - wireless_ap_test - INFO - Filled username
2025-03-17 13:25:32,198 - wireless_ap_test - INFO - Filled password
2025-03-17 13:25:32,361 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:25:32,996 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:25:33,997 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:25:35,181 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:25:35,181 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:25:36,381 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:25:36,381 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:25:38,110 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:25:39,277 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:25:39,778 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:25:39,778 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:25:41,182 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:25:41,182 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:25:41,182 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:25:43,677 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:25:43,677 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:25:43,677 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:25:48,290 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:25:48,290 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:25:48,290 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:25:49,163 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:25:49,664 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:25:52,497 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:25:54,664 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:25:54,664 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:25:57,040 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:25:58,829 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:26:01,067 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:26:01,067 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:26:06,268 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:26:06,268 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:26:06,268 - wireless_ap_test - INFO - Running validation after GUI data_to_server with MQTT config
2025-03-17 13:26:07,157 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:26:07,157 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:26:07,158 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:26:07,158 - wireless_ap_test - INFO - MQTT Process Check: 14688 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
15465 root      1920 S    ash -c ps | grep mosquitto
15467 root      1920 S    grep mosquitto
2025-03-17 13:26:07,180 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:26:07,180 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:26:07,180 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:26:07,271 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:26:17,478 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:26:17,478 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:26:17,478 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:26:17,478 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:26:17,478 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:26:17,478 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:26:17,479 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:26:24,921 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:26:24,921 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:26:24,921 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:26:26,926 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:26:27,315 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:26:27,315 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:26:37,421 - wireless_ap_test - ERROR - Login failed: Page.goto: Timeout 10000ms exceeded.
Call log:
  - navigating to "https://192.168.1.1/login", waiting until "networkidle"

2025-03-17 13:26:37,421 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:26:38,615 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:26:38,615 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:26:39,872 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:26:39,872 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:26:41,787 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:26:42,951 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:26:43,452 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:26:43,452 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:26:44,822 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:26:44,822 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:26:44,822 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:26:47,298 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:26:47,298 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:26:47,298 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:26:51,952 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:26:51,952 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:26:51,952 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:26:52,835 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:26:53,338 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:26:56,178 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:26:58,346 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:26:58,346 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:27:00,734 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:27:02,462 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:27:04,693 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:27:04,693 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:27:09,889 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:27:09,889 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:27:09,890 - wireless_ap_test - INFO - Running validation after GUI data_to_server with MQTT config
2025-03-17 13:27:10,739 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:27:10,739 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:27:10,739 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:27:10,739 - wireless_ap_test - INFO - MQTT Process Check: 14688 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
15827 root      1920 S    ash -c ps | grep mosquitto
15829 root      1920 S    grep mosquitto
2025-03-17 13:27:10,761 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:27:10,762 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:27:10,762 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:27:10,852 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:27:10,933 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:27:20,975 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:27:20,975 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:27:20,976 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:27:20,976 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:27:20,976 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:27:20,976 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:27:20,976 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:27:28,498 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:27:28,498 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:27:28,498 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:27:30,692 - wireless_ap_test - INFO - Running MQTT broker SSH test for scenario mqtt_broker
2025-03-17 13:27:31,529 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:27:31,658 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:27:31,740 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:27:32,022 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:27:32,022 - wireless_ap_test - INFO - Running Data to Server SSH test for scenario data_to_server
2025-03-17 13:27:32,022 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:27:32,913 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 13:27:32,913 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:27:32,913 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:27:33,056 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:27:33,056 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:27:33,117 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 13:27:33,117 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:27:33,117 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:27:33,158 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:27:33,545 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 13:27:33,614 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 13:27:33,614 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:27:33,614 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:27:33,779 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 13:27:33,779 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:27:36,118 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:27:36,118 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:27:36,198 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:27:36,198 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:27:36,198 - wireless_ap_test - INFO - Running validation for SSH tests with MQTT and DTS configs
2025-03-17 13:27:37,052 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:27:37,052 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:27:37,053 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:27:37,053 - wireless_ap_test - INFO - MQTT Process Check: 15942 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
16095 root      1920 S    ash -c ps | grep mosquitto
16097 root      1920 S    grep mosquitto
2025-03-17 13:27:37,074 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:27:37,074 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:27:37,075 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:27:37,160 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:27:47,285 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:27:47,285 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:27:47,285 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:27:47,285 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:27:47,285 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:27:47,286 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:27:47,286 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:27:47,286 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:27:48,036 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:27:48,036 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:27:48,059 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:27:48,059 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:27:48,059 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:27:48,116 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:27:48,161 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:27:48,206 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:27:48,460 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 13:27:48,460 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - Cleanup completed for Data to Server SSH test
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - Cleanup completed for MQTT broker SSH test
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - Running MQTT broker API test for scenario mqtt_broker
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:27:48,462 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:27:48,462 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:27:48,722 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:27:48,722 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:27:48,722 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:27:48,838 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:27:48,838 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:27:48,925 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:27:48,925 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:27:48,925 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:27:48,925 - wireless_ap_test - INFO - Running Data to Server API test for scenario data_to_server
2025-03-17 13:27:48,926 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:27:48,926 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:27:48,926 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:27:49,170 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:27:49,170 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:27:49,170 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:27:49,170 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:27:49,339 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:27:49,339 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:27:49,340 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:27:49,580 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:27:49,580 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:27:49,581 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:27:49,581 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:27:49,725 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:27:49,725 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:27:49,725 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:27:49,725 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:27:50,136 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:27:50,136 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:27:50,341 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:27:50,341 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:27:50,341 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:27:50,341 - wireless_ap_test - INFO - Running validation for API tests with MQTT and DTS configs
2025-03-17 13:27:51,209 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:27:51,209 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:27:51,209 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:27:51,209 - wireless_ap_test - INFO - MQTT Process Check: 16244 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
16265 root      1920 S    ash -c ps | grep mosquitto
16267 root      1920 S    grep mosquitto
2025-03-17 13:27:51,234 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:27:51,234 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:27:51,234 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:27:51,328 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:27:51,422 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:28:01,465 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:28:01,465 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:28:01,466 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:28:01,466 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:28:01,466 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:28:01,537 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:28:01,538 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:28:01,538 - wireless_ap_test - INFO - Cleanup completed for Data to Server API test
2025-03-17 13:28:01,538 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:28:01,538 - wireless_ap_test - INFO - Cleanup completed for MQTT broker API test
2025-03-17 13:28:01,539 - wireless_ap_test - INFO - Test execution completed. Total: 12, Passed: 12, Failed: 0
2025-03-17 13:31:27,780 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:31:27,781 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:31:27,781 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 13:31:27,782 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:31:27,782 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 13:31:27,782 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 13:31:27,782 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 13:31:29,096 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:31:30,262 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:31:30,265 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:31:31,923 - wireless_ap_test - INFO - Filled username
2025-03-17 13:31:32,075 - wireless_ap_test - INFO - Filled password
2025-03-17 13:31:32,245 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:31:32,847 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:31:33,850 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:31:35,209 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:31:35,210 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:31:36,116 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:31:36,116 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:31:37,304 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:31:38,306 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:31:38,306 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:31:39,519 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:31:39,539 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:31:39,560 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:31:39,584 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:31:39,726 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:31:39,866 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:31:42,059 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:31:42,060 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:31:42,077 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:31:42,077 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:31:42,089 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:31:42,279 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:31:43,292 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:31:43,292 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:31:43,311 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:31:43,492 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:31:43,502 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:31:43,503 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:31:43,503 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:31:43,895 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:31:43,896 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:31:45,193 - wireless_ap_test - INFO - Filled username
2025-03-17 13:31:45,325 - wireless_ap_test - INFO - Filled password
2025-03-17 13:31:45,496 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:31:46,119 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:31:47,120 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:31:48,356 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:31:48,357 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:31:49,599 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:31:49,600 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:31:51,372 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:31:52,532 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:31:53,034 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:31:53,034 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:31:54,442 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:31:54,442 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:31:54,442 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:31:56,938 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:31:56,938 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:31:56,939 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:32:01,562 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:32:01,562 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:32:01,562 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:32:02,431 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:32:02,933 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:32:05,764 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:32:07,940 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:32:07,940 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:32:13,042 - wireless_ap_test - ERROR - Failed to configure period: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-period\"]")
  -     - locator resolved to <input type="text" data-v-93c725f6="" data-state="valid" test-id="input-period" placeholder="e.g., 60" class="tlt-input-field input-size" id="data_sender.collection.1.edit.1_period"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -       - waiting 100ms
  -     10 × waiting for element to be visible, enabled and stable
  -        - element is not visible
  -      - retrying click action
  -        - waiting 500ms

2025-03-17 13:32:13,042 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-period\"]")
  -     - locator resolved to <input type="text" data-v-93c725f6="" data-state="valid" test-id="input-period" placeholder="e.g., 60" class="tlt-input-field input-size" id="data_sender.collection.1.edit.1_period"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -       - waiting 100ms
  -     10 × waiting for element to be visible, enabled and stable
  -        - element is not visible
  -      - retrying click action
  -        - waiting 500ms

2025-03-17 13:32:13,042 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-period\"]")
  -     - locator resolved to <input type="text" data-v-93c725f6="" data-state="valid" test-id="input-period" placeholder="e.g., 60" class="tlt-input-field input-size" id="data_sender.collection.1.edit.1_period"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -       - waiting 100ms
  -     10 × waiting for element to be visible, enabled and stable
  -        - element is not visible
  -      - retrying click action
  -        - waiting 500ms

2025-03-17 13:32:13,042 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-period\"]")
  -     - locator resolved to <input type="text" data-v-93c725f6="" data-state="valid" test-id="input-period" placeholder="e.g., 60" class="tlt-input-field input-size" id="data_sender.collection.1.edit.1_period"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -       - waiting 100ms
  -     10 × waiting for element to be visible, enabled and stable
  -        - element is not visible
  -      - retrying click action
  -        - waiting 500ms

2025-03-17 13:32:23,161 - wireless_ap_test - ERROR - Error deleting interface: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"button-delete\"]").first
  -     - locator resolved to <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 100ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 500ms
  -   - element was detached from the DOM, retrying
  -     - waiting for" https://192.168.1.1/" navigation to finish...
  -     - navigated to "https://192.168.1.1/"

2025-03-17 13:32:23,161 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 13:32:23,162 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 13:32:23,162 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 13:32:24,170 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 13:32:25,785 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 13:32:26,596 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:32:26,719 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:32:26,800 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:32:27,081 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:32:27,082 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 13:32:27,082 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:32:27,934 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 13:32:27,934 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:32:27,934 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:32:28,080 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:32:28,080 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:32:28,144 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 13:32:28,144 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:32:28,144 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:32:28,186 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:32:28,587 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 13:32:28,657 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 13:32:28,657 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:32:28,657 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:32:28,829 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 13:32:28,829 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:32:31,125 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:32:31,126 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:32:31,207 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:32:31,207 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:32:31,207 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 13:32:32,076 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:32:32,076 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:32:32,076 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:32:32,076 - wireless_ap_test - INFO - MQTT Process Check: 16817 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
16961 root      1920 S    ash -c ps | grep mosquitto
16963 root      1920 S    grep mosquitto
2025-03-17 13:32:32,097 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:32:32,098 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:32:32,098 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:32:32,184 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-17 13:32:32,267 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:32:42,321 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:32:42,322 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - SSH validation completed with success: False
2025-03-17 13:32:42,323 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:32:43,058 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:32:43,059 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:32:43,081 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:32:43,081 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:32:43,081 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:32:43,081 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 13:32:43,129 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 13:32:43,174 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:32:43,218 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:32:43,262 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:32:43,514 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 13:32:43,514 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:32:43,514 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:32:43,514 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:32:43,773 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:32:43,773 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:32:43,773 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:32:43,891 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:32:43,891 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:32:43,980 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:32:43,980 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:32:43,981 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:32:43,981 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 13:32:43,981 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:32:43,981 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:32:43,981 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:32:44,396 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:32:44,396 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:32:44,397 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:32:44,630 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:32:44,630 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:32:44,630 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:32:44,630 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:32:44,774 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:32:44,774 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:32:44,774 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:32:44,775 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:32:45,196 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:32:45,196 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:32:45,403 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:32:45,403 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:32:45,403 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:32:45,404 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 13:32:46,299 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:32:46,299 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:32:46,299 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:32:46,299 - wireless_ap_test - INFO - MQTT Process Check: 17107 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
17139 root      1920 S    ash -c ps | grep mosquitto
17145 root      1920 S    grep mosquitto
2025-03-17 13:32:46,332 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:32:46,332 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:32:46,332 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:32:46,425 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:32:46,525 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:32:46,525 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:32:46,525 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:32:46,525 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:32:46,525 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:32:46,526 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:32:46,526 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:32:56,566 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:32:56,566 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:32:56,566 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:32:56,566 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:32:56,566 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:32:56,566 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:32:56,567 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:32:56,567 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:32:56,567 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:32:56,567 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:32:56,567 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 13:32:57,756 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:32:58,913 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:32:58,913 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:33:00,487 - wireless_ap_test - INFO - Filled username
2025-03-17 13:33:00,621 - wireless_ap_test - INFO - Filled password
2025-03-17 13:33:00,790 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:33:01,413 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:33:02,419 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:33:03,661 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:33:03,661 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:33:04,676 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:33:04,676 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:33:05,864 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:33:06,866 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:33:06,867 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:33:08,038 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:33:08,063 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:33:08,089 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:33:08,113 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:33:08,258 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:33:08,401 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:33:10,598 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:33:10,598 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:33:10,615 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:33:10,615 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:33:10,630 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:33:10,798 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:33:11,806 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:33:11,807 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:33:11,826 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:33:12,001 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:33:12,011 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:33:12,011 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:33:12,011 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:33:12,454 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:33:12,454 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:33:13,614 - wireless_ap_test - INFO - Filled username
2025-03-17 13:33:13,747 - wireless_ap_test - INFO - Filled password
2025-03-17 13:33:13,908 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:33:14,520 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:33:15,520 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:33:16,780 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:33:16,780 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:33:17,998 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:33:17,998 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:33:19,721 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:33:20,886 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:33:21,388 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:33:21,388 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:33:22,798 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:33:22,798 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:33:22,798 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:33:25,289 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:33:25,289 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:33:25,289 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:33:29,875 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:33:29,875 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:33:29,875 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:33:30,767 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:33:31,269 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:33:34,134 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:33:36,312 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:33:36,312 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:33:38,712 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:33:40,462 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:33:42,679 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:33:42,679 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:33:47,884 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:33:47,884 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:33:47,884 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 13:33:48,744 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:33:48,745 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:33:48,745 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:33:48,745 - wireless_ap_test - INFO - MQTT Process Check: 17107 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
17616 root      1920 S    ash -c ps | grep mosquitto
17618 root      1920 S    grep mosquitto
2025-03-17 13:33:48,766 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:33:48,766 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:33:48,766 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:33:48,851 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:33:48,933 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:33:48,933 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:33:48,934 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:33:48,934 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:33:48,934 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:33:48,934 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:33:48,934 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:33:58,977 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:33:58,977 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:33:58,977 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:33:58,977 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:33:58,977 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:33:58,977 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:33:58,977 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:34:04,009 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 13:34:04,009 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 13:34:04,009 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 13:34:05,018 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 13:34:06,575 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 13:34:07,380 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:34:07,510 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:34:07,592 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:34:07,878 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:34:07,878 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 13:34:07,879 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:34:08,732 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 13:34:08,732 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:34:08,732 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:34:08,882 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:34:08,883 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:34:08,946 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 13:34:08,946 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:34:08,947 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:34:08,989 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:34:09,393 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 13:34:09,465 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 13:34:09,465 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:34:09,465 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:34:09,637 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 13:34:09,637 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:34:11,999 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:34:11,999 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:34:12,084 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:34:12,084 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:34:12,084 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 13:34:12,938 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:34:12,938 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:34:12,938 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:34:12,938 - wireless_ap_test - INFO - MQTT Process Check: 17684 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
17836 root      1920 S    ash -c ps | grep mosquitto
17838 root      1920 S    grep mosquitto
2025-03-17 13:34:12,962 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:34:12,962 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:34:12,962 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:34:13,054 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:34:13,139 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:34:23,215 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:34:23,215 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:34:23,215 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:34:23,216 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:34:23,216 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:34:23,216 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:34:23,216 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:34:23,216 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:34:23,953 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:34:23,953 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:34:23,976 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:34:23,976 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:34:23,976 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:34:23,976 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 13:34:24,025 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 13:34:24,072 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:34:24,118 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:34:24,162 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:34:24,419 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:34:24,421 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:34:24,421 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:34:24,678 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:34:24,678 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:34:24,678 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:34:24,800 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:34:24,800 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:34:24,889 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:34:24,890 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:34:24,890 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:34:24,890 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 13:34:24,890 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:34:24,891 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:34:24,891 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:34:25,137 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:34:25,306 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:34:25,306 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:34:25,306 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:34:25,394 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:34:25,541 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:34:25,541 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:34:25,541 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:34:25,542 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:34:25,685 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:34:25,685 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:34:25,685 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:34:25,685 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:34:26,109 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:34:26,109 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:34:26,308 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:34:26,308 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:34:26,308 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:34:26,308 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 13:34:27,240 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:34:27,240 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:34:27,240 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:34:27,240 - wireless_ap_test - INFO - MQTT Process Check: 17978 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
18018 root      1920 S    ash -c ps | grep mosquitto
18022 root      1920 S    grep mosquitto
2025-03-17 13:34:27,275 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:34:27,275 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:34:27,275 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:34:27,381 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:34:27,509 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:34:37,554 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:34:37,554 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:34:37,554 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:34:37,554 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:34:37,554 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:34:37,554 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:34:37,555 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:34:37,555 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:34:37,555 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:34:37,555 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:34:37,555 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 13:34:37,631 - wireless_ap_test - INFO - Test execution completed. Total: 17, Passed: 15, Failed: 2
2025-03-17 13:35:55,071 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:35:55,072 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:35:55,072 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 13:35:55,072 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:35:55,072 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 13:35:55,073 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 13:35:55,073 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 13:35:56,308 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:35:57,470 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:35:57,470 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:35:59,092 - wireless_ap_test - INFO - Filled username
2025-03-17 13:35:59,219 - wireless_ap_test - INFO - Filled password
2025-03-17 13:35:59,383 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:36:00,063 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:36:01,066 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:36:02,348 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:36:02,348 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:36:03,316 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:36:03,316 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:36:04,498 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:36:05,500 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:36:05,500 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:36:06,701 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:36:06,725 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:36:06,748 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:36:06,775 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:36:06,915 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:36:07,055 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:36:09,245 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:36:09,246 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:36:09,262 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:36:09,262 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:36:09,274 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:36:09,447 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:36:10,457 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:36:10,458 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:36:10,473 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:36:10,647 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:36:10,660 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:36:10,661 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:36:10,661 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:36:11,088 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:36:11,089 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:36:12,233 - wireless_ap_test - INFO - Filled username
2025-03-17 13:36:12,362 - wireless_ap_test - INFO - Filled password
2025-03-17 13:36:12,534 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:36:13,166 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:36:14,168 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:36:15,366 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:36:15,367 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:36:16,647 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:36:16,647 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:36:18,363 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:36:19,529 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:36:20,031 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:36:20,031 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:36:21,450 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:36:21,450 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:36:21,450 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:36:23,948 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:36:23,948 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:36:23,948 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:36:28,548 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:36:28,548 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:36:28,548 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:36:29,445 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:36:29,948 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:36:32,798 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:36:34,979 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:36:34,979 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:36:37,356 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:36:39,117 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:36:41,343 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:36:41,343 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:36:46,547 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:36:46,547 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:36:46,547 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 13:36:47,409 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:36:47,409 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:36:47,409 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:36:47,409 - wireless_ap_test - INFO - MQTT Process Check: 17978 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
18520 root      1920 S    ash -c ps | grep mosquitto
18522 root      1920 S    grep mosquitto
2025-03-17 13:36:47,431 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:36:47,431 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:36:47,431 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:36:47,517 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:36:47,599 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:36:47,599 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:36:47,599 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:36:47,600 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:36:47,600 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:36:47,600 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:36:47,600 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:36:57,652 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:36:57,652 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:36:57,652 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:36:57,652 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:36:57,652 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:36:57,652 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:36:57,653 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:37:02,680 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 13:37:02,680 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 13:37:02,681 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 13:37:03,689 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 13:37:05,253 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 13:37:06,057 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:37:06,185 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:37:06,269 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:37:06,561 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:37:06,562 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 13:37:06,562 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:37:07,424 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 13:37:07,424 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:37:07,424 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:37:07,575 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:37:07,575 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:37:07,640 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 13:37:07,640 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:37:07,640 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:37:07,684 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:37:08,099 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 13:37:08,170 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 13:37:08,170 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:37:08,170 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:37:08,341 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 13:37:08,341 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:37:10,704 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:37:10,704 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:37:10,789 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:37:10,789 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:37:10,789 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 13:37:11,636 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:37:11,636 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:37:11,636 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:37:11,636 - wireless_ap_test - INFO - MQTT Process Check: 18588 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
18748 root      1920 S    ash -c ps | grep mosquitto
18750 root      1920 S    grep mosquitto
2025-03-17 13:37:11,659 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:37:11,659 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:37:11,659 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:37:11,749 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:37:11,833 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:37:11,833 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:37:11,833 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:37:11,833 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:37:11,834 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:37:11,834 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:37:11,834 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:37:21,879 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:37:21,879 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:37:21,879 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:37:21,879 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:37:21,879 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:37:21,879 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:37:21,880 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:37:21,880 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:37:22,634 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:37:22,634 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:37:22,657 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:37:22,657 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:37:22,658 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:37:22,658 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 13:37:22,705 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:37:22,751 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:37:22,799 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:37:22,844 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 13:37:23,101 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 13:37:23,103 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:37:23,103 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:37:23,103 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:37:23,366 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:37:23,366 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:37:23,366 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:37:23,489 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:37:23,489 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:37:23,583 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:37:23,828 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:37:23,995 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:37:23,995 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:37:23,995 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:37:24,082 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:37:24,229 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:37:24,229 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:37:24,229 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:37:24,229 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:37:24,370 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:37:24,370 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:37:24,370 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:37:24,371 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:37:24,516 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:37:24,773 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:37:24,773 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:37:25,004 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:37:25,004 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:37:25,004 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:37:25,004 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 13:37:25,878 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:37:25,878 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:37:25,878 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:37:25,878 - wireless_ap_test - INFO - MQTT Process Check: 18890 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
18912 root      1920 S    ash -c ps | grep mosquitto
18921 root      1920 S    grep mosquitto
2025-03-17 13:37:25,902 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:37:25,902 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:37:25,902 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:37:26,009 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:37:36,150 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:37:36,150 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:37:36,150 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:37:36,150 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:37:36,222 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 13:37:37,374 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:37:38,534 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:37:38,535 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:37:40,127 - wireless_ap_test - INFO - Filled username
2025-03-17 13:37:40,252 - wireless_ap_test - INFO - Filled password
2025-03-17 13:37:40,417 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:37:41,037 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:37:42,040 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:37:43,367 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:37:43,367 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:37:44,368 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:37:44,368 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:37:45,556 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:37:46,558 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:37:46,558 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:37:47,732 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:37:47,758 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:37:47,783 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:37:47,805 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:37:47,950 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:37:48,091 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:37:50,291 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:37:50,291 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:37:50,307 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:37:50,307 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:37:50,319 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:37:50,488 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:37:51,498 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:37:51,499 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:37:51,516 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:37:51,692 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:37:51,704 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:37:51,704 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:37:51,704 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:37:52,170 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:37:52,170 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:37:53,301 - wireless_ap_test - INFO - Filled username
2025-03-17 13:37:53,439 - wireless_ap_test - INFO - Filled password
2025-03-17 13:37:53,599 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:37:54,231 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:37:55,233 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:37:56,447 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:37:56,448 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:37:57,697 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:37:57,697 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:37:59,440 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:38:00,609 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:38:01,110 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:38:01,111 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:38:02,547 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:38:02,547 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:38:02,547 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:38:05,087 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:38:05,087 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:38:05,087 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:38:09,781 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:38:09,782 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:38:09,782 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:38:10,673 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:38:11,177 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:38:14,006 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:38:16,180 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:38:16,180 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:38:18,561 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:38:20,326 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:38:22,578 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:38:22,578 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:38:27,778 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:38:27,779 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:38:27,779 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 13:38:28,660 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:38:28,660 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:38:28,660 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:38:28,660 - wireless_ap_test - INFO - MQTT Process Check: 18890 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
19396 root      1920 S    ash -c ps | grep mosquitto
19398 root      1920 S    grep mosquitto
2025-03-17 13:38:28,682 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:38:28,682 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:38:28,682 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:38:28,768 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:38:38,892 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:38:38,892 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:38:38,892 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:38:38,892 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:38:38,892 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:38:38,892 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:38:38,892 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:38:41,252 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 13:38:41,252 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 13:38:41,253 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 13:38:42,256 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 13:38:43,807 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 13:38:44,614 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:38:44,742 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:38:44,825 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:38:45,110 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:38:45,110 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 13:38:45,110 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:38:45,970 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 13:38:45,970 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:38:45,970 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:38:46,121 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:38:46,121 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:38:46,186 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 13:38:46,187 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:38:46,187 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:38:46,231 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:38:46,646 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 13:38:46,721 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 13:38:46,721 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:38:46,722 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:38:46,895 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 13:38:46,896 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:38:49,258 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:38:49,258 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:38:49,342 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:38:49,343 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:38:49,343 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 13:38:50,197 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:38:50,197 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:38:50,197 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:38:50,197 - wireless_ap_test - INFO - MQTT Process Check: 19465 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
19616 root      1920 S    ash -c ps | grep mosquitto
19618 root      1920 S    grep mosquitto
2025-03-17 13:38:50,221 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:38:50,222 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:38:50,222 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:38:50,315 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:39:00,447 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:39:00,447 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:39:00,447 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:39:00,447 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:39:00,447 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:39:00,448 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:39:00,448 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:39:00,448 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:39:01,224 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:39:01,224 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:39:01,248 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:39:01,248 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:39:01,248 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:39:01,248 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 13:39:01,296 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:39:01,343 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:39:01,389 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:39:01,433 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 13:39:01,696 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 13:39:01,696 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:39:01,955 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:39:01,955 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:39:01,955 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:39:02,075 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:39:02,075 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:39:02,411 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:39:02,411 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:39:02,411 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:39:02,411 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:39:02,582 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:39:02,582 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:39:02,582 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:39:02,666 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:39:02,838 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:39:02,838 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:39:02,838 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:39:02,838 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:39:02,983 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:39:02,984 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:39:02,984 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:39:02,984 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:39:03,140 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:39:03,140 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:39:03,141 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:39:03,141 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:39:03,141 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:39:03,141 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:39:03,141 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:39:03,403 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:39:03,403 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:39:03,584 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:39:03,584 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:39:03,584 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:39:03,584 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 13:39:04,447 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:39:04,447 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:39:04,447 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:39:04,447 - wireless_ap_test - INFO - MQTT Process Check: 19758 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
19788 root      1920 S    ash -c ps | grep mosquitto
19790 root      1920 S    grep mosquitto
2025-03-17 13:39:04,475 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:39:04,475 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:39:04,475 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:39:04,583 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:39:14,717 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:39:14,717 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:39:14,717 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:39:14,717 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:39:14,717 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:39:14,717 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:39:14,718 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:39:14,718 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:39:14,718 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:39:14,718 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:39:14,718 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 13:39:14,791 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 18, Failed: 0
2025-03-17 14:53:02,289 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 14:53:02,289 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 14:53:02,289 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 14:53:02,290 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 14:53:02,290 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 14:53:02,290 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 14:53:02,290 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 14:53:03,541 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 14:53:04,659 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 14:53:04,659 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 14:53:06,261 - wireless_ap_test - INFO - Filled username
2025-03-17 14:53:06,388 - wireless_ap_test - INFO - Filled password
2025-03-17 14:53:06,548 - wireless_ap_test - INFO - Clicked login button
2025-03-17 14:53:07,197 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 14:53:08,201 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 14:53:09,419 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 14:53:09,419 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 14:53:10,403 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 14:53:10,404 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 14:53:11,584 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 14:53:12,585 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 14:53:12,586 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 14:53:13,764 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 14:53:13,782 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 14:53:13,800 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 14:53:13,822 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 14:53:13,976 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 14:53:14,113 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 14:53:16,304 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 14:53:16,304 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 14:53:16,321 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 14:53:16,321 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 14:53:16,334 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 14:53:16,493 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 14:53:17,504 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 14:53:17,504 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 14:53:17,526 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 14:53:17,791 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 14:53:17,814 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 14:53:17,815 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 14:53:17,815 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 14:53:18,276 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 14:53:18,277 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 14:53:19,407 - wireless_ap_test - INFO - Filled username
2025-03-17 14:53:19,536 - wireless_ap_test - INFO - Filled password
2025-03-17 14:53:19,694 - wireless_ap_test - INFO - Clicked login button
2025-03-17 14:53:20,339 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 14:53:21,341 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 14:53:22,555 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 14:53:22,556 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 14:53:23,802 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 14:53:23,803 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 14:53:25,563 - wireless_ap_test - INFO - Clicking add button
2025-03-17 14:53:26,720 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 14:53:27,222 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 14:53:27,222 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 14:53:28,630 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 14:53:28,630 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 14:53:28,630 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 14:53:31,124 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 14:53:31,125 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 14:53:31,125 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 14:53:35,811 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 14:53:35,812 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 14:53:35,812 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 14:53:36,687 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 14:53:37,189 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 14:53:40,023 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 14:53:42,203 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 14:53:42,203 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 14:53:44,602 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 14:53:46,368 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 14:53:48,604 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 14:53:48,604 - wireless_ap_test - INFO - Saving configuration
2025-03-17 14:53:53,802 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 14:53:53,802 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 14:53:53,802 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 14:53:54,703 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:53:54,704 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:53:54,704 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:53:54,704 - wireless_ap_test - INFO - MQTT Process Check: 19758 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
22102 root      1920 S    ash -c ps | grep mosquitto
22104 root      1920 S    grep mosquitto
2025-03-17 14:53:54,726 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:53:54,726 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:53:54,726 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:53:54,812 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:53:54,893 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:53:54,893 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:53:54,894 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:53:54,894 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:53:54,894 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:53:54,894 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:53:54,894 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:54:04,979 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:54:04,979 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:54:04,980 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:54:04,980 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:54:04,980 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:54:04,980 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:54:04,980 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 14:54:10,009 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 14:54:10,009 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 14:54:10,009 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 14:54:11,017 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 14:54:12,575 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 14:54:13,378 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 14:54:13,502 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 14:54:13,584 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 14:54:13,862 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 14:54:13,862 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 14:54:13,863 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 14:54:14,720 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 14:54:14,720 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 14:54:14,720 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 14:54:14,871 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 14:54:14,871 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 14:54:14,933 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 14:54:14,933 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 14:54:14,933 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 14:54:14,975 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 14:54:15,378 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 14:54:15,447 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 14:54:15,448 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 14:54:15,448 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 14:54:15,617 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 14:54:15,617 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 14:54:17,976 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 14:54:17,976 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 14:54:18,059 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:54:18,059 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 14:54:18,059 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 14:54:18,906 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:54:18,906 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:54:18,906 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:54:18,906 - wireless_ap_test - INFO - MQTT Process Check: 22162 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
22321 root      1920 S    ash -c ps | grep mosquitto
22323 root      1920 S    grep mosquitto
2025-03-17 14:54:18,928 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:54:18,928 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:54:18,928 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:54:19,015 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:54:19,098 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:54:19,098 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:54:19,098 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:54:19,098 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:54:19,099 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:54:19,099 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:54:19,099 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:54:29,149 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:54:29,149 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:54:29,149 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:54:29,149 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:54:29,149 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:54:29,149 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:54:29,150 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 14:54:29,150 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 14:54:29,901 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 14:54:29,901 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 14:54:29,928 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 14:54:29,928 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 14:54:29,928 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 14:54:29,929 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 14:54:29,978 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 14:54:30,025 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 14:54:30,070 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 14:54:30,116 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 14:54:30,369 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 14:54:30,371 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 14:54:30,371 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 14:54:30,371 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 14:54:30,635 - wireless_ap_test - INFO - API authentication successful
2025-03-17 14:54:30,635 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 14:54:30,635 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 14:54:30,758 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 14:54:30,758 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 14:54:30,851 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:54:30,851 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 14:54:30,851 - wireless_ap_test - INFO - API connection closed
2025-03-17 14:54:30,852 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 14:54:30,852 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 14:54:30,852 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 14:54:30,852 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 14:54:31,101 - wireless_ap_test - INFO - API authentication successful
2025-03-17 14:54:31,101 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 14:54:31,270 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 14:54:31,270 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 14:54:31,270 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 14:54:31,509 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 14:54:31,509 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 14:54:31,509 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 14:54:31,509 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 14:54:31,654 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 14:54:31,654 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 14:54:31,654 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 14:54:31,654 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 14:54:32,079 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 14:54:32,079 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 14:54:32,295 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 14:54:32,295 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 14:54:32,295 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:54:32,295 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 14:54:33,148 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:54:33,148 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:54:33,148 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:54:33,148 - wireless_ap_test - INFO - MQTT Process Check: 22466 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
22484 root      1920 S    ash -c ps | grep mosquitto
22487 root      1920 S    grep mosquitto
2025-03-17 14:54:33,172 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:54:33,172 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:54:33,172 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:54:33,264 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:54:43,410 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:54:43,410 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:54:43,410 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:54:43,410 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:54:43,410 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:54:43,410 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:54:43,411 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 14:54:43,411 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 14:54:43,411 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 14:54:43,411 - wireless_ap_test - INFO - Delete request:
2025-03-17 14:54:43,411 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - API connection closed
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 14:54:44,653 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 14:54:45,781 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 14:54:45,782 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 14:54:47,377 - wireless_ap_test - INFO - Filled username
2025-03-17 14:54:47,502 - wireless_ap_test - INFO - Filled password
2025-03-17 14:54:47,666 - wireless_ap_test - INFO - Clicked login button
2025-03-17 14:54:48,286 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 14:54:49,289 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 14:54:50,531 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 14:54:50,531 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 14:54:51,548 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 14:54:51,549 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 14:54:52,732 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 14:54:53,733 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 14:54:53,733 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 14:54:54,903 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 14:54:54,926 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 14:54:54,949 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 14:54:54,971 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 14:54:55,117 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 14:54:55,257 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 14:54:57,450 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 14:54:57,450 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 14:54:57,468 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 14:54:57,468 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 14:54:57,482 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 14:54:57,652 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 14:54:58,661 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 14:54:58,661 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 14:54:58,675 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 14:54:58,851 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 14:54:58,861 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 14:54:58,862 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 14:54:58,862 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 14:54:59,297 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 14:54:59,297 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 14:55:00,525 - wireless_ap_test - INFO - Filled username
2025-03-17 14:55:00,658 - wireless_ap_test - INFO - Filled password
2025-03-17 14:55:00,821 - wireless_ap_test - INFO - Clicked login button
2025-03-17 14:55:01,478 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 14:55:02,480 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 14:55:03,672 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 14:55:03,672 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 14:55:04,902 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 14:55:04,902 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 14:55:06,636 - wireless_ap_test - INFO - Clicking add button
2025-03-17 14:55:07,801 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 14:55:08,303 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 14:55:08,303 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 14:55:09,719 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 14:55:09,719 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 14:55:09,719 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 14:55:12,237 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 14:55:12,237 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 14:55:12,237 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 14:55:16,807 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 14:55:16,807 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 14:55:16,807 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 14:55:17,683 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 14:55:18,186 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 14:55:21,020 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 14:55:23,203 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 14:55:23,203 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 14:55:25,581 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 14:55:27,333 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 14:55:29,572 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 14:55:29,572 - wireless_ap_test - INFO - Saving configuration
2025-03-17 14:55:34,775 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 14:55:34,775 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 14:55:34,775 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 14:55:35,735 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:55:35,735 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:55:35,735 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:55:35,735 - wireless_ap_test - INFO - MQTT Process Check: 22466 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
22996 root      1920 S    ash -c ps | grep mosquitto
22998 root      1920 S    grep mosquitto
2025-03-17 14:55:35,757 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:55:35,757 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:55:35,757 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:55:35,842 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:55:35,924 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:55:35,924 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:55:35,925 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:55:35,925 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:55:35,925 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:55:35,925 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:55:35,925 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:55:45,966 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:55:45,966 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:55:45,967 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:55:45,967 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:55:45,967 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:55:45,967 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:55:45,967 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 14:55:50,996 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 14:55:50,996 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 14:55:50,996 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 14:55:52,004 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 14:55:53,596 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 14:55:54,439 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 14:55:54,572 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 14:55:54,654 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 14:55:54,943 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 14:55:54,943 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 14:55:54,944 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 14:55:55,796 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 14:55:55,796 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 14:55:55,796 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 14:55:55,943 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 14:55:55,943 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 14:55:56,005 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 14:55:56,005 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 14:55:56,005 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 14:55:56,051 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 14:55:56,454 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 14:55:56,530 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 14:55:56,530 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 14:55:56,530 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 14:55:56,698 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 14:55:56,698 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 14:55:59,063 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 14:55:59,063 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 14:55:59,145 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:55:59,145 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 14:55:59,145 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 14:55:59,988 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:55:59,988 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:55:59,988 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:55:59,988 - wireless_ap_test - INFO - MQTT Process Check: 23061 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
23221 root      1920 S    ash -c ps | grep mosquitto
23223 root      1920 R    grep mosquitto
2025-03-17 14:56:00,010 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:56:00,011 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:56:00,011 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:56:00,097 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:56:10,222 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:56:10,222 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:56:10,222 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:56:10,222 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:56:10,223 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:56:10,223 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:56:10,223 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 14:56:10,223 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 14:56:10,966 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 14:56:10,966 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 14:56:10,990 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 14:56:10,990 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 14:56:10,990 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 14:56:10,990 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 14:56:11,039 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 14:56:11,087 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 14:56:11,132 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 14:56:11,177 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 14:56:11,438 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 14:56:11,438 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 14:56:11,704 - wireless_ap_test - INFO - API authentication successful
2025-03-17 14:56:11,704 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 14:56:11,704 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 14:56:11,850 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 14:56:11,850 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - API connection closed
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 14:56:12,190 - wireless_ap_test - INFO - API authentication successful
2025-03-17 14:56:12,190 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 14:56:12,190 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 14:56:12,363 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 14:56:12,363 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 14:56:12,363 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 14:56:12,605 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 14:56:12,605 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 14:56:12,605 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 14:56:12,605 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 14:56:12,748 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 14:56:12,748 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 14:56:12,748 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 14:56:12,748 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 14:56:12,896 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 14:56:13,157 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 14:56:13,158 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 14:56:13,379 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 14:56:13,379 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 14:56:13,379 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:56:13,379 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 14:56:14,254 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:56:14,254 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:56:14,254 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:56:14,254 - wireless_ap_test - INFO - MQTT Process Check: 23366 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
23385 root      1920 S    ash -c ps | grep mosquitto
23388 root      1920 S    grep mosquitto
2025-03-17 14:56:14,280 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:56:14,280 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:56:14,280 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:56:14,374 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:56:14,477 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:56:14,477 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:56:14,477 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:56:14,477 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:56:14,478 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:56:14,478 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:56:14,478 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:56:24,519 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:56:24,519 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:56:24,519 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:56:24,519 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - Delete request:
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 14:56:24,594 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 14:56:24,595 - wireless_ap_test - INFO - API connection closed
2025-03-17 14:56:24,595 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 14:56:24,595 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 14:56:24,595 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 14:56:24,595 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 14:56:24,596 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 18, Failed: 0
2025-03-17 15:11:42,717 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 15:11:42,718 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 15:11:42,718 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 15:11:42,718 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 15:11:42,719 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 15:11:42,719 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 15:11:42,719 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:11:45,999 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:11:47,124 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:11:47,124 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:11:48,737 - wireless_ap_test - INFO - Filled username
2025-03-17 15:11:48,863 - wireless_ap_test - INFO - Filled password
2025-03-17 15:11:49,026 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:11:49,658 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:11:50,662 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:11:51,888 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:11:51,889 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:11:52,875 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:11:52,875 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:11:54,070 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:11:55,072 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:11:55,072 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:11:56,241 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:11:56,266 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:11:56,287 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:11:56,308 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:11:56,456 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:11:56,599 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:11:58,804 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:11:58,804 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:11:58,821 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:11:58,821 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:11:58,835 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:11:59,001 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:12:00,011 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:12:00,011 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:12:00,034 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:12:00,207 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:12:00,219 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:12:00,220 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:12:00,220 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:12:00,643 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:12:00,643 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:12:01,780 - wireless_ap_test - INFO - Filled username
2025-03-17 15:12:01,913 - wireless_ap_test - INFO - Filled password
2025-03-17 15:12:02,079 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:12:02,718 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:12:03,721 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:12:04,940 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:12:04,940 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:12:06,175 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:12:06,175 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:12:07,897 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:12:09,063 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:12:09,565 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:12:09,565 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:12:10,967 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:12:10,968 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:12:10,968 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:12:13,462 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:12:13,462 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:12:13,462 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:12:18,057 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:12:18,058 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:12:18,058 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:12:18,932 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:12:19,434 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:12:22,286 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:12:24,465 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:12:24,465 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:12:26,842 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:12:28,608 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:12:30,827 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:12:30,828 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:12:36,034 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:12:36,034 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:12:36,034 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:12:36,959 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:12:36,960 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:12:36,960 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:12:36,960 - wireless_ap_test - INFO - MQTT Process Check: 23366 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
24238 root      1920 S    ash -c ps | grep mosquitto
24240 root      1920 S    grep mosquitto
2025-03-17 15:12:36,982 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:12:36,982 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:12:36,982 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:12:37,067 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:12:37,150 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:12:37,150 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:12:37,151 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:12:37,151 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:12:37,151 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:12:37,151 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:12:37,151 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:12:47,232 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:12:47,232 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:12:47,232 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:12:47,232 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:12:47,232 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:12:47,232 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:12:47,233 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:12:52,260 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 15:12:52,260 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 15:12:52,260 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 15:12:53,268 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:12:54,802 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:12:55,610 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:12:55,738 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:12:55,821 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:12:56,106 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:12:56,106 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:12:56,106 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:12:56,975 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:12:56,975 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:12:56,975 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:12:57,121 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:12:57,121 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:12:57,184 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:12:57,184 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:12:57,184 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:12:57,226 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:12:57,635 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:12:57,706 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:12:57,706 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:12:57,706 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:12:57,878 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:12:57,879 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:13:00,239 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:13:00,239 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:13:00,324 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:13:00,324 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:13:00,324 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:13:01,210 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:13:01,211 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:13:01,211 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:13:01,211 - wireless_ap_test - INFO - MQTT Process Check: 24305 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
24457 root      1920 S    ash -c ps | grep mosquitto
24459 root      1920 R    grep mosquitto
2025-03-17 15:13:01,235 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:13:01,235 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:13:01,236 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:13:01,328 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:13:01,416 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:13:11,462 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:13:11,462 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:13:11,462 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:13:11,462 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:13:11,462 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:13:11,462 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:13:11,463 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:13:11,463 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:13:12,246 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:13:12,246 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:13:12,271 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:13:12,271 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:13:12,271 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:13:12,271 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:13:12,330 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:13:12,382 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:13:12,427 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:13:12,471 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:13:12,729 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:13:12,729 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:13:12,730 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:13:12,730 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:13:12,730 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:13:12,730 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:13:12,730 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:13:12,731 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:13:12,731 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:13:12,731 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:13:12,996 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:13:12,997 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:13:12,997 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:13:13,131 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:13:13,131 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:13:13,224 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:13:13,224 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:13:13,225 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:13:13,225 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:13:13,225 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:13:13,225 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:13:13,225 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:13:13,476 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:13:13,476 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:13:13,476 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:13:13,477 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:13:13,477 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:13:13,477 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:13:13,478 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:13:13,478 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:13:13,479 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:13:13,479 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:13:13,667 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:13:13,668 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:13:13,668 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:13:13,759 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:13:13,921 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:13:13,921 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:13:13,921 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:13:13,922 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:13:14,073 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:13:14,073 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:13:14,073 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:13:14,073 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:13:14,238 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:13:14,504 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:13:14,505 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:13:14,687 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:13:14,687 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:13:14,687 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:13:14,687 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:13:15,545 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:13:15,545 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:13:15,545 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:13:15,545 - wireless_ap_test - INFO - MQTT Process Check: 24607 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
24628 root      1920 S    ash -c ps | grep mosquitto
24630 root      1920 S    grep mosquitto
2025-03-17 15:13:15,571 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:13:15,572 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:13:15,572 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:13:15,668 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:13:25,813 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:13:25,813 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:13:25,814 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:13:25,814 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:13:25,814 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:13:25,814 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:13:25,815 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:13:25,815 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:13:25,815 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:13:25,815 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:13:25,815 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:13:25,892 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:13:25,892 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:13:25,893 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:13:25,893 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:13:25,893 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:13:25,893 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:13:25,893 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:13:27,050 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:13:28,491 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:13:28,492 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:13:30,241 - wireless_ap_test - INFO - Filled username
2025-03-17 15:13:30,378 - wireless_ap_test - INFO - Filled password
2025-03-17 15:13:30,552 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:13:31,247 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:13:32,251 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:13:33,600 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:13:33,600 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:13:34,796 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:13:34,797 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:13:36,005 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:13:37,007 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:13:37,007 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:13:38,199 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:13:38,233 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:13:38,265 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:13:38,299 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:13:38,467 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:13:38,617 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:13:40,831 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:13:40,831 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:13:40,853 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:13:40,853 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:13:40,870 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:13:41,084 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:13:42,093 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:13:42,093 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:13:42,115 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:13:42,296 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:13:42,311 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:13:42,312 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:13:42,312 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:13:42,965 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:13:42,966 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:13:44,187 - wireless_ap_test - INFO - Filled username
2025-03-17 15:13:44,323 - wireless_ap_test - INFO - Filled password
2025-03-17 15:13:44,498 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:13:45,175 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:13:46,180 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:13:47,476 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:13:47,477 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:13:48,793 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:13:48,793 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:13:50,580 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:13:51,759 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:13:52,261 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:13:52,262 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:13:53,789 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:13:53,789 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:13:53,789 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:13:56,343 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:13:56,343 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:13:56,343 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:14:01,110 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:14:01,110 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:14:01,111 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:14:02,067 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:14:02,570 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:14:05,510 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:14:07,701 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:14:07,701 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:14:10,132 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:14:11,902 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:14:14,144 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:14:14,144 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:14:19,343 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:14:19,343 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:14:19,343 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:14:20,236 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:14:20,236 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:14:20,236 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:14:20,236 - wireless_ap_test - INFO - MQTT Process Check: 24607 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
25055 root      1920 S    ash -c ps | grep mosquitto
25057 root      1920 S    grep mosquitto
2025-03-17 15:14:20,257 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:14:20,257 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:14:20,257 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:14:20,340 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:14:30,460 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:14:30,460 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:14:30,460 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:14:30,460 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 15:14:30,460 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:14:30,460 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 15:14:30,460 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 15:14:30,461 - wireless_ap_test - INFO - GUI validation completed with success: False
2025-03-17 15:14:35,466 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 15:14:35,466 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 15:14:35,466 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 15:14:36,476 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:14:38,058 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:14:38,857 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:14:38,983 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:14:39,064 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:14:39,348 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:14:39,349 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:14:39,349 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:14:40,204 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:14:40,204 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:14:40,204 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:14:40,349 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:14:40,349 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:14:40,410 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:14:40,410 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:14:40,410 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:14:40,451 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:14:40,843 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:14:40,912 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:14:40,912 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:14:40,912 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:14:41,079 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:14:41,079 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:14:43,376 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:14:43,376 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:14:43,457 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:14:43,457 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:14:43,457 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:14:44,301 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:14:44,301 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:14:44,301 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:14:44,302 - wireless_ap_test - INFO - MQTT Process Check: 25125 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
25265 root      1920 S    ash -c ps | grep mosquitto
25267 root      1920 S    grep mosquitto
2025-03-17 15:14:44,323 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:14:44,323 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:14:44,323 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:14:44,408 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:14:54,529 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:14:54,529 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - SSH validation completed with success: False
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:14:55,280 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:14:55,280 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:14:55,302 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:14:55,302 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:14:55,302 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:14:55,302 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:14:55,346 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:14:55,391 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:14:55,435 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:14:55,479 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:14:55,732 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:14:55,734 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:14:55,997 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:14:55,997 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:14:55,997 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:14:56,133 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:14:56,133 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:14:56,471 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:14:56,471 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:14:56,656 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:14:56,656 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:14:56,656 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:14:56,896 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:14:56,896 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:14:56,897 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:14:56,897 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:14:57,046 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:14:57,046 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:14:57,046 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:14:57,046 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:14:57,494 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:14:57,495 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:14:57,680 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:14:57,680 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:14:57,680 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:14:57,680 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:14:58,536 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:14:58,536 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:14:58,536 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:14:58,536 - wireless_ap_test - INFO - MQTT Process Check: 25421 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
25436 root      1920 S    ash -c ps | grep mosquitto
25438 root      1920 S    grep mosquitto
2025-03-17 15:14:58,563 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:14:58,563 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:14:58,563 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:14:58,673 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:14:58,767 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:14:58,767 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:14:58,767 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:14:58,767 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:14:58,767 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:14:58,768 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:14:58,768 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:15:08,808 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:15:08,808 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:15:08,808 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:15:08,808 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:15:08,884 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 16, Failed: 2
2025-03-17 15:15:08,884 - wireless_ap_test - INFO - 
========================================
2025-03-17 15:15:08,884 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-17 15:15:08,885 - wireless_ap_test - INFO - ========================================
2025-03-17 15:15:08,885 - wireless_ap_test - INFO - 12. validation_gui_mqtt_broker_data_to_server: Validation failed
2025-03-17 15:15:08,885 - wireless_ap_test - INFO - 15. validation_ssh_mqtt_broker_data_to_server: Validation failed
2025-03-17 15:15:08,885 - wireless_ap_test - INFO - ========================================
2025-03-17 15:23:37,191 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 15:23:37,192 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 15:23:37,192 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 15:23:37,192 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 15:23:37,192 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 15:23:37,193 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 15:23:37,193 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:23:38,432 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:23:39,555 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:23:39,555 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:23:41,230 - wireless_ap_test - INFO - Filled username
2025-03-17 15:23:41,357 - wireless_ap_test - INFO - Filled password
2025-03-17 15:23:41,519 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:23:42,153 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:23:43,157 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:23:44,391 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:23:44,391 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:23:45,402 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:23:45,402 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:23:46,588 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:23:47,591 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:23:47,591 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:23:48,761 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:23:48,786 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:23:48,809 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:23:48,832 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:23:48,978 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:23:49,118 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:23:51,308 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:23:51,308 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:23:51,327 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:23:51,327 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:23:51,341 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:23:51,514 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:23:52,525 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:23:52,525 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:23:52,539 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:23:52,715 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:23:52,727 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:23:52,727 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:23:52,727 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:23:53,167 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:23:53,167 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:23:54,319 - wireless_ap_test - INFO - Filled username
2025-03-17 15:23:54,447 - wireless_ap_test - INFO - Filled password
2025-03-17 15:23:54,617 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:23:55,243 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:23:56,246 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:23:57,471 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:23:57,471 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:23:58,692 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:23:58,692 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:24:00,416 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:24:01,631 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:24:02,132 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:24:02,132 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:24:03,558 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:24:03,559 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:24:03,559 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:24:06,053 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:24:06,053 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:24:06,053 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:24:10,662 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:24:10,662 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:24:10,662 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:24:11,543 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:24:12,045 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:24:14,895 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:24:17,067 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:24:17,067 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:24:19,462 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:24:21,240 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:24:23,462 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:24:23,462 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:24:28,666 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:24:28,666 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:24:28,666 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:24:29,519 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:24:29,520 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:24:29,520 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:24:29,520 - wireless_ap_test - INFO - MQTT Process Check: 25421 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
26121 root      1920 S    ash -c ps | grep mosquitto
26123 root      1920 S    grep mosquitto
2025-03-17 15:24:29,544 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:24:29,544 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:24:29,544 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:24:29,629 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:24:29,710 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:24:39,763 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:24:39,763 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:24:39,764 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:24:39,764 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:24:39,764 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:24:39,764 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:24:39,764 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:24:44,792 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 15:24:44,792 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 15:24:44,792 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 15:24:44,800 - wireless_ap_test - INFO - Closed data_to_server page
2025-03-17 15:24:44,800 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:24:44,825 - wireless_ap_test - INFO - Closed mqtt_broker page
2025-03-17 15:24:45,826 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:24:45,834 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-17 15:24:46,393 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:24:48,395 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:24:48,400 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:24:49,204 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:24:49,331 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:24:49,413 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:24:49,692 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:24:49,693 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:24:49,693 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:24:50,561 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:24:50,562 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:24:50,562 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:24:50,706 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:24:50,706 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:24:50,770 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:24:50,770 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:24:50,770 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:24:50,813 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:24:51,211 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:24:51,281 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:24:51,281 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:24:51,281 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:24:51,450 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:24:51,450 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:24:53,813 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:24:53,813 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:24:53,896 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:24:53,896 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:24:53,896 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:24:54,739 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:24:54,740 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:24:54,740 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:24:54,740 - wireless_ap_test - INFO - MQTT Process Check: 26189 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
26340 root      1920 S    ash -c ps | grep mosquitto
26342 root      1920 R    grep mosquitto
2025-03-17 15:24:54,764 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:24:54,764 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:24:54,764 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:24:54,849 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:24:54,932 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:25:04,975 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:25:04,975 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:25:04,975 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:25:04,975 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:25:04,976 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:25:04,976 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:25:04,976 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:25:04,976 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:25:05,723 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:25:05,723 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:25:05,758 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:25:05,758 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:25:05,758 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:25:05,758 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:25:05,805 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:25:05,862 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:25:05,907 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:25:05,952 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:25:06,206 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:25:06,208 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:25:06,208 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:25:06,208 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:25:06,470 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:25:06,470 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:25:06,471 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:25:06,597 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:25:06,597 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:25:07,132 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:25:07,133 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:25:07,133 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:25:07,369 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:25:07,369 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:25:07,369 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:25:07,369 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:25:07,539 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:25:07,539 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:25:07,539 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:25:07,539 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:25:07,713 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:25:07,981 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:25:07,981 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:25:08,168 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:25:08,169 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:25:08,169 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:25:08,169 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:25:09,024 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:25:09,024 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:25:09,024 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:25:09,024 - wireless_ap_test - INFO - MQTT Process Check: 26494 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
26511 root      1920 S    ash -c ps | grep mosquitto
26513 root      1920 S    grep mosquitto
2025-03-17 15:25:09,075 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:25:09,075 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:25:09,075 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:25:09,168 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:25:19,304 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:25:19,304 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:25:19,304 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:25:19,304 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:25:19,304 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:25:19,304 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:25:19,305 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:25:19,305 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:25:19,305 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:25:19,305 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:25:19,305 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:25:20,522 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:25:21,657 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:25:21,658 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:25:23,265 - wireless_ap_test - INFO - Filled username
2025-03-17 15:25:23,392 - wireless_ap_test - INFO - Filled password
2025-03-17 15:25:23,553 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:25:24,188 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:25:25,191 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:25:26,407 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:25:26,407 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:25:27,403 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:25:27,403 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:25:28,589 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:25:29,591 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:25:29,591 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:25:30,762 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:25:30,787 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:25:30,809 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:25:30,833 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:25:30,977 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:25:31,116 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:25:33,312 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:25:33,312 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:25:33,329 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:25:33,329 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:25:33,343 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:25:33,514 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:25:34,523 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:25:34,523 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:25:34,539 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:25:34,718 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:25:34,730 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:25:34,731 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:25:34,731 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:25:35,178 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:25:35,179 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:25:36,332 - wireless_ap_test - INFO - Filled username
2025-03-17 15:25:36,461 - wireless_ap_test - INFO - Filled password
2025-03-17 15:25:36,656 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:25:37,311 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:25:38,315 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:25:39,566 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:25:39,566 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:25:40,890 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:25:40,890 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:25:42,651 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:25:43,809 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:25:44,310 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:25:44,311 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:25:45,709 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:25:45,709 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:25:45,710 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:25:48,235 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:25:48,235 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:25:48,235 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:25:52,897 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:25:52,897 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:25:52,897 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:25:53,779 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:25:54,282 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:25:57,115 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:25:59,292 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:25:59,292 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:26:01,669 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:26:03,416 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:26:05,643 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:26:05,644 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:26:10,838 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:26:10,838 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:26:10,838 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:26:11,722 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:26:11,722 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:26:11,722 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:26:11,722 - wireless_ap_test - INFO - MQTT Process Check: 26494 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
26926 root      1920 S    ash -c ps | grep mosquitto
26928 root      1920 S    grep mosquitto
2025-03-17 15:26:11,743 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:26:11,743 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:26:11,743 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:26:11,826 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 15:26:11,907 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:26:21,949 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:26:21,949 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:26:21,949 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:26:21,949 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 15:26:21,949 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:26:21,949 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 15:26:21,949 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 15:26:21,950 - wireless_ap_test - INFO - GUI validation completed with success: False
2025-03-17 15:26:26,956 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 15:26:26,956 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 15:26:26,956 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 15:26:26,964 - wireless_ap_test - INFO - Closed data_to_server page
2025-03-17 15:26:26,964 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:26:26,991 - wireless_ap_test - INFO - Closed mqtt_broker page
2025-03-17 15:26:27,992 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:26:28,002 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-17 15:26:28,568 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:26:30,570 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:26:30,575 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:26:31,378 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:26:31,507 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:26:31,589 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:26:31,888 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:26:31,888 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:26:31,888 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:26:32,750 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:26:32,750 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:26:32,750 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:26:32,893 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:26:32,893 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:26:32,956 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:26:32,956 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:26:32,956 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:26:32,998 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:26:33,388 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:26:33,458 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:26:33,458 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:26:33,458 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:26:33,632 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:26:33,632 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:26:35,928 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:26:35,928 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:26:36,010 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:26:36,010 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:26:36,010 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:26:36,860 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:26:36,860 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:26:36,860 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:26:36,860 - wireless_ap_test - INFO - MQTT Process Check: 26993 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
27136 root      1920 S    ash -c ps | grep mosquitto
27138 root      1920 S    grep mosquitto
2025-03-17 15:26:36,882 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:26:36,882 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:26:36,883 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:26:36,967 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-17 15:26:37,048 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:26:37,048 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 15:26:37,048 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 15:26:37,048 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 15:26:37,049 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 15:26:37,049 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 15:26:37,049 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:26:47,090 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:26:47,090 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:26:47,090 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:26:47,090 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 15:26:47,090 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:26:47,090 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 15:26:47,090 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 15:26:47,091 - wireless_ap_test - INFO - SSH validation completed with success: False
2025-03-17 15:26:47,091 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:26:47,846 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:26:47,846 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:26:47,868 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:26:47,868 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:26:47,868 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:26:47,868 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:26:47,916 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:26:47,961 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:26:48,005 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:26:48,049 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:26:48,301 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:26:48,301 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:26:48,571 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:26:48,571 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:26:48,571 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:26:48,695 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:26:48,695 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:26:48,790 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:26:48,790 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:26:48,791 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:26:48,791 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:26:48,791 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:26:48,791 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:26:48,791 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:26:49,036 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:26:49,036 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:26:49,036 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:26:49,036 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:26:49,036 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:26:49,037 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:26:49,037 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:26:49,037 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:26:49,037 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:26:49,037 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:26:49,241 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:26:49,241 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:26:49,241 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:26:49,348 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:26:49,511 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:26:49,511 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:26:49,511 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:26:49,511 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:26:49,668 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:26:49,668 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:26:49,668 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:26:49,669 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:26:50,094 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:26:50,094 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:26:50,283 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:26:50,283 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:26:50,283 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:26:50,283 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:26:51,153 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:26:51,153 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:26:51,153 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:26:51,154 - wireless_ap_test - INFO - MQTT Process Check: 27286 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
27307 root      1920 S    ash -c ps | grep mosquitto
27310 root      1920 S    grep mosquitto
2025-03-17 15:26:51,179 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:26:51,179 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:26:51,179 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:26:51,275 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:26:51,371 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:27:01,415 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:27:01,415 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:27:01,493 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 16, Failed: 2
2025-03-17 15:27:01,493 - wireless_ap_test - INFO - 
========================================
2025-03-17 15:27:01,493 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-17 15:27:01,493 - wireless_ap_test - INFO - ========================================
2025-03-17 15:27:01,494 - wireless_ap_test - INFO - 12. validation_gui_mqtt_broker_data_to_server: Validation failed
2025-03-17 15:27:01,494 - wireless_ap_test - INFO - 15. validation_ssh_mqtt_broker_data_to_server: Validation failed
2025-03-17 15:27:01,494 - wireless_ap_test - INFO - ========================================
2025-03-17 15:30:30,834 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 15:30:30,834 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 15:30:30,834 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 15:30:30,835 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 15:30:30,835 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 15:30:30,835 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 15:30:30,835 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:30:32,115 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:30:33,269 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:30:33,269 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:30:34,887 - wireless_ap_test - INFO - Filled username
2025-03-17 15:30:35,017 - wireless_ap_test - INFO - Filled password
2025-03-17 15:30:35,328 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:30:36,004 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:30:37,010 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:30:38,302 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:30:38,303 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:30:39,371 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:30:39,371 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:30:40,573 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:30:41,575 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:30:41,575 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:30:42,757 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:30:42,782 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:30:42,804 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:30:42,828 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:30:42,982 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:30:43,121 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:30:45,336 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:30:45,336 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:30:45,352 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:30:45,352 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:30:45,367 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:30:45,541 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:30:46,552 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:30:46,552 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:30:46,568 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:30:46,777 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:30:46,803 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:30:46,803 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:30:46,804 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:30:47,169 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:30:47,169 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:30:48,466 - wireless_ap_test - INFO - Filled username
2025-03-17 15:30:48,594 - wireless_ap_test - INFO - Filled password
2025-03-17 15:30:48,755 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:30:49,407 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:30:50,408 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:30:51,619 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:30:51,619 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:30:52,977 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:30:52,978 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:30:54,713 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:30:55,872 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:30:56,373 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:30:56,374 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:30:57,847 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:30:57,847 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:30:57,847 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:31:00,361 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:31:00,361 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:31:00,361 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:31:04,951 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:31:04,951 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:31:04,951 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:31:05,822 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:31:06,322 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:31:09,172 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:31:11,362 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:31:11,362 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:31:13,762 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:31:15,522 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:31:17,748 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:31:17,748 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:31:22,951 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:31:22,951 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:31:22,951 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:31:23,812 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:31:23,812 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:31:23,812 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:31:23,812 - wireless_ap_test - INFO - MQTT Process Check: 27286 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
27875 root      1920 S    ash -c ps | grep mosquitto
27877 root      1920 R    grep mosquitto
2025-03-17 15:31:23,834 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:31:23,834 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:31:23,834 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:31:23,919 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:31:24,001 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:31:24,001 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:31:24,002 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:31:24,002 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:31:24,002 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:31:24,002 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:31:24,002 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:31:34,054 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:31:34,054 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:31:34,054 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:31:34,054 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:31:34,054 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:31:34,054 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:31:34,055 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:31:34,063 - wireless_ap_test - INFO - Closed data_to_server page
2025-03-17 15:31:34,063 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:31:34,118 - wireless_ap_test - INFO - Closed mqtt_broker page
2025-03-17 15:31:35,119 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:31:35,127 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-17 15:31:35,667 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:31:37,669 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:31:37,675 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:31:38,550 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:31:38,677 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:31:38,759 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:31:39,037 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:31:39,037 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:31:39,037 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:31:39,904 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:31:39,904 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:31:39,904 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:31:40,052 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:31:40,052 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:31:40,116 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:31:40,116 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:31:40,116 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:31:40,157 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:31:40,560 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:31:40,631 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:31:40,631 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:31:40,631 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:31:40,803 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:31:40,804 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:31:43,165 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:31:43,166 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:31:43,250 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:31:43,250 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:31:43,250 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:31:44,139 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:31:44,139 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:31:44,139 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:31:44,139 - wireless_ap_test - INFO - MQTT Process Check: 27943 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
28094 root      1920 S    ash -c ps | grep mosquitto
28096 root      1920 R    grep mosquitto
2025-03-17 15:31:44,162 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:31:44,162 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:31:44,162 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:31:44,250 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:31:44,337 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:31:54,378 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:31:54,378 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:31:54,378 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:31:54,378 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:31:54,378 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:31:54,378 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:31:54,379 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:31:54,379 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:31:55,135 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:31:55,135 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:31:55,161 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:31:55,161 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:31:55,161 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:31:55,161 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:31:55,207 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:31:55,253 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:31:55,298 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:31:55,345 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:31:55,604 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:31:55,604 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:31:55,604 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:31:55,604 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:31:55,861 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:31:55,862 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:31:55,862 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:31:55,994 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:31:55,995 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:31:56,388 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:31:56,388 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:31:56,388 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:31:56,563 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:31:56,563 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:31:56,563 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:31:56,658 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:31:56,809 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:31:56,809 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:31:56,810 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:31:56,810 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:31:56,954 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:31:56,954 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:31:56,954 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:31:56,954 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:31:57,117 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:31:57,376 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:31:57,376 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:31:57,562 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:31:57,562 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:31:57,562 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:31:57,562 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:31:58,419 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:31:58,419 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:31:58,419 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:31:58,419 - wireless_ap_test - INFO - MQTT Process Check: 28243 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
28265 root      1920 S    ash -c ps | grep mosquitto
28267 root      1920 S    grep mosquitto
2025-03-17 15:31:58,445 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:31:58,445 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:31:58,445 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:31:58,538 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:31:58,629 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:32:08,673 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:32:08,673 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:32:08,673 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:32:08,673 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:32:08,673 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:32:08,673 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:32:08,673 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:32:08,674 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:32:08,674 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:32:08,674 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:32:08,674 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:32:08,751 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:32:08,751 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:32:08,751 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:32:08,751 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:32:08,752 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:32:08,752 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:32:08,752 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:32:09,908 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:32:11,063 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:32:11,063 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:32:12,670 - wireless_ap_test - INFO - Filled username
2025-03-17 15:32:12,797 - wireless_ap_test - INFO - Filled password
2025-03-17 15:32:12,961 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:32:13,593 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:32:14,596 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:32:15,839 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:32:15,839 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:32:16,845 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:32:16,845 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:32:18,028 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:32:19,031 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:32:19,031 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:32:20,203 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:32:20,228 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:32:20,251 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:32:20,274 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:32:20,423 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:32:20,563 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:32:22,763 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:32:22,763 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:32:22,781 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:32:22,781 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:32:22,795 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:32:22,968 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:32:23,979 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:32:23,979 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:32:23,995 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:32:24,187 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:32:24,198 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:32:24,198 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:32:24,198 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:32:24,628 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:32:24,629 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:32:25,791 - wireless_ap_test - INFO - Filled username
2025-03-17 15:32:25,931 - wireless_ap_test - INFO - Filled password
2025-03-17 15:32:26,100 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:32:26,733 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:32:27,735 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:32:28,949 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:32:28,949 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:32:30,198 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:32:30,198 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:32:31,915 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:32:33,119 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:32:33,619 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:32:33,620 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:32:35,042 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:32:35,042 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:32:35,042 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:32:37,551 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:32:37,551 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:32:37,551 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:32:42,152 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:32:42,152 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:32:42,152 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:32:43,025 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:32:43,529 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:32:46,361 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:32:48,541 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:32:48,541 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:32:50,941 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:32:52,782 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:32:55,009 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:32:55,009 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:33:00,223 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:33:00,223 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:33:00,223 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:33:01,100 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:33:01,100 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:33:01,101 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:33:01,101 - wireless_ap_test - INFO - MQTT Process Check: 28243 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
28770 root      1920 S    ash -c ps | grep mosquitto
28772 root      1920 R    grep mosquitto
2025-03-17 15:33:01,123 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:33:01,123 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:33:01,123 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:33:01,208 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:33:01,290 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:33:01,290 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:33:01,290 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:33:01,291 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:33:01,291 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:33:01,291 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:33:01,291 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:33:11,335 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:33:11,335 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:33:11,335 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:33:11,335 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:33:11,335 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:33:11,335 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:33:11,336 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:33:11,345 - wireless_ap_test - INFO - Closed data_to_server page
2025-03-17 15:33:11,345 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:33:11,400 - wireless_ap_test - INFO - Closed mqtt_broker page
2025-03-17 15:33:12,401 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:33:12,410 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-17 15:33:12,995 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:33:14,997 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:33:15,003 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:33:15,815 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:33:15,941 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:33:16,025 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:33:16,305 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:33:16,305 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:33:16,306 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:33:17,178 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:33:17,178 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:33:17,178 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:33:17,338 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:33:17,338 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:33:17,404 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:33:17,404 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:33:17,404 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:33:17,448 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:33:17,854 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:33:17,928 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:33:17,928 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:33:17,929 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:33:18,106 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:33:18,106 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:33:20,466 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:33:20,466 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:33:20,549 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:33:20,549 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:33:20,549 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:33:21,414 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:33:21,414 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:33:21,414 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:33:21,414 - wireless_ap_test - INFO - MQTT Process Check: 28842 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
28989 root      1920 S    ash -c ps | grep mosquitto
28991 root      1920 R    grep mosquitto
2025-03-17 15:33:21,436 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:33:21,436 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:33:21,437 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:33:21,527 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:33:31,657 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:33:31,657 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:33:31,657 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:33:31,657 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:33:31,657 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:33:31,657 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:33:31,658 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:33:31,658 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:33:32,422 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:33:32,422 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:33:32,445 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:33:32,445 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:33:32,445 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:33:32,445 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:33:32,492 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:33:32,538 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:33:32,583 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:33:32,630 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:33:32,888 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:33:32,888 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:33:33,149 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:33:33,149 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:33:33,149 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:33:33,280 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:33:33,280 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:33:33,375 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:33:33,615 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:33:33,615 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:33:33,615 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:33:33,783 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:33:33,783 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:33:33,784 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:33:33,871 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:33:33,871 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:33:33,872 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:33:33,872 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:33:33,872 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:33:33,872 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:33:33,872 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:33:34,024 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:33:34,024 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:33:34,024 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:33:34,024 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:33:34,167 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:33:34,167 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:33:34,167 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:33:34,168 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:33:34,585 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:33:34,585 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:33:34,783 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:33:34,783 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:33:34,783 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:33:34,783 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:33:35,664 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:33:35,664 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:33:35,665 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:33:35,665 - wireless_ap_test - INFO - MQTT Process Check: 29134 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
29161 root      1920 S    ash -c ps | grep mosquitto
29164 root      1920 R    grep mosquitto
2025-03-17 15:33:35,690 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:33:35,690 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:33:35,691 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:33:35,789 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:33:35,891 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:33:45,949 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:33:45,949 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:33:45,949 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:33:45,949 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:33:45,949 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:33:45,949 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:33:45,950 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:33:45,950 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:33:45,950 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:33:45,950 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:33:45,950 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:33:46,029 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 18, Failed: 0
2025-03-17 15:43:32,556 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 15:43:32,556 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 15:43:32,557 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 15:43:32,557 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 15:43:32,558 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 15:43:32,558 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 15:43:32,558 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:43:33,011 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-17 15:43:33,921 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:43:35,047 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:43:35,047 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:43:36,638 - wireless_ap_test - INFO - Filled username
2025-03-17 15:43:36,767 - wireless_ap_test - INFO - Filled password
2025-03-17 15:43:36,941 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:43:37,589 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:43:38,592 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:43:39,809 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:43:39,809 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:43:40,765 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:43:40,765 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:43:41,940 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:43:42,942 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:43:42,942 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:43:44,147 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:43:44,172 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:43:44,199 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:43:44,225 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:43:44,370 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:43:44,511 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:43:46,712 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:43:46,712 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:43:46,729 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:43:46,729 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:43:46,742 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:43:46,913 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:43:47,926 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:43:47,926 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:43:47,946 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:43:48,130 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:43:48,141 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:43:48,141 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:43:48,141 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:43:48,586 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:43:48,586 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:43:49,722 - wireless_ap_test - INFO - Filled username
2025-03-17 15:43:49,852 - wireless_ap_test - INFO - Filled password
2025-03-17 15:43:50,022 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:43:50,674 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:43:51,676 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:43:52,917 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:43:52,917 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:43:54,201 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:43:54,201 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:43:55,961 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:43:57,139 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:43:57,640 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:43:57,640 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:43:59,277 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:43:59,277 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:43:59,277 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:44:01,893 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:44:01,893 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:44:01,893 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:44:06,674 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:44:06,674 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:44:06,674 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:44:07,556 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:44:08,058 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:44:10,914 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:44:13,087 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:44:13,087 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:44:15,508 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:44:17,326 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:44:19,558 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:44:19,558 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:44:24,751 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:44:24,751 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:44:24,752 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:44:25,622 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:44:25,623 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:44:25,623 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:44:25,623 - wireless_ap_test - INFO - MQTT Process Check: 29134 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
29879 root      1920 S    ash -c ps | grep mosquitto
29881 root      1920 S    grep mosquitto
2025-03-17 15:44:25,645 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:44:25,645 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:44:25,645 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:44:25,731 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:44:35,866 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:44:35,866 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:44:35,866 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:44:35,866 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:44:35,866 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:44:35,866 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:44:35,867 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:44:35,867 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-17 15:44:35,867 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-17 15:44:35,878 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-17 15:44:35,878 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-17 15:44:35,879 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-17 15:44:35,928 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-17 15:44:36,930 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:44:36,930 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-17 15:44:36,930 - wireless_ap_test - INFO - Closing browser context
2025-03-17 15:44:36,930 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-17 15:44:36,930 - wireless_ap_test - INFO - Closing browser
2025-03-17 15:44:37,545 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:44:40,568 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:44:40,581 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:44:41,511 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:44:41,634 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:44:41,717 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:44:42,001 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:44:42,002 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:44:42,002 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:44:42,900 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:44:42,901 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:44:42,901 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:44:43,055 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:44:43,055 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:44:43,124 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:44:43,124 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:44:43,124 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:44:43,174 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:44:43,597 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:44:43,670 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:44:43,670 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:44:43,670 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:44:43,843 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:44:43,844 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:44:46,209 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:44:46,209 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:44:46,292 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:44:46,292 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:44:46,293 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:44:47,169 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:44:47,169 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:44:47,169 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:44:47,169 - wireless_ap_test - INFO - MQTT Process Check: 29946 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30098 root      1920 S    ash -c ps | grep mosquitto
30100 root      1920 R    grep mosquitto
2025-03-17 15:44:47,192 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:44:47,192 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:44:47,192 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:44:47,280 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:44:47,363 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:44:47,363 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:44:47,363 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:44:47,363 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:44:47,364 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:44:47,364 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:44:47,364 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:44:57,405 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:44:57,406 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:44:58,201 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:44:58,201 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:44:58,226 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:44:58,227 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:44:58,227 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:44:58,227 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:44:58,273 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:44:58,320 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:44:58,367 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:44:58,411 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:44:58,668 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:44:58,668 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:44:58,668 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:44:58,669 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:44:58,669 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:44:58,669 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:44:58,669 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:44:58,669 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:44:58,670 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:44:58,670 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:44:58,937 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:44:58,937 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:44:58,937 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:44:59,058 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:44:59,058 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:44:59,152 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:44:59,152 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:44:59,153 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:44:59,153 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:44:59,153 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:44:59,153 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:44:59,153 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:44:59,399 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:44:59,399 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:44:59,591 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:44:59,591 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:44:59,591 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:44:59,677 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:44:59,677 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:44:59,677 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:44:59,677 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:44:59,678 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:44:59,678 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:44:59,678 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:44:59,824 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:44:59,824 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:44:59,824 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:44:59,825 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:44:59,968 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:44:59,968 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:44:59,968 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:44:59,968 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:45:00,122 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:45:00,379 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:45:00,379 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:45:00,577 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:45:00,577 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:45:00,577 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:45:00,577 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:45:01,577 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:45:01,577 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:45:01,577 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:45:01,577 - wireless_ap_test - INFO - MQTT Process Check: 30238 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30286 root      1920 S    ash -c ps | grep mosquitto
30289 root      1920 S    grep mosquitto
2025-03-17 15:45:01,603 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:45:01,603 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:45:01,603 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:45:01,706 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:45:01,802 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:45:01,802 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:45:01,802 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:45:01,803 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:45:01,803 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:45:01,803 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:45:01,803 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:45:11,842 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:45:11,843 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:45:11,843 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:45:12,184 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-17 15:45:13,085 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:45:14,174 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:45:14,174 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:45:15,824 - wireless_ap_test - INFO - Filled username
2025-03-17 15:45:15,956 - wireless_ap_test - INFO - Filled password
2025-03-17 15:45:16,131 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:45:16,767 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:45:17,776 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:45:19,111 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:45:19,112 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:45:20,383 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:45:20,383 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:45:21,569 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:45:22,571 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:45:22,571 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:45:23,826 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:45:23,847 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:45:23,875 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:45:23,897 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:45:24,093 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:45:24,238 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:45:26,459 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:45:26,459 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:45:26,474 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:45:26,475 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:45:26,488 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:45:26,653 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:45:27,662 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:45:27,662 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:45:27,677 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:45:27,857 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:45:27,873 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:45:27,873 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:45:27,873 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:45:28,291 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:45:28,291 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:45:29,447 - wireless_ap_test - INFO - Filled username
2025-03-17 15:45:29,581 - wireless_ap_test - INFO - Filled password
2025-03-17 15:45:29,754 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:45:30,415 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:45:31,417 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:45:32,711 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:45:32,711 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:45:33,945 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:45:33,945 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:45:35,681 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:45:36,851 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:45:37,353 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:45:37,353 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:45:38,782 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:45:38,782 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:45:38,782 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:45:41,280 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:45:41,280 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:45:41,280 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:45:45,960 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:45:45,960 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:45:45,960 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:45:46,833 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:45:47,335 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:45:50,180 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:45:52,348 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:45:52,348 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:45:54,724 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:45:56,460 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:45:58,683 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:45:58,683 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:46:03,883 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:46:03,883 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:46:03,884 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:46:04,747 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:46:04,747 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:46:04,747 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:46:04,748 - wireless_ap_test - INFO - MQTT Process Check: 30238 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30752 root      1920 S    ash -c ps | grep mosquitto
30754 root      1920 R    grep mosquitto
2025-03-17 15:46:04,769 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:46:04,769 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:46:04,769 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:46:04,853 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:46:04,934 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:46:04,934 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:46:04,934 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:46:04,935 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:46:04,935 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:46:04,935 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:46:04,935 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:46:14,976 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:46:14,976 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:46:14,976 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-17 15:46:14,985 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-17 15:46:14,986 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-17 15:46:14,987 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-17 15:46:15,035 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-17 15:46:16,036 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:46:16,036 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-17 15:46:16,036 - wireless_ap_test - INFO - Closing browser context
2025-03-17 15:46:16,036 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-17 15:46:16,036 - wireless_ap_test - INFO - Closing browser
2025-03-17 15:46:16,614 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:46:19,634 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:46:19,639 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:46:20,445 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:46:20,575 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:46:20,659 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:46:20,944 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:46:20,944 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:46:20,945 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:46:21,800 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:46:21,800 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:46:21,800 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:46:21,953 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:46:21,953 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:46:22,017 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:46:22,017 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:46:22,017 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:46:22,066 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:46:22,494 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:46:22,563 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:46:22,563 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:46:22,563 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:46:22,742 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:46:22,742 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:46:25,103 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:46:25,103 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:46:25,187 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:46:25,187 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:46:25,187 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:46:26,033 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:46:26,033 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:46:26,033 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:46:26,033 - wireless_ap_test - INFO - MQTT Process Check: 30820 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30971 root      1920 S    ash -c ps | grep mosquitto
30973 root      1920 R    grep mosquitto
2025-03-17 15:46:26,056 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:46:26,056 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:46:26,056 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:46:26,144 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:46:36,270 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:46:36,270 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:46:36,270 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:46:36,270 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:46:36,270 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:46:36,270 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:46:36,271 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:46:36,271 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:46:37,007 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:46:37,007 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:46:37,036 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:46:37,036 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:46:37,036 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:46:37,036 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:46:37,084 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:46:37,132 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:46:37,178 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:46:37,222 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:46:37,473 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:46:37,473 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:46:37,473 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:46:37,473 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:46:37,473 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:46:37,474 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:46:37,474 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:46:37,474 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:46:37,474 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:46:37,474 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:46:37,737 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:46:37,737 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:46:37,737 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:46:37,860 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:46:37,860 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:46:38,374 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:46:38,375 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:46:38,375 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:46:38,460 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:46:38,460 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:46:38,460 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:46:38,461 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:46:38,461 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:46:38,461 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:46:38,461 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:46:38,609 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:46:38,609 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:46:38,609 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:46:38,609 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:46:38,754 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:46:38,754 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:46:38,754 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:46:38,754 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:46:39,159 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:46:39,159 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:46:39,363 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:46:39,364 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:46:39,364 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:46:39,364 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:46:40,216 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:46:40,216 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:46:40,216 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:46:40,216 - wireless_ap_test - INFO - MQTT Process Check: 31113 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
31142 root      1920 S    ash -c ps | grep mosquitto
31144 root      1920 S    grep mosquitto
2025-03-17 15:46:40,241 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:46:40,241 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:46:40,241 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:46:40,333 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:46:40,427 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:46:40,427 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:46:40,427 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:46:40,427 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:46:40,427 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:46:40,428 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:46:40,428 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:46:50,472 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:46:50,472 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:46:50,472 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:46:50,472 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:46:50,472 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:46:50,472 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:46:50,473 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:46:50,473 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:46:50,473 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:46:50,473 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:46:50,473 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:46:50,547 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:46:50,547 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:46:50,548 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:46:50,548 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:46:50,548 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:46:50,548 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:46:50,549 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 18, Failed: 0
