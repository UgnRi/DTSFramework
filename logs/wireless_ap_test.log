2025-03-17 10:57:47,287 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 10:57:47,287 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 10:57:47,288 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 10:57:48,123 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 10:57:48,248 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 10:57:48,330 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 10:57:48,622 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 10:57:48,623 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 10:57:49,560 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 10:57:49,560 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 10:57:49,560 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 10:57:49,701 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 10:57:49,701 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 10:57:49,763 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 10:57:49,763 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 10:57:49,763 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 10:57:49,803 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 10:57:50,195 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 10:57:50,265 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 10:57:50,265 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 10:57:50,265 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 10:57:50,430 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 10:57:50,430 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 10:57:52,769 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 10:57:52,770 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 10:57:52,850 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 10:57:52,850 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 10:57:52,850 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 10:57:53,594 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 10:57:53,594 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 10:57:53,616 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 10:57:53,617 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 10:57:53,617 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 10:57:53,663 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 10:57:53,709 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 10:57:53,753 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 10:57:54,006 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 10:57:54,006 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 10:57:54,007 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 10:57:54,007 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 10:57:54,863 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 10:57:54,864 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 10:57:54,864 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 10:57:54,864 - wireless_ap_test - INFO - MQTT Process Check: 29944 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30171 root      1920 S    ash -c ps | grep mosquitto
30173 root      1920 S    grep mosquitto
2025-03-17 10:57:54,885 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 10:57:54,972 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 10:57:55,053 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 10:58:05,222 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 10:58:05,222 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - Validation Results:
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - DTS Failures: ["instanceName (expected 'test_instance3', got '')", 'DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - clean up if statement
2025-03-17 10:58:05,222 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 10:58:05,243 - wireless_ap_test - ERROR - No sections found to delete
2025-03-17 10:58:05,244 - wireless_ap_test - INFO - Validation completed with success: False
2025-03-17 10:58:05,244 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 2, Failed: 1
2025-03-17 10:58:26,339 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 10:58:26,339 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 10:58:26,340 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 10:58:27,171 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 10:58:27,300 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 10:58:27,382 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 10:58:27,670 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 10:58:27,670 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 10:58:28,585 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 10:58:28,585 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 10:58:28,586 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 10:58:28,729 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 10:58:28,729 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 10:58:28,790 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 10:58:28,790 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 10:58:28,790 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 10:58:28,832 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 10:58:29,215 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 10:58:29,283 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 10:58:29,283 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 10:58:29,283 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 10:58:29,449 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 10:58:29,449 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 10:58:31,794 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 10:58:31,794 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 10:58:31,875 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 10:58:31,875 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 10:58:31,875 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 10:58:32,742 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 10:58:32,742 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 10:58:32,742 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 10:58:32,742 - wireless_ap_test - INFO - MQTT Process Check: 30241 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30394 root      1920 S    ash -c ps | grep mosquitto
30396 root      1920 R    grep mosquitto
2025-03-17 10:58:32,764 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 10:58:32,764 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 10:58:32,764 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 10:58:32,850 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 10:58:32,932 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 10:58:32,933 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 10:58:42,972 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 10:58:42,972 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - Validation Results:
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - clean up if statement
2025-03-17 10:58:42,972 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 10:58:42,993 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 10:58:42,993 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 10:58:42,994 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 10:58:43,038 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 10:58:43,081 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 10:58:43,124 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 10:58:43,380 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 10:58:43,380 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 10:58:43,380 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 3, Failed: 0
2025-03-17 11:01:13,153 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:01:13,153 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:01:13,154 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:01:14,026 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:01:14,156 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:01:14,239 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:01:14,523 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:01:14,523 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 11:01:14,523 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:01:15,446 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:01:15,446 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:01:15,446 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:01:15,590 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:01:15,590 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:01:15,651 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:01:15,651 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:01:15,651 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:01:15,693 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:01:16,092 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:01:16,163 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:01:16,163 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:01:16,163 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:01:16,336 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:01:16,337 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:01:18,677 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:01:18,677 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:01:18,760 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:01:18,760 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:01:18,760 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 11:01:19,500 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 11:01:19,500 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:01:19,522 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:01:19,522 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:01:19,523 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:01:19,569 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:01:19,616 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:01:19,661 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:01:19,918 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 11:01:19,918 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 11:01:19,918 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 11:01:19,918 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:01:20,773 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:01:20,773 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:01:20,773 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:01:20,773 - wireless_ap_test - INFO - MQTT Process Check: 30589 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30816 root      1920 S    ash -c ps | grep mosquitto
30818 root      1920 S    grep mosquitto
2025-03-17 11:01:20,793 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 11:01:20,878 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 11:01:20,960 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:01:31,003 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:01:31,004 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:01:31,004 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:01:31,004 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 11:01:31,004 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:01:31,005 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 11:01:31,005 - wireless_ap_test - INFO - DTS Failures: ["instanceName (expected 'test_instance3', got '')", 'DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 11:01:31,005 - wireless_ap_test - INFO - clean up if statement
2025-03-17 11:01:31,005 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:01:31,026 - wireless_ap_test - ERROR - No sections found to delete
2025-03-17 11:01:31,027 - wireless_ap_test - INFO - Validation completed with success: False
2025-03-17 11:01:31,027 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 2, Failed: 1
2025-03-17 11:01:36,177 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:01:36,178 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:01:36,178 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:01:37,015 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:01:37,140 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:01:37,220 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:01:37,508 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:01:37,509 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 11:01:37,509 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:01:38,428 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:01:38,428 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:01:38,428 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:01:38,571 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:01:38,571 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:01:38,631 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:01:38,631 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:01:38,631 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:01:38,673 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:01:39,055 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:01:39,124 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:01:39,124 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:01:39,124 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:01:39,289 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:01:39,289 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:01:41,627 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:01:41,627 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:01:41,708 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:01:41,708 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:01:41,708 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 11:01:42,452 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 11:01:42,452 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:01:42,475 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:01:42,475 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:01:42,475 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:01:42,521 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:01:42,571 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:01:42,616 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:01:42,870 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 11:01:42,870 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 11:01:42,870 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 11:01:42,871 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:01:43,728 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:01:43,728 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:01:43,728 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:01:43,728 - wireless_ap_test - INFO - MQTT Process Check: 30885 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
31104 root      1920 S    ash -c ps | grep mosquitto
31106 root      1920 S    grep mosquitto
2025-03-17 11:01:43,748 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 11:01:43,831 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 11:01:43,912 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:01:50,322 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:01:50,322 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:01:50,322 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:01:51,174 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:01:51,299 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:01:51,384 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:01:51,664 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:01:51,664 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:01:52,600 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:01:52,600 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:01:52,600 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:01:52,741 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:01:52,741 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:01:52,802 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:01:52,802 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:01:52,802 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:01:52,843 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:01:53,235 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:01:53,304 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:01:53,304 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:01:53,304 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:01:53,470 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:01:53,470 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:01:55,807 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:01:55,807 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:01:55,889 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:01:55,889 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:01:55,889 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:01:56,773 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:01:56,773 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:01:56,773 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:01:56,773 - wireless_ap_test - INFO - MQTT Process Check: 31164 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
31321 root      1920 S    ash -c ps | grep mosquitto
31323 root      1920 R    grep mosquitto
2025-03-17 11:01:56,800 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:01:56,800 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:01:56,800 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:01:56,888 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:01:56,971 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:01:56,971 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:01:56,971 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:01:56,971 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:01:56,971 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:01:56,972 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:01:56,972 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:02:07,016 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:02:07,016 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:02:07,016 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:02:07,016 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:02:07,017 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:02:07,017 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:02:07,017 - wireless_ap_test - INFO - clean up if statement
2025-03-17 11:02:07,017 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:02:07,039 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:02:07,039 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:02:07,039 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:02:07,083 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:02:07,128 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:02:07,172 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:02:07,428 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 11:02:07,428 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:02:07,429 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 3, Failed: 0
2025-03-17 11:05:21,751 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:05:21,751 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:05:21,752 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:05:22,608 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:05:22,737 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:05:22,820 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:05:23,100 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:05:23,100 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:05:24,074 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:05:24,074 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:05:24,074 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:05:24,214 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:05:24,214 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:05:24,275 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:05:24,275 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:05:24,275 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:05:24,316 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:05:24,705 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:05:24,773 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:05:24,773 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:05:24,773 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:05:24,940 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:05:24,941 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:05:27,284 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:05:27,284 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:05:27,365 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:05:27,365 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:05:27,365 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:05:28,237 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:05:28,237 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:05:28,237 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:05:28,237 - wireless_ap_test - INFO - MQTT Process Check: 31535 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
31689 root      1920 S    ash -c ps | grep mosquitto
31691 root      1920 R    grep mosquitto
2025-03-17 11:05:28,258 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:05:28,258 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:05:28,258 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:05:28,343 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:05:28,423 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:05:28,424 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:05:38,504 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:05:38,504 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:05:38,504 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:05:38,504 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:05:38,504 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:05:38,505 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:05:38,505 - wireless_ap_test - INFO - clean up if statement
2025-03-17 11:05:38,505 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:05:38,526 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:05:38,526 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:05:38,527 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:05:38,570 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:05:38,614 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:05:38,658 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:05:38,908 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 11:05:38,909 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:05:38,909 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 3, Failed: 0
2025-03-17 11:05:45,834 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='all', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:05:45,835 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:05:45,835 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:05:47,103 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 11:05:48,509 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:05:48,509 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:05:50,121 - wireless_ap_test - INFO - Filled username
2025-03-17 11:05:50,248 - wireless_ap_test - INFO - Filled password
2025-03-17 11:05:50,407 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:05:51,024 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:05:52,027 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 11:05:53,294 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 11:05:53,294 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 11:05:54,333 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 11:05:54,334 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 11:05:55,523 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 11:05:56,525 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 11:05:56,525 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 11:05:57,712 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 11:05:57,754 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 11:05:57,775 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 11:05:57,801 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 11:05:57,943 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 11:05:58,084 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 11:06:00,274 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 11:06:00,274 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 11:06:00,291 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:06:00,291 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 11:06:00,306 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 11:06:00,475 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:06:01,483 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 11:06:01,483 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 11:06:01,498 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 11:06:01,678 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 11:06:01,689 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 11:06:01,689 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 11:06:01,689 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker - mqtt_broker
2025-03-17 11:06:03,698 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 11:06:04,131 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:06:04,131 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:06:05,434 - wireless_ap_test - INFO - Filled username
2025-03-17 11:06:05,556 - wireless_ap_test - INFO - Filled password
2025-03-17 11:06:05,717 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:06:06,362 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:06:07,364 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:06:08,581 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:06:08,581 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:06:09,823 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:06:09,823 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 11:06:11,558 - wireless_ap_test - INFO - Clicking add button
2025-03-17 11:06:12,715 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 11:06:13,217 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 11:06:13,217 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 11:06:14,625 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 11:06:14,626 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 11:06:14,626 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 11:06:17,124 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 11:06:17,124 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 11:06:17,124 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 11:06:21,661 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 11:06:21,662 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 11:06:21,662 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 11:06:22,544 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 11:06:23,047 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 11:06:25,882 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 11:06:28,053 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 11:06:28,053 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 11:06:30,431 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 11:06:32,166 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 11:06:34,387 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 11:06:34,387 - wireless_ap_test - INFO - Saving configuration
2025-03-17 11:06:39,586 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 11:06:39,586 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 11:06:39,586 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 11:06:40,445 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:06:40,445 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:06:40,445 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:06:40,445 - wireless_ap_test - INFO - MQTT Process Check: 31912 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
32177 root      1920 S    ash -c ps | grep mosquitto
32179 root      1920 S    grep mosquitto
2025-03-17 11:06:40,467 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:06:40,467 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:06:40,467 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:06:40,561 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:06:40,646 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:06:40,646 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:06:40,646 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:06:40,647 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:06:40,647 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:06:40,647 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:06:40,647 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:06:50,690 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:06:50,690 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:06:50,690 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:06:50,690 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:06:50,690 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:06:50,690 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:06:50,691 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:06:58,140 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 11:06:58,140 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 11:06:58,140 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:07:01,494 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:07:01,623 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:07:01,706 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:07:01,990 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:07:01,990 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 11:07:01,990 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 11:07:01,991 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:07:02,250 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:07:02,250 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 11:07:02,250 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 11:07:02,370 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 11:07:02,371 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 11:07:02,462 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:07:02,462 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 11:07:02,463 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:07:02,463 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:07:03,371 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:07:03,371 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:07:03,371 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:07:03,544 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:07:03,544 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:07:03,623 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:07:03,623 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:07:03,623 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:07:03,674 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:07:04,080 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:07:04,150 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:07:04,150 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:07:04,150 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:07:04,319 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:07:04,319 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:07:06,657 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:07:06,657 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:07:06,739 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:07:06,739 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:07:06,740 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 11:07:06,740 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 11:07:06,740 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 11:07:06,976 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 11:07:06,977 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 11:07:07,164 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "3", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 11:07:07,164 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 11:07:07,164 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 11:07:07,230 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:07:07,230 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:07:07,230 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:07:07,230 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 11:07:07,231 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 11:07:07,231 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:07:07,231 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:07:08,098 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:07:08,098 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:07:08,098 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:07:08,098 - wireless_ap_test - INFO - MQTT Process Check: 32387 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
32512 root      1920 S    ash -c ps | grep mosquitto
32514 root      1920 R    grep mosquitto
2025-03-17 11:07:08,120 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:07:08,120 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:07:08,120 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:07:08,207 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:07:08,289 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:07:08,290 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:07:18,335 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:07:18,336 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:07:18,336 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:07:18,336 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:07:18,336 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:07:18,336 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:07:18,336 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:07:18,337 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 11:11:25,835 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='all', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:11:25,835 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:11:25,836 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:11:27,160 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 11:11:28,425 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:11:28,425 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:11:30,041 - wireless_ap_test - INFO - Filled username
2025-03-17 11:11:30,168 - wireless_ap_test - INFO - Filled password
2025-03-17 11:11:30,338 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:11:30,963 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:11:31,969 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 11:11:33,215 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 11:11:33,215 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 11:11:34,216 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 11:11:34,216 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 11:11:35,418 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 11:11:36,421 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 11:11:36,421 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 11:11:37,599 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 11:11:37,623 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 11:11:37,652 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 11:11:37,675 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 11:11:37,826 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 11:11:37,973 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 11:11:40,170 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 11:11:40,170 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 11:11:40,190 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:11:40,191 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 11:11:40,212 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 11:11:40,387 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:11:41,397 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 11:11:41,397 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 11:11:41,421 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 11:11:41,607 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 11:11:41,621 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 11:11:41,621 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 11:11:41,622 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker - mqtt_broker
2025-03-17 11:11:43,632 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 11:11:44,094 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:11:44,094 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:11:45,335 - wireless_ap_test - INFO - Filled username
2025-03-17 11:11:45,469 - wireless_ap_test - INFO - Filled password
2025-03-17 11:11:45,635 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:11:46,265 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:11:47,270 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:11:48,499 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:11:48,499 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:11:49,776 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:11:49,776 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 11:11:51,520 - wireless_ap_test - INFO - Clicking add button
2025-03-17 11:11:51,596 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-17 11:11:51,596 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-17 11:11:51,597 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-17 11:11:51,597 - wireless_ap_test - ERROR - Error in data_to_server - data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-17 11:11:54,999 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:11:55,128 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:11:55,211 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:11:55,495 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:11:55,496 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 11:11:55,496 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 11:11:55,496 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:11:55,757 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:11:55,757 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 11:11:55,757 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 11:11:55,877 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 11:11:55,877 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 11:11:55,971 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:11:55,971 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 11:11:55,971 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:11:55,972 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 11:11:55,972 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker - mqtt_broker
2025-03-17 11:11:55,972 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 11:11:55,972 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker - mqtt_broker
2025-03-17 11:11:55,972 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:11:56,879 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 11:11:56,879 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:11:56,879 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:11:57,049 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:11:57,049 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:11:57,133 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 11:11:57,133 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:11:57,133 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:11:57,183 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:11:57,600 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 11:11:57,673 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 11:11:57,673 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:11:57,673 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:11:57,849 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 11:11:57,849 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:12:00,207 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:12:00,207 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:12:00,293 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:12:00,293 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:12:00,293 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 11:12:00,293 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 11:12:00,293 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 11:12:00,528 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 11:12:00,717 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "3", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 11:12:00,717 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 11:12:00,717 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 11:12:00,784 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 11:12:00,784 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 11:12:00,784 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 11:12:00,784 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 11:12:00,784 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 11:12:00,785 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:12:00,785 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:12:01,673 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:12:01,674 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:12:01,674 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:12:01,674 - wireless_ap_test - INFO - MQTT Process Check: 526 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
  656 root      1920 S    ash -c ps | grep mosquitto
  658 root      1920 S    grep mosquitto
2025-03-17 11:12:01,697 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:12:01,697 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:12:01,698 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:12:01,785 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:12:01,872 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:12:11,926 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:12:11,926 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:12:11,926 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:12:11,926 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:12:11,926 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:12:11,926 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:12:11,927 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:12:11,927 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 11:12:12,696 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 11:12:12,696 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:12:12,729 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:12:12,730 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:12:12,730 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:12:12,730 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 11:12:12,778 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 11:12:12,833 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:12:12,877 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:12:12,921 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:12:13,174 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 11:12:13,174 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:12:13,175 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 5, Failed: 2
2025-03-17 11:12:45,138 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='all', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 11:12:45,139 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 11:12:45,139 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 11:12:46,395 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 11:12:47,698 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:12:47,699 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:12:49,337 - wireless_ap_test - INFO - Filled username
2025-03-17 11:12:49,467 - wireless_ap_test - INFO - Filled password
2025-03-17 11:12:49,630 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:12:50,252 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:12:51,257 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 11:12:52,643 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 11:12:52,643 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 11:12:53,611 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 11:12:53,612 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 11:12:54,808 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 11:12:55,810 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 11:12:55,810 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 11:12:56,992 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 11:12:57,009 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 11:12:57,031 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 11:12:57,051 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 11:12:57,197 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 11:12:57,331 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 11:12:59,508 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 11:12:59,508 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 11:12:59,524 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:12:59,524 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 11:12:59,539 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 11:12:59,712 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 11:13:00,723 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 11:13:00,723 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 11:13:00,738 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 11:13:00,914 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 11:13:00,925 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 11:13:00,925 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 11:13:00,925 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker - mqtt_broker
2025-03-17 11:13:02,934 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 11:13:03,441 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 11:13:03,441 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 11:13:04,655 - wireless_ap_test - INFO - Filled username
2025-03-17 11:13:04,775 - wireless_ap_test - INFO - Filled password
2025-03-17 11:13:04,937 - wireless_ap_test - INFO - Clicked login button
2025-03-17 11:13:05,569 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 11:13:06,572 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:13:07,836 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:13:07,836 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 11:13:09,079 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 11:13:09,079 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 11:13:10,841 - wireless_ap_test - INFO - Clicking add button
2025-03-17 11:13:12,011 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 11:13:12,513 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 11:13:12,513 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 11:13:13,968 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 11:13:13,968 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 11:13:13,968 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 11:13:16,517 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 11:13:16,517 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 11:13:16,517 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 11:13:21,229 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 11:13:21,229 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 11:13:21,229 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 11:13:22,136 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 11:13:22,638 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 11:13:25,491 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 11:13:27,680 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 11:13:27,681 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 11:13:30,097 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 11:13:31,932 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 11:13:34,169 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 11:13:34,169 - wireless_ap_test - INFO - Saving configuration
2025-03-17 11:13:39,480 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 11:13:39,480 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 11:13:39,480 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 11:13:40,391 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:13:40,391 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:13:40,391 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:13:40,391 - wireless_ap_test - INFO - MQTT Process Check: 526 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 1129 root      1920 S    ash -c ps | grep mosquitto
 1131 root      1920 R    grep mosquitto
2025-03-17 11:13:40,414 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:13:40,414 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:13:40,414 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:13:40,504 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:13:40,590 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:13:40,591 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:13:50,636 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:13:50,636 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:13:50,636 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:13:50,636 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:13:50,636 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:13:50,636 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:13:50,637 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:13:58,090 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 11:13:58,090 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 11:13:58,090 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:14:01,470 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 11:14:01,596 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 11:14:01,679 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 11:14:01,958 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 11:14:01,958 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 11:14:01,958 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 11:14:01,958 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:14:02,226 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:14:02,226 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 11:14:02,226 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 11:14:02,348 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 11:14:02,348 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 11:14:02,440 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:14:02,440 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 11:14:02,440 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:14:02,440 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 11:14:03,415 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 11:14:03,415 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 11:14:03,415 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 11:14:03,593 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 11:14:03,593 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 11:14:03,666 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 11:14:03,666 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 11:14:03,666 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 11:14:03,715 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 11:14:04,104 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 11:14:04,173 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 11:14:04,173 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 11:14:04,173 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 11:14:04,338 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 11:14:04,338 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 11:14:06,677 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 11:14:06,677 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 11:14:06,760 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 11:14:06,760 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 11:14:06,760 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 11:14:06,760 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 11:14:06,760 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 11:14:07,010 - wireless_ap_test - INFO - API authentication successful
2025-03-17 11:14:07,010 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 11:14:07,011 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 11:14:07,203 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "3", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 11:14:07,203 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 11:14:07,203 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 11:14:07,285 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:14:07,285 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:14:07,285 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"4"}]}
2025-03-17 11:14:07,285 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 11:14:07,285 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 11:14:07,285 - wireless_ap_test - INFO - API connection closed
2025-03-17 11:14:07,285 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 11:14:08,171 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 11:14:08,171 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 11:14:08,171 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 11:14:08,171 - wireless_ap_test - INFO - MQTT Process Check: 1331 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 1465 root      1920 S    ash -c ps | grep mosquitto
 1467 root      1920 R    grep mosquitto
2025-03-17 11:14:08,194 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 11:14:08,194 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 11:14:08,194 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 11:14:08,281 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 11:14:08,362 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 11:14:18,405 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 11:14:18,405 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 11:14:18,405 - wireless_ap_test - INFO - Validation Results:
2025-03-17 11:14:18,405 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 11:14:18,405 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 11:14:18,405 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 11:14:18,405 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 11:14:18,406 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 11:14:19,151 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 11:14:19,151 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 11:14:19,173 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 11:14:19,174 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 11:14:19,174 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 11:14:19,234 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 11:14:19,286 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 11:14:19,331 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 11:14:19,586 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 11:14:19,586 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 11:14:19,587 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:02:58,717 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='all', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:02:58,717 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:02:58,717 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:03:00,877 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:03:02,417 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:03:02,419 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:03:04,308 - wireless_ap_test - INFO - Filled username
2025-03-17 12:03:04,443 - wireless_ap_test - INFO - Filled password
2025-03-17 12:03:04,646 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:03:05,308 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:03:06,312 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:03:07,725 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:03:07,725 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:03:08,891 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:03:08,891 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:03:10,099 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:03:11,101 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:03:11,102 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:03:12,309 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:03:12,355 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:03:12,395 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:03:12,429 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:03:12,588 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:03:12,743 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:03:14,967 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:03:14,967 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:03:14,989 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:03:14,989 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:03:15,007 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:03:15,199 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:03:16,212 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:03:16,212 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:03:16,236 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:03:16,425 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:03:16,456 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:03:16,457 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:03:18,472 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:03:18,955 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:03:18,957 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:03:20,282 - wireless_ap_test - INFO - Filled username
2025-03-17 12:03:20,435 - wireless_ap_test - INFO - Filled password
2025-03-17 12:03:20,623 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:03:21,275 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:03:22,280 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:03:23,623 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:03:23,623 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:03:24,973 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:03:24,974 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:03:26,743 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:03:27,923 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:03:28,425 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:03:28,426 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:03:30,105 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:03:30,105 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:03:30,105 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:03:32,681 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:03:32,682 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:03:32,682 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:03:37,519 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:03:37,519 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:03:37,519 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:03:38,444 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:03:38,945 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:03:41,905 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:03:44,098 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:03:44,098 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:03:46,527 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:03:48,443 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:03:50,710 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:03:50,710 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:03:55,942 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:03:55,942 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:03:55,942 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:03:56,820 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:03:56,820 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:03:56,820 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:03:56,821 - wireless_ap_test - INFO - MQTT Process Check: 1331 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 3279 root      1920 S    ash -c ps | grep mosquitto
 3281 root      1920 S    grep mosquitto
2025-03-17 12:03:56,845 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:03:56,845 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:03:56,846 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:03:56,934 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:03:57,017 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:04:07,110 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:04:07,110 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:04:07,110 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:04:07,110 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:04:07,110 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:04:07,110 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:04:07,111 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:04:09,116 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:09,117 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:04:09,118 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:04:09,118 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:10,503 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:04:10,636 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:04:10,718 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:04:11,001 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:04:11,002 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:04:11,002 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:04:11,002 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:04:11,265 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:04:11,265 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:04:11,265 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:04:11,397 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:04:11,397 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:04:11,488 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:04:11,488 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:04:11,488 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:04:11,488 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:04:12,353 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:04:12,354 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:04:12,354 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:04:12,522 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:04:12,522 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:04:12,594 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:04:12,594 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:04:12,594 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:04:12,643 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:04:13,058 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:04:13,128 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:04:13,128 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:04:13,128 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:04:13,301 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:04:13,301 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:04:15,660 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:04:15,661 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:04:15,744 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:04:15,744 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:04:15,744 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:04:15,745 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:04:15,745 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:04:15,985 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:04:15,985 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:04:15,986 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:04:16,168 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:04:16,168 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:04:16,168 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:04:16,236 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:04:16,236 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:04:16,236 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:04:16,236 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:04:16,236 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:04:16,237 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:04:16,237 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 12:04:17,126 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:04:17,126 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:04:17,126 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:04:17,126 - wireless_ap_test - INFO - MQTT Process Check: 3437 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 3561 root      1920 S    ash -c ps | grep mosquitto
 3563 root      1920 S    grep mosquitto
2025-03-17 12:04:17,150 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:04:17,150 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:04:17,150 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:04:17,239 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:04:17,324 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:04:27,364 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:04:27,364 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:04:27,365 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:27,366 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:04:27,366 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:27,366 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:04:28,140 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:04:28,140 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:04:28,163 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:04:28,164 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:04:28,164 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:04:28,164 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:04:28,212 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:04:28,261 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:04:28,307 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:04:28,352 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:04:28,611 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:04:28,612 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:05:44,229 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:05:44,229 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:05:44,230 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:05:45,550 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:05:46,846 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:05:46,848 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:05:48,712 - wireless_ap_test - INFO - Filled username
2025-03-17 12:05:48,854 - wireless_ap_test - INFO - Filled password
2025-03-17 12:05:49,131 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:05:49,852 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:05:50,858 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:05:52,476 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:05:52,476 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:05:53,782 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:05:53,782 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:05:54,985 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:05:55,988 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:05:55,988 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:05:57,230 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:05:57,264 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:05:57,291 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:05:57,333 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:05:57,488 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:05:57,638 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:05:59,841 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:05:59,842 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:05:59,861 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:05:59,862 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:05:59,880 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:06:00,069 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:06:01,078 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:06:01,078 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:06:01,105 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:06:01,295 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:06:01,321 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:06:01,322 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:06:03,336 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:06:03,809 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:06:03,810 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:06:05,058 - wireless_ap_test - INFO - Filled username
2025-03-17 12:06:05,197 - wireless_ap_test - INFO - Filled password
2025-03-17 12:06:05,376 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:06:06,016 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:06:07,025 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:06:08,340 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:06:08,340 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:06:09,674 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:06:09,675 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:06:11,465 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:06:12,659 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:06:13,161 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:06:13,161 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:06:14,649 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:06:14,649 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:06:14,649 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:06:17,270 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:06:17,270 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:06:17,270 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:06:22,136 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:06:22,136 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:06:22,137 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:06:23,041 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:06:23,543 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:06:26,468 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:06:28,669 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:06:28,669 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:06:31,083 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:06:32,989 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:06:35,250 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:06:35,250 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:06:40,470 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:06:40,470 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:06:40,470 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:06:41,417 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:06:41,418 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:06:41,418 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:06:41,418 - wireless_ap_test - INFO - MQTT Process Check: 3437 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 4096 root      1920 S    ash -c ps | grep mosquitto
 4098 root      1920 S    grep mosquitto
2025-03-17 12:06:41,442 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:06:41,442 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:06:41,442 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:06:41,533 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:06:41,619 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:06:51,674 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:06:51,674 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:06:51,674 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:06:51,674 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:06:51,674 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:06:51,675 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:06:51,675 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:06:53,680 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:06:53,681 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:06:53,681 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:06:53,682 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:06:55,049 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:06:55,181 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:06:55,263 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:06:55,544 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:06:55,545 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:06:55,545 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:06:55,545 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:06:55,810 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:06:55,810 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:06:55,810 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:06:55,932 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:06:55,932 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:06:56,020 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:06:56,020 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:06:56,020 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:06:56,020 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:06:56,952 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:06:56,952 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:06:56,952 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:06:57,136 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:06:57,136 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:06:57,207 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:06:57,207 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:06:57,207 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:06:57,259 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:06:57,669 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:06:57,742 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:06:57,742 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:06:57,742 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:06:57,915 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:06:57,915 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:07:00,277 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:07:00,277 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:07:00,363 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:07:00,364 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:07:00,364 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:07:00,364 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:07:00,364 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:07:00,608 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:07:00,790 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:07:00,790 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:07:00,790 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:07:00,858 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:07:00,858 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:07:00,858 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:07:00,858 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:07:00,858 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:07:00,858 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:07:00,858 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT and DTS configs
2025-03-17 12:07:01,723 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:07:01,723 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:07:01,723 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:07:01,723 - wireless_ap_test - INFO - MQTT Process Check: 4251 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 4375 root      1920 S    ash -c ps | grep mosquitto
 4377 root      1920 S    grep mosquitto
2025-03-17 12:07:01,746 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:07:01,746 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:07:01,746 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:07:01,842 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:07:01,927 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:07:11,970 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:07:11,970 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:07:11,970 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:07:11,970 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:07:11,970 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:07:11,970 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:07:11,971 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:07:12,718 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:07:12,718 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:07:12,740 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:07:12,741 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:07:12,741 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:07:12,741 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:07:12,792 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:07:12,853 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:07:12,897 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:07:12,943 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:07:13,201 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:07:13,201 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:07:13,202 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:07:13,202 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:07:13,202 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:07:13,202 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:07:13,203 - wireless_ap_test - INFO - Cleanup completed for data_to_server - data_to_server
2025-03-17 12:07:13,203 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:11:07,054 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:11:07,055 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:11:07,056 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:11:08,541 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:11:09,997 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:11:09,997 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:11:11,629 - wireless_ap_test - INFO - Filled username
2025-03-17 12:11:11,760 - wireless_ap_test - INFO - Filled password
2025-03-17 12:11:11,950 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:11:12,581 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:11:13,584 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:11:14,803 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:11:14,803 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:11:15,798 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:11:15,798 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:11:16,983 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:11:17,985 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:11:17,986 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:11:19,170 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:11:19,195 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:11:19,218 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:11:19,241 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:11:19,385 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:11:19,524 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:11:21,717 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:11:21,717 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:11:21,737 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:11:21,737 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:11:21,757 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:11:21,952 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:11:22,961 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:11:22,961 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:11:22,978 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:11:23,162 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:11:23,173 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:11:23,173 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:11:25,182 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:11:25,478 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:11:25,479 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:11:26,749 - wireless_ap_test - INFO - Filled username
2025-03-17 12:11:26,871 - wireless_ap_test - INFO - Filled password
2025-03-17 12:11:27,043 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:11:27,685 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:11:28,687 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:11:29,912 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:11:29,912 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:11:31,128 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:11:31,128 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:11:32,855 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:11:34,024 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:11:34,526 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:11:34,526 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:11:35,959 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:11:35,959 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:11:35,959 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:11:38,485 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:11:38,486 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:11:38,486 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:11:43,115 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:11:43,116 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:11:43,116 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:11:44,009 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:11:44,512 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:11:47,379 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:11:49,567 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:11:49,567 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:11:51,986 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:11:53,756 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:11:55,996 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:11:55,996 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:12:01,208 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:12:01,208 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:12:01,208 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:12:02,114 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:12:02,114 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:12:02,114 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:12:02,114 - wireless_ap_test - INFO - MQTT Process Check: 4251 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 4926 root      1920 S    ash -c ps | grep mosquitto
 4928 root      1920 S    grep mosquitto
2025-03-17 12:12:02,137 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:12:02,137 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:12:02,138 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:12:02,238 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:12:02,326 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:12:17,419 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:12:17,420 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:12:17,420 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:12:17,420 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:12:17,420 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:12:17,420 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:12:17,420 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:12:19,426 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:12:19,427 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:12:19,428 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:12:19,428 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:12:20,852 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:12:20,979 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:12:21,063 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:12:21,351 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:12:21,351 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:12:21,351 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:12:21,352 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:12:21,611 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:12:21,611 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:12:21,611 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:12:21,739 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:12:21,739 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:12:21,826 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:12:21,826 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:12:21,826 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:12:21,827 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:12:22,689 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:12:22,689 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:12:22,689 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:12:22,849 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:12:22,849 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:12:22,918 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:12:22,919 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:12:22,919 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:12:22,969 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:12:23,382 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:12:23,455 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:12:23,455 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:12:23,455 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:12:23,627 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:12:23,627 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:12:25,985 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:12:25,985 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:12:26,068 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:12:26,068 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:12:26,068 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:12:26,068 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:12:26,068 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:12:26,307 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:12:26,493 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:12:26,493 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:12:26,493 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:12:26,562 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:12:26,562 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:12:26,562 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:12:26,562 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:12:26,563 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:12:26,563 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:12:26,563 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:12:27,447 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:12:27,447 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:12:27,447 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:12:27,447 - wireless_ap_test - INFO - MQTT Process Check: 5081 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 5205 root      1920 S    ash -c ps | grep mosquitto
 5207 root      1920 S    grep mosquitto
2025-03-17 12:12:27,482 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:12:27,482 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:12:27,483 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:12:27,569 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:12:27,652 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:12:39,896 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:12:39,896 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:12:39,896 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:12:39,896 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:12:39,896 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:12:39,896 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:12:39,897 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:12:40,642 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:12:40,643 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:12:40,666 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:12:40,666 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:12:40,666 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:12:40,666 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:12:40,715 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:12:40,763 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:12:40,811 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:12:40,856 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:12:41,115 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:12:41,115 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:12:41,116 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:12:51,661 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:12:51,661 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:12:51,662 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:12:52,882 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:12:54,034 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:12:54,035 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:12:55,684 - wireless_ap_test - INFO - Filled username
2025-03-17 12:12:55,813 - wireless_ap_test - INFO - Filled password
2025-03-17 12:12:55,977 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:12:56,608 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:12:57,613 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:12:58,838 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:12:58,839 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:12:59,867 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:12:59,867 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:13:01,048 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:13:02,049 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:13:02,049 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:13:03,235 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:13:03,258 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:13:03,281 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:13:03,312 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:13:03,468 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:13:03,608 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:13:05,826 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:13:05,826 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:13:05,843 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:13:05,843 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:13:05,861 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:13:06,053 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:13:07,065 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:13:07,066 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:13:07,084 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:13:07,270 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:13:07,282 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:13:07,282 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:13:09,291 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:13:09,712 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:13:09,712 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:13:10,851 - wireless_ap_test - INFO - Filled username
2025-03-17 12:13:10,985 - wireless_ap_test - INFO - Filled password
2025-03-17 12:13:11,145 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:13:11,774 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:13:12,777 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:13:14,002 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:13:14,002 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:13:15,244 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:13:15,244 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:13:16,998 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:13:18,172 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:13:18,674 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:13:18,674 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:13:20,112 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:13:20,113 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:13:20,113 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:13:22,668 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:13:22,669 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:13:22,669 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:13:27,320 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:13:27,320 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:13:27,320 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:13:28,224 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:13:28,727 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:13:31,609 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:13:33,804 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:13:33,804 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:13:36,210 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:13:38,025 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:13:40,286 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:13:40,286 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:13:45,496 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:13:45,496 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:13:45,497 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:13:46,396 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:13:46,397 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:13:46,397 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:13:46,397 - wireless_ap_test - INFO - MQTT Process Check: 5081 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 5658 root      1920 S    ash -c ps | grep mosquitto
 5660 root      1920 S    grep mosquitto
2025-03-17 12:13:46,420 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:13:46,420 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:13:46,421 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:13:46,507 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:13:46,589 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:13:46,589 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:13:46,589 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:13:46,589 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:13:46,589 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:13:46,590 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:13:46,590 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:13:56,630 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:13:56,630 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:13:56,631 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:13:56,631 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:13:56,631 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:13:56,631 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:13:56,631 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:13:58,637 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:13:58,639 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:13:58,639 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:13:58,639 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:14:00,022 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:14:00,150 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:14:00,235 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:14:00,522 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:14:00,523 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:14:00,523 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:14:00,523 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:14:00,805 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:14:00,805 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:14:00,805 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:14:00,930 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:14:00,930 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:14:01,046 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:14:01,046 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:14:01,046 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:14:01,046 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:14:01,909 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:14:01,909 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:14:01,909 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:14:02,073 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:14:02,073 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:14:02,144 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:14:02,144 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:14:02,144 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:14:02,198 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:14:02,613 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:14:02,685 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:14:02,685 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:14:02,685 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:14:02,858 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:14:02,858 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:14:05,217 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:14:05,217 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:14:05,309 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:14:05,309 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:14:05,309 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:14:05,309 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:14:05,310 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:14:05,549 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:14:05,550 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:14:05,734 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:14:05,734 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:14:05,734 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:14:05,801 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:14:05,802 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:14:05,802 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:14:05,802 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:14:05,802 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:14:05,802 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:14:05,802 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:14:06,665 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:14:06,665 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:14:06,666 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:14:06,666 - wireless_ap_test - INFO - MQTT Process Check: 5809 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 5939 root      1920 S    ash -c ps | grep mosquitto
 5941 root      1920 S    grep mosquitto
2025-03-17 12:14:06,688 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:14:06,688 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:14:06,688 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:14:06,776 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:14:06,862 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:14:19,175 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:14:19,175 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:14:19,175 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:14:19,175 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:14:19,175 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:14:19,175 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:14:19,176 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:14:19,924 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:14:19,924 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:14:19,948 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:14:19,948 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:14:19,948 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:14:19,948 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:14:19,999 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:14:20,047 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:14:20,098 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:14:20,146 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:14:20,401 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:14:20,402 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:16:55,521 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:16:55,521 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:16:55,521 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:16:56,781 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:16:57,949 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:16:57,949 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:16:59,603 - wireless_ap_test - INFO - Filled username
2025-03-17 12:16:59,730 - wireless_ap_test - INFO - Filled password
2025-03-17 12:16:59,894 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:17:00,563 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:17:01,565 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:17:02,830 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:17:02,831 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:17:03,894 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:17:03,894 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:17:05,080 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:17:06,082 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:17:06,082 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:17:07,320 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:17:07,346 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:17:07,374 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:17:07,400 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:17:07,549 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:17:07,698 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:17:09,909 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:17:09,909 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:17:09,930 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:17:09,931 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:17:09,947 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:17:10,125 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:17:11,137 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:17:11,138 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:17:11,155 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:17:11,343 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:17:11,356 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:17:11,356 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:17:13,368 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:17:13,798 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:17:13,798 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:17:14,976 - wireless_ap_test - INFO - Filled username
2025-03-17 12:17:15,107 - wireless_ap_test - INFO - Filled password
2025-03-17 12:17:15,270 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:17:15,913 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:17:16,914 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:17:18,151 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:17:18,151 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:17:19,403 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:17:19,403 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:17:21,197 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:17:22,368 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:17:22,872 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:17:22,872 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:17:24,342 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:17:24,342 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:17:24,342 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:17:26,889 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:17:26,889 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:17:26,889 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:17:31,547 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:17:31,547 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:17:31,547 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:17:32,456 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:17:32,959 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:17:35,837 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:17:38,025 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:17:38,025 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:17:40,429 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:17:42,245 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:17:44,504 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:17:44,505 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:17:49,715 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:17:49,715 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:17:49,715 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:17:50,608 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:17:50,608 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:17:50,609 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:17:50,609 - wireless_ap_test - INFO - MQTT Process Check: 5809 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 6453 root      1920 S    ash -c ps | grep mosquitto
 6455 root      1920 S    grep mosquitto
2025-03-17 12:17:50,633 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:17:50,633 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:17:50,633 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:17:50,722 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:17:50,809 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:17:50,809 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:17:50,810 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:17:50,810 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:17:50,810 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:17:50,810 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:17:50,810 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:18:00,861 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:18:00,861 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:18:00,861 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:18:00,861 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:18:00,861 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:18:00,861 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:18:00,862 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:18:02,867 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:18:02,869 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:18:02,869 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:18:02,869 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:18:04,241 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:18:04,368 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:18:04,450 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:18:04,740 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:18:04,741 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:18:04,741 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:18:04,741 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:18:05,008 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:18:05,008 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:18:05,008 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:18:05,152 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:18:05,152 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:18:05,248 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:18:05,248 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:18:05,248 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:18:05,248 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:18:06,121 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:18:06,121 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:18:06,121 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:18:06,291 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:18:06,292 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:18:06,362 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:18:06,363 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:18:06,363 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:18:06,415 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:18:06,837 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:18:06,909 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:18:06,909 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:18:06,909 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:18:07,079 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:18:07,079 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:18:09,440 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:18:09,440 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:18:09,524 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:18:09,524 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:18:09,524 - wireless_ap_test - INFO - Running validation after SSH data_to_server with latest MQTT and DTS configs
2025-03-17 12:18:10,397 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:18:10,397 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:18:10,397 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:18:10,397 - wireless_ap_test - INFO - MQTT Process Check: 6599 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 6725 root      1920 S    ash -c ps | grep mosquitto
 6727 root      1920 S    grep mosquitto
2025-03-17 12:18:10,419 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:18:10,419 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:18:10,420 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:18:10,509 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:18:10,606 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:18:20,648 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:18:20,648 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:18:20,649 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:18:20,894 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:18:20,895 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:18:21,076 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:18:21,076 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:18:21,076 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:18:21,147 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:18:21,147 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:18:21,147 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:18:21,147 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:18:21,147 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:18:21,147 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:18:21,147 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:18:22,038 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:18:22,039 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:18:22,039 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:18:22,039 - wireless_ap_test - INFO - MQTT Process Check: 6599 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 6758 root      1920 S    ash -c ps | grep mosquitto
 6760 root      1920 S    grep mosquitto
2025-03-17 12:18:22,061 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:18:22,061 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:18:22,061 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:18:22,150 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:18:22,238 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:18:32,282 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:18:32,283 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:18:32,283 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:18:32,283 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:18:32,283 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:18:32,283 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:18:32,283 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 12:18:32,284 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:18:32,284 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:18:32,284 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:18:32,284 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:18:32,284 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:18:33,063 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:18:33,063 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:18:33,087 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:18:33,087 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:18:33,087 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:18:33,087 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:18:33,135 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:18:33,183 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:18:33,229 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:18:33,273 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:18:33,531 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:18:33,531 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:18:33,532 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:18:33,532 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:18:33,532 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:18:33,532 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:18:33,532 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:18:33,533 - wireless_ap_test - INFO - Test execution completed. Total: 8, Passed: 7, Failed: 1
2025-03-17 12:25:33,790 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:25:33,790 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:25:33,790 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:25:35,121 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:25:36,473 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:25:36,473 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:25:38,426 - wireless_ap_test - INFO - Filled username
2025-03-17 12:25:38,554 - wireless_ap_test - INFO - Filled password
2025-03-17 12:25:38,775 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:25:39,430 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:25:40,436 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:25:41,822 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:25:41,823 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:25:43,023 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:25:43,023 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:25:44,219 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:25:45,221 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:25:45,221 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:25:46,405 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:25:46,425 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:25:46,444 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:25:46,465 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:25:46,605 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:25:46,745 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:25:48,983 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:25:48,983 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:25:49,013 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:25:49,013 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:25:49,038 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:25:49,270 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:25:50,282 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:25:50,282 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:25:50,301 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:25:50,488 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:25:50,508 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:25:50,509 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:25:52,521 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:25:52,876 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:25:52,876 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:25:54,200 - wireless_ap_test - INFO - Filled username
2025-03-17 12:25:54,323 - wireless_ap_test - INFO - Filled password
2025-03-17 12:25:54,491 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:25:55,125 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:25:56,127 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:25:57,355 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:25:57,355 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:25:58,586 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:25:58,586 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:26:00,382 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:26:01,553 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:26:02,055 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:26:02,055 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:26:03,640 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:26:03,640 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:26:03,640 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:26:06,249 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:26:06,249 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:26:06,249 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:26:10,931 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:26:10,931 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:26:10,931 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:26:11,857 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:26:12,359 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:26:15,269 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:26:17,459 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:26:17,459 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:26:19,881 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:26:21,754 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:26:24,017 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:26:24,018 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:26:29,238 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:26:29,238 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:26:29,238 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:26:30,132 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:26:30,132 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:26:30,133 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:26:30,133 - wireless_ap_test - INFO - MQTT Process Check: 6599 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 7387 root      1920 S    ash -c ps | grep mosquitto
 7389 root      1920 S    grep mosquitto
2025-03-17 12:26:30,156 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:26:30,156 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:26:30,157 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:26:30,249 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:26:30,333 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:26:40,386 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:26:40,386 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:26:40,386 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:26:40,386 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:26:40,386 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:26:40,386 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:26:40,386 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:26:42,391 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:26:42,392 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:26:42,392 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:26:42,392 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:26:43,827 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:26:43,956 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:26:44,041 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:26:44,320 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:26:44,321 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:26:44,321 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:26:44,321 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:26:44,589 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:26:44,589 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:26:44,589 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:26:44,706 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:26:44,706 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:26:44,794 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:26:44,794 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:26:44,795 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:26:44,795 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:26:45,658 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:26:45,658 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:26:45,658 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:26:45,828 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:26:45,828 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:26:45,898 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:26:45,898 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:26:45,898 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:26:45,948 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:26:46,373 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:26:46,447 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:26:46,447 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:26:46,447 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:26:46,623 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:26:46,623 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:26:48,989 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:26:48,989 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:26:49,078 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:26:49,079 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:26:49,079 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:26:49,079 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:26:49,079 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:26:49,320 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:26:49,321 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:26:49,321 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:26:49,321 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:26:49,509 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:26:49,509 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:26:49,509 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:26:49,577 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:26:49,577 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:26:49,577 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:26:49,577 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:26:49,578 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:26:49,578 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:26:49,578 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:26:50,520 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:26:50,520 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:26:50,520 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:26:50,520 - wireless_ap_test - INFO - MQTT Process Check: 7537 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 7665 root      1920 S    ash -c ps | grep mosquitto
 7667 root      1920 S    grep mosquitto
2025-03-17 12:26:50,542 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:26:50,542 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:26:50,542 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:26:50,638 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:26:50,743 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:27:00,785 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:27:00,785 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:27:00,786 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:27:00,786 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:27:00,786 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:27:00,786 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:27:00,786 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 12:27:00,787 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:27:00,787 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:27:00,787 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:27:00,787 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:27:00,787 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:27:01,568 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:27:01,568 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:27:01,592 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:27:01,592 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:27:01,592 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:27:01,592 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:27:01,642 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:27:01,689 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:27:01,735 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:27:01,780 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:27:02,037 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:27:02,037 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:27:02,037 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:27:02,037 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:27:02,037 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:27:02,038 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:27:02,038 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:27:02,038 - wireless_ap_test - ERROR - Test execution failed: name 'all_results' is not defined
2025-03-17 12:27:21,665 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:27:21,666 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:27:21,666 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:27:22,975 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:27:24,110 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:27:24,111 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:27:25,675 - wireless_ap_test - INFO - Filled username
2025-03-17 12:27:25,802 - wireless_ap_test - INFO - Filled password
2025-03-17 12:27:26,068 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:27:26,705 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:27:27,709 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:27:28,945 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:27:28,945 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:27:29,925 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:27:29,925 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:27:31,118 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:27:32,120 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:27:32,120 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:27:33,304 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:27:33,323 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:27:33,346 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:27:33,369 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:27:33,518 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:27:33,656 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:27:35,848 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:27:35,848 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:27:35,867 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:27:35,867 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:27:35,878 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:27:36,053 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:27:37,063 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:27:37,063 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:27:37,076 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:27:37,270 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:27:37,281 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:27:37,281 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:27:39,289 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:27:39,711 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:27:39,712 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:27:40,949 - wireless_ap_test - INFO - Filled username
2025-03-17 12:27:41,070 - wireless_ap_test - INFO - Filled password
2025-03-17 12:27:41,240 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:27:41,883 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:27:42,886 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:27:44,167 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:27:44,167 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:27:45,472 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:27:45,473 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:27:47,251 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:27:48,419 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:27:48,922 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:27:48,922 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:27:50,393 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:27:50,393 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:27:50,393 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:27:52,943 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:27:52,943 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:27:52,943 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:27:57,650 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:27:57,650 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:27:57,650 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:27:58,595 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:27:59,097 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:28:02,006 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:28:04,206 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:28:04,206 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:28:06,635 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:28:08,485 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:28:10,747 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:28:10,747 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:28:15,965 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:28:15,965 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:28:15,965 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:28:16,856 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:28:16,856 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:28:16,856 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:28:16,856 - wireless_ap_test - INFO - MQTT Process Check: 7537 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 8128 root      1920 S    ash -c ps | grep mosquitto
 8130 root      1920 S    grep mosquitto
2025-03-17 12:28:16,880 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:28:16,881 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:28:16,881 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:28:16,971 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:28:17,057 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:28:17,058 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:28:27,107 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:28:27,107 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:28:27,108 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:28:27,108 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:28:27,108 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:28:27,108 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:28:27,108 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:28:29,114 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:28:29,116 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:28:29,116 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:28:29,116 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:28:30,486 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:28:30,615 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:28:30,698 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:28:30,986 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:28:30,986 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:28:30,986 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:28:30,987 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:28:31,247 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:28:31,247 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:28:31,247 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:28:31,365 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:28:31,366 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:28:31,456 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:28:31,456 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:28:31,456 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:28:31,456 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:28:32,321 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:28:32,321 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:28:32,321 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:28:32,486 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:28:32,486 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:28:32,557 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:28:32,557 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:28:32,557 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:28:32,607 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:28:33,031 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:28:33,105 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:28:33,105 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:28:33,105 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:28:33,281 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:28:33,281 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:28:35,639 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:28:35,639 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:28:35,724 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:28:35,724 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:28:35,724 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:28:35,724 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:28:35,724 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:28:35,968 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:28:36,149 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:28:36,149 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 12:28:36,150 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 12:28:36,219 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:28:36,219 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:28:36,219 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 12:28:36,219 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:28:36,219 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:28:36,220 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:28:36,220 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:28:37,101 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:28:37,101 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:28:37,101 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:28:37,101 - wireless_ap_test - INFO - MQTT Process Check: 8284 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 8408 root      1920 S    ash -c ps | grep mosquitto
 8410 root      1920 R    grep mosquitto
2025-03-17 12:28:37,124 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:28:37,124 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:28:37,124 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:28:37,211 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:28:37,296 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:28:47,337 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:28:47,337 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:28:47,337 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:28:47,337 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:28:47,337 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:28:47,337 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:28:47,338 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:28:48,090 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:28:48,091 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:28:48,114 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:28:48,115 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:28:48,115 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:28:48,115 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:28:48,164 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:28:48,212 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:28:48,259 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:28:48,305 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:28:48,563 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 12:28:48,564 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:28:48,564 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:29:00,312 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:29:00,313 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:29:00,313 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:29:01,599 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:29:02,728 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:29:02,729 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:29:04,317 - wireless_ap_test - INFO - Filled username
2025-03-17 12:29:04,445 - wireless_ap_test - INFO - Filled password
2025-03-17 12:29:04,612 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:29:05,261 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:29:06,267 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:29:07,492 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:29:07,492 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:29:08,474 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:29:08,474 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:29:09,660 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:29:10,663 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:29:10,663 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:29:11,878 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:29:11,903 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:29:11,929 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:29:11,951 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:29:12,097 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:29:12,236 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:29:14,440 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:29:14,440 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:29:14,458 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:29:14,459 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:29:14,477 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:29:14,644 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:29:15,656 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:29:15,656 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:29:15,673 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:29:15,862 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:29:15,875 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:29:15,876 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:29:17,888 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:29:18,340 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:29:18,340 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:29:19,518 - wireless_ap_test - INFO - Filled username
2025-03-17 12:29:19,650 - wireless_ap_test - INFO - Filled password
2025-03-17 12:29:19,805 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:29:20,428 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:29:21,431 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:29:22,654 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:29:22,654 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:29:23,883 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:29:23,883 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:29:25,611 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:29:26,777 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:29:27,279 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:29:27,279 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:29:28,714 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:29:28,715 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:29:28,715 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:29:31,227 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:29:31,227 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:29:31,227 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:29:35,874 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:29:35,874 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:29:35,874 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:29:36,768 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:29:37,271 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:29:40,120 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:29:42,305 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:29:42,305 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:29:44,683 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:29:46,506 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:29:48,750 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:29:48,750 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:29:53,958 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:29:53,958 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:29:53,958 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:29:54,825 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:29:54,825 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:29:54,825 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:29:54,826 - wireless_ap_test - INFO - MQTT Process Check: 8284 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 8863 root      1920 S    ash -c ps | grep mosquitto
 8865 root      1920 R    grep mosquitto
2025-03-17 12:29:54,847 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:29:54,848 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:29:54,848 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:29:54,937 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:29:55,020 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:30:05,063 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:30:05,063 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:30:05,063 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:30:05,063 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:30:05,063 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:30:05,063 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:30:05,063 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:30:07,067 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:30:07,069 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:30:07,069 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:30:07,069 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:30:08,436 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:30:08,570 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:30:08,653 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:30:08,931 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:30:08,931 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:30:08,932 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:30:08,932 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:30:09,202 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:30:09,202 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:30:09,202 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:30:09,323 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:30:09,324 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:30:09,424 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:30:09,424 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:30:09,425 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:30:09,425 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:30:10,289 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:30:10,289 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:30:10,290 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:30:10,454 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:30:10,454 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:30:10,527 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:30:10,527 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:30:10,527 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:30:10,575 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:30:10,995 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:30:11,066 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:30:11,066 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:30:11,066 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:30:11,239 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:30:11,239 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:30:13,599 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:30:13,599 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:30:13,683 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:30:13,683 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:30:13,683 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:30:14,441 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:30:14,441 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:30:14,464 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:30:14,464 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:30:14,464 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:30:14,464 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:30:14,515 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:30:14,562 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:30:14,608 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:30:14,652 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:30:14,906 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:30:15,162 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:30:15,163 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:30:15,163 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:30:15,163 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:30:15,328 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 12:30:15,328 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 12:30:15,328 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 12:30:15,415 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 12:30:15,561 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 12:30:15,561 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 12:30:15,561 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 12:30:15,561 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 12:30:15,705 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 12:30:15,706 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 12:30:15,706 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 12:30:15,706 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 12:30:15,849 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 12:30:15,849 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 12:30:15,849 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 12:30:15,850 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 12:30:15,850 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 12:30:15,850 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 12:30:15,850 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 12:30:16,072 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 12:30:16,072 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - Delete request:
2025-03-17 12:30:16,255 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 12:30:16,326 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 12:30:16,326 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:30:16,326 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:30:17,198 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:30:17,198 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:30:17,199 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:30:17,199 - wireless_ap_test - INFO - MQTT Process Check: 9012 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 9228 root      1920 S    ash -c ps | grep mosquitto
 9230 root      1920 S    grep mosquitto
2025-03-17 12:30:17,219 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 12:30:17,301 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 12:30:17,391 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 12:30:17,392 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:30:27,446 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:30:27,446 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - DTS Failures: ["instanceName (expected 'test_instance3', got '')", 'DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 12:30:27,447 - wireless_ap_test - INFO - Final validation completed with success: False
2025-03-17 12:30:27,448 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:30:27,449 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:30:27,449 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:30:27,449 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:30:27,449 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:30:28,205 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:30:28,205 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:30:28,227 - wireless_ap_test - ERROR - No sections found to delete
2025-03-17 12:30:28,227 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:30:28,227 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:30:28,227 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - Delete request:
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 12:30:28,228 - wireless_ap_test - WARNING - Failed to delete Data to Server configuration: Not connected to API, call connect() first
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:30:28,228 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 12:30:53,053 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 12:30:53,054 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 12:30:53,054 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 12:30:54,543 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 12:30:55,755 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:30:55,755 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:30:57,432 - wireless_ap_test - INFO - Filled username
2025-03-17 12:30:57,562 - wireless_ap_test - INFO - Filled password
2025-03-17 12:30:57,720 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:30:58,353 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:30:59,355 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 12:31:00,584 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 12:31:00,584 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 12:31:01,572 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 12:31:01,572 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 12:31:02,756 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 12:31:03,759 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 12:31:03,760 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 12:31:04,963 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 12:31:04,988 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 12:31:05,008 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 12:31:05,034 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 12:31:05,180 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 12:31:05,324 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 12:31:07,532 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 12:31:07,532 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 12:31:07,548 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:31:07,548 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 12:31:07,564 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 12:31:07,737 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 12:31:08,748 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 12:31:08,748 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 12:31:08,764 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 12:31:08,953 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 12:31:08,965 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 12:31:08,965 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 12:31:10,975 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 12:31:11,401 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 12:31:11,402 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 12:31:12,567 - wireless_ap_test - INFO - Filled username
2025-03-17 12:31:12,696 - wireless_ap_test - INFO - Filled password
2025-03-17 12:31:12,860 - wireless_ap_test - INFO - Clicked login button
2025-03-17 12:31:13,501 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 12:31:14,504 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:31:15,723 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:31:15,724 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 12:31:16,938 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 12:31:16,938 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 12:31:18,687 - wireless_ap_test - INFO - Clicking add button
2025-03-17 12:31:19,854 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 12:31:20,355 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 12:31:20,355 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 12:31:21,780 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 12:31:21,780 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 12:31:21,780 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 12:31:24,301 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 12:31:24,302 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 12:31:24,302 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 12:31:28,920 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 12:31:28,921 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 12:31:28,921 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 12:31:29,794 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 12:31:30,297 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 12:31:33,128 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 12:31:35,307 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 12:31:35,307 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 12:31:37,685 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 12:31:39,467 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 12:31:41,708 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 12:31:41,708 - wireless_ap_test - INFO - Saving configuration
2025-03-17 12:31:46,906 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 12:31:46,907 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 12:31:46,907 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 12:31:47,765 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:31:47,765 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:31:47,765 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:31:47,766 - wireless_ap_test - INFO - MQTT Process Check: 9012 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 9663 root      1920 S    ash -c ps | grep mosquitto
 9665 root      1920 R    grep mosquitto
2025-03-17 12:31:47,787 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 12:31:47,787 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 12:31:47,788 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 12:31:47,875 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 12:31:47,958 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 12:31:47,958 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 12:31:47,959 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 12:31:47,959 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 12:31:47,959 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 12:31:47,959 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 12:31:47,959 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:31:58,000 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:31:58,000 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:31:58,000 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:31:58,000 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 12:31:58,000 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:31:58,000 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 12:31:58,000 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 12:32:00,005 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:32:00,007 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 12:32:00,007 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 12:32:00,007 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 12:32:01,366 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 12:32:01,492 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 12:32:01,575 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 12:32:01,855 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 12:32:01,856 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 12:32:01,856 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 12:32:01,856 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:32:02,120 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:32:02,120 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 12:32:02,120 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 12:32:02,243 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 12:32:02,243 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 12:32:02,333 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:32:02,333 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:32:02,334 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:32:02,334 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 12:32:03,201 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 12:32:03,201 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 12:32:03,201 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 12:32:03,364 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 12:32:03,364 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 12:32:03,432 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 12:32:03,432 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 12:32:03,432 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 12:32:03,482 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 12:32:03,908 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 12:32:03,978 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 12:32:03,978 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 12:32:03,978 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 12:32:04,149 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 12:32:04,149 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 12:32:06,505 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 12:32:06,505 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 12:32:06,588 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:32:06,588 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 12:32:06,588 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:32:07,340 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:32:07,340 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:32:07,364 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 12:32:07,364 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 12:32:07,364 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 12:32:07,364 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 12:32:07,414 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 12:32:07,461 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 12:32:07,507 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 12:32:07,551 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 12:32:07,807 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 12:32:08,052 - wireless_ap_test - INFO - API authentication successful
2025-03-17 12:32:08,052 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 12:32:08,052 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 12:32:08,052 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 12:32:08,053 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 12:32:08,222 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 12:32:08,222 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 12:32:08,222 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 12:32:08,309 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 12:32:08,309 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 12:32:08,310 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 12:32:08,310 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 12:32:08,310 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 12:32:08,310 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 12:32:08,310 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 12:32:08,457 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 12:32:08,457 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 12:32:08,457 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 12:32:08,457 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 12:32:08,598 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 12:32:08,598 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 12:32:08,598 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 12:32:08,598 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 12:32:08,739 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 12:32:08,739 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 12:32:08,739 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 12:32:08,740 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 12:32:08,740 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 12:32:08,740 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 12:32:08,740 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 12:32:08,963 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 12:32:08,964 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - Delete request:
2025-03-17 12:32:09,143 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 12:32:09,215 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 12:32:09,215 - wireless_ap_test - INFO - API connection closed
2025-03-17 12:32:09,215 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 12:32:10,091 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 12:32:10,091 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 12:32:10,091 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 12:32:10,091 - wireless_ap_test - INFO - MQTT Process Check: 9818 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
10030 root      1920 S    ash -c ps | grep mosquitto
10032 root      1920 S    grep mosquitto
2025-03-17 12:32:10,113 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 12:32:10,195 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 12:32:10,283 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 12:32:10,283 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 12:32:10,283 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 12:32:10,284 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 12:32:10,284 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 12:32:10,284 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 12:32:10,284 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 12:32:20,327 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 12:32:20,327 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 12:32:20,327 - wireless_ap_test - INFO - Validation Results:
2025-03-17 12:32:20,327 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 12:32:20,328 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 12:32:20,328 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 12:32:20,328 - wireless_ap_test - INFO - DTS Failures: ["instanceName (expected 'test_instance3', got '')", 'DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - Final validation completed with success: False
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 12:32:20,329 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 12:32:21,089 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 12:32:21,089 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 12:32:21,111 - wireless_ap_test - ERROR - No sections found to delete
2025-03-17 12:32:21,111 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - Delete request:
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 12:32:21,112 - wireless_ap_test - WARNING - Failed to delete Data to Server configuration: Not connected to API, call connect() first
2025-03-17 12:32:21,112 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 12:32:21,113 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 13:03:39,337 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:03:39,337 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:03:39,337 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:03:40,636 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:03:41,933 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:03:41,933 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:03:43,615 - wireless_ap_test - INFO - Filled username
2025-03-17 13:03:43,742 - wireless_ap_test - INFO - Filled password
2025-03-17 13:03:43,921 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:03:44,588 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:03:45,603 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:03:46,972 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:03:46,972 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:03:48,178 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:03:48,178 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:03:49,361 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:03:50,364 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:03:50,364 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:03:51,542 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:03:51,565 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:03:51,587 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:03:51,614 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:03:51,759 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:03:51,896 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:03:54,087 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:03:54,087 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:03:54,115 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:03:54,115 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:03:54,134 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:03:54,333 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:03:55,344 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:03:55,344 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:03:55,362 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:03:55,543 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:03:55,555 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:03:55,555 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:03:57,563 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:03:57,851 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:03:57,851 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:03:59,160 - wireless_ap_test - INFO - Filled username
2025-03-17 13:03:59,299 - wireless_ap_test - INFO - Filled password
2025-03-17 13:03:59,468 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:04:00,105 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:04:01,108 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:04:02,335 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:04:02,335 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:04:03,694 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:04:03,694 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:04:05,450 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:04:06,616 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:04:07,117 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:04:07,117 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:04:08,604 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:04:08,604 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:04:08,604 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:04:11,151 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:04:11,151 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:04:11,152 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:04:15,815 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:04:15,815 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:04:15,815 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:04:16,705 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:04:17,207 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:04:20,043 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:04:22,322 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:04:22,322 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:04:24,697 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:04:26,430 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:04:28,663 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:04:28,663 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:04:33,860 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:04:33,860 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:04:33,860 - wireless_ap_test - INFO - Running validation after data_to_server with latest MQTT config
2025-03-17 13:04:34,723 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:04:34,723 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:04:34,723 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:04:34,723 - wireless_ap_test - INFO - MQTT Process Check: 9818 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
11224 root      1920 S    ash -c ps | grep mosquitto
11226 root      1920 S    grep mosquitto
2025-03-17 13:04:34,746 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:04:34,746 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:04:34,746 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:04:34,834 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:04:34,919 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:04:34,919 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:04:34,919 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:04:34,919 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:04:34,919 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:04:34,920 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:04:34,920 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:04:45,013 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:04:45,013 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:04:45,013 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:04:45,013 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:04:45,013 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:04:45,013 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:04:45,014 - wireless_ap_test - INFO - Validation completed with success: True
2025-03-17 13:04:47,019 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:04:47,021 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 13:04:47,021 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 13:04:47,021 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:04:48,418 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:04:48,544 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:04:48,628 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:04:48,911 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:04:48,912 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:04:48,912 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:04:48,912 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:04:49,189 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:04:49,189 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:04:49,189 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:04:49,309 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:04:49,309 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:04:49,419 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:04:49,420 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:04:49,420 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:04:49,420 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:04:50,293 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 13:04:50,293 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:04:50,293 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:04:50,472 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:04:50,472 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:04:50,550 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 13:04:50,550 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:04:50,550 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:04:50,603 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:04:51,020 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 13:04:51,094 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 13:04:51,095 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:04:51,095 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:04:51,275 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 13:04:51,275 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:04:53,642 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:04:53,642 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:04:53,726 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:04:53,726 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:04:53,726 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:04:53,727 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:04:53,727 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:04:53,981 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:04:54,169 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [{"enabled": "1", ".type": "collection", "retry": "0", "id": "1", "output": "2", "period": "5", "timer": "period", "format": "json", "name": "test_instance3", "input": ["3"]}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "test_instance3_output", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}, {"mqtt_device_files": "0", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/ssl/certs//home/studentas/Documents/certificate1-file.crt", "mqtt_in_insecure": "1", "format": "json", "mqtt_in_keyfile": "/etc/certificates//home/studentas/Documents/key1-file.crt", "mqtt_in_tls_type": "cert", "mqtt_in_qos": "1", ".type": "input", "mqtt_in_username": "username", "id": "4", "mqtt_in_cafile": "/etc/certificates//home/studentas/Documents/ca1-file.crt", "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input4", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:04:54,170 - wireless_ap_test - INFO - Calculated IDs - collection: 4, data: 6, server: 5
2025-03-17 13:04:54,170 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 4, 'data_id': 6, 'server_id': 5}
2025-03-17 13:04:54,239 - wireless_ap_test - ERROR - API request failed for https://192.168.1.1/api/data_to_server/collections/config: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 13:04:54,239 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 13:04:54,239 - wireless_ap_test - ERROR - Data to Server API test failed: API request failed: 422 - {"success":false,"errors":[{"source":"name","code":103,"value":"test_instance3","error":"Name already used.","section":"5"}]}
2025-03-17 13:04:54,240 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:04:54,240 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 13:04:54,240 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:04:54,240 - wireless_ap_test - INFO - Running final validation with latest MQTT and DTS configs
2025-03-17 13:04:55,114 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:04:55,114 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:04:55,114 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:04:55,114 - wireless_ap_test - INFO - MQTT Process Check: 11376 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
11503 root      1920 S    ash -c ps | grep mosquitto
11505 root      1920 S    grep mosquitto
2025-03-17 13:04:55,137 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:04:55,137 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:04:55,137 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:04:55,226 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:04:55,310 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:04:55,311 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:04:55,311 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:04:55,312 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:04:55,312 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:04:55,312 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:04:55,312 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:05:05,352 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:05:05,352 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:05:05,352 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:05:05,352 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:05:05,352 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:05:05,352 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - Final validation completed with success: True
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerSSHTest
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - Cleanup completed for test MQTTBrokerAPITest
2025-03-17 13:05:05,353 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:05:06,101 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:05:06,101 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:05:06,125 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:05:06,125 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:05:06,125 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:05:06,125 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 13:05:06,172 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:05:06,218 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:05:06,265 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 13:05:06,312 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:05:06,563 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 13:05:06,563 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:05:06,563 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:05:06,563 - wireless_ap_test - INFO - Cleanup completed for test DataToServerSSHTest
2025-03-17 13:05:06,563 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:05:06,564 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 13:05:06,564 - wireless_ap_test - INFO - Cleanup completed for test DataToServerAPITest
2025-03-17 13:05:06,564 - wireless_ap_test - INFO - Test execution completed. Total: 7, Passed: 6, Failed: 1
2025-03-17 13:06:12,057 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:06:12,057 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:06:12,058 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:06:13,553 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:06:15,008 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:06:15,009 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:06:16,839 - wireless_ap_test - INFO - Filled username
2025-03-17 13:06:16,978 - wireless_ap_test - INFO - Filled password
2025-03-17 13:06:17,152 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:06:17,802 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:06:18,805 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:06:20,130 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:06:20,131 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:06:21,281 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:06:21,282 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:06:22,512 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:06:23,515 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:06:23,515 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:06:24,732 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:06:24,767 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:06:24,796 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:06:24,832 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:06:24,998 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:06:25,160 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:06:27,430 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:06:27,430 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:06:27,456 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:06:27,456 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:06:27,487 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:06:27,724 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:06:28,733 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:06:28,733 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:06:28,768 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:06:28,974 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:06:29,029 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:06:29,030 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:06:29,030 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:06:31,047 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:06:31,563 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:06:31,563 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:06:32,881 - wireless_ap_test - INFO - Filled username
2025-03-17 13:06:33,035 - wireless_ap_test - INFO - Filled password
2025-03-17 13:06:33,216 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:06:33,852 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:06:34,854 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:06:36,185 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:06:36,185 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:06:37,644 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:06:37,644 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:06:39,426 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:06:40,607 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:06:41,110 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:06:41,110 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:06:42,649 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:06:42,649 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:06:42,649 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:06:45,233 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:06:45,234 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:06:45,234 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:06:50,069 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:06:50,069 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:06:50,069 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:06:50,981 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:06:51,483 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:06:54,435 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:06:56,627 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:06:56,627 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:06:59,094 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:07:00,978 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:07:03,247 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:07:03,247 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:07:08,478 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:07:08,478 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:07:08,478 - wireless_ap_test - INFO - Running validation after GUI data_to_server with latest MQTT config
2025-03-17 13:07:09,370 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:07:09,370 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:07:09,370 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:07:09,370 - wireless_ap_test - INFO - MQTT Process Check: 11376 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
12035 root      1920 S    ash -c ps | grep mosquitto
12037 root      1920 S    grep mosquitto
2025-03-17 13:07:09,394 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:07:09,394 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:07:09,394 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:07:09,481 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:07:09,563 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:07:09,564 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:07:19,843 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:07:19,843 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:07:19,843 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:07:19,843 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:07:19,843 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:07:19,843 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:07:19,844 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:07:27,300 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:07:27,300 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:07:27,300 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:07:29,855 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: 'tuple' object has no attribute 'get'
2025-03-17 13:07:29,855 - wireless_ap_test - ERROR - Test execution failed: tuple indices must be integers or slices, not str
2025-03-17 13:08:47,670 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:08:47,671 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:08:47,671 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:08:49,080 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:08:50,499 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:08:50,499 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:08:52,304 - wireless_ap_test - INFO - Filled username
2025-03-17 13:08:52,442 - wireless_ap_test - INFO - Filled password
2025-03-17 13:08:52,707 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:08:53,362 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:08:54,367 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:08:55,775 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:08:55,775 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:08:56,810 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:08:56,810 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:08:58,010 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:08:59,013 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:08:59,013 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:09:00,194 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:09:00,217 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:09:00,242 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:09:00,266 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:09:00,410 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:09:00,555 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:09:02,755 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:09:02,755 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:09:02,772 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:09:02,772 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:09:02,786 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:09:02,960 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:09:03,971 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:09:03,971 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:09:03,986 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:09:04,173 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:09:04,195 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:09:04,196 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:09:04,196 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:09:06,205 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:09:06,636 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:09:06,637 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:09:07,826 - wireless_ap_test - INFO - Filled username
2025-03-17 13:09:07,954 - wireless_ap_test - INFO - Filled password
2025-03-17 13:09:08,124 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:09:08,757 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:09:09,759 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:09:10,966 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:09:10,967 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:09:12,253 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:09:12,253 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:09:14,004 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:09:15,175 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:09:15,677 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:09:15,677 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:09:17,107 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:09:17,107 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:09:17,107 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:09:19,628 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:09:19,629 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:09:19,629 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:09:24,249 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:09:24,249 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:09:24,249 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:09:25,130 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:09:25,631 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:09:28,464 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:09:30,651 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:09:30,651 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:09:33,055 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:09:34,813 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:09:37,046 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:09:37,046 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:09:42,245 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:09:42,245 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:09:42,245 - wireless_ap_test - INFO - Running validation after GUI data_to_server with latest MQTT config
2025-03-17 13:09:43,103 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:09:43,103 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:09:43,103 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:09:43,103 - wireless_ap_test - INFO - MQTT Process Check: 11376 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
12497 root      1920 S    ash -c ps | grep mosquitto
12499 root      1920 S    grep mosquitto
2025-03-17 13:09:43,125 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:09:43,125 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:09:43,126 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:09:43,211 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:09:43,292 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:09:43,293 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:09:43,293 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:09:43,293 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:09:43,293 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:09:43,294 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:09:43,294 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:09:53,337 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:09:53,337 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:09:53,337 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:09:53,337 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:09:53,337 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:09:53,337 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:09:53,337 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:10:00,792 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:10:00,792 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:10:00,792 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:10:03,330 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: 'tuple' object has no attribute 'get'
2025-03-17 13:10:03,330 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: 'tuple' object has no attribute 'get'
2025-03-17 13:10:03,331 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:10:03,331 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:10:03,331 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:10:03,576 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:10:03,576 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:10:03,576 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:10:03,623 - wireless_ap_test - ERROR - Failed to configure MQTT Broker via API: 'tuple' object has no attribute 'get'
2025-03-17 13:10:03,669 - wireless_ap_test - ERROR - Fallback approach also failed: 'tuple' object has no attribute 'get'
2025-03-17 13:10:03,669 - wireless_ap_test - ERROR - MQTT Broker API test failed: 'tuple' object has no attribute 'get'
2025-03-17 13:10:03,669 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:10:03,669 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:10:03,669 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:10:03,670 - wireless_ap_test - INFO - Cleanup completed for api test mqtt_broker
2025-03-17 13:10:05,672 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:10:05,672 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:10:05,672 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:10:05,918 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:10:05,918 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:10:05,918 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:10:05,918 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: 'tuple' object has no attribute 'get'
2025-03-17 13:10:05,918 - wireless_ap_test - ERROR - Data to Server API test failed: 'tuple' object has no attribute 'get'
2025-03-17 13:10:05,918 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:10:05,919 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 13:10:05,919 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:10:05,919 - wireless_ap_test - INFO - Running validation for api test with MQTT config
2025-03-17 13:10:06,716 - wireless_ap_test - ERROR - Validation failed: 'tuple' object has no attribute 'get'
2025-03-17 13:10:06,717 - wireless_ap_test - INFO - Validation for api test completed with success: False
2025-03-17 13:10:06,717 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:10:06,717 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-17 13:10:06,717 - wireless_ap_test - INFO - Cleanup completed for api test data_to_server
2025-03-17 13:10:08,719 - wireless_ap_test - INFO - Test execution completed. Total: 8, Passed: 3, Failed: 5
2025-03-17 13:11:14,994 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:11:14,994 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:11:14,995 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:11:16,467 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:11:17,806 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:11:17,807 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:11:19,448 - wireless_ap_test - INFO - Filled username
2025-03-17 13:11:19,577 - wireless_ap_test - INFO - Filled password
2025-03-17 13:11:19,739 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:11:20,388 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:11:21,394 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:11:22,652 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:11:22,652 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:11:23,623 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:11:23,623 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:11:24,808 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:11:25,813 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:11:25,813 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:11:26,983 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:11:27,008 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:11:27,033 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:11:27,059 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:11:27,204 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:11:27,346 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:11:29,561 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:11:29,561 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:11:29,579 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:11:29,579 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:11:29,595 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:11:29,775 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:11:30,788 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:11:30,788 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:11:30,807 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:11:30,986 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:11:30,998 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:11:30,998 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:11:30,998 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:11:33,009 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:11:33,422 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:11:33,422 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:11:34,586 - wireless_ap_test - INFO - Filled username
2025-03-17 13:11:34,725 - wireless_ap_test - INFO - Filled password
2025-03-17 13:11:34,893 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:11:35,511 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:11:36,513 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:11:37,774 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:11:37,774 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:11:38,996 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:11:38,996 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:11:40,727 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:11:41,891 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:11:42,392 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:11:42,392 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:11:43,812 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:11:43,812 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:11:43,812 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:11:46,355 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:11:46,355 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:11:46,355 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:11:50,958 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:11:50,958 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:11:50,958 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:11:51,849 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:11:52,350 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:11:55,203 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:11:57,374 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:11:57,374 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:11:59,752 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:12:01,518 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:12:03,761 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:12:03,761 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:12:08,961 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:12:08,961 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:12:08,961 - wireless_ap_test - INFO - Running validation after GUI data_to_server with latest MQTT config
2025-03-17 13:12:09,834 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:12:09,834 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:12:09,834 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:12:09,834 - wireless_ap_test - INFO - MQTT Process Check: 11376 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
12971 root      1920 S    ash -c ps | grep mosquitto
12973 root      1920 S    grep mosquitto
2025-03-17 13:12:09,868 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:12:09,868 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:12:09,868 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:12:09,955 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:12:10,038 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:12:10,039 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:12:20,132 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:12:20,132 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:12:20,132 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:12:20,132 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:12:20,132 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:12:20,132 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:12:20,133 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:12:27,572 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:12:27,572 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:12:27,573 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:12:30,105 - wireless_ap_test - WARNING - Expected dictionary for scenario but got <class 'tuple'>
2025-03-17 13:12:30,105 - wireless_ap_test - WARNING - Expected dictionary for scenario but got <class 'tuple'>
2025-03-17 13:12:30,105 - wireless_ap_test - ERROR - Invalid scenario_config type: <class 'tuple'>
2025-03-17 13:12:30,105 - wireless_ap_test - ERROR - Invalid scenario_config type: <class 'tuple'>
2025-03-17 13:12:30,106 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 3, Failed: 0
2025-03-17 13:14:56,219 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:14:56,219 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:14:56,220 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:14:57,470 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:14:58,621 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:14:58,621 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:15:00,237 - wireless_ap_test - INFO - Filled username
2025-03-17 13:15:00,361 - wireless_ap_test - INFO - Filled password
2025-03-17 13:15:00,527 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:15:01,175 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:15:02,179 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:15:03,476 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:15:03,476 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:15:04,475 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:15:04,475 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:15:05,664 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:15:06,667 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:15:06,667 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:15:07,847 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:15:07,867 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:15:07,894 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:15:07,919 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:15:08,068 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:15:08,214 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:15:10,411 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:15:10,412 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:15:10,429 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:15:10,429 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:15:10,444 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:15:10,608 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:15:11,621 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:15:11,621 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:15:11,642 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:15:11,841 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:15:11,855 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:15:11,855 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:15:11,855 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:15:13,873 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:15:14,291 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:15:14,291 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:15:15,452 - wireless_ap_test - INFO - Filled username
2025-03-17 13:15:15,586 - wireless_ap_test - INFO - Filled password
2025-03-17 13:15:15,756 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:15:16,448 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:15:17,449 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:15:18,640 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:15:18,641 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:15:19,842 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:15:19,842 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:15:21,557 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:15:22,723 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:15:23,226 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:15:23,226 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:15:24,631 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:15:24,631 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:15:24,631 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:15:27,131 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:15:27,131 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:15:27,131 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:15:31,741 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:15:31,741 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:15:31,741 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:15:32,677 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:15:33,180 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:15:36,064 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:15:38,241 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:15:38,241 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:15:40,617 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:15:42,394 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:15:44,610 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:15:44,610 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:15:49,807 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:15:49,807 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:15:49,807 - wireless_ap_test - INFO - Running validation after GUI data_to_server with MQTT config
2025-03-17 13:15:50,689 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:15:50,689 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:15:50,689 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:15:50,689 - wireless_ap_test - INFO - MQTT Process Check: 11376 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13461 root      1920 S    ash -c ps | grep mosquitto
13463 root      1920 S    grep mosquitto
2025-03-17 13:15:50,711 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:15:50,711 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:15:50,712 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:15:50,798 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:15:50,886 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:15:50,886 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:15:50,886 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:15:50,886 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:15:50,887 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:15:50,887 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:15:50,887 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:16:01,013 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:16:01,013 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:16:01,013 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:16:01,013 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:16:01,013 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:16:01,013 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:16:01,014 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:16:08,545 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:16:08,545 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:16:08,545 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:16:11,070 - wireless_ap_test - INFO - Running MQTT broker SSH test for scenario mqtt_broker
2025-03-17 13:16:11,896 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:16:12,024 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:16:12,105 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:16:12,386 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:16:12,386 - wireless_ap_test - INFO - Running Data to Server SSH test for scenario data_to_server
2025-03-17 13:16:12,387 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:16:13,323 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 13:16:13,324 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:16:13,324 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:16:13,474 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:16:13,475 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:16:13,534 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 13:16:13,534 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:16:13,535 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:16:13,576 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:16:13,962 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 13:16:14,031 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 13:16:14,031 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:16:14,031 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:16:14,196 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 13:16:14,196 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:16:16,536 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:16:16,536 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:16:16,618 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:16:16,618 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:16:16,618 - wireless_ap_test - INFO - Running validation for SSH tests with MQTT and DTS configs
2025-03-17 13:16:17,484 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:16:17,484 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:16:17,484 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:16:17,484 - wireless_ap_test - INFO - MQTT Process Check: 13583 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13735 root      1920 S    ash -c ps | grep mosquitto
13737 root      1920 S    grep mosquitto
2025-03-17 13:16:17,505 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:16:17,506 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:16:17,506 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:16:17,591 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:16:17,673 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:16:27,714 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:16:27,714 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:16:27,714 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:16:27,714 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:16:27,714 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:16:27,714 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:16:27,715 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:16:27,715 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:16:28,459 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:16:28,460 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:16:28,482 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:16:28,482 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:16:28,482 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:16:28,528 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:16:28,584 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:16:28,645 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:16:28,909 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 13:16:28,909 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - Cleanup completed for Data to Server SSH test
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - Cleanup completed for MQTT broker SSH test
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - Running MQTT broker API test for scenario mqtt_broker
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:16:28,910 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:16:28,911 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:16:29,174 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:16:29,174 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:16:29,174 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:16:29,307 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:16:29,308 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:16:29,411 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:16:29,411 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:16:29,411 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:16:29,411 - wireless_ap_test - INFO - Running Data to Server API test for scenario data_to_server
2025-03-17 13:16:29,411 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:16:29,412 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:16:29,412 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:16:29,703 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:16:29,704 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:16:29,704 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:16:29,704 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:16:29,704 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:16:29,879 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:16:29,879 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:16:29,879 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:16:29,967 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:16:29,967 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:16:29,967 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:16:29,967 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:16:29,968 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:16:29,968 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:16:29,968 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:16:30,119 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:16:30,119 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:16:30,119 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:16:30,119 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:16:30,259 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:16:30,260 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:16:30,260 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:16:30,260 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:16:30,425 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:16:30,425 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:16:30,425 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:16:30,425 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:16:30,425 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:16:30,426 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:16:30,426 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:16:30,680 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:16:30,681 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:16:30,872 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:16:30,872 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:16:30,872 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:16:30,873 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:16:30,873 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:16:30,873 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:16:30,873 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:16:30,943 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:16:30,943 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:16:30,943 - wireless_ap_test - INFO - Running validation for API tests with MQTT and DTS configs
2025-03-17 13:16:31,807 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:16:31,808 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:16:31,808 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:16:31,808 - wireless_ap_test - INFO - MQTT Process Check: 13876 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13905 root      1920 S    ash -c ps | grep mosquitto
13907 root      1920 S    grep mosquitto
2025-03-17 13:16:31,828 - wireless_ap_test - INFO - Didn't find instance by name, using hardcoded section IDs
2025-03-17 13:16:31,912 - wireless_ap_test - INFO - Data to Server Scheduler Check: 
2025-03-17 13:16:31,999 - wireless_ap_test - INFO - Data to Server Instance Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 13:16:32,000 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:16:42,045 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:16:42,045 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:16:42,045 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:16:42,045 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - DTS Failures: ["instanceName (expected 'test_instance3', got '')", 'DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:16:42,046 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:16:42,047 - wireless_ap_test - WARNING - Failed to delete Data to Server configuration: Not connected to API, call connect() first
2025-03-17 13:16:42,047 - wireless_ap_test - INFO - Cleanup completed for Data to Server API test
2025-03-17 13:16:42,047 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:16:42,047 - wireless_ap_test - INFO - Cleanup completed for MQTT broker API test
2025-03-17 13:16:42,047 - wireless_ap_test - INFO - Test execution completed. Total: 9, Passed: 8, Failed: 1
2025-03-17 13:16:57,510 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:16:57,510 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:16:57,511 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:16:58,772 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:16:59,959 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:16:59,960 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:17:01,522 - wireless_ap_test - INFO - Filled username
2025-03-17 13:17:01,643 - wireless_ap_test - INFO - Filled password
2025-03-17 13:17:01,816 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:17:02,446 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:17:03,449 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:17:04,666 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:17:04,666 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:17:05,616 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:17:05,616 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:17:06,798 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:17:07,800 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:17:07,800 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:17:08,969 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:17:08,988 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:17:09,008 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:17:09,032 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:17:09,178 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:17:09,311 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:17:11,501 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:17:11,502 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:17:11,519 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:17:11,519 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:17:11,532 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:17:11,707 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:17:12,716 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:17:12,716 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:17:12,729 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:17:12,907 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:17:12,927 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:17:12,928 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:17:12,928 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:17:14,941 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:17:15,325 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:17:15,325 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:17:16,643 - wireless_ap_test - INFO - Filled username
2025-03-17 13:17:16,765 - wireless_ap_test - INFO - Filled password
2025-03-17 13:17:16,925 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:17:17,542 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:17:18,545 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:17:19,752 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:17:19,753 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:17:20,977 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:17:20,977 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:17:22,726 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:17:23,893 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:17:24,395 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:17:24,395 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:17:25,821 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:17:25,821 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:17:25,821 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:17:28,350 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:17:28,351 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:17:28,351 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:17:33,274 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:17:33,274 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:17:33,274 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:17:34,201 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:17:34,703 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:17:37,579 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:17:39,764 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:17:39,765 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:17:42,164 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:17:43,943 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:17:46,162 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:17:46,162 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:17:51,367 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:17:51,367 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:17:51,367 - wireless_ap_test - INFO - Running validation after GUI data_to_server with MQTT config
2025-03-17 13:17:52,259 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:17:52,259 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:17:52,260 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:17:52,260 - wireless_ap_test - INFO - MQTT Process Check: 13876 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
14274 root      1920 S    ash -c ps | grep mosquitto
14276 root      1920 S    grep mosquitto
2025-03-17 13:17:52,283 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:17:52,283 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:17:52,283 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:17:52,378 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:17:52,464 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:17:52,464 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:17:52,464 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:17:52,465 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:17:52,465 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:17:52,465 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:17:52,465 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:18:02,509 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:18:02,509 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:18:02,509 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:18:02,509 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:18:02,509 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:18:02,510 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:18:02,510 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:18:10,034 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:18:10,034 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:18:10,034 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:18:12,580 - wireless_ap_test - INFO - Running MQTT broker SSH test for scenario mqtt_broker
2025-03-17 13:18:13,417 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:18:13,542 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:18:13,623 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:18:13,903 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:18:13,903 - wireless_ap_test - INFO - Running Data to Server SSH test for scenario data_to_server
2025-03-17 13:18:13,904 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:18:14,948 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 13:18:14,948 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:18:14,948 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:18:15,093 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:18:15,094 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:18:15,165 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 13:18:15,165 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:18:15,165 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:18:15,208 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:18:15,600 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 13:18:15,670 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 13:18:15,671 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:18:15,671 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:18:15,837 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 13:18:15,837 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:18:18,178 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:18:18,178 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:18:18,260 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:18:18,260 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:18:18,260 - wireless_ap_test - INFO - Running validation for SSH tests with MQTT and DTS configs
2025-03-17 13:18:19,142 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:18:19,142 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:18:19,142 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:18:19,142 - wireless_ap_test - INFO - MQTT Process Check: 14398 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
14551 root      1920 S    ash -c ps | grep mosquitto
14553 root      1920 S    grep mosquitto
2025-03-17 13:18:19,177 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:18:19,177 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:18:19,177 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:18:19,262 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:18:19,344 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:18:29,386 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:18:29,387 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:18:29,387 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:18:30,143 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:18:30,143 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:18:30,165 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:18:30,165 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:18:30,165 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:18:30,210 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:18:30,256 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:18:30,300 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:18:30,558 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 13:18:30,558 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:18:30,558 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:18:30,558 - wireless_ap_test - INFO - Cleanup completed for Data to Server SSH test
2025-03-17 13:18:30,558 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:18:30,559 - wireless_ap_test - INFO - Cleanup completed for MQTT broker SSH test
2025-03-17 13:18:30,559 - wireless_ap_test - INFO - Running MQTT broker API test for scenario mqtt_broker
2025-03-17 13:18:30,559 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:18:30,559 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:18:30,559 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:18:30,810 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:18:30,811 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:18:30,811 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:18:30,933 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:18:30,933 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:18:31,025 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:18:31,025 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:18:31,025 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:18:31,026 - wireless_ap_test - INFO - Running Data to Server API test for scenario data_to_server
2025-03-17 13:18:31,026 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:18:31,026 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:18:31,026 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:18:31,268 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:18:31,268 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:18:31,268 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:18:31,268 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:18:31,268 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:18:31,269 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:18:31,269 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:18:31,269 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:18:31,269 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:18:31,269 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:18:31,442 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:18:31,442 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:18:31,442 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:18:31,529 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:18:31,682 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:18:31,682 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:18:31,682 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:18:31,682 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:18:31,827 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:18:31,827 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:18:31,828 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:18:31,828 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:18:31,976 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:18:32,239 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:18:32,239 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:18:32,434 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:18:32,434 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:18:32,435 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:18:32,435 - wireless_ap_test - INFO - Running validation for API tests with MQTT and DTS configs
2025-03-17 13:18:33,308 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:18:33,308 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:18:33,308 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:18:33,308 - wireless_ap_test - INFO - MQTT Process Check: 14688 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
14721 root      1920 S    ash -c ps | grep mosquitto
14723 root      1920 S    grep mosquitto
2025-03-17 13:18:33,332 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:18:33,332 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:18:33,332 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:18:33,423 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:18:33,518 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:18:43,564 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:18:43,565 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:18:43,565 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:18:43,641 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:18:43,641 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:18:43,641 - wireless_ap_test - INFO - Cleanup completed for Data to Server API test
2025-03-17 13:18:43,641 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:18:43,641 - wireless_ap_test - INFO - Cleanup completed for MQTT broker API test
2025-03-17 13:18:43,642 - wireless_ap_test - INFO - Test execution completed. Total: 9, Passed: 9, Failed: 0
2025-03-17 13:24:57,845 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:24:57,845 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:24:57,845 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 13:24:57,846 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:24:57,846 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 13:24:59,074 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:25:00,255 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:25:00,256 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:25:01,893 - wireless_ap_test - INFO - Filled username
2025-03-17 13:25:02,026 - wireless_ap_test - INFO - Filled password
2025-03-17 13:25:02,186 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:25:02,831 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:25:03,833 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:25:05,039 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:25:05,039 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:25:06,029 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:25:06,029 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:25:07,220 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:25:08,221 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:25:08,222 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:25:09,426 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:25:09,454 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:25:09,476 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:25:09,498 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:25:09,643 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:25:09,783 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:25:11,976 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:25:11,976 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:25:11,990 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:25:11,990 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:25:12,005 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:25:12,173 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:25:13,182 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:25:13,182 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:25:13,203 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:25:13,378 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:25:13,391 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:25:13,392 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:25:13,392 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:25:15,401 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:25:15,809 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:25:15,810 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:25:16,943 - wireless_ap_test - INFO - Filled username
2025-03-17 13:25:17,069 - wireless_ap_test - INFO - Filled password
2025-03-17 13:25:17,238 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:25:17,869 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:25:18,872 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:25:20,087 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:25:20,088 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:25:21,067 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:25:21,068 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:25:22,254 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:25:23,255 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:25:23,255 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:25:24,473 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:25:24,499 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:25:24,521 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:25:24,545 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:25:24,689 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:25:24,835 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:25:27,031 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:25:27,031 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:25:27,046 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:25:27,046 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:25:27,057 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:25:27,227 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:25:28,239 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:25:28,239 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:25:28,252 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:25:28,459 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:25:28,471 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:25:28,471 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:25:28,471 - wireless_ap_test - INFO - Cleanup completed for GUI test mqtt_broker - mqtt_broker
2025-03-17 13:25:30,478 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:25:30,937 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:25:30,938 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:25:32,070 - wireless_ap_test - INFO - Filled username
2025-03-17 13:25:32,198 - wireless_ap_test - INFO - Filled password
2025-03-17 13:25:32,361 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:25:32,996 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:25:33,997 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:25:35,181 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:25:35,181 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:25:36,381 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:25:36,381 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:25:38,110 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:25:39,277 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:25:39,778 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:25:39,778 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:25:41,182 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:25:41,182 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:25:41,182 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:25:43,677 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:25:43,677 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:25:43,677 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:25:48,290 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:25:48,290 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:25:48,290 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:25:49,163 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:25:49,664 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:25:52,497 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:25:54,664 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:25:54,664 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:25:57,040 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:25:58,829 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:26:01,067 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:26:01,067 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:26:06,268 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:26:06,268 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:26:06,268 - wireless_ap_test - INFO - Running validation after GUI data_to_server with MQTT config
2025-03-17 13:26:07,157 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:26:07,157 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:26:07,158 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:26:07,158 - wireless_ap_test - INFO - MQTT Process Check: 14688 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
15465 root      1920 S    ash -c ps | grep mosquitto
15467 root      1920 S    grep mosquitto
2025-03-17 13:26:07,180 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:26:07,180 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:26:07,180 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:26:07,271 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:26:07,354 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:26:17,478 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:26:17,478 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:26:17,478 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:26:17,478 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:26:17,478 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:26:17,478 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:26:17,479 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:26:24,921 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:26:24,921 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:26:24,921 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:26:26,926 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:26:27,315 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:26:27,315 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:26:37,421 - wireless_ap_test - ERROR - Login failed: Page.goto: Timeout 10000ms exceeded.
Call log:
  - navigating to "https://192.168.1.1/login", waiting until "networkidle"

2025-03-17 13:26:37,421 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:26:38,615 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:26:38,615 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:26:39,872 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:26:39,872 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:26:41,787 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:26:42,951 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:26:43,452 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:26:43,452 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:26:44,822 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:26:44,822 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:26:44,822 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:26:47,298 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:26:47,298 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:26:47,298 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:26:51,952 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:26:51,952 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:26:51,952 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:26:52,835 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:26:53,338 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:26:56,178 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:26:58,346 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:26:58,346 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:27:00,734 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:27:02,462 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:27:04,693 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:27:04,693 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:27:09,889 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:27:09,889 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:27:09,890 - wireless_ap_test - INFO - Running validation after GUI data_to_server with MQTT config
2025-03-17 13:27:10,739 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:27:10,739 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:27:10,739 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:27:10,739 - wireless_ap_test - INFO - MQTT Process Check: 14688 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
15827 root      1920 S    ash -c ps | grep mosquitto
15829 root      1920 S    grep mosquitto
2025-03-17 13:27:10,761 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:27:10,762 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:27:10,762 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:27:10,852 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:27:10,933 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:27:10,934 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:27:20,975 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:27:20,975 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:27:20,976 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:27:20,976 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:27:20,976 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:27:20,976 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:27:20,976 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:27:28,498 - wireless_ap_test - INFO - Deleted 1 DTS interfaces
2025-03-17 13:27:28,498 - wireless_ap_test - INFO - Cleanup successful: Deleted all WiFi interfaces.
2025-03-17 13:27:28,498 - wireless_ap_test - INFO - Cleanup completed for GUI test data_to_server - data_to_server
2025-03-17 13:27:30,692 - wireless_ap_test - INFO - Running MQTT broker SSH test for scenario mqtt_broker
2025-03-17 13:27:31,529 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:27:31,658 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:27:31,740 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:27:32,022 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:27:32,022 - wireless_ap_test - INFO - Running Data to Server SSH test for scenario data_to_server
2025-03-17 13:27:32,022 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:27:32,913 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-17 13:27:32,913 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:27:32,913 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:27:33,056 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:27:33,056 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:27:33,117 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-17 13:27:33,117 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:27:33,117 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:27:33,158 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:27:33,545 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-17 13:27:33,614 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-17 13:27:33,614 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:27:33,614 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:27:33,779 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-17 13:27:33,779 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:27:36,118 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:27:36,118 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:27:36,198 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:27:36,198 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:27:36,198 - wireless_ap_test - INFO - Running validation for SSH tests with MQTT and DTS configs
2025-03-17 13:27:37,052 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:27:37,052 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:27:37,053 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:27:37,053 - wireless_ap_test - INFO - MQTT Process Check: 15942 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
16095 root      1920 S    ash -c ps | grep mosquitto
16097 root      1920 S    grep mosquitto
2025-03-17 13:27:37,074 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:27:37,074 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:27:37,075 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:27:37,160 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:27:37,243 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:27:47,285 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:27:47,285 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:27:47,285 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:27:47,285 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:27:47,285 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:27:47,286 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:27:47,286 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:27:47,286 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:27:48,036 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:27:48,036 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:27:48,059 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:27:48,059 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:27:48,059 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:27:48,116 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:27:48,161 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:27:48,206 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:27:48,460 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-17 13:27:48,460 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - Cleanup completed for Data to Server SSH test
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - Cleanup completed for MQTT broker SSH test
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - Running MQTT broker API test for scenario mqtt_broker
2025-03-17 13:27:48,461 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:27:48,462 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:27:48,462 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:27:48,722 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:27:48,722 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:27:48,722 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:27:48,838 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:27:48,838 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:27:48,925 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:27:48,925 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:27:48,925 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:27:48,925 - wireless_ap_test - INFO - Running Data to Server API test for scenario data_to_server
2025-03-17 13:27:48,926 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:27:48,926 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:27:48,926 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:27:49,169 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:27:49,170 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:27:49,170 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:27:49,170 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:27:49,170 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:27:49,339 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:27:49,339 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:27:49,340 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:27:49,425 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:27:49,580 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:27:49,580 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:27:49,581 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:27:49,581 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:27:49,725 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:27:49,725 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:27:49,725 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:27:49,725 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:27:49,872 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:27:50,136 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:27:50,136 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:27:50,341 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:27:50,341 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:27:50,341 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:27:50,341 - wireless_ap_test - INFO - Running validation for API tests with MQTT and DTS configs
2025-03-17 13:27:51,209 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:27:51,209 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:27:51,209 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:27:51,209 - wireless_ap_test - INFO - MQTT Process Check: 16244 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
16265 root      1920 S    ash -c ps | grep mosquitto
16267 root      1920 S    grep mosquitto
2025-03-17 13:27:51,234 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:27:51,234 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:27:51,234 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:27:51,328 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:27:51,422 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:27:51,423 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:28:01,465 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:28:01,465 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:28:01,465 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:28:01,466 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:28:01,466 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:28:01,466 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:28:01,537 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:28:01,538 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:28:01,538 - wireless_ap_test - INFO - Cleanup completed for Data to Server API test
2025-03-17 13:28:01,538 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:28:01,538 - wireless_ap_test - INFO - Cleanup completed for MQTT broker API test
2025-03-17 13:28:01,539 - wireless_ap_test - INFO - Test execution completed. Total: 12, Passed: 12, Failed: 0
2025-03-17 13:31:27,780 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:31:27,781 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:31:27,781 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 13:31:27,782 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:31:27,782 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 13:31:27,782 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 13:31:27,782 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 13:31:29,096 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:31:30,262 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:31:30,265 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:31:31,923 - wireless_ap_test - INFO - Filled username
2025-03-17 13:31:32,075 - wireless_ap_test - INFO - Filled password
2025-03-17 13:31:32,245 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:31:32,847 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:31:33,850 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:31:35,209 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:31:35,210 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:31:36,116 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:31:36,116 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:31:37,304 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:31:38,306 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:31:38,306 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:31:39,519 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:31:39,539 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:31:39,560 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:31:39,584 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:31:39,726 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:31:39,866 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:31:42,059 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:31:42,060 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:31:42,077 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:31:42,077 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:31:42,089 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:31:42,279 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:31:43,292 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:31:43,292 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:31:43,311 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:31:43,492 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:31:43,502 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:31:43,503 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:31:43,503 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:31:43,895 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:31:43,896 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:31:45,193 - wireless_ap_test - INFO - Filled username
2025-03-17 13:31:45,325 - wireless_ap_test - INFO - Filled password
2025-03-17 13:31:45,496 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:31:46,119 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:31:47,120 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:31:48,356 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:31:48,357 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:31:49,599 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:31:49,600 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:31:51,372 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:31:52,532 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:31:53,034 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:31:53,034 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:31:54,442 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:31:54,442 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:31:54,442 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:31:56,938 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:31:56,938 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:31:56,939 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:32:01,562 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:32:01,562 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:32:01,562 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:32:02,431 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:32:02,933 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:32:05,764 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:32:07,940 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:32:07,940 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:32:13,042 - wireless_ap_test - ERROR - Failed to configure period: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-period\"]")
  -     - locator resolved to <input type="text" data-v-93c725f6="" data-state="valid" test-id="input-period" placeholder="e.g., 60" class="tlt-input-field input-size" id="data_sender.collection.1.edit.1_period"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -       - waiting 100ms
  -     10 × waiting for element to be visible, enabled and stable
  -        - element is not visible
  -      - retrying click action
  -        - waiting 500ms

2025-03-17 13:32:13,042 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-period\"]")
  -     - locator resolved to <input type="text" data-v-93c725f6="" data-state="valid" test-id="input-period" placeholder="e.g., 60" class="tlt-input-field input-size" id="data_sender.collection.1.edit.1_period"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -       - waiting 100ms
  -     10 × waiting for element to be visible, enabled and stable
  -        - element is not visible
  -      - retrying click action
  -        - waiting 500ms

2025-03-17 13:32:13,042 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-period\"]")
  -     - locator resolved to <input type="text" data-v-93c725f6="" data-state="valid" test-id="input-period" placeholder="e.g., 60" class="tlt-input-field input-size" id="data_sender.collection.1.edit.1_period"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -       - waiting 100ms
  -     10 × waiting for element to be visible, enabled and stable
  -        - element is not visible
  -      - retrying click action
  -        - waiting 500ms

2025-03-17 13:32:13,042 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-period\"]")
  -     - locator resolved to <input type="text" data-v-93c725f6="" data-state="valid" test-id="input-period" placeholder="e.g., 60" class="tlt-input-field input-size" id="data_sender.collection.1.edit.1_period"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is not visible
  -     - retrying click action
  -       - waiting 100ms
  -     10 × waiting for element to be visible, enabled and stable
  -        - element is not visible
  -      - retrying click action
  -        - waiting 500ms

2025-03-17 13:32:23,161 - wireless_ap_test - ERROR - Error deleting interface: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"button-delete\"]").first
  -     - locator resolved to <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 100ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 500ms
  -   - element was detached from the DOM, retrying
  -     - waiting for" https://192.168.1.1/" navigation to finish...
  -     - navigated to "https://192.168.1.1/"

2025-03-17 13:32:23,161 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 13:32:23,162 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 13:32:23,162 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 13:32:24,170 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 13:32:25,785 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 13:32:26,596 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:32:26,719 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:32:26,800 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:32:27,081 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:32:27,082 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 13:32:27,082 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:32:27,934 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 13:32:27,934 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:32:27,934 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:32:28,080 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:32:28,080 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:32:28,144 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 13:32:28,144 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:32:28,144 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:32:28,186 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:32:28,587 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 13:32:28,657 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 13:32:28,657 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:32:28,657 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:32:28,829 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 13:32:28,829 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:32:31,125 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:32:31,126 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:32:31,207 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:32:31,207 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:32:31,207 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 13:32:32,076 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:32:32,076 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:32:32,076 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:32:32,076 - wireless_ap_test - INFO - MQTT Process Check: 16817 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
16961 root      1920 S    ash -c ps | grep mosquitto
16963 root      1920 S    grep mosquitto
2025-03-17 13:32:32,097 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:32:32,098 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:32:32,098 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:32:32,184 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-17 13:32:32,267 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 13:32:32,268 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:32:42,321 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:32:42,322 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 13:32:42,322 - wireless_ap_test - INFO - SSH validation completed with success: False
2025-03-17 13:32:42,323 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:32:43,058 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:32:43,059 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:32:43,081 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:32:43,081 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:32:43,081 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:32:43,081 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 13:32:43,129 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 13:32:43,174 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:32:43,218 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:32:43,262 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:32:43,514 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 13:32:43,514 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:32:43,514 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:32:43,514 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:32:43,515 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:32:43,773 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:32:43,773 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:32:43,773 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:32:43,891 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:32:43,891 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:32:43,980 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:32:43,980 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:32:43,981 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:32:43,981 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 13:32:43,981 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:32:43,981 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:32:43,981 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:32:44,226 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:32:44,396 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:32:44,396 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:32:44,397 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:32:44,482 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:32:44,630 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:32:44,630 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:32:44,630 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:32:44,630 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:32:44,774 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:32:44,774 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:32:44,774 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:32:44,775 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:32:44,923 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:32:45,196 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:32:45,196 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:32:45,403 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:32:45,403 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:32:45,403 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:32:45,404 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 13:32:46,299 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:32:46,299 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:32:46,299 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:32:46,299 - wireless_ap_test - INFO - MQTT Process Check: 17107 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
17139 root      1920 S    ash -c ps | grep mosquitto
17145 root      1920 S    grep mosquitto
2025-03-17 13:32:46,332 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:32:46,332 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:32:46,332 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:32:46,425 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:32:46,525 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:32:46,525 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:32:46,525 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:32:46,525 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:32:46,525 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:32:46,526 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:32:46,526 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:32:56,566 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:32:56,566 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:32:56,566 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:32:56,566 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:32:56,566 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:32:56,566 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:32:56,567 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:32:56,567 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:32:56,567 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:32:56,567 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:32:56,567 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 13:32:56,642 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 13:32:57,756 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:32:58,913 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:32:58,913 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:33:00,487 - wireless_ap_test - INFO - Filled username
2025-03-17 13:33:00,621 - wireless_ap_test - INFO - Filled password
2025-03-17 13:33:00,790 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:33:01,413 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:33:02,419 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:33:03,661 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:33:03,661 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:33:04,676 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:33:04,676 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:33:05,864 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:33:06,866 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:33:06,867 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:33:08,038 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:33:08,063 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:33:08,089 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:33:08,113 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:33:08,258 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:33:08,401 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:33:10,598 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:33:10,598 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:33:10,615 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:33:10,615 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:33:10,630 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:33:10,798 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:33:11,806 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:33:11,807 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:33:11,826 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:33:12,001 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:33:12,011 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:33:12,011 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:33:12,011 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:33:12,454 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:33:12,454 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:33:13,614 - wireless_ap_test - INFO - Filled username
2025-03-17 13:33:13,747 - wireless_ap_test - INFO - Filled password
2025-03-17 13:33:13,908 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:33:14,520 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:33:15,520 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:33:16,780 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:33:16,780 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:33:17,998 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:33:17,998 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:33:19,721 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:33:20,886 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:33:21,388 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:33:21,388 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:33:22,798 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:33:22,798 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:33:22,798 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:33:25,289 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:33:25,289 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:33:25,289 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:33:29,875 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:33:29,875 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:33:29,875 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:33:30,767 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:33:31,269 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:33:34,134 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:33:36,312 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:33:36,312 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:33:38,712 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:33:40,462 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:33:42,679 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:33:42,679 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:33:47,884 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:33:47,884 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:33:47,884 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 13:33:48,744 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:33:48,745 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:33:48,745 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:33:48,745 - wireless_ap_test - INFO - MQTT Process Check: 17107 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
17616 root      1920 S    ash -c ps | grep mosquitto
17618 root      1920 S    grep mosquitto
2025-03-17 13:33:48,766 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:33:48,766 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:33:48,766 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:33:48,851 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:33:48,933 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:33:48,933 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:33:48,934 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:33:48,934 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:33:48,934 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:33:48,934 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:33:48,934 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:33:58,977 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:33:58,977 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:33:58,977 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:33:58,977 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:33:58,977 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:33:58,977 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:33:58,977 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:34:04,009 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 13:34:04,009 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 13:34:04,009 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 13:34:05,018 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 13:34:06,575 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 13:34:07,380 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:34:07,510 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:34:07,592 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:34:07,878 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:34:07,878 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 13:34:07,879 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:34:08,732 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 13:34:08,732 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:34:08,732 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:34:08,882 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:34:08,883 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:34:08,946 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 13:34:08,946 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:34:08,947 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:34:08,989 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:34:09,393 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 13:34:09,465 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 13:34:09,465 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:34:09,465 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:34:09,637 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 13:34:09,637 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:34:11,999 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:34:11,999 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:34:12,084 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:34:12,084 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:34:12,084 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 13:34:12,938 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:34:12,938 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:34:12,938 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:34:12,938 - wireless_ap_test - INFO - MQTT Process Check: 17684 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
17836 root      1920 S    ash -c ps | grep mosquitto
17838 root      1920 S    grep mosquitto
2025-03-17 13:34:12,962 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:34:12,962 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:34:12,962 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:34:13,054 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:34:13,138 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:34:13,139 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:34:23,215 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:34:23,215 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:34:23,215 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:34:23,216 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:34:23,216 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:34:23,216 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:34:23,216 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:34:23,216 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:34:23,953 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:34:23,953 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:34:23,976 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:34:23,976 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:34:23,976 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:34:23,976 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 13:34:24,025 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 13:34:24,072 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:34:24,118 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:34:24,162 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:34:24,419 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 13:34:24,420 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:34:24,421 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:34:24,421 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:34:24,678 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:34:24,678 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:34:24,678 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:34:24,800 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:34:24,800 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:34:24,889 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:34:24,890 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:34:24,890 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:34:24,890 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 13:34:24,890 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:34:24,891 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:34:24,891 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:34:25,137 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:34:25,138 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:34:25,306 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:34:25,306 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:34:25,306 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:34:25,393 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:34:25,394 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:34:25,541 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:34:25,541 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:34:25,541 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:34:25,542 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:34:25,685 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:34:25,685 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:34:25,685 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:34:25,685 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:34:25,835 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:34:26,109 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:34:26,109 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:34:26,308 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:34:26,308 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:34:26,308 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:34:26,308 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 13:34:27,240 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:34:27,240 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:34:27,240 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:34:27,240 - wireless_ap_test - INFO - MQTT Process Check: 17978 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
18018 root      1920 S    ash -c ps | grep mosquitto
18022 root      1920 S    grep mosquitto
2025-03-17 13:34:27,275 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:34:27,275 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:34:27,275 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:34:27,381 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:34:27,508 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:34:27,509 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:34:37,554 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:34:37,554 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:34:37,554 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:34:37,554 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:34:37,554 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:34:37,554 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:34:37,555 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:34:37,555 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:34:37,555 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:34:37,555 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:34:37,555 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 13:34:37,630 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 13:34:37,631 - wireless_ap_test - INFO - Test execution completed. Total: 17, Passed: 15, Failed: 2
2025-03-17 13:35:55,071 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 13:35:55,072 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 13:35:55,072 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 13:35:55,072 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 13:35:55,072 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 13:35:55,073 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 13:35:55,073 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 13:35:56,308 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:35:57,470 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:35:57,470 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:35:59,092 - wireless_ap_test - INFO - Filled username
2025-03-17 13:35:59,219 - wireless_ap_test - INFO - Filled password
2025-03-17 13:35:59,383 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:36:00,063 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:36:01,066 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:36:02,348 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:36:02,348 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:36:03,316 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:36:03,316 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:36:04,498 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:36:05,500 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:36:05,500 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:36:06,701 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:36:06,725 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:36:06,748 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:36:06,775 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:36:06,915 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:36:07,055 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:36:09,245 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:36:09,246 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:36:09,262 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:36:09,262 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:36:09,274 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:36:09,447 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:36:10,457 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:36:10,458 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:36:10,473 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:36:10,647 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:36:10,660 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:36:10,661 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:36:10,661 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:36:11,088 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:36:11,089 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:36:12,233 - wireless_ap_test - INFO - Filled username
2025-03-17 13:36:12,362 - wireless_ap_test - INFO - Filled password
2025-03-17 13:36:12,534 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:36:13,166 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:36:14,168 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:36:15,366 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:36:15,367 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:36:16,647 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:36:16,647 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:36:18,363 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:36:19,529 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:36:20,031 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:36:20,031 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:36:21,450 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:36:21,450 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:36:21,450 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:36:23,948 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:36:23,948 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:36:23,948 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:36:28,548 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:36:28,548 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:36:28,548 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:36:29,445 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:36:29,948 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:36:32,798 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:36:34,979 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:36:34,979 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:36:37,356 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:36:39,117 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:36:41,343 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:36:41,343 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:36:46,547 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:36:46,547 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:36:46,547 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 13:36:47,409 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:36:47,409 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:36:47,409 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:36:47,409 - wireless_ap_test - INFO - MQTT Process Check: 17978 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
18520 root      1920 S    ash -c ps | grep mosquitto
18522 root      1920 S    grep mosquitto
2025-03-17 13:36:47,431 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:36:47,431 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:36:47,431 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:36:47,517 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:36:47,599 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:36:47,599 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:36:47,599 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:36:47,600 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:36:47,600 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:36:47,600 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:36:47,600 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:36:57,652 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:36:57,652 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:36:57,652 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:36:57,652 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:36:57,652 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:36:57,652 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:36:57,653 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:37:02,680 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 13:37:02,680 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 13:37:02,681 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 13:37:03,689 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 13:37:05,253 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 13:37:06,057 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:37:06,185 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:37:06,269 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:37:06,561 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:37:06,562 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 13:37:06,562 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:37:07,424 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 13:37:07,424 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:37:07,424 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:37:07,575 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:37:07,575 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:37:07,640 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 13:37:07,640 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:37:07,640 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:37:07,684 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:37:08,099 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 13:37:08,170 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 13:37:08,170 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:37:08,170 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:37:08,341 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 13:37:08,341 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:37:10,704 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:37:10,704 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:37:10,789 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:37:10,789 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:37:10,789 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 13:37:11,636 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:37:11,636 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:37:11,636 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:37:11,636 - wireless_ap_test - INFO - MQTT Process Check: 18588 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
18748 root      1920 S    ash -c ps | grep mosquitto
18750 root      1920 S    grep mosquitto
2025-03-17 13:37:11,659 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:37:11,659 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:37:11,659 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:37:11,749 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:37:11,833 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:37:11,833 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:37:11,833 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:37:11,833 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:37:11,834 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:37:11,834 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:37:11,834 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:37:21,879 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:37:21,879 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:37:21,879 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:37:21,879 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:37:21,879 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:37:21,879 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:37:21,880 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:37:21,880 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:37:22,634 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:37:22,634 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:37:22,657 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:37:22,657 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:37:22,658 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:37:22,658 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 13:37:22,705 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:37:22,751 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:37:22,799 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:37:22,844 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 13:37:23,101 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 13:37:23,102 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 13:37:23,103 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:37:23,103 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:37:23,103 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:37:23,366 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:37:23,366 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:37:23,366 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:37:23,489 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:37:23,489 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:37:23,582 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:37:23,583 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:37:23,827 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:37:23,828 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:37:23,995 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:37:23,995 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:37:23,995 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:37:24,081 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:37:24,082 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:37:24,229 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:37:24,229 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:37:24,229 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:37:24,229 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:37:24,370 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:37:24,370 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:37:24,370 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:37:24,371 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:37:24,516 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:37:24,517 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:37:24,773 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:37:24,773 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:37:25,004 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:37:25,004 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:37:25,004 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:37:25,004 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 13:37:25,878 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:37:25,878 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:37:25,878 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:37:25,878 - wireless_ap_test - INFO - MQTT Process Check: 18890 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
18912 root      1920 S    ash -c ps | grep mosquitto
18921 root      1920 S    grep mosquitto
2025-03-17 13:37:25,902 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:37:25,902 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:37:25,902 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:37:26,009 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:37:26,108 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:37:36,150 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:37:36,150 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:37:36,150 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:37:36,150 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:37:36,151 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:37:36,222 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 13:37:36,223 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 13:37:37,374 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 13:37:38,534 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:37:38,535 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:37:40,127 - wireless_ap_test - INFO - Filled username
2025-03-17 13:37:40,252 - wireless_ap_test - INFO - Filled password
2025-03-17 13:37:40,417 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:37:41,037 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:37:42,040 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 13:37:43,367 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 13:37:43,367 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 13:37:44,368 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 13:37:44,368 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 13:37:45,556 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 13:37:46,558 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 13:37:46,558 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 13:37:47,732 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 13:37:47,758 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 13:37:47,783 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 13:37:47,805 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 13:37:47,950 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 13:37:48,091 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 13:37:50,291 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 13:37:50,291 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 13:37:50,307 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:37:50,307 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 13:37:50,319 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 13:37:50,488 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 13:37:51,498 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 13:37:51,499 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 13:37:51,516 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 13:37:51,692 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 13:37:51,704 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 13:37:51,704 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 13:37:51,704 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 13:37:52,170 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 13:37:52,170 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 13:37:53,301 - wireless_ap_test - INFO - Filled username
2025-03-17 13:37:53,439 - wireless_ap_test - INFO - Filled password
2025-03-17 13:37:53,599 - wireless_ap_test - INFO - Clicked login button
2025-03-17 13:37:54,231 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 13:37:55,233 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:37:56,447 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:37:56,448 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 13:37:57,697 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 13:37:57,697 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 13:37:59,440 - wireless_ap_test - INFO - Clicking add button
2025-03-17 13:38:00,609 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 13:38:01,110 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 13:38:01,111 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 13:38:02,547 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 13:38:02,547 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 13:38:02,547 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 13:38:05,087 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 13:38:05,087 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 13:38:05,087 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 13:38:09,781 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 13:38:09,782 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 13:38:09,782 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 13:38:10,673 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 13:38:11,177 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 13:38:14,006 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 13:38:16,180 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 13:38:16,180 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 13:38:18,561 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 13:38:20,326 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 13:38:22,578 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 13:38:22,578 - wireless_ap_test - INFO - Saving configuration
2025-03-17 13:38:27,778 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 13:38:27,779 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 13:38:27,779 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 13:38:28,660 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:38:28,660 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:38:28,660 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:38:28,660 - wireless_ap_test - INFO - MQTT Process Check: 18890 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
19396 root      1920 S    ash -c ps | grep mosquitto
19398 root      1920 S    grep mosquitto
2025-03-17 13:38:28,682 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:38:28,682 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:38:28,682 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:38:28,768 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:38:28,851 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:38:38,892 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:38:38,892 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:38:38,892 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:38:38,892 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:38:38,892 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:38:38,892 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:38:38,892 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 13:38:41,252 - wireless_ap_test - ERROR - Overall deletion process failed: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-17 13:38:41,252 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 13:38:41,253 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 13:38:42,256 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 13:38:43,807 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 13:38:44,614 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 13:38:44,742 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 13:38:44,825 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 13:38:45,110 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 13:38:45,110 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 13:38:45,110 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 13:38:45,970 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 13:38:45,970 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 13:38:45,970 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 13:38:46,121 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 13:38:46,121 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 13:38:46,186 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 13:38:46,187 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 13:38:46,187 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 13:38:46,231 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 13:38:46,646 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 13:38:46,721 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 13:38:46,721 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 13:38:46,722 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 13:38:46,895 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 13:38:46,896 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 13:38:49,258 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 13:38:49,258 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 13:38:49,342 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:38:49,343 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 13:38:49,343 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 13:38:50,197 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:38:50,197 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:38:50,197 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:38:50,197 - wireless_ap_test - INFO - MQTT Process Check: 19465 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
19616 root      1920 S    ash -c ps | grep mosquitto
19618 root      1920 S    grep mosquitto
2025-03-17 13:38:50,221 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:38:50,222 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:38:50,222 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:38:50,315 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:38:50,403 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:39:00,447 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:39:00,447 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:39:00,447 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:39:00,447 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:39:00,447 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:39:00,448 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:39:00,448 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 13:39:00,448 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 13:39:01,224 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 13:39:01,224 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 13:39:01,248 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 13:39:01,248 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 13:39:01,248 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 13:39:01,248 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 13:39:01,296 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 13:39:01,343 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 13:39:01,389 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 13:39:01,433 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 13:39:01,696 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 13:39:01,696 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 13:39:01,697 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:39:01,955 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:39:01,955 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 13:39:01,955 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 13:39:02,075 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 13:39:02,075 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 13:39:02,165 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 13:39:02,411 - wireless_ap_test - INFO - API authentication successful
2025-03-17 13:39:02,411 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 13:39:02,411 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 13:39:02,411 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 13:39:02,412 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 13:39:02,582 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 13:39:02,582 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 13:39:02,582 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 13:39:02,666 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 13:39:02,667 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 13:39:02,838 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 13:39:02,838 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:39:02,838 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 13:39:02,838 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 13:39:02,983 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 13:39:02,984 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:39:02,984 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 13:39:02,984 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 13:39:03,140 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 13:39:03,140 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:39:03,141 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 13:39:03,141 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 13:39:03,141 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 13:39:03,141 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 13:39:03,141 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 13:39:03,403 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 13:39:03,403 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 13:39:03,584 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 13:39:03,584 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 13:39:03,584 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 13:39:03,584 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 13:39:04,447 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 13:39:04,447 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 13:39:04,447 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 13:39:04,447 - wireless_ap_test - INFO - MQTT Process Check: 19758 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
19788 root      1920 S    ash -c ps | grep mosquitto
19790 root      1920 S    grep mosquitto
2025-03-17 13:39:04,475 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 13:39:04,475 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 13:39:04,475 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 13:39:04,583 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 13:39:04,675 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 13:39:14,717 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 13:39:14,717 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 13:39:14,717 - wireless_ap_test - INFO - Validation Results:
2025-03-17 13:39:14,717 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 13:39:14,717 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 13:39:14,717 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 13:39:14,718 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 13:39:14,718 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 13:39:14,718 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 13:39:14,718 - wireless_ap_test - INFO - Delete request:
2025-03-17 13:39:14,718 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - API connection closed
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 13:39:14,790 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 13:39:14,791 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 18, Failed: 0
2025-03-17 14:53:02,289 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 14:53:02,289 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 14:53:02,289 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 14:53:02,290 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 14:53:02,290 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 14:53:02,290 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 14:53:02,290 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 14:53:03,541 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 14:53:04,659 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 14:53:04,659 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 14:53:06,261 - wireless_ap_test - INFO - Filled username
2025-03-17 14:53:06,388 - wireless_ap_test - INFO - Filled password
2025-03-17 14:53:06,548 - wireless_ap_test - INFO - Clicked login button
2025-03-17 14:53:07,197 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 14:53:08,201 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 14:53:09,419 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 14:53:09,419 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 14:53:10,403 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 14:53:10,404 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 14:53:11,584 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 14:53:12,585 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 14:53:12,586 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 14:53:13,764 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 14:53:13,782 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 14:53:13,800 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 14:53:13,822 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 14:53:13,976 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 14:53:14,113 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 14:53:16,304 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 14:53:16,304 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 14:53:16,321 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 14:53:16,321 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 14:53:16,334 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 14:53:16,493 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 14:53:17,504 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 14:53:17,504 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 14:53:17,526 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 14:53:17,791 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 14:53:17,814 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 14:53:17,815 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 14:53:17,815 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 14:53:18,276 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 14:53:18,277 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 14:53:19,407 - wireless_ap_test - INFO - Filled username
2025-03-17 14:53:19,536 - wireless_ap_test - INFO - Filled password
2025-03-17 14:53:19,694 - wireless_ap_test - INFO - Clicked login button
2025-03-17 14:53:20,339 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 14:53:21,341 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 14:53:22,555 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 14:53:22,556 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 14:53:23,802 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 14:53:23,803 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 14:53:25,563 - wireless_ap_test - INFO - Clicking add button
2025-03-17 14:53:26,720 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 14:53:27,222 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 14:53:27,222 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 14:53:28,630 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 14:53:28,630 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 14:53:28,630 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 14:53:31,124 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 14:53:31,125 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 14:53:31,125 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 14:53:35,811 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 14:53:35,812 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 14:53:35,812 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 14:53:36,687 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 14:53:37,189 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 14:53:40,023 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 14:53:42,203 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 14:53:42,203 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 14:53:44,602 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 14:53:46,368 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 14:53:48,604 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 14:53:48,604 - wireless_ap_test - INFO - Saving configuration
2025-03-17 14:53:53,802 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 14:53:53,802 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 14:53:53,802 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 14:53:54,703 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:53:54,704 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:53:54,704 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:53:54,704 - wireless_ap_test - INFO - MQTT Process Check: 19758 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
22102 root      1920 S    ash -c ps | grep mosquitto
22104 root      1920 S    grep mosquitto
2025-03-17 14:53:54,726 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:53:54,726 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:53:54,726 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:53:54,812 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:53:54,893 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:53:54,893 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:53:54,894 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:53:54,894 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:53:54,894 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:53:54,894 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:53:54,894 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:54:04,979 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:54:04,979 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:54:04,980 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:54:04,980 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:54:04,980 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:54:04,980 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:54:04,980 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 14:54:10,009 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 14:54:10,009 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 14:54:10,009 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 14:54:11,017 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 14:54:12,575 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 14:54:13,378 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 14:54:13,502 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 14:54:13,584 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 14:54:13,862 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 14:54:13,862 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 14:54:13,863 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 14:54:14,720 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 14:54:14,720 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 14:54:14,720 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 14:54:14,871 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 14:54:14,871 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 14:54:14,933 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 14:54:14,933 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 14:54:14,933 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 14:54:14,975 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 14:54:15,378 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 14:54:15,447 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 14:54:15,448 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 14:54:15,448 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 14:54:15,617 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 14:54:15,617 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 14:54:17,976 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 14:54:17,976 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 14:54:18,059 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:54:18,059 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 14:54:18,059 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 14:54:18,906 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:54:18,906 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:54:18,906 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:54:18,906 - wireless_ap_test - INFO - MQTT Process Check: 22162 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
22321 root      1920 S    ash -c ps | grep mosquitto
22323 root      1920 S    grep mosquitto
2025-03-17 14:54:18,928 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:54:18,928 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:54:18,928 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:54:19,015 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:54:19,098 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:54:19,098 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:54:19,098 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:54:19,098 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:54:19,099 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:54:19,099 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:54:19,099 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:54:29,149 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:54:29,149 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:54:29,149 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:54:29,149 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:54:29,149 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:54:29,149 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:54:29,150 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 14:54:29,150 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 14:54:29,901 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 14:54:29,901 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 14:54:29,928 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 14:54:29,928 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 14:54:29,928 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 14:54:29,929 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 14:54:29,978 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 14:54:30,025 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 14:54:30,070 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 14:54:30,116 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 14:54:30,369 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 14:54:30,370 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 14:54:30,371 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 14:54:30,371 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 14:54:30,371 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 14:54:30,635 - wireless_ap_test - INFO - API authentication successful
2025-03-17 14:54:30,635 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 14:54:30,635 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 14:54:30,758 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 14:54:30,758 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 14:54:30,851 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:54:30,851 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 14:54:30,851 - wireless_ap_test - INFO - API connection closed
2025-03-17 14:54:30,852 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 14:54:30,852 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 14:54:30,852 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 14:54:30,852 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 14:54:31,101 - wireless_ap_test - INFO - API authentication successful
2025-03-17 14:54:31,101 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 14:54:31,102 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 14:54:31,270 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 14:54:31,270 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 14:54:31,270 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 14:54:31,361 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 14:54:31,509 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 14:54:31,509 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 14:54:31,509 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 14:54:31,509 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 14:54:31,654 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 14:54:31,654 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 14:54:31,654 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 14:54:31,654 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 14:54:31,807 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 14:54:32,079 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 14:54:32,079 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 14:54:32,295 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 14:54:32,295 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 14:54:32,295 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:54:32,295 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 14:54:33,148 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:54:33,148 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:54:33,148 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:54:33,148 - wireless_ap_test - INFO - MQTT Process Check: 22466 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
22484 root      1920 S    ash -c ps | grep mosquitto
22487 root      1920 S    grep mosquitto
2025-03-17 14:54:33,172 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:54:33,172 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:54:33,172 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:54:33,264 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:54:33,369 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:54:43,410 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:54:43,410 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:54:43,410 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:54:43,410 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:54:43,410 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:54:43,410 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:54:43,411 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 14:54:43,411 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 14:54:43,411 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 14:54:43,411 - wireless_ap_test - INFO - Delete request:
2025-03-17 14:54:43,411 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - API connection closed
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 14:54:43,495 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 14:54:44,653 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 14:54:45,781 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 14:54:45,782 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 14:54:47,377 - wireless_ap_test - INFO - Filled username
2025-03-17 14:54:47,502 - wireless_ap_test - INFO - Filled password
2025-03-17 14:54:47,666 - wireless_ap_test - INFO - Clicked login button
2025-03-17 14:54:48,286 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 14:54:49,289 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 14:54:50,531 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 14:54:50,531 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 14:54:51,548 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 14:54:51,549 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 14:54:52,732 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 14:54:53,733 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 14:54:53,733 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 14:54:54,903 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 14:54:54,926 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 14:54:54,949 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 14:54:54,971 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 14:54:55,117 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 14:54:55,257 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 14:54:57,450 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 14:54:57,450 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 14:54:57,468 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 14:54:57,468 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 14:54:57,482 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 14:54:57,652 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 14:54:58,661 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 14:54:58,661 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 14:54:58,675 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 14:54:58,851 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 14:54:58,861 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 14:54:58,862 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 14:54:58,862 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 14:54:59,297 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 14:54:59,297 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 14:55:00,525 - wireless_ap_test - INFO - Filled username
2025-03-17 14:55:00,658 - wireless_ap_test - INFO - Filled password
2025-03-17 14:55:00,821 - wireless_ap_test - INFO - Clicked login button
2025-03-17 14:55:01,478 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 14:55:02,480 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 14:55:03,672 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 14:55:03,672 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 14:55:04,902 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 14:55:04,902 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 14:55:06,636 - wireless_ap_test - INFO - Clicking add button
2025-03-17 14:55:07,801 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 14:55:08,303 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 14:55:08,303 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 14:55:09,719 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 14:55:09,719 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 14:55:09,719 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 14:55:12,237 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 14:55:12,237 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 14:55:12,237 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 14:55:16,807 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 14:55:16,807 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 14:55:16,807 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 14:55:17,683 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 14:55:18,186 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 14:55:21,020 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 14:55:23,203 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 14:55:23,203 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 14:55:25,581 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 14:55:27,333 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 14:55:29,572 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 14:55:29,572 - wireless_ap_test - INFO - Saving configuration
2025-03-17 14:55:34,775 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 14:55:34,775 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 14:55:34,775 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 14:55:35,735 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:55:35,735 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:55:35,735 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:55:35,735 - wireless_ap_test - INFO - MQTT Process Check: 22466 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
22996 root      1920 S    ash -c ps | grep mosquitto
22998 root      1920 S    grep mosquitto
2025-03-17 14:55:35,757 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:55:35,757 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:55:35,757 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:55:35,842 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:55:35,924 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:55:35,924 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:55:35,925 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:55:35,925 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:55:35,925 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:55:35,925 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:55:35,925 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:55:45,966 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:55:45,966 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:55:45,967 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:55:45,967 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:55:45,967 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:55:45,967 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:55:45,967 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 14:55:50,996 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 14:55:50,996 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 14:55:50,996 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 14:55:52,004 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 14:55:53,596 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 14:55:54,439 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 14:55:54,572 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 14:55:54,654 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 14:55:54,943 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 14:55:54,943 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 14:55:54,944 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 14:55:55,796 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 14:55:55,796 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 14:55:55,796 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 14:55:55,943 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 14:55:55,943 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 14:55:56,005 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 14:55:56,005 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 14:55:56,005 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 14:55:56,051 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 14:55:56,454 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 14:55:56,530 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 14:55:56,530 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 14:55:56,530 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 14:55:56,698 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 14:55:56,698 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 14:55:59,063 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 14:55:59,063 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 14:55:59,145 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:55:59,145 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 14:55:59,145 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 14:55:59,988 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:55:59,988 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:55:59,988 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:55:59,988 - wireless_ap_test - INFO - MQTT Process Check: 23061 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
23221 root      1920 S    ash -c ps | grep mosquitto
23223 root      1920 R    grep mosquitto
2025-03-17 14:56:00,010 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:56:00,011 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:56:00,011 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:56:00,097 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:56:00,180 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:56:10,222 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:56:10,222 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:56:10,222 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:56:10,222 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:56:10,223 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:56:10,223 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:56:10,223 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 14:56:10,223 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 14:56:10,966 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 14:56:10,966 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 14:56:10,990 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 14:56:10,990 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 14:56:10,990 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 14:56:10,990 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 14:56:11,039 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 14:56:11,087 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 14:56:11,132 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 14:56:11,177 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 14:56:11,438 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 14:56:11,438 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 14:56:11,439 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 14:56:11,704 - wireless_ap_test - INFO - API authentication successful
2025-03-17 14:56:11,704 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 14:56:11,704 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 14:56:11,850 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 14:56:11,850 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - API connection closed
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 14:56:11,948 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 14:56:12,190 - wireless_ap_test - INFO - API authentication successful
2025-03-17 14:56:12,190 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 14:56:12,190 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 14:56:12,191 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 14:56:12,363 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 14:56:12,363 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 14:56:12,363 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 14:56:12,454 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 14:56:12,605 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 14:56:12,605 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 14:56:12,605 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 14:56:12,605 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 14:56:12,748 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 14:56:12,748 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 14:56:12,748 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 14:56:12,748 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 14:56:12,895 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 14:56:12,896 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 14:56:13,157 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 14:56:13,158 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 14:56:13,379 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 14:56:13,379 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 14:56:13,379 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 14:56:13,379 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 14:56:14,254 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 14:56:14,254 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 14:56:14,254 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 14:56:14,254 - wireless_ap_test - INFO - MQTT Process Check: 23366 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
23385 root      1920 S    ash -c ps | grep mosquitto
23388 root      1920 S    grep mosquitto
2025-03-17 14:56:14,280 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 14:56:14,280 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 14:56:14,280 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 14:56:14,374 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 14:56:14,477 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 14:56:14,477 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 14:56:14,477 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 14:56:14,477 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 14:56:14,478 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 14:56:14,478 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 14:56:14,478 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 14:56:24,519 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 14:56:24,519 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 14:56:24,519 - wireless_ap_test - INFO - Validation Results:
2025-03-17 14:56:24,519 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - Delete request:
2025-03-17 14:56:24,520 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 14:56:24,594 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 14:56:24,595 - wireless_ap_test - INFO - API connection closed
2025-03-17 14:56:24,595 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 14:56:24,595 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 14:56:24,595 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 14:56:24,595 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 14:56:24,596 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 18, Failed: 0
2025-03-17 15:11:42,717 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 15:11:42,718 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 15:11:42,718 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 15:11:42,718 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 15:11:42,719 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 15:11:42,719 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 15:11:42,719 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:11:45,999 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:11:47,124 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:11:47,124 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:11:48,737 - wireless_ap_test - INFO - Filled username
2025-03-17 15:11:48,863 - wireless_ap_test - INFO - Filled password
2025-03-17 15:11:49,026 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:11:49,658 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:11:50,662 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:11:51,888 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:11:51,889 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:11:52,875 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:11:52,875 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:11:54,070 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:11:55,072 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:11:55,072 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:11:56,241 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:11:56,266 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:11:56,287 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:11:56,308 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:11:56,456 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:11:56,599 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:11:58,804 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:11:58,804 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:11:58,821 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:11:58,821 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:11:58,835 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:11:59,001 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:12:00,011 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:12:00,011 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:12:00,034 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:12:00,207 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:12:00,219 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:12:00,220 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:12:00,220 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:12:00,643 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:12:00,643 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:12:01,780 - wireless_ap_test - INFO - Filled username
2025-03-17 15:12:01,913 - wireless_ap_test - INFO - Filled password
2025-03-17 15:12:02,079 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:12:02,718 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:12:03,721 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:12:04,940 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:12:04,940 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:12:06,175 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:12:06,175 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:12:07,897 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:12:09,063 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:12:09,565 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:12:09,565 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:12:10,967 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:12:10,968 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:12:10,968 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:12:13,462 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:12:13,462 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:12:13,462 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:12:18,057 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:12:18,058 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:12:18,058 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:12:18,932 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:12:19,434 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:12:22,286 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:12:24,465 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:12:24,465 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:12:26,842 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:12:28,608 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:12:30,827 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:12:30,828 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:12:36,034 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:12:36,034 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:12:36,034 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:12:36,959 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:12:36,960 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:12:36,960 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:12:36,960 - wireless_ap_test - INFO - MQTT Process Check: 23366 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
24238 root      1920 S    ash -c ps | grep mosquitto
24240 root      1920 S    grep mosquitto
2025-03-17 15:12:36,982 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:12:36,982 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:12:36,982 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:12:37,067 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:12:37,150 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:12:37,150 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:12:37,151 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:12:37,151 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:12:37,151 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:12:37,151 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:12:37,151 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:12:47,232 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:12:47,232 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:12:47,232 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:12:47,232 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:12:47,232 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:12:47,232 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:12:47,233 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:12:52,260 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 15:12:52,260 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 15:12:52,260 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 15:12:53,268 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:12:54,802 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:12:55,610 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:12:55,738 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:12:55,821 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:12:56,106 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:12:56,106 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:12:56,106 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:12:56,975 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:12:56,975 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:12:56,975 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:12:57,121 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:12:57,121 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:12:57,184 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:12:57,184 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:12:57,184 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:12:57,226 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:12:57,635 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:12:57,706 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:12:57,706 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:12:57,706 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:12:57,878 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:12:57,879 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:13:00,239 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:13:00,239 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:13:00,324 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:13:00,324 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:13:00,324 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:13:01,210 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:13:01,211 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:13:01,211 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:13:01,211 - wireless_ap_test - INFO - MQTT Process Check: 24305 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
24457 root      1920 S    ash -c ps | grep mosquitto
24459 root      1920 R    grep mosquitto
2025-03-17 15:13:01,235 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:13:01,235 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:13:01,236 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:13:01,328 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:13:01,415 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:13:01,416 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:13:11,462 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:13:11,462 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:13:11,462 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:13:11,462 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:13:11,462 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:13:11,462 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:13:11,463 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:13:11,463 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:13:12,246 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:13:12,246 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:13:12,271 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:13:12,271 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:13:12,271 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:13:12,271 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:13:12,330 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:13:12,382 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:13:12,427 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:13:12,471 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:13:12,729 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:13:12,729 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:13:12,730 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:13:12,730 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:13:12,730 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:13:12,730 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:13:12,730 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:13:12,731 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:13:12,731 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:13:12,731 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:13:12,996 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:13:12,997 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:13:12,997 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:13:13,131 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:13:13,131 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:13:13,224 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:13:13,224 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:13:13,225 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:13:13,225 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:13:13,225 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:13:13,225 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:13:13,225 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:13:13,476 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:13:13,476 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:13:13,476 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:13:13,477 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:13:13,477 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:13:13,477 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:13:13,478 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:13:13,478 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:13:13,479 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:13:13,479 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:13:13,667 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:13:13,668 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:13:13,668 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:13:13,758 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:13:13,759 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:13:13,921 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:13:13,921 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:13:13,921 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:13:13,922 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:13:14,073 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:13:14,073 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:13:14,073 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:13:14,073 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:13:14,237 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:13:14,238 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:13:14,504 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:13:14,505 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:13:14,687 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:13:14,687 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:13:14,687 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:13:14,687 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:13:15,545 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:13:15,545 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:13:15,545 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:13:15,545 - wireless_ap_test - INFO - MQTT Process Check: 24607 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
24628 root      1920 S    ash -c ps | grep mosquitto
24630 root      1920 S    grep mosquitto
2025-03-17 15:13:15,571 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:13:15,572 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:13:15,572 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:13:15,668 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:13:15,759 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:13:25,813 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:13:25,813 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:13:25,814 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:13:25,814 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:13:25,814 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:13:25,814 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:13:25,815 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:13:25,815 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:13:25,815 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:13:25,815 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:13:25,815 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:13:25,892 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:13:25,892 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:13:25,893 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:13:25,893 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:13:25,893 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:13:25,893 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:13:25,893 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:13:27,050 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:13:28,491 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:13:28,492 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:13:30,241 - wireless_ap_test - INFO - Filled username
2025-03-17 15:13:30,378 - wireless_ap_test - INFO - Filled password
2025-03-17 15:13:30,552 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:13:31,247 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:13:32,251 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:13:33,600 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:13:33,600 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:13:34,796 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:13:34,797 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:13:36,005 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:13:37,007 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:13:37,007 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:13:38,199 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:13:38,233 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:13:38,265 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:13:38,299 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:13:38,467 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:13:38,617 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:13:40,831 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:13:40,831 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:13:40,853 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:13:40,853 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:13:40,870 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:13:41,084 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:13:42,093 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:13:42,093 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:13:42,115 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:13:42,296 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:13:42,311 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:13:42,312 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:13:42,312 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:13:42,965 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:13:42,966 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:13:44,187 - wireless_ap_test - INFO - Filled username
2025-03-17 15:13:44,323 - wireless_ap_test - INFO - Filled password
2025-03-17 15:13:44,498 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:13:45,175 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:13:46,180 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:13:47,476 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:13:47,477 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:13:48,793 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:13:48,793 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:13:50,580 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:13:51,759 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:13:52,261 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:13:52,262 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:13:53,789 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:13:53,789 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:13:53,789 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:13:56,343 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:13:56,343 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:13:56,343 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:14:01,110 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:14:01,110 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:14:01,111 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:14:02,067 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:14:02,570 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:14:05,510 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:14:07,701 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:14:07,701 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:14:10,132 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:14:11,902 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:14:14,144 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:14:14,144 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:14:19,343 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:14:19,343 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:14:19,343 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:14:20,236 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:14:20,236 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:14:20,236 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:14:20,236 - wireless_ap_test - INFO - MQTT Process Check: 24607 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
25055 root      1920 S    ash -c ps | grep mosquitto
25057 root      1920 S    grep mosquitto
2025-03-17 15:14:20,257 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:14:20,257 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:14:20,257 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:14:20,340 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 15:14:20,419 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:14:30,460 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:14:30,460 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:14:30,460 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:14:30,460 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 15:14:30,460 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:14:30,460 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 15:14:30,460 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 15:14:30,461 - wireless_ap_test - INFO - GUI validation completed with success: False
2025-03-17 15:14:35,466 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 15:14:35,466 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 15:14:35,466 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 15:14:36,476 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:14:38,058 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:14:38,857 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:14:38,983 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:14:39,064 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:14:39,348 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:14:39,349 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:14:39,349 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:14:40,204 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:14:40,204 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:14:40,204 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:14:40,349 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:14:40,349 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:14:40,410 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:14:40,410 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:14:40,410 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:14:40,451 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:14:40,843 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:14:40,912 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:14:40,912 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:14:40,912 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:14:41,079 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:14:41,079 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:14:43,376 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:14:43,376 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:14:43,457 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:14:43,457 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:14:43,457 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:14:44,301 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:14:44,301 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:14:44,301 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:14:44,302 - wireless_ap_test - INFO - MQTT Process Check: 25125 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
25265 root      1920 S    ash -c ps | grep mosquitto
25267 root      1920 S    grep mosquitto
2025-03-17 15:14:44,323 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:14:44,323 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:14:44,323 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:14:44,408 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 15:14:44,489 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:14:54,529 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:14:54,529 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - SSH validation completed with success: False
2025-03-17 15:14:54,530 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:14:55,280 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:14:55,280 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:14:55,302 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:14:55,302 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:14:55,302 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:14:55,302 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:14:55,346 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:14:55,391 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:14:55,435 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:14:55,479 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:14:55,732 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:14:55,733 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:14:55,734 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:14:55,997 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:14:55,997 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:14:55,997 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:14:56,133 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:14:56,133 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:14:56,227 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:14:56,471 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:14:56,471 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:14:56,472 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:14:56,656 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:14:56,656 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:14:56,656 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:14:56,742 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:14:56,896 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:14:56,896 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:14:56,897 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:14:56,897 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:14:57,046 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:14:57,046 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:14:57,046 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:14:57,046 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:14:57,238 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:14:57,494 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:14:57,495 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:14:57,680 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:14:57,680 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:14:57,680 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:14:57,680 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:14:58,536 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:14:58,536 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:14:58,536 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:14:58,536 - wireless_ap_test - INFO - MQTT Process Check: 25421 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
25436 root      1920 S    ash -c ps | grep mosquitto
25438 root      1920 S    grep mosquitto
2025-03-17 15:14:58,563 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:14:58,563 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:14:58,563 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:14:58,673 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:14:58,767 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:14:58,767 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:14:58,767 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:14:58,767 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:14:58,767 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:14:58,768 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:14:58,768 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:15:08,808 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:15:08,808 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:15:08,808 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:15:08,808 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:15:08,809 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:15:08,883 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:15:08,884 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 16, Failed: 2
2025-03-17 15:15:08,884 - wireless_ap_test - INFO - 
========================================
2025-03-17 15:15:08,884 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-17 15:15:08,885 - wireless_ap_test - INFO - ========================================
2025-03-17 15:15:08,885 - wireless_ap_test - INFO - 12. validation_gui_mqtt_broker_data_to_server: Validation failed
2025-03-17 15:15:08,885 - wireless_ap_test - INFO - 15. validation_ssh_mqtt_broker_data_to_server: Validation failed
2025-03-17 15:15:08,885 - wireless_ap_test - INFO - ========================================
2025-03-17 15:23:37,191 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 15:23:37,192 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 15:23:37,192 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 15:23:37,192 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 15:23:37,192 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 15:23:37,193 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 15:23:37,193 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:23:38,432 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:23:39,555 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:23:39,555 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:23:41,230 - wireless_ap_test - INFO - Filled username
2025-03-17 15:23:41,357 - wireless_ap_test - INFO - Filled password
2025-03-17 15:23:41,519 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:23:42,153 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:23:43,157 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:23:44,391 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:23:44,391 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:23:45,402 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:23:45,402 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:23:46,588 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:23:47,591 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:23:47,591 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:23:48,761 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:23:48,786 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:23:48,809 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:23:48,832 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:23:48,978 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:23:49,118 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:23:51,308 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:23:51,308 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:23:51,327 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:23:51,327 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:23:51,341 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:23:51,514 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:23:52,525 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:23:52,525 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:23:52,539 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:23:52,715 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:23:52,727 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:23:52,727 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:23:52,727 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:23:53,167 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:23:53,167 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:23:54,319 - wireless_ap_test - INFO - Filled username
2025-03-17 15:23:54,447 - wireless_ap_test - INFO - Filled password
2025-03-17 15:23:54,617 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:23:55,243 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:23:56,246 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:23:57,471 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:23:57,471 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:23:58,692 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:23:58,692 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:24:00,416 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:24:01,631 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:24:02,132 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:24:02,132 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:24:03,558 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:24:03,559 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:24:03,559 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:24:06,053 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:24:06,053 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:24:06,053 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:24:10,662 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:24:10,662 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:24:10,662 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:24:11,543 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:24:12,045 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:24:14,895 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:24:17,067 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:24:17,067 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:24:19,462 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:24:21,240 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:24:23,462 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:24:23,462 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:24:28,666 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:24:28,666 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:24:28,666 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:24:29,519 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:24:29,520 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:24:29,520 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:24:29,520 - wireless_ap_test - INFO - MQTT Process Check: 25421 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
26121 root      1920 S    ash -c ps | grep mosquitto
26123 root      1920 S    grep mosquitto
2025-03-17 15:24:29,544 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:24:29,544 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:24:29,544 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:24:29,629 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:24:29,710 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:24:29,711 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:24:39,763 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:24:39,763 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:24:39,764 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:24:39,764 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:24:39,764 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:24:39,764 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:24:39,764 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:24:44,792 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 15:24:44,792 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 15:24:44,792 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 15:24:44,800 - wireless_ap_test - INFO - Closed data_to_server page
2025-03-17 15:24:44,800 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:24:44,825 - wireless_ap_test - INFO - Closed mqtt_broker page
2025-03-17 15:24:45,826 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:24:45,834 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-17 15:24:46,393 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:24:48,395 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:24:48,400 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:24:49,204 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:24:49,331 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:24:49,413 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:24:49,692 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:24:49,693 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:24:49,693 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:24:50,561 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:24:50,562 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:24:50,562 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:24:50,706 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:24:50,706 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:24:50,770 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:24:50,770 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:24:50,770 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:24:50,813 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:24:51,211 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:24:51,281 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:24:51,281 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:24:51,281 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:24:51,450 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:24:51,450 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:24:53,813 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:24:53,813 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:24:53,896 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:24:53,896 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:24:53,896 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:24:54,739 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:24:54,740 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:24:54,740 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:24:54,740 - wireless_ap_test - INFO - MQTT Process Check: 26189 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
26340 root      1920 S    ash -c ps | grep mosquitto
26342 root      1920 R    grep mosquitto
2025-03-17 15:24:54,764 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:24:54,764 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:24:54,764 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:24:54,849 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:24:54,932 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:24:54,933 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:25:04,975 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:25:04,975 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:25:04,975 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:25:04,975 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:25:04,976 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:25:04,976 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:25:04,976 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:25:04,976 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:25:05,723 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:25:05,723 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:25:05,758 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:25:05,758 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:25:05,758 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:25:05,758 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:25:05,805 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:25:05,862 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:25:05,907 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:25:05,952 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:25:06,206 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:25:06,207 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:25:06,208 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:25:06,208 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:25:06,208 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:25:06,470 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:25:06,470 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:25:06,471 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:25:06,597 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:25:06,597 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:25:06,691 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:25:06,949 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:25:07,132 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:25:07,133 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:25:07,133 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:25:07,220 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:25:07,369 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:25:07,369 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:25:07,369 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:25:07,369 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:25:07,539 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:25:07,539 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:25:07,539 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:25:07,539 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:25:07,713 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:25:07,714 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:25:07,981 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:25:07,981 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:25:08,168 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:25:08,169 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:25:08,169 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:25:08,169 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:25:09,024 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:25:09,024 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:25:09,024 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:25:09,024 - wireless_ap_test - INFO - MQTT Process Check: 26494 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
26511 root      1920 S    ash -c ps | grep mosquitto
26513 root      1920 S    grep mosquitto
2025-03-17 15:25:09,075 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:25:09,075 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:25:09,075 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:25:09,168 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:25:09,260 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:25:19,304 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:25:19,304 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:25:19,304 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:25:19,304 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:25:19,304 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:25:19,304 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:25:19,305 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:25:19,305 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:25:19,305 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:25:19,305 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:25:19,305 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:25:19,380 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:25:20,522 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:25:21,657 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:25:21,658 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:25:23,265 - wireless_ap_test - INFO - Filled username
2025-03-17 15:25:23,392 - wireless_ap_test - INFO - Filled password
2025-03-17 15:25:23,553 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:25:24,188 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:25:25,191 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:25:26,407 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:25:26,407 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:25:27,403 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:25:27,403 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:25:28,589 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:25:29,591 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:25:29,591 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:25:30,762 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:25:30,787 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:25:30,809 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:25:30,833 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:25:30,977 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:25:31,116 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:25:33,312 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:25:33,312 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:25:33,329 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:25:33,329 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:25:33,343 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:25:33,514 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:25:34,523 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:25:34,523 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:25:34,539 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:25:34,718 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:25:34,730 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:25:34,731 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:25:34,731 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:25:35,178 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:25:35,179 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:25:36,332 - wireless_ap_test - INFO - Filled username
2025-03-17 15:25:36,461 - wireless_ap_test - INFO - Filled password
2025-03-17 15:25:36,656 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:25:37,311 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:25:38,315 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:25:39,566 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:25:39,566 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:25:40,890 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:25:40,890 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:25:42,651 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:25:43,809 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:25:44,310 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:25:44,311 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:25:45,709 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:25:45,709 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:25:45,710 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:25:48,235 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:25:48,235 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:25:48,235 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:25:52,897 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:25:52,897 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:25:52,897 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:25:53,779 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:25:54,282 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:25:57,115 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:25:59,292 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:25:59,292 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:26:01,669 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:26:03,416 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:26:05,643 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:26:05,644 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:26:10,838 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:26:10,838 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:26:10,838 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:26:11,722 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:26:11,722 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:26:11,722 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:26:11,722 - wireless_ap_test - INFO - MQTT Process Check: 26494 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
26926 root      1920 S    ash -c ps | grep mosquitto
26928 root      1920 S    grep mosquitto
2025-03-17 15:26:11,743 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:26:11,743 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:26:11,743 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:26:11,826 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 15:26:11,906 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 15:26:11,907 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:26:21,949 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:26:21,949 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:26:21,949 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:26:21,949 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 15:26:21,949 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:26:21,949 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 15:26:21,949 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 15:26:21,950 - wireless_ap_test - INFO - GUI validation completed with success: False
2025-03-17 15:26:26,956 - wireless_ap_test - INFO - Deleted 0 DTS interfaces
2025-03-17 15:26:26,956 - wireless_ap_test - WARNING - Cleanup completed: No interfaces deleted or encountered issues.
2025-03-17 15:26:26,956 - wireless_ap_test - INFO - Cleanup completed for data_to_server GUI test - data_to_server
2025-03-17 15:26:26,964 - wireless_ap_test - INFO - Closed data_to_server page
2025-03-17 15:26:26,964 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:26:26,991 - wireless_ap_test - INFO - Closed mqtt_broker page
2025-03-17 15:26:27,992 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:26:28,002 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-17 15:26:28,568 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:26:30,570 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:26:30,575 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:26:31,378 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:26:31,507 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:26:31,589 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:26:31,888 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:26:31,888 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:26:31,888 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:26:32,750 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:26:32,750 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:26:32,750 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:26:32,893 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:26:32,893 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:26:32,956 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:26:32,956 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:26:32,956 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:26:32,998 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:26:33,388 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:26:33,458 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:26:33,458 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:26:33,458 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:26:33,632 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:26:33,632 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:26:35,928 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:26:35,928 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:26:36,010 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:26:36,010 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:26:36,010 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:26:36,860 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:26:36,860 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:26:36,860 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:26:36,860 - wireless_ap_test - INFO - MQTT Process Check: 26993 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
27136 root      1920 S    ash -c ps | grep mosquitto
27138 root      1920 S    grep mosquitto
2025-03-17 15:26:36,882 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:26:36,882 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:26:36,883 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:26:36,967 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-17 15:26:37,048 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:26:37,048 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-17 15:26:37,048 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-17 15:26:37,048 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-17 15:26:37,049 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-17 15:26:37,049 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-17 15:26:37,049 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:26:47,090 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:26:47,090 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:26:47,090 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:26:47,090 - wireless_ap_test - INFO - Overall Success: False
2025-03-17 15:26:47,090 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:26:47,090 - wireless_ap_test - INFO - DTS Success: False
2025-03-17 15:26:47,090 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-17 15:26:47,091 - wireless_ap_test - INFO - SSH validation completed with success: False
2025-03-17 15:26:47,091 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:26:47,846 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:26:47,846 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:26:47,868 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:26:47,868 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:26:47,868 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:26:47,868 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:26:47,916 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:26:47,961 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:26:48,005 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:26:48,049 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:26:48,301 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:26:48,301 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:26:48,302 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:26:48,571 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:26:48,571 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:26:48,571 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:26:48,695 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:26:48,695 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:26:48,790 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:26:48,790 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:26:48,791 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:26:48,791 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:26:48,791 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:26:48,791 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:26:48,791 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:26:49,036 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:26:49,036 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:26:49,036 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:26:49,036 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:26:49,036 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:26:49,037 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:26:49,037 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:26:49,037 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:26:49,037 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:26:49,037 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:26:49,241 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:26:49,241 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:26:49,241 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:26:49,348 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:26:49,349 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:26:49,511 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:26:49,511 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:26:49,511 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:26:49,511 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:26:49,668 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:26:49,668 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:26:49,668 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:26:49,669 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:26:49,836 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:26:50,094 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:26:50,094 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:26:50,283 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:26:50,283 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:26:50,283 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:26:50,283 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:26:51,153 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:26:51,153 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:26:51,153 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:26:51,154 - wireless_ap_test - INFO - MQTT Process Check: 27286 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
27307 root      1920 S    ash -c ps | grep mosquitto
27310 root      1920 S    grep mosquitto
2025-03-17 15:26:51,179 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:26:51,179 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:26:51,179 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:26:51,275 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:26:51,371 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:26:51,372 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:27:01,415 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:27:01,415 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:27:01,416 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:27:01,492 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:27:01,493 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 16, Failed: 2
2025-03-17 15:27:01,493 - wireless_ap_test - INFO - 
========================================
2025-03-17 15:27:01,493 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-17 15:27:01,493 - wireless_ap_test - INFO - ========================================
2025-03-17 15:27:01,494 - wireless_ap_test - INFO - 12. validation_gui_mqtt_broker_data_to_server: Validation failed
2025-03-17 15:27:01,494 - wireless_ap_test - INFO - 15. validation_ssh_mqtt_broker_data_to_server: Validation failed
2025-03-17 15:27:01,494 - wireless_ap_test - INFO - ========================================
2025-03-17 15:30:30,834 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 15:30:30,834 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 15:30:30,834 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 15:30:30,835 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 15:30:30,835 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 15:30:30,835 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 15:30:30,835 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:30:32,115 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:30:33,269 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:30:33,269 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:30:34,887 - wireless_ap_test - INFO - Filled username
2025-03-17 15:30:35,017 - wireless_ap_test - INFO - Filled password
2025-03-17 15:30:35,328 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:30:36,004 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:30:37,010 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:30:38,302 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:30:38,303 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:30:39,371 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:30:39,371 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:30:40,573 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:30:41,575 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:30:41,575 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:30:42,757 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:30:42,782 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:30:42,804 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:30:42,828 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:30:42,982 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:30:43,121 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:30:45,336 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:30:45,336 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:30:45,352 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:30:45,352 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:30:45,367 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:30:45,541 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:30:46,552 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:30:46,552 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:30:46,568 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:30:46,777 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:30:46,803 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:30:46,803 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:30:46,804 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:30:47,169 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:30:47,169 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:30:48,466 - wireless_ap_test - INFO - Filled username
2025-03-17 15:30:48,594 - wireless_ap_test - INFO - Filled password
2025-03-17 15:30:48,755 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:30:49,407 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:30:50,408 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:30:51,619 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:30:51,619 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:30:52,977 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:30:52,978 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:30:54,713 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:30:55,872 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:30:56,373 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:30:56,374 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:30:57,847 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:30:57,847 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:30:57,847 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:31:00,361 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:31:00,361 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:31:00,361 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:31:04,951 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:31:04,951 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:31:04,951 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:31:05,822 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:31:06,322 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:31:09,172 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:31:11,362 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:31:11,362 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:31:13,762 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:31:15,522 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:31:17,748 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:31:17,748 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:31:22,951 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:31:22,951 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:31:22,951 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:31:23,812 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:31:23,812 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:31:23,812 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:31:23,812 - wireless_ap_test - INFO - MQTT Process Check: 27286 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
27875 root      1920 S    ash -c ps | grep mosquitto
27877 root      1920 R    grep mosquitto
2025-03-17 15:31:23,834 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:31:23,834 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:31:23,834 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:31:23,919 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:31:24,001 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:31:24,001 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:31:24,002 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:31:24,002 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:31:24,002 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:31:24,002 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:31:24,002 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:31:34,054 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:31:34,054 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:31:34,054 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:31:34,054 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:31:34,054 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:31:34,054 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:31:34,055 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:31:34,063 - wireless_ap_test - INFO - Closed data_to_server page
2025-03-17 15:31:34,063 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:31:34,118 - wireless_ap_test - INFO - Closed mqtt_broker page
2025-03-17 15:31:35,119 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:31:35,127 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-17 15:31:35,667 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:31:37,669 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:31:37,675 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:31:38,550 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:31:38,677 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:31:38,759 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:31:39,037 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:31:39,037 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:31:39,037 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:31:39,904 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:31:39,904 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:31:39,904 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:31:40,052 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:31:40,052 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:31:40,116 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:31:40,116 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:31:40,116 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:31:40,157 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:31:40,560 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:31:40,631 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:31:40,631 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:31:40,631 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:31:40,803 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:31:40,804 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:31:43,165 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:31:43,166 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:31:43,250 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:31:43,250 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:31:43,250 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:31:44,139 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:31:44,139 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:31:44,139 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:31:44,139 - wireless_ap_test - INFO - MQTT Process Check: 27943 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
28094 root      1920 S    ash -c ps | grep mosquitto
28096 root      1920 R    grep mosquitto
2025-03-17 15:31:44,162 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:31:44,162 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:31:44,162 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:31:44,250 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:31:44,336 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:31:44,337 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:31:54,378 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:31:54,378 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:31:54,378 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:31:54,378 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:31:54,378 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:31:54,378 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:31:54,379 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:31:54,379 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:31:55,135 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:31:55,135 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:31:55,161 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:31:55,161 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:31:55,161 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:31:55,161 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:31:55,207 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:31:55,253 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:31:55,298 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:31:55,345 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:31:55,604 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:31:55,604 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:31:55,604 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:31:55,604 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:31:55,605 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:31:55,861 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:31:55,862 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:31:55,862 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:31:55,994 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:31:55,995 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:31:56,096 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:31:56,387 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:31:56,388 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:31:56,388 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:31:56,388 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:31:56,563 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:31:56,563 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:31:56,563 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:31:56,657 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:31:56,658 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:31:56,809 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:31:56,809 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:31:56,810 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:31:56,810 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:31:56,954 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:31:56,954 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:31:56,954 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:31:56,954 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:31:57,116 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:31:57,117 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:31:57,376 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:31:57,376 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:31:57,562 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:31:57,562 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:31:57,562 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:31:57,562 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:31:58,419 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:31:58,419 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:31:58,419 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:31:58,419 - wireless_ap_test - INFO - MQTT Process Check: 28243 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
28265 root      1920 S    ash -c ps | grep mosquitto
28267 root      1920 S    grep mosquitto
2025-03-17 15:31:58,445 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:31:58,445 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:31:58,445 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:31:58,538 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:31:58,629 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:31:58,630 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:32:08,673 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:32:08,673 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:32:08,673 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:32:08,673 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:32:08,673 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:32:08,673 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:32:08,673 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:32:08,674 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:32:08,674 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:32:08,674 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:32:08,674 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:32:08,751 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:32:08,751 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:32:08,751 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:32:08,751 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:32:08,752 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:32:08,752 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:32:08,752 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:32:09,908 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:32:11,063 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:32:11,063 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:32:12,670 - wireless_ap_test - INFO - Filled username
2025-03-17 15:32:12,797 - wireless_ap_test - INFO - Filled password
2025-03-17 15:32:12,961 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:32:13,593 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:32:14,596 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:32:15,839 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:32:15,839 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:32:16,845 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:32:16,845 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:32:18,028 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:32:19,031 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:32:19,031 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:32:20,203 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:32:20,228 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:32:20,251 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:32:20,274 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:32:20,423 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:32:20,563 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:32:22,763 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:32:22,763 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:32:22,781 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:32:22,781 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:32:22,795 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:32:22,968 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:32:23,979 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:32:23,979 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:32:23,995 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:32:24,187 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:32:24,198 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:32:24,198 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:32:24,198 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:32:24,628 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:32:24,629 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:32:25,791 - wireless_ap_test - INFO - Filled username
2025-03-17 15:32:25,931 - wireless_ap_test - INFO - Filled password
2025-03-17 15:32:26,100 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:32:26,733 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:32:27,735 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:32:28,949 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:32:28,949 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:32:30,198 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:32:30,198 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:32:31,915 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:32:33,119 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:32:33,619 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:32:33,620 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:32:35,042 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:32:35,042 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:32:35,042 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:32:37,551 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:32:37,551 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:32:37,551 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:32:42,152 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:32:42,152 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:32:42,152 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:32:43,025 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:32:43,529 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:32:46,361 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:32:48,541 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:32:48,541 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:32:50,941 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:32:52,782 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:32:55,009 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:32:55,009 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:33:00,223 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:33:00,223 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:33:00,223 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:33:01,100 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:33:01,100 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:33:01,101 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:33:01,101 - wireless_ap_test - INFO - MQTT Process Check: 28243 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
28770 root      1920 S    ash -c ps | grep mosquitto
28772 root      1920 R    grep mosquitto
2025-03-17 15:33:01,123 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:33:01,123 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:33:01,123 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:33:01,208 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:33:01,290 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:33:01,290 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:33:01,290 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:33:01,291 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:33:01,291 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:33:01,291 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:33:01,291 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:33:11,335 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:33:11,335 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:33:11,335 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:33:11,335 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:33:11,335 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:33:11,335 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:33:11,336 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:33:11,345 - wireless_ap_test - INFO - Closed data_to_server page
2025-03-17 15:33:11,345 - wireless_ap_test - INFO - Cleanup completed for mqtt_broker GUI test - mqtt_broker
2025-03-17 15:33:11,400 - wireless_ap_test - INFO - Closed mqtt_broker page
2025-03-17 15:33:12,401 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:33:12,410 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-17 15:33:12,995 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:33:14,997 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:33:15,003 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:33:15,815 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:33:15,941 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:33:16,025 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:33:16,305 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:33:16,305 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:33:16,306 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:33:17,178 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:33:17,178 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:33:17,178 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:33:17,338 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:33:17,338 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:33:17,404 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:33:17,404 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:33:17,404 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:33:17,448 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:33:17,854 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:33:17,928 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:33:17,928 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:33:17,929 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:33:18,106 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:33:18,106 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:33:20,466 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:33:20,466 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:33:20,549 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:33:20,549 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:33:20,549 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:33:21,414 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:33:21,414 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:33:21,414 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:33:21,414 - wireless_ap_test - INFO - MQTT Process Check: 28842 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
28989 root      1920 S    ash -c ps | grep mosquitto
28991 root      1920 R    grep mosquitto
2025-03-17 15:33:21,436 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:33:21,436 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:33:21,437 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:33:21,527 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:33:21,615 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:33:31,657 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:33:31,657 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:33:31,657 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:33:31,657 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:33:31,657 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:33:31,657 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:33:31,658 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:33:31,658 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:33:32,422 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:33:32,422 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:33:32,445 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:33:32,445 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:33:32,445 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:33:32,445 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:33:32,492 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:33:32,538 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:33:32,583 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:33:32,630 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:33:32,887 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:33:32,888 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:33:32,888 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:33:33,149 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:33:33,149 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:33:33,149 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:33:33,280 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:33:33,280 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:33:33,374 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:33:33,375 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:33:33,614 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:33:33,615 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:33:33,615 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:33:33,615 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:33:33,783 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:33:33,783 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:33:33,784 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:33:33,871 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:33:33,871 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:33:33,872 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:33:33,872 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:33:33,872 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:33:33,872 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:33:33,872 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:33:34,024 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:33:34,024 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:33:34,024 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:33:34,024 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:33:34,167 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:33:34,167 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:33:34,167 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:33:34,168 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:33:34,317 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:33:34,585 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:33:34,585 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:33:34,783 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:33:34,783 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:33:34,783 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:33:34,783 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:33:35,664 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:33:35,664 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:33:35,665 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:33:35,665 - wireless_ap_test - INFO - MQTT Process Check: 29134 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
29161 root      1920 S    ash -c ps | grep mosquitto
29164 root      1920 R    grep mosquitto
2025-03-17 15:33:35,690 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:33:35,690 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:33:35,691 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:33:35,789 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:33:35,891 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:33:35,892 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:33:45,949 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:33:45,949 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:33:45,949 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:33:45,949 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:33:45,949 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:33:45,949 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:33:45,950 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:33:45,950 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:33:45,950 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:33:45,950 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:33:45,950 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:33:46,028 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:33:46,029 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 18, Failed: 0
2025-03-17 15:43:32,556 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-17 15:43:32,556 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-17 15:43:32,557 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-17 15:43:32,557 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-17 15:43:32,558 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-17 15:43:32,558 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-17 15:43:32,558 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:43:33,011 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-17 15:43:33,921 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:43:35,047 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:43:35,047 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:43:36,638 - wireless_ap_test - INFO - Filled username
2025-03-17 15:43:36,767 - wireless_ap_test - INFO - Filled password
2025-03-17 15:43:36,941 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:43:37,589 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:43:38,592 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:43:39,809 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:43:39,809 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:43:40,765 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:43:40,765 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:43:41,940 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:43:42,942 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:43:42,942 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:43:44,147 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:43:44,172 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:43:44,199 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:43:44,225 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:43:44,370 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:43:44,511 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:43:46,712 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:43:46,712 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:43:46,729 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:43:46,729 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:43:46,742 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:43:46,913 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:43:47,926 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:43:47,926 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:43:47,946 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:43:48,130 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:43:48,141 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:43:48,141 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:43:48,141 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:43:48,586 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:43:48,586 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:43:49,722 - wireless_ap_test - INFO - Filled username
2025-03-17 15:43:49,852 - wireless_ap_test - INFO - Filled password
2025-03-17 15:43:50,022 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:43:50,674 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:43:51,676 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:43:52,917 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:43:52,917 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:43:54,201 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:43:54,201 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:43:55,961 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:43:57,139 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:43:57,640 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:43:57,640 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:43:59,277 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:43:59,277 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:43:59,277 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:44:01,893 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:44:01,893 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:44:01,893 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:44:06,674 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:44:06,674 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:44:06,674 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:44:07,556 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:44:08,058 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:44:10,914 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:44:13,087 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:44:13,087 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:44:15,508 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:44:17,326 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:44:19,558 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:44:19,558 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:44:24,751 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:44:24,751 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:44:24,752 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:44:25,622 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:44:25,623 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:44:25,623 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:44:25,623 - wireless_ap_test - INFO - MQTT Process Check: 29134 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
29879 root      1920 S    ash -c ps | grep mosquitto
29881 root      1920 S    grep mosquitto
2025-03-17 15:44:25,645 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:44:25,645 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:44:25,645 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:44:25,731 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:44:25,813 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:44:35,866 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:44:35,866 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:44:35,866 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:44:35,866 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:44:35,866 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:44:35,866 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:44:35,867 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:44:35,867 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-17 15:44:35,867 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-17 15:44:35,878 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-17 15:44:35,878 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-17 15:44:35,879 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-17 15:44:35,928 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-17 15:44:36,930 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:44:36,930 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-17 15:44:36,930 - wireless_ap_test - INFO - Closing browser context
2025-03-17 15:44:36,930 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-17 15:44:36,930 - wireless_ap_test - INFO - Closing browser
2025-03-17 15:44:37,545 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:44:40,568 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:44:40,581 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:44:41,511 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:44:41,634 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:44:41,717 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:44:42,001 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:44:42,002 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:44:42,002 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:44:42,900 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:44:42,901 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:44:42,901 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:44:43,055 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:44:43,055 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:44:43,124 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:44:43,124 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:44:43,124 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:44:43,174 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:44:43,597 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:44:43,670 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:44:43,670 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:44:43,670 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:44:43,843 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:44:43,844 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:44:46,209 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:44:46,209 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:44:46,292 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:44:46,292 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:44:46,293 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:44:47,169 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:44:47,169 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:44:47,169 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:44:47,169 - wireless_ap_test - INFO - MQTT Process Check: 29946 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30098 root      1920 S    ash -c ps | grep mosquitto
30100 root      1920 R    grep mosquitto
2025-03-17 15:44:47,192 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:44:47,192 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:44:47,192 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:44:47,280 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:44:47,363 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:44:47,363 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:44:47,363 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:44:47,363 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:44:47,364 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:44:47,364 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:44:47,364 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:44:57,405 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:44:57,406 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:44:57,406 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:44:58,201 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:44:58,201 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:44:58,226 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:44:58,227 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:44:58,227 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:44:58,227 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:44:58,273 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:44:58,320 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:44:58,367 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:44:58,411 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:44:58,668 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:44:58,668 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:44:58,668 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:44:58,669 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:44:58,669 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:44:58,669 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:44:58,669 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:44:58,669 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:44:58,670 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:44:58,670 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:44:58,937 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:44:58,937 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:44:58,937 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:44:59,058 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:44:59,058 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:44:59,152 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:44:59,152 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:44:59,153 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:44:59,153 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:44:59,153 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:44:59,153 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:44:59,153 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:44:59,398 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:44:59,399 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:44:59,399 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:44:59,591 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:44:59,591 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:44:59,591 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:44:59,677 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:44:59,677 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:44:59,677 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:44:59,677 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:44:59,678 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:44:59,678 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:44:59,678 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:44:59,824 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:44:59,824 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:44:59,824 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:44:59,825 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:44:59,968 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:44:59,968 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:44:59,968 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:44:59,968 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:45:00,121 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:45:00,122 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:45:00,379 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:45:00,379 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:45:00,577 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:45:00,577 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:45:00,577 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:45:00,577 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:45:01,577 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:45:01,577 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:45:01,577 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:45:01,577 - wireless_ap_test - INFO - MQTT Process Check: 30238 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30286 root      1920 S    ash -c ps | grep mosquitto
30289 root      1920 S    grep mosquitto
2025-03-17 15:45:01,603 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:45:01,603 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:45:01,603 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:45:01,706 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:45:01,802 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:45:01,802 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:45:01,802 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:45:01,803 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:45:01,803 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:45:01,803 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:45:01,803 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:45:11,842 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:45:11,843 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:45:11,843 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:45:11,844 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:45:11,918 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-17 15:45:12,184 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-17 15:45:13,085 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-17 15:45:14,174 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:45:14,174 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:45:15,824 - wireless_ap_test - INFO - Filled username
2025-03-17 15:45:15,956 - wireless_ap_test - INFO - Filled password
2025-03-17 15:45:16,131 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:45:16,767 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:45:17,776 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-17 15:45:19,111 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-17 15:45:19,112 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-17 15:45:20,383 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-17 15:45:20,383 - wireless_ap_test - INFO - Clicking Security tab
2025-03-17 15:45:21,569 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-17 15:45:22,571 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-17 15:45:22,571 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-17 15:45:23,826 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-17 15:45:23,847 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-17 15:45:23,875 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-17 15:45:23,897 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-17 15:45:24,093 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-17 15:45:24,238 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-17 15:45:26,459 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-17 15:45:26,459 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-17 15:45:26,474 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:45:26,475 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-17 15:45:26,488 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-17 15:45:26,653 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-17 15:45:27,662 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-17 15:45:27,662 - wireless_ap_test - INFO - Logout button count: 1
2025-03-17 15:45:27,677 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-17 15:45:27,857 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-17 15:45:27,873 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-17 15:45:27,873 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-17 15:45:27,873 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-17 15:45:28,291 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-17 15:45:28,291 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-17 15:45:29,447 - wireless_ap_test - INFO - Filled username
2025-03-17 15:45:29,581 - wireless_ap_test - INFO - Filled password
2025-03-17 15:45:29,754 - wireless_ap_test - INFO - Clicked login button
2025-03-17 15:45:30,415 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-17 15:45:31,417 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:45:32,711 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:45:32,711 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-17 15:45:33,945 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-17 15:45:33,945 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-17 15:45:35,681 - wireless_ap_test - INFO - Clicking add button
2025-03-17 15:45:36,851 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-17 15:45:37,353 - wireless_ap_test - INFO - Configuring data collection
2025-03-17 15:45:37,353 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-17 15:45:38,782 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-17 15:45:38,782 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-17 15:45:38,782 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-17 15:45:41,280 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-17 15:45:41,280 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-17 15:45:41,280 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-17 15:45:45,960 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-17 15:45:45,960 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-17 15:45:45,960 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-17 15:45:46,833 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-17 15:45:47,335 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-17 15:45:50,180 - wireless_ap_test - INFO - Successfully configured values
2025-03-17 15:45:52,348 - wireless_ap_test - INFO - Detected period configuration
2025-03-17 15:45:52,348 - wireless_ap_test - INFO - Configuring period: 5
2025-03-17 15:45:54,724 - wireless_ap_test - INFO - Configuring server settings
2025-03-17 15:45:56,460 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-17 15:45:58,683 - wireless_ap_test - INFO - Successfully set QoS
2025-03-17 15:45:58,683 - wireless_ap_test - INFO - Saving configuration
2025-03-17 15:46:03,883 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-17 15:46:03,883 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-17 15:46:03,884 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-17 15:46:04,747 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:46:04,747 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:46:04,747 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:46:04,748 - wireless_ap_test - INFO - MQTT Process Check: 30238 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30752 root      1920 S    ash -c ps | grep mosquitto
30754 root      1920 R    grep mosquitto
2025-03-17 15:46:04,769 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:46:04,769 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:46:04,769 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:46:04,853 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:46:04,934 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:46:04,934 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:46:04,934 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:46:04,935 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:46:04,935 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:46:04,935 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:46:04,935 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:46:14,976 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:46:14,976 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:46:14,976 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-17 15:46:14,977 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-17 15:46:14,985 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-17 15:46:14,986 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-17 15:46:14,987 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-17 15:46:15,035 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-17 15:46:16,036 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-17 15:46:16,036 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-17 15:46:16,036 - wireless_ap_test - INFO - Closing browser context
2025-03-17 15:46:16,036 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-17 15:46:16,036 - wireless_ap_test - INFO - Closing browser
2025-03-17 15:46:16,614 - wireless_ap_test - INFO - Browser closed successfully
2025-03-17 15:46:19,634 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-17 15:46:19,639 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-17 15:46:20,445 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-17 15:46:20,575 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-17 15:46:20,659 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-17 15:46:20,944 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-17 15:46:20,944 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-17 15:46:20,945 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-17 15:46:21,800 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-17 15:46:21,800 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-17 15:46:21,800 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-17 15:46:21,953 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-17 15:46:21,953 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-17 15:46:22,017 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-17 15:46:22,017 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-17 15:46:22,017 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-17 15:46:22,066 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-17 15:46:22,494 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-17 15:46:22,563 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-17 15:46:22,563 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-17 15:46:22,563 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-17 15:46:22,742 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-17 15:46:22,742 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-17 15:46:25,103 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-17 15:46:25,103 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-17 15:46:25,187 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:46:25,187 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-17 15:46:25,187 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt_broker and data_to_server
2025-03-17 15:46:26,033 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:46:26,033 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:46:26,033 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:46:26,033 - wireless_ap_test - INFO - MQTT Process Check: 30820 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30971 root      1920 S    ash -c ps | grep mosquitto
30973 root      1920 R    grep mosquitto
2025-03-17 15:46:26,056 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:46:26,056 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:46:26,056 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:46:26,144 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:46:26,227 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:46:36,270 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:46:36,270 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:46:36,270 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:46:36,270 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:46:36,270 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:46:36,270 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:46:36,271 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-17 15:46:36,271 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-17 15:46:37,007 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-17 15:46:37,007 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-17 15:46:37,036 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-17 15:46:37,036 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-17 15:46:37,036 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-17 15:46:37,036 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-17 15:46:37,084 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-17 15:46:37,132 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-17 15:46:37,178 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-17 15:46:37,222 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-17 15:46:37,473 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-17 15:46:37,473 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-17 15:46:37,473 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-17 15:46:37,473 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - data_to_server
2025-03-17 15:46:37,473 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-17 15:46:37,474 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt_broker
2025-03-17 15:46:37,474 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt_broker
2025-03-17 15:46:37,474 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-17 15:46:37,474 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-17 15:46:37,474 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:46:37,737 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:46:37,737 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-17 15:46:37,737 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-17 15:46:37,860 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-17 15:46:37,860 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - Running Data to Server api test for scenario data_to_server
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-17 15:46:37,952 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - API authentication successful
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-17 15:46:38,205 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-17 15:46:38,374 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-17 15:46:38,375 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-17 15:46:38,375 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-17 15:46:38,460 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-17 15:46:38,460 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-17 15:46:38,460 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-17 15:46:38,461 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-17 15:46:38,461 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-17 15:46:38,461 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-17 15:46:38,461 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-17 15:46:38,609 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-17 15:46:38,609 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:46:38,609 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-17 15:46:38,609 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-17 15:46:38,754 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-17 15:46:38,754 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:46:38,754 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-17 15:46:38,754 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-17 15:46:38,902 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-17 15:46:39,159 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-17 15:46:39,159 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-17 15:46:39,363 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-17 15:46:39,364 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-17 15:46:39,364 - wireless_ap_test - INFO - Configuration verification successful
2025-03-17 15:46:39,364 - wireless_ap_test - INFO - Running validation for api tests with mqtt_broker and data_to_server
2025-03-17 15:46:40,216 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-17 15:46:40,216 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-17 15:46:40,216 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-17 15:46:40,216 - wireless_ap_test - INFO - MQTT Process Check: 31113 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
31142 root      1920 S    ash -c ps | grep mosquitto
31144 root      1920 S    grep mosquitto
2025-03-17 15:46:40,241 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-17 15:46:40,241 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-17 15:46:40,241 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-17 15:46:40,333 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-17 15:46:40,427 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-17 15:46:40,427 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-17 15:46:40,427 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-17 15:46:40,427 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-17 15:46:40,427 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-17 15:46:40,428 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-17 15:46:40,428 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-17 15:46:50,472 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-17 15:46:50,472 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-17 15:46:50,472 - wireless_ap_test - INFO - Validation Results:
2025-03-17 15:46:50,472 - wireless_ap_test - INFO - Overall Success: True
2025-03-17 15:46:50,472 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-17 15:46:50,472 - wireless_ap_test - INFO - DTS Success: True
2025-03-17 15:46:50,473 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-17 15:46:50,473 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-17 15:46:50,473 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-17 15:46:50,473 - wireless_ap_test - INFO - Delete request:
2025-03-17 15:46:50,473 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-17 15:46:50,547 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-17 15:46:50,547 - wireless_ap_test - INFO - API connection closed
2025-03-17 15:46:50,548 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - data_to_server
2025-03-17 15:46:50,548 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-17 15:46:50,548 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt_broker
2025-03-17 15:46:50,548 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-17 15:46:50,549 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 18, Failed: 0
2025-03-19 08:40:22,579 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 08:40:22,580 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 08:40:22,581 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 08:40:22,581 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 08:40:22,582 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 08:40:22,582 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 08:40:22,582 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-19 08:40:22,582 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-19 08:40:22,583 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:40:22,583 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:40:22,583 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-19 08:40:22,584 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/data_to_server.json: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:40:22,584 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:40:22,584 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 08:40:22,584 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt_broker, DTS=data_to_server
2025-03-19 08:40:22,584 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt_broker
2025-03-19 08:40:22,584 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:40:22,584 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:40:22,584 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario data_to_server
2025-03-19 08:40:22,584 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/data_to_server.json: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:40:22,584 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:40:22,584 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 08:40:22,585 - wireless_ap_test - INFO - Test execution completed. Total: 4, Passed: 0, Failed: 4
2025-03-19 08:40:22,585 - wireless_ap_test - INFO - 
========================================
2025-03-19 08:40:22,585 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 08:40:22,585 - wireless_ap_test - INFO - ========================================
2025-03-19 08:40:22,585 - wireless_ap_test - INFO - 1. mqtt_broker_ssh_mqtt_broker: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:40:22,585 - wireless_ap_test - INFO - 2. data_to_server_ssh_data_to_server: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:40:22,585 - wireless_ap_test - INFO - 3. mqtt_broker_ssh_mqtt_broker: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:40:22,585 - wireless_ap_test - INFO - 4. data_to_server_ssh_data_to_server: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:40:22,585 - wireless_ap_test - INFO - ========================================
2025-03-19 08:45:39,729 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 08:45:39,729 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 08:45:39,729 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 08:45:39,730 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 08:45:39,730 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 08:45:39,730 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 08:45:39,730 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 08:45:39,730 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 08:45:39,731 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:45:39,731 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:45:39,731 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:45:39,731 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 08:45:39,731 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:45:39,731 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/data_to_server.json: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:45:39,731 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:45:39,732 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 08:45:39,732 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 08:45:39,732 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 08:45:39,732 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:45:39,732 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:45:39,732 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:45:39,732 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 08:45:39,732 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:45:39,732 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/data_to_server.json: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:45:39,732 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:45:39,732 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 08:45:39,733 - wireless_ap_test - INFO - Test execution completed. Total: 4, Passed: 0, Failed: 4
2025-03-19 08:45:39,733 - wireless_ap_test - INFO - 
========================================
2025-03-19 08:45:39,733 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 08:45:39,733 - wireless_ap_test - INFO - ========================================
2025-03-19 08:45:39,733 - wireless_ap_test - INFO - 1. mqtt_broker_ssh_mqtt: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:45:39,733 - wireless_ap_test - INFO - 2. data_to_server_ssh_dts: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:45:39,733 - wireless_ap_test - INFO - 3. mqtt_broker_ssh_mqtt copy: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:45:39,733 - wireless_ap_test - INFO - 4. data_to_server_ssh_dts copy: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:45:39,733 - wireless_ap_test - INFO - ========================================
2025-03-19 08:50:42,678 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 08:50:42,678 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 08:50:42,678 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 08:50:42,679 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 08:50:42,679 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 08:50:42,679 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 08:50:42,679 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 08:50:42,679 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 08:50:42,680 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:50:42,680 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:50:42,680 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:50:42,680 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 08:50:42,681 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:50:42,681 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/data_to_server.json: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:50:42,681 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:50:42,681 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 08:50:42,681 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 08:50:42,681 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 08:50:42,681 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:50:42,681 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:50:42,681 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:50:42,681 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 08:50:42,681 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:50:42,681 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/data_to_server.json: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:50:42,681 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:50:42,681 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 08:50:42,682 - wireless_ap_test - INFO - Test execution completed. Total: 4, Passed: 0, Failed: 4
2025-03-19 08:50:42,682 - wireless_ap_test - INFO - 
========================================
2025-03-19 08:50:42,682 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 08:50:42,682 - wireless_ap_test - INFO - ========================================
2025-03-19 08:50:42,682 - wireless_ap_test - INFO - 1. mqtt_broker_ssh_mqtt: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:50:42,682 - wireless_ap_test - INFO - 2. data_to_server_ssh_dts: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:50:42,682 - wireless_ap_test - INFO - 3. mqtt_broker_ssh_mqtt copy: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:50:42,682 - wireless_ap_test - INFO - 4. data_to_server_ssh_dts copy: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:50:42,682 - wireless_ap_test - INFO - ========================================
2025-03-19 08:51:45,232 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 08:51:45,233 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 08:51:45,233 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 08:51:45,234 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 08:51:45,234 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 08:51:45,234 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 08:51:45,234 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 08:51:45,235 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 08:51:45,235 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 08:51:45,236 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 08:51:45,236 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 08:51:45,236 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:51:45,236 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:51:45,236 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:51:45,236 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 08:51:45,236 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 08:51:45,236 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 08:51:45,237 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 08:51:45,237 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:51:45,237 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/data_to_server.json: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:51:45,237 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:51:45,237 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 08:51:45,237 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 08:51:45,238 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 08:51:45,238 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 08:51:45,238 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 08:51:45,238 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 08:51:45,238 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:51:45,238 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:51:45,238 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:51:45,238 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 08:51:45,238 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 08:51:45,238 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 08:51:45,238 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 08:51:45,239 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:51:45,239 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/data_to_server.json: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:51:45,239 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:51:45,239 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 08:51:45,239 - wireless_ap_test - INFO - Test execution completed. Total: 4, Passed: 0, Failed: 4
2025-03-19 08:51:45,240 - wireless_ap_test - INFO - 
========================================
2025-03-19 08:51:45,240 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 08:51:45,240 - wireless_ap_test - INFO - ========================================
2025-03-19 08:51:45,240 - wireless_ap_test - INFO - 1. mqtt_broker_ssh_mqtt: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:51:45,240 - wireless_ap_test - INFO - 2. data_to_server_ssh_dts: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:51:45,240 - wireless_ap_test - INFO - 3. mqtt_broker_ssh_mqtt copy: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 08:51:45,240 - wireless_ap_test - INFO - 4. data_to_server_ssh_dts copy: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 08:51:45,240 - wireless_ap_test - INFO - ========================================
2025-03-19 09:01:08,301 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 09:01:08,302 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 09:01:08,302 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 09:01:08,302 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 09:01:08,303 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 09:01:08,303 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 09:01:08,303 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:01:08,303 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 09:01:08,303 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 09:01:08,303 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 09:01:08,303 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:01:08,303 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 09:01:08,303 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 09:01:08,307 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 09:01:08,307 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 09:01:08,307 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:01:08,308 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:01:08,308 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:01:08,308 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:01:08,308 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 09:01:08,308 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 09:01:08,308 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 09:01:08,308 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:01:08,308 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 09:01:08,308 - wireless_ap_test - INFO - File name: dts
2025-03-19 09:01:08,308 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 09:01:08,308 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 09:01:08,308 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:01:08,309 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 09:01:08,309 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/data_to_server.json: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 09:01:08,309 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 09:01:08,309 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:01:08,310 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:01:08,310 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:01:08,310 - wireless_ap_test - ERROR - Error in mqtt_broker - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:01:08,310 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 09:01:08,310 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 09:01:08,310 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 09:01:08,310 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:01:08,310 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 09:01:08,310 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 09:01:08,310 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 09:01:08,310 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 09:01:08,310 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:01:08,311 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 09:01:08,311 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/data_to_server.json: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 09:01:08,311 - wireless_ap_test - ERROR - Error in data_to_server - ssh test: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 09:01:08,311 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:01:08,311 - wireless_ap_test - INFO - Test execution completed. Total: 4, Passed: 0, Failed: 4
2025-03-19 09:01:08,311 - wireless_ap_test - INFO - 
========================================
2025-03-19 09:01:08,311 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 09:01:08,311 - wireless_ap_test - INFO - ========================================
2025-03-19 09:01:08,311 - wireless_ap_test - INFO - 1. mqtt_broker_ssh_mqtt: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:01:08,311 - wireless_ap_test - INFO - 2. data_to_server_ssh_dts: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 09:01:08,312 - wireless_ap_test - INFO - 3. mqtt_broker_ssh_mqtt copy: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:01:08,312 - wireless_ap_test - INFO - 4. data_to_server_ssh_dts copy: [Errno 2] No such file or directory: 'config/test_scenarios/data_to_server.json'
2025-03-19 09:01:08,312 - wireless_ap_test - INFO - ========================================
2025-03-19 09:03:29,481 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 09:03:29,481 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 09:03:29,482 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 09:03:29,482 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 09:03:29,482 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 09:03:29,482 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 09:03:29,483 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:03:30,128 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:03:31,453 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:03:32,800 - wireless_ap_test - ERROR - Failed to load scenario config: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:03:32,800 - wireless_ap_test - ERROR - Error loading config from config/test_scenarios/mqtt_broker.json: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:03:32,800 - wireless_ap_test - ERROR - Error in mqtt_broker GUI test: [Errno 2] No such file or directory: 'config/test_scenarios/mqtt_broker.json'
2025-03-19 09:03:32,801 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:03:32,801 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:03:32,830 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:03:33,831 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:03:33,831 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:03:33,831 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:03:33,831 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:03:33,831 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:03:34,485 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:10:02,891 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='ssh', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 09:10:02,891 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 09:10:02,891 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 09:10:02,892 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 09:10:02,892 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 09:10:02,892 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 09:10:02,892 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:10:02,892 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 09:10:02,892 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 09:10:02,892 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 09:10:02,893 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:10:02,893 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 09:10:02,893 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 09:10:02,893 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 09:10:02,893 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 09:10:02,894 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:10:02,894 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:10:02,894 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 09:10:02,894 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 09:10:03,751 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 09:10:03,874 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 09:10:03,955 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 09:10:04,238 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 09:10:04,238 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 09:10:04,238 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 09:10:04,238 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 09:10:04,238 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 09:10:04,238 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:10:04,238 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 09:10:04,238 - wireless_ap_test - INFO - File name: dts
2025-03-19 09:10:04,238 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 09:10:04,238 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 09:10:04,239 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:10:04,239 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:10:04,239 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 09:10:04,239 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 09:10:05,159 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-19 09:10:05,159 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 09:10:05,159 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 09:10:05,302 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 09:10:05,302 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 09:10:05,364 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-19 09:10:05,364 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 09:10:05,364 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 09:10:05,407 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 09:10:05,793 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-19 09:10:05,861 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-19 09:10:05,861 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 09:10:05,861 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 09:10:06,026 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-19 09:10:06,026 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 09:10:08,366 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 09:10:08,366 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 09:10:08,446 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 09:10:08,446 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 09:10:08,446 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 09:10:08,446 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 09:10:09,335 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:10:09,335 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:10:09,335 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:10:09,335 - wireless_ap_test - INFO - MQTT Process Check: 10835 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
10988 root      1920 S    ash -c ps | grep mosquitto
10990 root      1920 R    grep mosquitto
2025-03-19 09:10:09,356 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:10:09,356 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:10:09,356 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:10:09,440 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 09:10:09,522 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:10:09,522 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 09:10:09,522 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 09:10:09,522 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 09:10:09,522 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 09:10:09,522 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 09:10:09,522 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:10:19,782 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:10:19,782 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:10:19,782 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:10:19,782 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 09:10:19,782 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:10:19,782 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 09:10:19,782 - wireless_ap_test - INFO - clean up if statement
2025-03-19 09:10:19,782 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 09:10:19,803 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 09:10:19,803 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 09:10:19,803 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 09:10:19,846 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 09:10:19,889 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 09:10:19,932 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 09:10:20,185 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-19 09:10:20,185 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 09:10:20,185 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 09:10:20,923 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 09:10:20,923 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 09:10:20,949 - wireless_ap_test - ERROR - No sections found to delete
2025-03-19 09:10:20,949 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 09:10:20,949 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 09:10:20,950 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 09:10:20,950 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 09:10:20,950 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 09:10:20,950 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:10:20,950 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:10:20,951 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 09:10:20,951 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 09:10:20,951 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 09:10:20,951 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:10:20,951 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 09:10:20,951 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 09:10:20,951 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 09:10:20,951 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 09:10:20,951 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:10:20,951 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:10:20,952 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 09:10:20,952 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 09:10:21,771 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 09:10:21,908 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 09:10:21,991 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 09:10:22,270 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 09:10:22,271 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 09:10:23,161 - wireless_ap_test - INFO - Using section IDs: collection=1, output=2, input=3
2025-03-19 09:10:23,161 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 09:10:23,161 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 09:10:23,302 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 09:10:23,302 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 09:10:23,362 - wireless_ap_test - INFO - Configured period settings via SSH for section 1
2025-03-19 09:10:23,362 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 09:10:23,362 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 09:10:23,403 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 09:10:23,788 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 3
2025-03-19 09:10:23,856 - wireless_ap_test - INFO - Assigned sender_id 1 to collection 1
2025-03-19 09:10:23,856 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 09:10:23,856 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 09:10:24,021 - wireless_ap_test - INFO - Configured server settings via SSH for section 2
2025-03-19 09:10:24,021 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 09:10:26,361 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 09:10:26,361 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 09:10:26,444 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 09:10:26,444 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 09:10:26,444 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 09:10:26,444 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt copy and dts copy
2025-03-19 09:10:27,293 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:10:27,293 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:10:27,293 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:10:27,293 - wireless_ap_test - INFO - MQTT Process Check: 11122 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
11275 root      1920 S    ash -c ps | grep mosquitto
11277 root      1920 R    grep mosquitto
2025-03-19 09:10:27,315 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:10:27,315 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:10:27,315 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:10:27,401 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 09:10:27,482 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:10:27,482 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 09:10:27,482 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 09:10:27,482 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 09:10:27,482 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 09:10:27,482 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 09:10:27,482 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:10:37,524 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:10:37,524 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:10:37,524 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:10:37,524 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 09:10:37,524 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:10:37,525 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 09:10:37,525 - wireless_ap_test - INFO - clean up if statement
2025-03-19 09:10:37,525 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 09:10:37,546 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 09:10:37,546 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 09:10:37,546 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 09:10:37,590 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 09:10:37,632 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 09:10:37,675 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 09:10:37,928 - wireless_ap_test - INFO - Cleaned up 3 Data to Server sections
2025-03-19 09:10:37,928 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 09:10:37,928 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 09:10:38,673 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 09:10:38,673 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 09:10:38,698 - wireless_ap_test - ERROR - No sections found to delete
2025-03-19 09:10:38,699 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 09:10:38,699 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 09:10:38,699 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts copy
2025-03-19 09:10:38,700 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 09:10:38,700 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt copy
2025-03-19 09:10:38,700 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:10:38,701 - wireless_ap_test - INFO - Test execution completed. Total: 6, Passed: 6, Failed: 0
2025-03-19 09:10:46,054 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 09:10:46,054 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 09:10:46,054 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 09:10:46,055 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 09:10:46,055 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 09:10:46,055 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 09:10:46,055 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:10:46,356 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:10:47,253 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:10:48,392 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:10:48,392 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:10:48,393 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:10:50,235 - wireless_ap_test - INFO - Filled username
2025-03-19 09:10:50,370 - wireless_ap_test - INFO - Filled password
2025-03-19 09:10:50,537 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:10:51,526 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:10:52,532 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 09:10:53,861 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 09:10:53,861 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 09:10:55,333 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 09:10:55,333 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 09:10:56,524 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 09:10:57,527 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 09:10:57,527 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 09:10:58,714 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 09:10:58,738 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 09:10:58,762 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 09:10:58,787 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 09:10:58,925 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 09:10:59,066 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 09:11:01,283 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 09:11:01,283 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 09:11:01,298 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:11:01,299 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 09:11:01,311 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 09:11:01,559 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:11:02,567 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 09:11:02,567 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 09:11:02,579 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 09:11:02,769 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 09:11:02,811 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 09:11:02,812 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 09:11:02,812 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 09:11:03,260 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:11:03,260 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:11:03,260 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:11:04,404 - wireless_ap_test - INFO - Filled username
2025-03-19 09:11:04,535 - wireless_ap_test - INFO - Filled password
2025-03-19 09:11:04,708 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:11:05,375 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:11:06,379 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:11:07,597 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:11:07,597 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:11:08,814 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:11:08,814 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 09:11:11,082 - wireless_ap_test - INFO - Clicking add button
2025-03-19 09:11:12,292 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 09:11:12,793 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 09:11:12,793 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 09:11:14,192 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 09:11:14,192 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 09:11:14,192 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 09:11:16,707 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 09:11:16,707 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 09:11:16,707 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 09:11:21,378 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 09:11:21,378 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 09:11:21,378 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 09:11:22,271 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 09:11:22,773 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 09:11:25,638 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 09:11:27,826 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 09:11:27,826 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 09:11:30,230 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 09:11:32,024 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 09:11:34,265 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 09:11:34,265 - wireless_ap_test - INFO - Saving configuration
2025-03-19 09:11:39,482 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 09:11:39,483 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 09:11:39,483 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 09:11:40,368 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:11:40,368 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:11:40,368 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:11:40,368 - wireless_ap_test - INFO - MQTT Process Check: 11502 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
11701 root      1920 S    ash -c ps | grep mosquitto
11703 root      1920 R    grep mosquitto
2025-03-19 09:11:40,388 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:11:40,388 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:11:40,388 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:11:40,475 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 09:11:40,556 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:11:40,556 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 09:11:40,556 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 09:11:40,557 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 09:11:40,557 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 09:11:40,557 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 09:11:40,557 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:11:50,599 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:11:50,599 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:11:50,599 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:11:50,599 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 09:11:50,599 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:11:50,599 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 09:11:50,599 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 09:11:50,600 - wireless_ap_test - INFO - GUI validation completed with success: False
2025-03-19 09:11:50,600 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 09:11:50,600 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 09:11:50,610 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 09:11:50,610 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:11:50,610 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:11:50,665 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:11:51,665 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:11:51,665 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:11:51,665 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:11:51,666 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:11:51,666 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:11:52,219 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:11:55,238 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 09:11:55,246 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:11:55,246 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:11:55,506 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:11:56,383 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:11:57,490 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:11:57,490 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:11:57,490 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:11:59,099 - wireless_ap_test - INFO - Filled username
2025-03-19 09:11:59,222 - wireless_ap_test - INFO - Filled password
2025-03-19 09:11:59,388 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:12:00,043 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:12:01,045 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 09:12:02,276 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 09:12:02,276 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 09:12:03,345 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 09:12:03,345 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 09:12:04,524 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 09:12:05,526 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 09:12:05,526 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 09:12:06,744 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 09:12:06,769 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 09:12:06,792 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 09:12:06,815 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 09:12:06,960 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 09:12:07,102 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 09:12:09,309 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 09:12:09,309 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 09:12:09,324 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:12:09,324 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 09:12:09,338 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 09:12:09,504 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:12:10,517 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 09:12:10,517 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 09:12:10,533 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 09:12:10,711 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 09:12:10,724 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 09:12:10,725 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 09:12:10,725 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 09:12:11,180 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:12:11,180 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:12:11,181 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:12:12,346 - wireless_ap_test - INFO - Filled username
2025-03-19 09:12:12,475 - wireless_ap_test - INFO - Filled password
2025-03-19 09:12:12,647 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:12:13,295 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:12:14,298 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:12:15,507 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:12:15,507 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:12:16,749 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:12:16,750 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 09:12:18,510 - wireless_ap_test - INFO - Clicking add button
2025-03-19 09:12:18,594 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:12:18,594 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:12:18,594 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:12:18,594 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:12:18,594 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 09:12:18,595 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 09:12:18,606 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 09:12:18,606 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:12:18,606 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:12:18,664 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:12:19,665 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:12:19,665 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:12:19,665 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:12:19,665 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:12:19,665 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:12:20,265 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:12:23,286 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 09:12:23,292 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:12:23,292 - wireless_ap_test - INFO - Test execution completed. Total: 5, Passed: 3, Failed: 2
2025-03-19 09:12:23,292 - wireless_ap_test - INFO - 
========================================
2025-03-19 09:12:23,292 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 09:12:23,292 - wireless_ap_test - INFO - ========================================
2025-03-19 09:12:23,293 - wireless_ap_test - INFO - 3. validation_gui_mqtt_broker_data_to_server: Validation failed
2025-03-19 09:12:23,293 - wireless_ap_test - INFO - 5. data_to_server_gui_data_to_server: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:12:23,293 - wireless_ap_test - INFO - ========================================
2025-03-19 09:13:04,410 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 09:13:04,411 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 09:13:04,411 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 09:13:04,411 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 09:13:04,412 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 09:13:04,412 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 09:13:04,412 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:13:04,715 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:13:05,601 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:13:06,709 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:13:06,709 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:13:06,709 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:13:08,305 - wireless_ap_test - INFO - Filled username
2025-03-19 09:13:08,433 - wireless_ap_test - INFO - Filled password
2025-03-19 09:13:08,595 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:13:09,246 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:13:10,250 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 09:13:11,484 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 09:13:11,484 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 09:13:12,529 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 09:13:12,529 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 09:13:13,716 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 09:13:14,719 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 09:13:14,719 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 09:13:15,934 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 09:13:15,957 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 09:13:15,980 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 09:13:16,006 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 09:13:16,147 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 09:13:16,288 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 09:13:18,518 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 09:13:18,518 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 09:13:18,534 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:13:18,534 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 09:13:18,549 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 09:13:18,726 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:13:19,740 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 09:13:19,740 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 09:13:19,757 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 09:13:19,942 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 09:13:19,955 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 09:13:19,956 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 09:13:19,956 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 09:13:20,417 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:13:20,417 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:13:20,417 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:13:21,570 - wireless_ap_test - INFO - Filled username
2025-03-19 09:13:21,700 - wireless_ap_test - INFO - Filled password
2025-03-19 09:13:21,860 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:13:22,510 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:13:23,514 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:13:24,724 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:13:24,724 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:13:25,976 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:13:25,976 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 09:13:27,721 - wireless_ap_test - INFO - Clicking add button
2025-03-19 09:13:27,804 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:13:27,804 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:13:27,804 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:13:27,804 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:13:27,804 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 09:13:27,805 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 09:13:27,814 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 09:13:27,815 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:13:27,815 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:13:27,863 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:13:28,865 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:13:28,865 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:13:28,865 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:13:28,865 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:13:28,865 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:13:29,444 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:13:32,462 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 09:13:32,468 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 09:13:32,468 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 09:13:32,468 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 09:13:32,469 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:13:32,469 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 09:13:32,469 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 09:13:32,469 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 09:13:32,470 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 09:13:32,470 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:13:32,470 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:13:32,470 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 09:13:32,470 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 09:13:33,277 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 09:13:33,403 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 09:13:33,485 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 09:13:33,780 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 09:13:33,780 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 09:13:33,780 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 09:13:33,780 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 09:13:33,780 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 09:13:33,781 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:13:33,781 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 09:13:33,781 - wireless_ap_test - INFO - File name: dts
2025-03-19 09:13:33,781 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 09:13:33,781 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 09:13:33,781 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:13:33,781 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:13:33,781 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 09:13:33,781 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 09:13:34,638 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 09:13:34,638 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 09:13:34,638 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 09:13:34,783 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 09:13:34,783 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 09:13:34,844 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 09:13:34,844 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 09:13:34,844 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 09:13:34,889 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 09:13:35,280 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 09:13:35,348 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 09:13:35,348 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 09:13:35,348 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 09:13:35,516 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 09:13:35,516 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 09:13:37,813 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 09:13:37,813 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 09:13:37,893 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 09:13:37,894 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 09:13:37,894 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 09:13:37,894 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 09:13:38,746 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:13:38,746 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:13:38,746 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:13:38,746 - wireless_ap_test - INFO - MQTT Process Check: 12216 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
12366 root      1920 S    ash -c ps | grep mosquitto
12368 root      1920 R    grep mosquitto
2025-03-19 09:13:38,768 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:13:38,768 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:13:38,768 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:13:38,854 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 09:13:38,937 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:13:38,937 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 09:13:38,937 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 09:13:38,937 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 09:13:38,937 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 09:13:38,937 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 09:13:38,937 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:13:48,986 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:13:48,986 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:13:48,986 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:13:48,986 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 09:13:48,986 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:13:48,986 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 09:13:48,987 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 09:13:48,987 - wireless_ap_test - INFO - SSH validation completed with success: False
2025-03-19 09:13:48,987 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 09:13:49,724 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 09:13:49,724 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 09:13:49,746 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 09:13:49,746 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 09:13:49,746 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 09:13:49,747 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 09:13:49,810 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 09:13:49,868 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 09:13:49,914 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 09:13:49,959 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 09:13:50,215 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 09:13:50,215 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 09:13:50,215 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 09:13:50,216 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 09:13:50,216 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 09:13:50,216 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 09:13:50,216 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt
2025-03-19 09:13:50,216 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 09:13:50,216 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 09:13:50,216 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:13:50,216 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 09:13:50,216 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 09:13:50,218 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 09:13:50,218 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 09:13:50,218 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:13:50,218 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 09:13:50,218 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 09:13:50,218 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 09:13:50,218 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 09:13:50,489 - wireless_ap_test - INFO - API authentication successful
2025-03-19 09:13:50,489 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 09:13:50,489 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 09:13:50,626 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 09:13:50,626 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 09:13:50,719 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 09:13:50,719 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - API connection closed
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - File name: dts
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:13:50,720 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 09:13:50,721 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 09:13:50,721 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 09:13:50,721 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 09:13:50,981 - wireless_ap_test - INFO - API authentication successful
2025-03-19 09:13:50,981 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 09:13:50,981 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 09:13:50,981 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 09:13:50,981 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 09:13:50,981 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 09:13:50,981 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 09:13:50,981 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-19 09:13:50,981 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 09:13:50,981 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-19 09:13:51,155 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 09:13:51,155 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 09:13:51,155 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 09:13:51,244 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-19 09:13:51,244 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-19 09:13:51,244 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-19 09:13:51,244 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-19 09:13:51,244 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-19 09:13:51,245 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-19 09:13:51,245 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-19 09:13:51,464 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-19 09:13:51,464 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 09:13:51,464 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-19 09:13:51,465 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-19 09:13:51,614 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-19 09:13:51,614 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 09:13:51,614 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-19 09:13:51,614 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-19 09:13:51,776 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-19 09:13:51,776 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 09:13:51,776 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 09:13:51,776 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 09:13:51,776 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 09:13:51,776 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 09:13:51,777 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 09:13:52,035 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-19 09:13:52,035 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 09:13:52,218 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-19 09:13:52,218 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 09:13:52,219 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 09:13:52,219 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 09:13:52,219 - wireless_ap_test - INFO - Running validation for api tests with mqtt and dts
2025-03-19 09:13:53,095 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:13:53,095 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:13:53,095 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:13:53,095 - wireless_ap_test - INFO - MQTT Process Check: 12502 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
12529 root      1920 S    ash -c ps | grep mosquitto
12531 root      1920 R    grep mosquitto
2025-03-19 09:13:53,121 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:13:53,121 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:13:53,121 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:13:53,219 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 09:13:53,311 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:13:53,311 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 09:13:53,312 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 09:13:53,312 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 09:13:53,312 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 09:13:53,312 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 09:13:53,312 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:14:03,353 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:14:03,353 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:14:03,353 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:14:03,353 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 09:14:03,353 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:14:03,353 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 09:14:03,354 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-19 09:14:03,354 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 09:14:03,354 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 09:14:03,354 - wireless_ap_test - INFO - Delete request:
2025-03-19 09:14:03,354 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 09:14:03,436 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 09:14:03,436 - wireless_ap_test - INFO - API connection closed
2025-03-19 09:14:03,436 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts
2025-03-19 09:14:03,436 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 09:14:03,436 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt
2025-03-19 09:14:03,436 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:14:03,436 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:14:03,704 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:14:04,612 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:14:05,720 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:14:05,721 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:14:05,721 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:14:07,335 - wireless_ap_test - INFO - Filled username
2025-03-19 09:14:07,460 - wireless_ap_test - INFO - Filled password
2025-03-19 09:14:07,622 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:14:08,291 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:14:09,294 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 09:14:10,526 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 09:14:10,527 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 09:14:11,481 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 09:14:11,481 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 09:14:12,677 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 09:14:13,680 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 09:14:13,680 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 09:14:14,844 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 09:14:14,865 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 09:14:14,882 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 09:14:14,901 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 09:14:15,036 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 09:14:15,169 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 09:14:17,354 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 09:14:17,354 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 09:14:17,371 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:14:17,371 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 09:14:17,386 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 09:14:17,547 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:14:18,559 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 09:14:18,559 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 09:14:18,578 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 09:14:18,758 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 09:14:18,770 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 09:14:18,770 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 09:14:18,770 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 09:14:19,261 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:14:19,261 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:14:19,261 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:14:20,459 - wireless_ap_test - INFO - Filled username
2025-03-19 09:14:20,591 - wireless_ap_test - INFO - Filled password
2025-03-19 09:14:20,758 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:14:21,412 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:14:22,415 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:14:23,630 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:14:23,630 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:14:24,841 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:14:24,841 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 09:14:26,567 - wireless_ap_test - INFO - Clicking add button
2025-03-19 09:14:27,732 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 09:14:28,233 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 09:14:28,234 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 09:14:29,649 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 09:14:29,649 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 09:14:29,649 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 09:14:32,137 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 09:14:32,137 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 09:14:32,137 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 09:14:36,831 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 09:14:36,831 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 09:14:36,831 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 09:14:37,704 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 09:14:38,204 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 09:14:41,051 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 09:14:43,242 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 09:14:43,242 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 09:14:45,639 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 09:14:47,406 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 09:14:49,641 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 09:14:49,641 - wireless_ap_test - INFO - Saving configuration
2025-03-19 09:14:54,841 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 09:14:54,841 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 09:14:54,841 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 09:14:55,713 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:14:55,713 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:14:55,713 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:14:55,713 - wireless_ap_test - INFO - MQTT Process Check: 12502 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13017 root      1920 S    ash -c ps | grep mosquitto
13021 root      1920 S    grep mosquitto
2025-03-19 09:14:55,735 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:14:55,735 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:14:55,735 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:14:55,819 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 09:14:55,901 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:14:55,902 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 09:14:55,902 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 09:14:55,902 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 09:14:55,902 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 09:14:55,902 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 09:14:55,902 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:15:05,943 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:15:05,943 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:15:05,943 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:15:05,943 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 09:15:05,944 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:15:05,944 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 09:15:05,944 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 09:15:05,944 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 09:15:05,944 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 09:15:05,953 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 09:15:05,953 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:15:05,953 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:15:06,004 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:15:07,005 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:15:07,005 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:15:07,005 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:15:07,006 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:15:07,006 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:15:07,545 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:15:10,565 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 09:15:10,571 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 09:15:10,571 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 09:15:10,571 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 09:15:10,571 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:15:10,571 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 09:15:10,571 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 09:15:10,572 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 09:15:10,572 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 09:15:10,572 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:15:10,572 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:15:10,572 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 09:15:10,572 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 09:15:11,402 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 09:15:11,532 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 09:15:11,618 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 09:15:11,902 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 09:15:11,902 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 09:15:11,902 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 09:15:11,903 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 09:15:12,761 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 09:15:12,761 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 09:15:12,761 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 09:15:12,909 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 09:15:12,909 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 09:15:12,971 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 09:15:12,971 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 09:15:12,971 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 09:15:13,015 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 09:15:13,416 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 09:15:13,487 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 09:15:13,487 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 09:15:13,487 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 09:15:13,658 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 09:15:13,658 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 09:15:16,018 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 09:15:16,018 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 09:15:16,101 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 09:15:16,101 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 09:15:16,102 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 09:15:16,102 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt copy and dts copy
2025-03-19 09:15:16,976 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:15:16,976 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:15:16,976 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:15:16,976 - wireless_ap_test - INFO - MQTT Process Check: 13078 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13238 root      1920 S    ash -c ps | grep mosquitto
13240 root      1920 R    grep mosquitto
2025-03-19 09:15:16,998 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:15:16,999 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:15:16,999 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:15:17,087 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 09:15:17,171 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:15:17,171 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 09:15:17,171 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 09:15:17,172 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 09:15:17,172 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 09:15:17,172 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 09:15:17,172 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:15:27,247 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:15:27,248 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:15:27,248 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:15:27,248 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 09:15:27,248 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:15:27,248 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 09:15:27,248 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 09:15:27,248 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 09:15:27,984 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 09:15:27,984 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 09:15:28,006 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 09:15:28,006 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 09:15:28,007 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 09:15:28,007 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 09:15:28,054 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 09:15:28,100 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 09:15:28,145 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 09:15:28,189 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 09:15:28,451 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 09:15:28,451 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 09:15:28,451 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 09:15:28,451 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts copy
2025-03-19 09:15:28,451 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt copy
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt copy
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 09:15:28,452 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 09:15:28,718 - wireless_ap_test - INFO - API authentication successful
2025-03-19 09:15:28,718 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 09:15:28,718 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 09:15:28,848 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 09:15:28,848 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 09:15:28,948 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 09:15:28,948 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - API connection closed
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts copy
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 09:15:28,949 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 09:15:28,950 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 09:15:28,950 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 09:15:29,193 - wireless_ap_test - INFO - API authentication successful
2025-03-19 09:15:29,193 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 09:15:29,193 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 09:15:29,193 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 09:15:29,193 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 09:15:29,193 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 09:15:29,193 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": false, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 09:15:29,193 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-19 09:15:29,194 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 09:15:29,194 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-19 09:15:29,363 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 09:15:29,363 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 09:15:29,363 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 09:15:29,479 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-19 09:15:29,479 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-19 09:15:29,479 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-19 09:15:29,479 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-19 09:15:29,480 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-19 09:15:29,480 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-19 09:15:29,480 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-19 09:15:29,635 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-19 09:15:29,635 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 09:15:29,635 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-19 09:15:29,635 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-19 09:15:29,787 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-19 09:15:29,787 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 09:15:29,787 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-19 09:15:29,787 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-19 09:15:29,954 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-19 09:15:29,954 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 09:15:29,954 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 09:15:29,954 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 09:15:29,955 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 09:15:29,955 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 09:15:29,955 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "0", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": ""}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 09:15:30,215 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-19 09:15:30,215 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 09:15:30,399 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_topic": "test/topic123", "mqtt_tls": "0", "mqtt_port": "1883", "id": "2", ".type": "output", "mqtt_client_id": "test_client", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_use_credentials": "0", "mqtt_qos": "2", "mqtt_host": "test.mosquitto.org"}]}
2025-03-19 09:15:30,400 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 09:15:30,400 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 09:15:30,400 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 09:15:30,400 - wireless_ap_test - INFO - Running validation for api tests with mqtt copy and dts copy
2025-03-19 09:15:31,260 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:15:31,261 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:15:31,261 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:15:31,261 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13401 root      1920 S    ash -c ps | grep mosquitto
13403 root      1920 R    grep mosquitto
2025-03-19 09:15:31,285 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:15:31,285 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:15:31,285 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:15:31,382 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 09:15:31,479 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:15:31,479 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 09:15:31,479 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 09:15:31,479 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 09:15:31,479 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 09:15:31,479 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 09:15:31,479 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:15:41,521 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:15:41,521 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:15:41,521 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:15:41,521 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 09:15:41,521 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:15:41,521 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 09:15:41,522 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-19 09:15:41,522 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 09:15:41,522 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 09:15:41,522 - wireless_ap_test - INFO - Delete request:
2025-03-19 09:15:41,522 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 09:15:41,597 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 09:15:41,597 - wireless_ap_test - INFO - API connection closed
2025-03-19 09:15:41,597 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts copy
2025-03-19 09:15:41,597 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 09:15:41,598 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt copy
2025-03-19 09:15:41,598 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:15:41,598 - wireless_ap_test - INFO - Test execution completed. Total: 17, Passed: 15, Failed: 2
2025-03-19 09:15:41,598 - wireless_ap_test - INFO - 
========================================
2025-03-19 09:15:41,599 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 09:15:41,599 - wireless_ap_test - INFO - ========================================
2025-03-19 09:15:41,599 - wireless_ap_test - INFO - 2. data_to_server_gui_data_to_server: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:15:41,599 - wireless_ap_test - INFO - 5. validation_ssh_mqtt_dts: Validation failed
2025-03-19 09:15:41,599 - wireless_ap_test - INFO - ========================================
2025-03-19 09:48:15,828 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 09:48:15,829 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 09:48:15,829 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 09:48:15,829 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 09:48:15,830 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 09:48:15,830 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 09:48:15,830 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:48:16,194 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:48:17,093 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:48:18,213 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:48:18,214 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:48:18,214 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:48:19,811 - wireless_ap_test - INFO - Filled username
2025-03-19 09:48:19,937 - wireless_ap_test - INFO - Filled password
2025-03-19 09:48:20,101 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:48:20,722 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:48:21,726 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 09:48:22,985 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 09:48:22,985 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 09:48:23,950 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 09:48:23,950 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 09:48:25,137 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 09:48:26,138 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 09:48:26,138 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 09:48:27,305 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 09:48:27,330 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 09:48:27,352 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 09:48:27,378 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 09:48:27,521 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 09:48:27,659 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 09:48:29,855 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 09:48:29,855 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 09:48:29,872 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:48:29,873 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 09:48:29,886 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 09:48:30,055 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:48:31,065 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 09:48:31,065 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 09:48:31,079 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 09:48:31,258 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 09:48:31,271 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 09:48:31,271 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 09:48:31,271 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 09:48:31,732 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:48:31,732 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:48:31,732 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:48:32,884 - wireless_ap_test - INFO - Filled username
2025-03-19 09:48:33,023 - wireless_ap_test - INFO - Filled password
2025-03-19 09:48:33,182 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:48:33,804 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:48:34,808 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:48:36,041 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:48:36,041 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:48:37,284 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:48:37,284 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 09:48:39,010 - wireless_ap_test - INFO - Clicking add button
2025-03-19 09:48:40,233 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 09:48:40,734 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 09:48:40,734 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 09:48:42,153 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 09:48:42,153 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 09:48:42,153 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 09:48:44,648 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 09:48:44,648 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 09:48:44,648 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 09:48:49,247 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 09:48:49,247 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 09:48:49,247 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 09:48:50,140 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 09:48:50,642 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 09:48:53,475 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 09:48:55,656 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 09:48:55,656 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 09:48:58,053 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 09:48:59,800 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 09:49:02,035 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 09:49:02,035 - wireless_ap_test - INFO - Saving configuration
2025-03-19 09:49:07,231 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 09:49:07,231 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 09:49:07,231 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 09:49:08,122 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:49:08,122 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:49:08,122 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:49:08,122 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
14734 root      1920 S    ash -c ps | grep mosquitto
14736 root      1920 R    grep mosquitto
2025-03-19 09:49:08,144 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:49:08,145 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:49:08,145 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:49:08,232 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 09:49:08,314 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:49:08,314 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 09:49:08,314 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 09:49:08,314 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 09:49:08,314 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 09:49:08,314 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 09:49:08,314 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:49:18,365 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:49:18,365 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:49:18,366 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:49:18,366 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 09:49:18,366 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:49:18,366 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 09:49:18,366 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 09:49:18,366 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 09:49:18,366 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 09:49:18,375 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 09:49:18,375 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:49:18,375 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:49:18,422 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:49:19,423 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:49:19,424 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:49:19,424 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:49:19,424 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:49:19,424 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:49:19,976 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:49:22,996 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 09:49:23,001 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:49:23,001 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:49:23,321 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:49:24,274 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:49:25,390 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:49:25,391 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:49:25,391 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:49:26,978 - wireless_ap_test - INFO - Filled username
2025-03-19 09:49:27,108 - wireless_ap_test - INFO - Filled password
2025-03-19 09:49:27,268 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:49:27,917 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:49:28,920 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 09:49:30,221 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 09:49:30,221 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 09:49:31,207 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 09:49:31,208 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 09:49:32,385 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 09:49:33,386 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 09:49:33,386 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 09:49:34,562 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 09:49:34,585 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 09:49:34,606 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 09:49:34,631 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 09:49:34,769 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 09:49:34,908 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 09:49:37,106 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 09:49:37,106 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 09:49:37,126 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:49:37,126 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 09:49:37,138 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 09:49:37,307 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:49:38,316 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 09:49:38,317 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 09:49:38,333 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 09:49:38,507 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 09:49:38,517 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 09:49:38,518 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 09:49:38,518 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 09:49:38,981 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:49:38,982 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:49:38,982 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:49:40,117 - wireless_ap_test - INFO - Filled username
2025-03-19 09:49:40,244 - wireless_ap_test - INFO - Filled password
2025-03-19 09:49:40,412 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:49:41,115 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:49:42,118 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:49:43,339 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:49:43,339 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:49:44,631 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:49:44,631 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 09:49:46,351 - wireless_ap_test - INFO - Clicking add button
2025-03-19 09:49:47,576 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 09:49:48,078 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 09:49:48,078 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 09:49:53,078 - wireless_ap_test - ERROR - Failed to set collection name: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:49:53,078 - wireless_ap_test - ERROR - Failed to configure data collection: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:49:53,078 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:49:53,078 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:49:53,078 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:49:53,078 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 09:49:53,079 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 09:49:53,086 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 09:49:53,087 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:49:53,087 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:49:53,135 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:49:54,137 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:49:54,137 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:49:54,137 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:49:54,137 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:49:54,137 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:49:54,756 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:49:57,775 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 09:49:57,781 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:49:57,781 - wireless_ap_test - INFO - Test execution completed. Total: 5, Passed: 4, Failed: 1
2025-03-19 09:49:57,781 - wireless_ap_test - INFO - 
========================================
2025-03-19 09:49:57,781 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 09:49:57,781 - wireless_ap_test - INFO - ========================================
2025-03-19 09:49:57,782 - wireless_ap_test - INFO - 5. data_to_server_gui_data_to_server: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:49:57,782 - wireless_ap_test - INFO - ========================================
2025-03-19 09:50:21,924 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 09:50:21,924 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 09:50:21,924 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 09:50:21,925 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 09:50:21,925 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 09:50:21,925 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 09:50:21,925 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:50:22,257 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:50:23,482 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:50:25,172 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:50:25,173 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:50:25,175 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:50:27,078 - wireless_ap_test - INFO - Filled username
2025-03-19 09:50:27,212 - wireless_ap_test - INFO - Filled password
2025-03-19 09:50:27,393 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:50:28,038 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:50:29,041 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 09:50:30,394 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 09:50:30,394 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 09:50:31,465 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 09:50:31,465 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 09:50:32,667 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 09:50:33,669 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 09:50:33,670 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 09:50:34,862 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 09:50:34,890 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 09:50:34,924 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 09:50:34,953 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 09:50:35,108 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 09:50:35,295 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 09:50:37,521 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 09:50:37,521 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 09:50:37,542 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:50:37,542 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 09:50:37,559 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 09:50:37,736 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:50:38,749 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 09:50:38,750 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 09:50:38,771 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 09:50:38,974 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 09:50:39,004 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 09:50:39,004 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 09:50:39,004 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 09:50:39,572 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:50:39,573 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:50:39,573 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:50:40,826 - wireless_ap_test - INFO - Filled username
2025-03-19 09:50:40,971 - wireless_ap_test - INFO - Filled password
2025-03-19 09:50:41,157 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:50:41,809 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:50:42,814 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:50:44,121 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:50:44,122 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:50:45,428 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:50:45,429 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 09:50:47,204 - wireless_ap_test - INFO - Clicking add button
2025-03-19 09:50:48,454 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 09:50:48,959 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 09:50:48,959 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 09:50:50,629 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 09:50:50,630 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 09:50:50,631 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 09:50:53,365 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 09:50:53,365 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 09:50:53,365 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 09:50:58,087 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 09:50:58,087 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 09:50:58,087 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 09:50:58,967 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 09:50:59,470 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 09:51:02,429 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 09:51:04,644 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 09:51:04,644 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 09:51:07,048 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 09:51:08,871 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 09:51:11,110 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 09:51:11,110 - wireless_ap_test - INFO - Saving configuration
2025-03-19 09:51:16,315 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 09:51:16,315 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 09:51:16,316 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 09:51:17,290 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:51:17,290 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:51:17,290 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:51:17,290 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
15407 root      1920 S    ash -c ps | grep mosquitto
15409 root      1920 S    grep mosquitto
2025-03-19 09:51:17,312 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:51:17,313 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:51:17,313 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:51:17,401 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 09:51:17,485 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:51:17,486 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 09:51:17,486 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 09:51:17,486 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 09:51:17,486 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 09:51:17,486 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 09:51:17,486 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:51:27,540 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:51:27,540 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:51:27,541 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:51:27,541 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 09:51:27,541 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:51:27,541 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 09:51:27,541 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 09:51:27,541 - wireless_ap_test - INFO - GUI validation completed with success: False
2025-03-19 09:51:27,541 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 09:51:27,541 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 09:51:27,583 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 09:51:27,583 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:51:27,583 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:51:27,642 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:51:28,644 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:51:28,644 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:51:28,644 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:51:28,644 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:51:28,645 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:51:29,346 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:51:32,378 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 09:51:32,383 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:51:32,384 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:51:32,714 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:51:33,724 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:51:35,112 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:51:35,112 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:51:35,112 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:51:36,850 - wireless_ap_test - INFO - Filled username
2025-03-19 09:51:36,982 - wireless_ap_test - INFO - Filled password
2025-03-19 09:51:37,159 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:51:37,841 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:51:38,844 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 09:51:40,164 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 09:51:40,164 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 09:51:41,278 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 09:51:41,278 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 09:51:42,482 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 09:51:43,483 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 09:51:43,483 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 09:51:44,677 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 09:51:44,707 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 09:51:44,740 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 09:51:44,772 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 09:51:44,924 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 09:51:45,075 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 09:51:47,292 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 09:51:47,292 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 09:51:47,309 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:51:47,309 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 09:51:47,326 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 09:51:47,506 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:51:48,518 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 09:51:48,519 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 09:51:48,541 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 09:51:48,752 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 09:51:48,782 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 09:51:48,783 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 09:51:48,783 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 09:51:49,463 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:51:49,464 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:51:49,464 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:51:50,718 - wireless_ap_test - INFO - Filled username
2025-03-19 09:51:50,860 - wireless_ap_test - INFO - Filled password
2025-03-19 09:51:51,028 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:51:51,683 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:51:52,686 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:51:53,974 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:51:53,974 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:51:55,271 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:51:55,271 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 09:51:57,041 - wireless_ap_test - INFO - Clicking add button
2025-03-19 09:51:58,270 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 09:51:58,772 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 09:51:58,772 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 09:52:03,775 - wireless_ap_test - ERROR - Failed to set collection name: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:52:03,775 - wireless_ap_test - ERROR - Failed to configure data collection: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:52:03,775 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:52:03,775 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:52:03,775 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:52:03,775 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 09:52:03,775 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 09:52:03,790 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 09:52:03,790 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:52:03,791 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:52:03,882 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:52:04,884 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:52:04,884 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:52:04,884 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:52:04,885 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:52:04,885 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:52:05,819 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:52:08,849 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 09:52:08,856 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:52:08,857 - wireless_ap_test - INFO - Test execution completed. Total: 5, Passed: 3, Failed: 2
2025-03-19 09:52:08,857 - wireless_ap_test - INFO - 
========================================
2025-03-19 09:52:08,857 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 09:52:08,857 - wireless_ap_test - INFO - ========================================
2025-03-19 09:52:08,857 - wireless_ap_test - INFO - 3. validation_gui_mqtt_broker_data_to_server: Validation failed
2025-03-19 09:52:08,857 - wireless_ap_test - INFO - 5. data_to_server_gui_data_to_server: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#section-data-configuration input[test-id=\"input-name\"]") to be visible

2025-03-19 09:52:08,857 - wireless_ap_test - INFO - ========================================
2025-03-19 09:52:25,886 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 09:52:25,886 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 09:52:25,887 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 09:52:25,887 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 09:52:25,888 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 09:52:25,888 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 09:52:25,888 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:52:26,302 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:52:27,457 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:52:29,074 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:52:29,075 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:52:29,075 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:52:31,101 - wireless_ap_test - INFO - Filled username
2025-03-19 09:52:31,265 - wireless_ap_test - INFO - Filled password
2025-03-19 09:52:31,460 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:52:32,108 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:52:33,113 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 09:52:34,421 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 09:52:34,421 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 09:52:35,491 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 09:52:35,491 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 09:52:36,682 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 09:52:37,683 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 09:52:37,683 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 09:52:38,892 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 09:52:38,926 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 09:52:38,969 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 09:52:39,003 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 09:52:39,154 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 09:52:39,303 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 09:52:41,554 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 09:52:41,554 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 09:52:41,573 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:52:41,573 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 09:52:41,589 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 09:52:41,767 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:52:42,781 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 09:52:42,781 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 09:52:42,801 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 09:52:42,988 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 09:52:43,011 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 09:52:43,011 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 09:52:43,012 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 09:52:43,638 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:52:43,638 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:52:43,638 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:52:44,857 - wireless_ap_test - INFO - Filled username
2025-03-19 09:52:44,999 - wireless_ap_test - INFO - Filled password
2025-03-19 09:52:45,168 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:52:45,782 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:52:46,784 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:52:48,086 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:52:48,086 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:52:49,443 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:52:49,443 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 09:52:51,208 - wireless_ap_test - INFO - Clicking add button
2025-03-19 09:52:52,401 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 09:52:52,907 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 09:52:52,907 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 09:52:54,404 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 09:52:54,404 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 09:52:54,404 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 09:52:56,942 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 09:52:56,942 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 09:52:56,942 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 09:53:01,642 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 09:53:01,642 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 09:53:01,643 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 09:53:02,568 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 09:53:03,069 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 09:53:06,010 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 09:53:08,200 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 09:53:08,200 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 09:53:10,627 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 09:53:12,488 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 09:53:14,740 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 09:53:14,740 - wireless_ap_test - INFO - Saving configuration
2025-03-19 09:53:19,961 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 09:53:19,961 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 09:53:19,961 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 09:53:20,875 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 09:53:20,875 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 09:53:20,875 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 09:53:20,875 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
15998 root      1920 S    ash -c ps | grep mosquitto
16000 root      1920 R    grep mosquitto
2025-03-19 09:53:20,896 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 09:53:20,897 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 09:53:20,897 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 09:53:20,983 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 09:53:21,067 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 09:53:21,067 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 09:53:21,067 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 09:53:21,067 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 09:53:21,067 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 09:53:21,068 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 09:53:21,068 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 09:53:31,118 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 09:53:31,118 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 09:53:31,118 - wireless_ap_test - INFO - Validation Results:
2025-03-19 09:53:31,118 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 09:53:31,118 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 09:53:31,118 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 09:53:31,119 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 09:53:31,119 - wireless_ap_test - INFO - GUI validation completed with success: False
2025-03-19 09:53:31,120 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 09:53:31,120 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 09:53:31,131 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 09:53:31,131 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:53:31,131 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:53:31,181 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:53:32,182 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:53:32,182 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:53:32,183 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:53:32,183 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:53:32,183 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:53:32,829 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:53:35,850 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 09:53:35,856 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:53:35,857 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 09:53:36,189 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 09:53:37,244 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 09:53:38,679 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 09:53:38,679 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:53:38,679 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:53:40,465 - wireless_ap_test - INFO - Filled username
2025-03-19 09:53:40,595 - wireless_ap_test - INFO - Filled password
2025-03-19 09:53:40,772 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:53:41,418 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:53:42,422 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 09:53:43,748 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 09:53:43,749 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 09:53:44,843 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 09:53:44,843 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 09:53:46,054 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 09:53:47,056 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 09:53:47,056 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 09:53:48,242 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 09:53:48,274 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 09:53:48,308 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 09:53:48,341 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 09:53:48,494 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 09:53:48,646 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 09:53:50,885 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 09:53:50,885 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 09:53:50,904 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:53:50,904 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 09:53:50,917 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 09:53:51,100 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 09:53:52,111 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 09:53:52,111 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 09:53:52,138 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 09:53:52,357 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 09:53:52,391 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 09:53:52,391 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 09:53:52,392 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 09:53:52,998 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 09:53:52,998 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 09:53:52,999 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 09:53:54,248 - wireless_ap_test - INFO - Filled username
2025-03-19 09:53:54,378 - wireless_ap_test - INFO - Filled password
2025-03-19 09:53:54,553 - wireless_ap_test - INFO - Clicked login button
2025-03-19 09:53:55,194 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 09:53:56,196 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:53:57,485 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:53:57,485 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 09:53:58,776 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 09:53:58,776 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 09:54:00,572 - wireless_ap_test - INFO - Clicking add button
2025-03-19 09:54:00,678 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:54:00,678 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:54:00,678 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:54:00,679 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:54:00,679 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 09:54:00,679 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 09:54:00,687 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 09:54:00,687 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 09:54:00,687 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 09:54:00,750 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 09:54:01,751 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 09:54:01,751 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 09:54:01,751 - wireless_ap_test - INFO - Closing browser context
2025-03-19 09:54:01,752 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 09:54:01,752 - wireless_ap_test - INFO - Closing browser
2025-03-19 09:54:02,466 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 09:54:05,486 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 09:54:05,493 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 09:54:05,494 - wireless_ap_test - INFO - Test execution completed. Total: 5, Passed: 3, Failed: 2
2025-03-19 09:54:05,494 - wireless_ap_test - INFO - 
========================================
2025-03-19 09:54:05,494 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 09:54:05,494 - wireless_ap_test - INFO - ========================================
2025-03-19 09:54:05,495 - wireless_ap_test - INFO - 3. validation_gui_mqtt_broker_data_to_server: Validation failed
2025-03-19 09:54:05,495 - wireless_ap_test - INFO - 5. data_to_server_gui_data_to_server: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 09:54:05,495 - wireless_ap_test - INFO - ========================================
2025-03-19 10:10:20,832 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:10:20,832 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:10:20,832 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:10:20,833 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:10:20,833 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:10:20,833 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:10:20,834 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:10:21,220 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:10:22,286 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:10:23,734 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:10:23,734 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:10:23,734 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:10:25,509 - wireless_ap_test - INFO - Filled username
2025-03-19 10:10:25,633 - wireless_ap_test - INFO - Filled password
2025-03-19 10:10:25,798 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:10:26,481 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:10:27,484 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:10:28,701 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:10:28,701 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:10:29,701 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:10:29,701 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:10:30,881 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:10:31,883 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:10:31,883 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:10:33,121 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:10:33,145 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:10:33,170 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:10:33,192 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:10:33,336 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:10:33,472 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:10:35,672 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:10:35,672 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:10:35,689 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:10:35,689 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:10:35,703 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:10:35,866 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:10:36,877 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:10:36,877 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:10:36,895 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:10:37,076 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:10:37,088 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:10:37,088 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:10:37,088 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:10:37,530 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:10:37,532 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:10:37,532 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:10:38,645 - wireless_ap_test - INFO - Filled username
2025-03-19 10:10:38,777 - wireless_ap_test - INFO - Filled password
2025-03-19 10:10:38,945 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:10:39,570 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:10:40,572 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:10:41,785 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:10:41,785 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:10:43,007 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:10:43,007 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:10:44,744 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:10:44,827 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:10:44,827 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:10:44,827 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:10:44,827 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:10:44,827 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:10:44,827 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:10:44,835 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:10:44,835 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:10:44,835 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:10:44,890 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:10:45,890 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:10:45,890 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:10:45,891 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:10:45,891 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 10:10:45,891 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:10:46,492 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:10:49,509 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:10:49,518 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:10:49,519 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:10:49,954 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:10:51,324 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:10:53,197 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:10:53,197 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:10:53,197 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:10:55,279 - wireless_ap_test - INFO - Filled username
2025-03-19 10:10:55,430 - wireless_ap_test - INFO - Filled password
2025-03-19 10:10:55,654 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:10:56,478 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:10:57,486 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:10:58,602 - wireless_ap_test - ERROR - Failed to navigate to MQTT Broker page: Page.wait_for_selector: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"button-add\"]") to be visible

2025-03-19 10:10:58,603 - wireless_ap_test - ERROR - Failed to setup MQTT broker test: Page.wait_for_selector: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"button-add\"]") to be visible

2025-03-19 10:10:58,603 - wireless_ap_test - ERROR - Error in mqtt_broker GUI test: Page.wait_for_selector: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"button-add\"]") to be visible

2025-03-19 10:10:58,603 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:10:58,603 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:10:58,610 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:10:59,612 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:10:59,613 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:10:59,613 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:10:59,613 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 10:10:59,613 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:11:00,538 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:11:02,328 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:11:02,329 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:11:02,329 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:11:02,329 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:11:02,330 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:11:02,330 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:11:02,330 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:11:02,746 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:11:03,802 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:11:05,307 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:11:05,310 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:11:05,310 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:11:07,218 - wireless_ap_test - INFO - Filled username
2025-03-19 10:11:07,351 - wireless_ap_test - INFO - Filled password
2025-03-19 10:11:07,540 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:11:08,226 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:11:09,231 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:11:10,556 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:11:10,557 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:11:11,655 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:11:11,656 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:11:12,858 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:11:13,860 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:11:13,860 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:11:15,058 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:11:15,088 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:11:15,121 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:11:15,152 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:11:15,301 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:11:15,458 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:11:17,685 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:11:17,685 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:11:17,705 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:11:17,706 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:11:17,722 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:11:17,932 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:11:18,940 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:11:18,940 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:11:18,958 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:11:19,150 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:11:19,175 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:11:19,175 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:11:19,175 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:11:19,731 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:11:19,732 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:11:19,732 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:11:21,009 - wireless_ap_test - INFO - Filled username
2025-03-19 10:11:21,152 - wireless_ap_test - INFO - Filled password
2025-03-19 10:11:21,321 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:11:22,003 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:11:23,005 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:11:24,307 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:11:24,307 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:11:25,640 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:11:25,640 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:11:27,423 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:11:28,609 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 10:11:29,112 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 10:11:29,113 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 10:11:30,620 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 10:11:30,621 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 10:11:30,621 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 10:11:33,177 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 10:11:33,178 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 10:11:33,178 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 10:11:38,120 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 10:11:38,120 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 10:11:38,120 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 10:11:39,036 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 10:11:39,537 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 10:11:42,452 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 10:11:44,652 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 10:11:44,652 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 10:11:47,238 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 10:11:49,194 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 10:11:51,623 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 10:11:51,624 - wireless_ap_test - INFO - Saving configuration
2025-03-19 10:11:56,855 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 10:11:56,856 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 10:11:56,856 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 10:11:57,884 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 10:11:57,884 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 10:11:57,885 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 10:11:57,885 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
17350 root      1920 S    ash -c ps | grep mosquitto
17352 root      1920 S    grep mosquitto
2025-03-19 10:11:57,907 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 10:11:57,907 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 10:11:57,907 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 10:11:57,993 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 10:11:58,083 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 10:11:58,083 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 10:11:58,083 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 10:11:58,084 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 10:11:58,084 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 10:11:58,084 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 10:11:58,084 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 10:12:08,187 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 10:12:08,187 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 10:12:08,187 - wireless_ap_test - INFO - Validation Results:
2025-03-19 10:12:08,187 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 10:12:08,187 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 10:12:08,187 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 10:12:08,187 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 10:12:08,188 - wireless_ap_test - INFO - GUI validation completed with success: False
2025-03-19 10:12:08,188 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:12:08,188 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:12:08,207 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:12:08,207 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:12:08,207 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:12:08,288 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:12:09,289 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:12:09,289 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:12:09,290 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:12:09,290 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 10:12:09,290 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:12:10,021 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:12:13,042 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:12:13,049 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:12:13,050 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:12:13,407 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:12:14,551 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:12:15,913 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:12:15,913 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:12:15,913 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:12:17,718 - wireless_ap_test - INFO - Filled username
2025-03-19 10:12:17,855 - wireless_ap_test - INFO - Filled password
2025-03-19 10:12:18,033 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:12:18,690 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:12:19,697 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:12:21,024 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:12:21,024 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:12:22,320 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:12:22,321 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:12:23,547 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:12:24,551 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:12:24,551 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:12:24,946 - wireless_ap_test - ERROR - Failed to configure miscellaneous settings: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:12:24,947 - wireless_ap_test - ERROR - Failed to configure MQTT Broker: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:12:24,948 - wireless_ap_test - ERROR - Failed to configure MQTT broker via GUI: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:12:24,948 - wireless_ap_test - ERROR - Error in mqtt_broker GUI test: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:12:24,948 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:12:24,948 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:12:24,950 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:12:25,951 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:12:25,952 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:12:25,953 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:12:25,953 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 10:12:25,953 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:12:26,719 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:14:29,119 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:14:29,119 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:14:29,120 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:14:29,120 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:14:29,120 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:14:29,120 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:14:29,120 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:14:29,423 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:14:30,329 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:14:31,461 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:14:31,462 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:14:31,462 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:14:37,973 - wireless_ap_test - INFO - Filled username
2025-03-19 10:14:38,099 - wireless_ap_test - INFO - Filled password
2025-03-19 10:14:38,266 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:14:38,905 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:14:39,908 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:14:41,124 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:14:41,124 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:14:42,096 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:14:42,096 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:14:43,290 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:14:44,292 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:14:44,292 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:14:45,472 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:14:45,495 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:14:45,517 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:14:45,538 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:14:45,689 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:14:45,826 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:14:48,014 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:14:48,015 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:14:48,032 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:14:48,032 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:14:48,046 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:14:48,214 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:14:49,219 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:14:49,219 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:14:49,236 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:14:49,418 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:14:49,430 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:14:49,431 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:14:49,431 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:14:49,864 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:14:49,865 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:14:49,865 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:14:51,023 - wireless_ap_test - INFO - Filled username
2025-03-19 10:14:51,154 - wireless_ap_test - INFO - Filled password
2025-03-19 10:14:51,320 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:14:51,940 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:14:52,940 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:14:54,156 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:14:54,156 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:14:55,381 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:14:55,381 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:14:57,116 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:14:57,191 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:14:57,191 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:14:57,191 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:14:57,191 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:14:57,191 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:14:57,191 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:14:57,200 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:14:57,201 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:14:57,201 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:14:57,260 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:14:58,261 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:14:58,261 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:14:58,261 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:14:58,262 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 10:14:58,262 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:14:58,853 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:15:01,869 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:15:01,877 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:15:01,877 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:15:02,198 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:15:03,149 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:15:04,407 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:15:04,408 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:15:04,408 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:15:20,310 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:15:20,311 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:15:20,311 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:15:20,312 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:15:20,312 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:15:20,312 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:15:20,312 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:15:20,858 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:15:22,127 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:15:23,861 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:15:23,862 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:15:23,863 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:15:25,924 - wireless_ap_test - INFO - Filled username
2025-03-19 10:15:26,068 - wireless_ap_test - INFO - Filled password
2025-03-19 10:15:26,264 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:15:26,983 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:15:27,988 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:15:29,680 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:15:29,680 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:15:31,011 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:15:31,012 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:15:32,223 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:15:33,225 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:15:33,225 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:15:34,449 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:15:34,494 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:15:34,536 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:15:34,593 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:15:34,821 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:15:34,987 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:15:37,251 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:15:37,251 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:15:37,277 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:15:37,277 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:15:37,303 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:15:37,539 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:15:38,551 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:15:38,552 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:15:38,573 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:15:38,812 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:15:38,925 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:15:38,926 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:15:38,926 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:15:39,824 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:15:39,824 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:15:39,825 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:15:41,452 - wireless_ap_test - INFO - Filled username
2025-03-19 10:15:41,616 - wireless_ap_test - INFO - Filled password
2025-03-19 10:15:41,844 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:15:42,520 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:15:43,525 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:15:44,909 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:15:44,909 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:15:46,365 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:15:46,366 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:15:48,153 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:15:49,398 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 10:15:49,899 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 10:15:49,899 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 10:15:51,364 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 10:15:51,364 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 10:15:51,364 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 10:15:54,001 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 10:15:54,001 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 10:15:54,001 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 10:15:58,906 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 10:15:58,906 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 10:15:58,906 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 10:15:59,821 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 10:16:00,325 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 10:16:03,435 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 10:16:05,673 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 10:16:05,673 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 10:16:08,158 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 10:16:10,163 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 10:16:12,424 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 10:16:12,424 - wireless_ap_test - INFO - Saving configuration
2025-03-19 10:16:17,664 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 10:16:17,665 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 10:16:17,665 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 10:16:18,699 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 10:16:18,699 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 10:16:18,699 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 10:16:18,699 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
18125 root      1920 S    ash -c ps | grep mosquitto
18127 root      1920 S    grep mosquitto
2025-03-19 10:16:18,720 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 10:16:18,720 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 10:16:18,721 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 10:16:18,809 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 10:16:18,893 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 10:16:18,893 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 10:16:18,893 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 10:16:18,893 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 10:16:18,893 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 10:16:18,893 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 10:16:18,893 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 10:16:28,953 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 10:16:28,953 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 10:16:28,953 - wireless_ap_test - INFO - Validation Results:
2025-03-19 10:16:28,953 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 10:16:28,953 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 10:16:28,953 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 10:16:28,954 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 10:16:28,954 - wireless_ap_test - INFO - GUI validation completed with success: False
2025-03-19 10:16:28,954 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:16:28,954 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:16:28,964 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:16:28,964 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:16:28,964 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:16:29,030 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:16:30,031 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:16:30,031 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:16:30,032 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:16:30,032 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 10:16:30,032 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:16:30,730 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:16:33,754 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:16:33,763 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:16:33,763 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:16:34,121 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:16:35,416 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:16:37,518 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:16:37,520 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:16:37,521 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:16:39,792 - wireless_ap_test - INFO - Filled username
2025-03-19 10:16:39,931 - wireless_ap_test - INFO - Filled password
2025-03-19 10:16:40,190 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:16:40,880 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:16:41,888 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:16:43,310 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:16:43,311 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:16:44,637 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:16:44,638 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:16:45,941 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:16:46,401 - wireless_ap_test - ERROR - Failed to configure security settings: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:16:46,401 - wireless_ap_test - ERROR - Failed to configure MQTT Broker: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:16:46,401 - wireless_ap_test - ERROR - Failed to configure MQTT broker via GUI: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:16:46,401 - wireless_ap_test - ERROR - Error in mqtt_broker GUI test: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:16:46,401 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:16:46,401 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:16:46,405 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:16:47,405 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:16:47,405 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:16:47,406 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:16:47,406 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 10:16:47,406 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:16:48,460 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:16:51,489 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:16:51,503 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:16:51,504 - wireless_ap_test - INFO - Test execution completed. Total: 4, Passed: 2, Failed: 2
2025-03-19 10:16:51,506 - wireless_ap_test - INFO - 
========================================
2025-03-19 10:16:51,506 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 10:16:51,506 - wireless_ap_test - INFO - ========================================
2025-03-19 10:16:51,506 - wireless_ap_test - INFO - 3. validation_gui_mqtt_broker_data_to_server: Validation failed
2025-03-19 10:16:51,506 - wireless_ap_test - INFO - 4. mqtt_broker_gui_mqtt_broker: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:16:51,506 - wireless_ap_test - INFO - ========================================
2025-03-19 10:17:19,683 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:17:19,683 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:17:19,684 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:17:19,684 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:17:19,684 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:17:19,684 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:17:19,684 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:17:20,120 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:17:21,556 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:17:23,084 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:17:23,084 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:17:23,085 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:17:24,919 - wireless_ap_test - INFO - Filled username
2025-03-19 10:17:25,050 - wireless_ap_test - INFO - Filled password
2025-03-19 10:17:25,300 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:17:25,947 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:17:26,951 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:17:28,330 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:17:28,331 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:17:29,484 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:17:29,484 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:17:30,687 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:17:31,689 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:17:31,689 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:17:32,899 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:17:32,928 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:17:32,958 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:17:32,991 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:17:33,145 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:17:33,294 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:17:35,531 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:17:35,531 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:17:35,548 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:17:35,548 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:17:35,567 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:17:35,771 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:17:36,782 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:17:36,782 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:17:36,800 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:17:36,988 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:17:37,012 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:17:37,013 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:17:37,014 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:17:37,378 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:17:37,378 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:17:37,378 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:17:38,850 - wireless_ap_test - INFO - Filled username
2025-03-19 10:17:38,989 - wireless_ap_test - INFO - Filled password
2025-03-19 10:17:39,161 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:17:39,825 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:17:40,827 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:17:42,160 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:17:42,160 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:17:43,474 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:17:43,474 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:17:45,471 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:17:45,571 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:17:45,571 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:17:45,571 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:17:45,571 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:17:45,571 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:17:45,571 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:17:45,590 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:17:45,591 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:17:45,591 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:17:45,639 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:17:46,640 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:17:46,641 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:17:46,641 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:17:46,641 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 10:17:46,641 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:17:47,574 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:17:50,599 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:17:50,606 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:17:50,606 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:17:50,939 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:17:52,035 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:17:53,424 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:17:53,424 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:17:53,424 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:17:55,340 - wireless_ap_test - INFO - Filled username
2025-03-19 10:17:55,470 - wireless_ap_test - INFO - Filled password
2025-03-19 10:17:55,655 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:17:56,304 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:17:57,309 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:17:58,587 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:17:58,587 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:17:59,688 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:17:59,688 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:18:00,888 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:18:01,891 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:18:01,891 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:18:03,190 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:18:03,219 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:18:03,252 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:18:03,286 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:18:03,442 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:18:03,589 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:18:05,907 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:18:05,908 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:18:05,927 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:18:05,927 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:18:05,944 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:18:06,137 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:18:07,146 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:18:07,146 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:18:07,166 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:18:07,378 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:18:07,402 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:18:07,402 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:18:07,403 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:18:07,943 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:18:07,946 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:18:07,946 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:18:09,209 - wireless_ap_test - INFO - Filled username
2025-03-19 10:18:09,361 - wireless_ap_test - INFO - Filled password
2025-03-19 10:18:09,532 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:18:10,194 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:18:11,199 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:18:12,626 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:18:12,627 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:18:14,016 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:18:14,016 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:18:15,914 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:18:16,033 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:18:16,033 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:18:16,033 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:18:16,033 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:18:16,033 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:18:16,033 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:18:16,048 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:18:16,048 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:18:16,048 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:18:16,129 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:18:17,131 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:18:17,131 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:18:17,131 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:18:17,131 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 10:18:17,131 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:18:17,797 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:18:20,818 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:18:20,830 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:18:20,832 - wireless_ap_test - INFO - Test execution completed. Total: 4, Passed: 2, Failed: 2
2025-03-19 10:18:20,833 - wireless_ap_test - INFO - 
========================================
2025-03-19 10:18:20,833 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 10:18:20,833 - wireless_ap_test - INFO - ========================================
2025-03-19 10:18:20,833 - wireless_ap_test - INFO - 2. data_to_server_gui_data_to_server: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:18:20,833 - wireless_ap_test - INFO - 4. data_to_server_gui_data_to_server: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:18:20,833 - wireless_ap_test - INFO - ========================================
2025-03-19 10:19:05,150 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:19:05,150 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:19:05,151 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:19:05,151 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:19:05,151 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:19:05,151 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:19:05,152 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:19:05,556 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:19:06,596 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:19:07,996 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:19:07,997 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:19:07,998 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:19:09,872 - wireless_ap_test - INFO - Filled username
2025-03-19 10:19:10,004 - wireless_ap_test - INFO - Filled password
2025-03-19 10:19:10,187 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:19:10,874 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:19:11,879 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:19:13,202 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:19:13,203 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:19:14,347 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:19:14,347 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:19:15,575 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:19:16,578 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:19:16,578 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:19:17,767 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:19:17,801 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:19:17,834 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:19:17,873 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:19:18,021 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:19:18,169 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:19:20,496 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:19:20,496 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:19:20,519 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:19:20,520 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:19:20,539 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:19:20,722 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:19:21,749 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:19:21,749 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:19:21,796 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:19:22,160 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:19:22,245 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:19:22,246 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:19:22,246 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:19:22,981 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:19:22,982 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:19:22,983 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:19:24,186 - wireless_ap_test - INFO - Filled username
2025-03-19 10:19:24,329 - wireless_ap_test - INFO - Filled password
2025-03-19 10:19:24,519 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:19:25,153 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:19:26,156 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:19:27,574 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:19:27,575 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:19:28,998 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:19:28,998 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:19:30,884 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:19:31,007 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:19:31,007 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:19:31,007 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:19:31,007 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:19:31,007 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:19:31,007 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:19:31,018 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:19:31,018 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:19:31,019 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:19:31,097 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:19:32,098 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:19:32,098 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:19:32,098 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:19:32,099 - wireless_ap_test - ERROR - Error closing browser context: BrowserContext.close() got an unexpected keyword argument 'timeout'
2025-03-19 10:19:32,099 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:19:32,788 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:19:35,812 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:19:35,818 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:19:35,818 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:19:36,138 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:19:37,120 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:19:38,739 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:19:38,740 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:19:38,740 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:19:40,715 - wireless_ap_test - INFO - Filled username
2025-03-19 10:19:40,845 - wireless_ap_test - INFO - Filled password
2025-03-19 10:19:41,034 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:19:41,692 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:19:42,696 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:19:44,009 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:19:44,010 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:19:45,118 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:19:45,118 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:19:46,328 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:19:47,329 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:19:47,329 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:19:48,639 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:19:48,675 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:19:48,730 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:19:48,781 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:19:48,974 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:19:49,138 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:19:51,580 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:19:51,580 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:19:51,602 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:19:51,603 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:19:51,622 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:19:51,832 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:19:52,843 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:19:52,843 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:19:52,871 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:19:53,097 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:19:53,162 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:19:53,163 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:19:53,163 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:19:53,862 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:19:53,862 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:19:53,862 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:19:55,415 - wireless_ap_test - INFO - Filled username
2025-03-19 10:19:55,581 - wireless_ap_test - INFO - Filled password
2025-03-19 10:20:02,298 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:20:02,299 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:20:02,299 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:20:02,300 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:20:02,300 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:20:02,300 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:20:02,300 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:20:02,735 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:20:03,778 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:20:05,198 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:20:05,198 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:20:05,199 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:20:07,238 - wireless_ap_test - INFO - Filled username
2025-03-19 10:20:07,372 - wireless_ap_test - INFO - Filled password
2025-03-19 10:20:07,550 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:20:08,230 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:20:09,236 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:20:10,554 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:20:10,554 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:20:11,707 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:20:11,707 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:20:12,913 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:20:13,915 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:20:13,915 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:20:15,107 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:20:15,144 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:20:15,186 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:20:15,223 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:20:15,371 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:20:15,523 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:20:17,759 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:20:17,759 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:20:17,776 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:20:17,776 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:20:17,793 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:20:17,972 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:20:18,983 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:20:18,983 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:20:19,001 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:20:19,189 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:20:19,212 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:20:19,213 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:20:19,213 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:20:19,766 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:20:19,766 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:20:19,766 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:20:21,031 - wireless_ap_test - INFO - Filled username
2025-03-19 10:20:21,177 - wireless_ap_test - INFO - Filled password
2025-03-19 10:20:21,350 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:20:22,001 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:20:23,007 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:20:24,694 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:20:24,695 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:20:26,041 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:20:26,041 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:20:27,860 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:20:27,949 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:20:27,949 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:20:27,949 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:20:27,949 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:20:27,949 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:20:27,950 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:20:27,959 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:20:27,959 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:20:27,959 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:20:28,036 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:20:29,037 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:20:29,038 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:20:29,038 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:20:29,051 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:20:29,051 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:20:29,752 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:20:32,773 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:20:32,780 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:20:32,780 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:20:33,165 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:20:34,400 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:20:36,216 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:20:36,216 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:20:36,217 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:20:38,269 - wireless_ap_test - INFO - Filled username
2025-03-19 10:20:38,399 - wireless_ap_test - INFO - Filled password
2025-03-19 10:20:38,589 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:20:39,238 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:20:40,240 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:20:41,719 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:20:41,719 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:20:42,849 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:20:42,849 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:20:44,074 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:20:45,076 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:20:45,076 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:20:46,289 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:20:46,322 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:20:46,351 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:20:46,389 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:20:46,543 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:20:46,705 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:20:48,915 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:20:48,915 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:20:48,932 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:20:48,933 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:20:48,949 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:20:49,125 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:20:50,131 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:20:50,131 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:20:50,148 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:20:50,335 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:20:50,348 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:20:50,350 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:20:50,351 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:20:50,827 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:20:50,827 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:20:50,827 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:20:52,387 - wireless_ap_test - INFO - Filled username
2025-03-19 10:20:52,579 - wireless_ap_test - INFO - Filled password
2025-03-19 10:20:52,827 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:20:53,501 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:20:54,505 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:20:56,111 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:20:56,111 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:20:57,610 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:20:57,610 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:20:59,465 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:20:59,654 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:20:59,654 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:20:59,654 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:20:59,655 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:20:59,655 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:20:59,655 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:20:59,681 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:20:59,684 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:20:59,684 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:20:59,746 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:21:00,748 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:21:00,748 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:21:00,749 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:21:00,762 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:21:00,762 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:21:01,564 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:21:04,590 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:21:04,596 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:21:04,596 - wireless_ap_test - INFO - Test execution completed. Total: 4, Passed: 2, Failed: 2
2025-03-19 10:21:04,596 - wireless_ap_test - INFO - 
========================================
2025-03-19 10:21:04,597 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 10:21:04,597 - wireless_ap_test - INFO - ========================================
2025-03-19 10:21:04,597 - wireless_ap_test - INFO - 2. data_to_server_gui_data_to_server: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:21:04,597 - wireless_ap_test - INFO - 4. data_to_server_gui_data_to_server: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:21:04,597 - wireless_ap_test - INFO - ========================================
2025-03-19 10:24:23,455 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:24:23,456 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:24:23,456 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:24:23,457 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:24:23,457 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:24:23,457 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:24:23,457 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:24:23,823 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:24:24,916 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:24:26,421 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:24:26,422 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:24:26,422 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:24:28,256 - wireless_ap_test - INFO - Filled username
2025-03-19 10:24:28,390 - wireless_ap_test - INFO - Filled password
2025-03-19 10:24:28,567 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:24:29,213 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:24:30,217 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:24:31,591 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:24:31,593 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:24:32,745 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:24:32,745 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:24:33,935 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:24:34,937 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:24:34,937 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:24:36,130 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:24:36,160 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:24:36,191 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:24:36,224 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:24:36,376 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:24:36,525 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:24:38,743 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:24:38,743 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:24:38,763 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:24:38,763 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:24:38,785 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:24:39,013 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:24:40,021 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:24:40,021 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:24:40,044 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:24:40,235 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:24:40,273 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:24:40,274 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:24:40,274 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:24:40,859 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:24:40,860 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:24:40,860 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:24:42,123 - wireless_ap_test - INFO - Filled username
2025-03-19 10:24:42,260 - wireless_ap_test - INFO - Filled password
2025-03-19 10:24:42,438 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:24:43,122 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:24:44,127 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:24:45,429 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:24:45,429 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:24:46,741 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:24:46,742 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:24:48,525 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:24:49,702 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 10:24:50,206 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 10:24:50,206 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 10:24:51,777 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 10:24:51,778 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 10:24:51,778 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 10:24:54,236 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 10:24:54,236 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 10:24:54,236 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 10:24:54,236 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 10:24:55,176 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 10:24:55,678 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 10:24:59,590 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 10:25:01,765 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 10:25:01,765 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 10:25:04,173 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 10:25:06,050 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 10:25:08,296 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 10:25:08,296 - wireless_ap_test - INFO - Saving configuration
2025-03-19 10:25:13,537 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 10:25:13,537 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 10:25:13,537 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 10:25:14,516 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 10:25:14,516 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 10:25:14,516 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 10:25:14,516 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
20069 root      1920 S    ash -c ps | grep mosquitto
20071 root      1920 S    grep mosquitto
2025-03-19 10:25:14,538 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 10:25:14,538 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 10:25:14,538 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 10:25:14,623 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 10:25:14,716 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 10:25:14,716 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 10:25:14,716 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 10:25:14,716 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 10:25:14,716 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 10:25:14,716 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 10:25:14,716 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 10:25:15,502 - wireless_ap_test - INFO - Received message: test/topic123 {"input":{"time":1742372715,"local_time":"2025-03-19 08:25:15","fw":"RUTX_R_00.07.12","name":"test_instance3","id":"1"}}
2025-03-19 10:25:15,502 - wireless_ap_test - INFO - Validation Results:
2025-03-19 10:25:15,502 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 10:25:15,503 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 10:25:15,503 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 10:25:15,503 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 10:25:15,503 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:25:15,503 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:25:15,519 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:25:15,521 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:25:15,521 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:25:15,602 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:25:16,603 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:25:16,603 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:25:16,604 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:25:16,619 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:25:16,619 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:25:17,315 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:25:20,334 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:25:20,342 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:25:20,343 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:25:20,684 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:25:21,780 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:25:23,094 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:25:23,096 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:25:23,096 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:25:24,949 - wireless_ap_test - INFO - Filled username
2025-03-19 10:25:25,095 - wireless_ap_test - INFO - Filled password
2025-03-19 10:25:25,272 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:25:25,904 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:25:26,910 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:25:28,231 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:25:28,232 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:25:29,398 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:25:29,398 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:25:30,669 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:25:31,673 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:25:31,673 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:25:32,875 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:25:32,915 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:25:32,947 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:25:32,987 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:25:33,138 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:25:33,287 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:25:35,504 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:25:35,504 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:25:35,534 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:25:35,534 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:25:35,554 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:25:35,735 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:25:36,743 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:25:36,743 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:25:36,761 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:25:36,951 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:25:36,993 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:25:36,994 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:25:36,994 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:25:37,515 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:25:37,515 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:25:37,516 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:25:38,749 - wireless_ap_test - INFO - Filled username
2025-03-19 10:25:38,893 - wireless_ap_test - INFO - Filled password
2025-03-19 10:25:39,074 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:25:39,724 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:25:40,727 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:25:42,030 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:25:42,030 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:25:43,339 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:25:43,339 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:25:45,138 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:25:45,245 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:25:45,245 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:25:45,245 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:25:45,245 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:25:45,245 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:25:45,245 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:25:45,255 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:25:45,255 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:25:45,255 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:25:45,323 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:25:46,324 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:25:46,324 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:25:46,325 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:25:46,335 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:25:46,335 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:25:47,028 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:25:50,049 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:25:50,056 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:25:50,057 - wireless_ap_test - INFO - Test execution completed. Total: 5, Passed: 4, Failed: 1
2025-03-19 10:25:50,057 - wireless_ap_test - INFO - 
========================================
2025-03-19 10:25:50,057 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 10:25:50,057 - wireless_ap_test - INFO - ========================================
2025-03-19 10:25:50,057 - wireless_ap_test - INFO - 5. data_to_server_gui_data_to_server: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:25:50,057 - wireless_ap_test - INFO - ========================================
2025-03-19 10:33:50,868 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:33:50,869 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:33:50,869 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:33:50,869 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:33:50,870 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:33:50,870 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:33:50,870 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:33:51,216 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:33:52,336 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:33:53,513 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:33:53,513 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:33:53,513 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:33:55,230 - wireless_ap_test - INFO - Filled username
2025-03-19 10:33:55,355 - wireless_ap_test - INFO - Filled password
2025-03-19 10:33:55,509 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:33:56,150 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:33:57,152 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:33:58,381 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:33:58,381 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:33:59,394 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:33:59,395 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:34:00,579 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:34:01,582 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:34:01,584 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:34:02,796 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:34:02,824 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:34:02,846 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:34:02,870 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:34:03,010 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:34:03,150 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:34:05,339 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:34:05,340 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:34:05,357 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:34:05,357 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:34:05,372 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:34:05,561 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:34:06,573 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:34:06,573 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:34:06,589 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:34:06,772 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:34:06,784 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:34:06,784 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:34:06,785 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:34:07,253 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:34:07,253 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:34:07,253 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:34:08,416 - wireless_ap_test - INFO - Filled username
2025-03-19 10:34:08,544 - wireless_ap_test - INFO - Filled password
2025-03-19 10:34:08,707 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:34:09,348 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:34:10,350 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:34:11,627 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:34:11,628 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:34:12,847 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:34:12,847 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 10:34:13,855 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 10:34:13,855 - wireless_ap_test - ERROR - Failed to configure DTS: 'DTSPage' object has no attribute '_set_instance_name'
2025-03-19 10:34:13,855 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: 'DTSPage' object has no attribute '_set_instance_name'
2025-03-19 10:34:13,855 - wireless_ap_test - ERROR - Error in data_to_server GUI test: 'DTSPage' object has no attribute '_set_instance_name'
2025-03-19 10:34:13,855 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:34:13,856 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:34:13,863 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:34:13,863 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:34:13,864 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:34:13,914 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:34:14,914 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:34:14,914 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:34:14,915 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:34:14,927 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:34:14,927 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:34:15,527 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:34:18,546 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:34:18,551 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:34:18,551 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:34:18,827 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:34:19,918 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:34:21,624 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:34:21,624 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:34:21,624 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:34:23,605 - wireless_ap_test - INFO - Filled username
2025-03-19 10:34:23,735 - wireless_ap_test - INFO - Filled password
2025-03-19 10:34:23,935 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:34:24,626 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:34:25,630 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:34:27,028 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:34:27,028 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:34:28,311 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:34:28,312 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:34:29,530 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:34:30,533 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:34:30,534 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:34:31,921 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:34:31,951 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:34:32,001 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:34:32,032 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:34:32,184 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:34:32,339 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:34:34,567 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:34:34,567 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:34:34,591 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:34:34,591 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:34:34,606 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:34:34,790 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:34:35,814 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:34:35,814 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:34:35,834 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:34:36,021 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:34:36,042 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:34:36,042 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:34:36,042 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:34:36,663 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:34:36,663 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:34:36,663 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:34:38,166 - wireless_ap_test - INFO - Filled username
2025-03-19 10:34:38,337 - wireless_ap_test - INFO - Filled password
2025-03-19 10:34:38,516 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:34:39,189 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:34:40,192 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:34:41,526 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:34:41,526 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:34:42,974 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:34:42,976 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 10:34:43,985 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 10:34:43,985 - wireless_ap_test - ERROR - Failed to configure DTS: 'DTSPage' object has no attribute '_set_instance_name'
2025-03-19 10:34:43,985 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: 'DTSPage' object has no attribute '_set_instance_name'
2025-03-19 10:34:43,985 - wireless_ap_test - ERROR - Error in data_to_server GUI test: 'DTSPage' object has no attribute '_set_instance_name'
2025-03-19 10:34:43,985 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:34:43,985 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:34:43,997 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:34:43,998 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:34:43,998 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:34:44,047 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:34:45,047 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:34:45,048 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:34:45,048 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:34:45,064 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:34:45,064 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:34:46,052 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:34:49,092 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:34:49,098 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:34:49,098 - wireless_ap_test - INFO - Test execution completed. Total: 4, Passed: 2, Failed: 2
2025-03-19 10:34:49,098 - wireless_ap_test - INFO - 
========================================
2025-03-19 10:34:49,099 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 10:34:49,099 - wireless_ap_test - INFO - ========================================
2025-03-19 10:34:49,099 - wireless_ap_test - INFO - 2. data_to_server_gui_data_to_server: 'DTSPage' object has no attribute '_set_instance_name'
2025-03-19 10:34:49,099 - wireless_ap_test - INFO - 4. data_to_server_gui_data_to_server: 'DTSPage' object has no attribute '_set_instance_name'
2025-03-19 10:34:49,099 - wireless_ap_test - INFO - ========================================
2025-03-19 10:40:19,209 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:40:19,210 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:40:19,210 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:40:19,210 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:40:19,211 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:40:19,211 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:40:19,211 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:40:19,719 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:40:21,032 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:40:22,659 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:40:22,660 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:40:22,660 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:40:24,520 - wireless_ap_test - INFO - Filled username
2025-03-19 10:40:24,659 - wireless_ap_test - INFO - Filled password
2025-03-19 10:40:24,836 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:40:25,486 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:40:26,491 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:40:27,854 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:40:27,855 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:40:28,972 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:40:28,972 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:40:30,167 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:40:31,169 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:40:31,169 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:40:32,361 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:40:32,390 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:40:32,429 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:40:32,467 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:40:32,624 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:40:32,783 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:40:35,015 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:40:35,015 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:40:35,034 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:40:35,035 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:40:35,053 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:40:35,242 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:40:36,251 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:40:36,251 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:40:36,278 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:40:36,498 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:40:36,537 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:40:36,537 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:40:36,537 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:40:37,083 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:40:37,083 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:40:37,084 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:40:38,309 - wireless_ap_test - INFO - Filled username
2025-03-19 10:40:38,445 - wireless_ap_test - INFO - Filled password
2025-03-19 10:40:38,622 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:40:39,324 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:40:40,327 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:40:41,646 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:40:41,646 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:40:42,933 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:40:42,933 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 10:40:43,943 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 10:40:43,959 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 10:40:44,405 - wireless_ap_test - ERROR - Error checking/deleting existing instance: Locator.wait_for: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../..").locator("button[test-id=\"button-delete\"]") to be visible

2025-03-19 10:40:44,405 - wireless_ap_test - INFO - Continuing with configuration despite error checking for existing instance
2025-03-19 10:40:44,405 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:40:45,342 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:40:45,520 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:40:45,520 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:40:45,520 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:40:45,520 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 10:40:45,520 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:40:45,520 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:40:45,536 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:40:45,539 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:40:45,539 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:40:45,630 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:40:46,631 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:40:46,631 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:40:46,632 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:40:46,642 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:40:46,642 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:40:47,302 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:44:24,287 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:44:24,288 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:44:24,289 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:44:24,290 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:44:24,290 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:44:24,290 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:44:24,290 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:44:24,822 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:44:26,326 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:44:27,792 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:44:27,793 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:44:27,794 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:44:29,560 - wireless_ap_test - INFO - Filled username
2025-03-19 10:44:29,704 - wireless_ap_test - INFO - Filled password
2025-03-19 10:44:29,898 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:44:30,569 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:44:31,573 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:44:32,889 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:44:32,890 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:44:34,014 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:44:34,016 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:44:35,268 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:44:36,271 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:44:36,271 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:44:37,463 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:44:37,491 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:44:37,517 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:44:37,548 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:44:37,704 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:44:37,876 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:44:40,146 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:44:40,146 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:44:40,178 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:44:40,178 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:44:40,214 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:44:40,446 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:44:41,453 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:44:41,454 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:44:41,470 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:44:41,698 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:44:41,765 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:44:41,766 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:44:41,767 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:44:42,449 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:44:42,450 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:44:42,450 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:44:43,816 - wireless_ap_test - INFO - Filled username
2025-03-19 10:44:43,971 - wireless_ap_test - INFO - Filled password
2025-03-19 10:44:44,174 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:44:44,843 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:44:45,846 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:44:47,383 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:44:47,383 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:44:48,743 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:44:48,744 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 10:44:50,757 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 10:44:50,773 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 10:44:51,259 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 10:44:52,445 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 10:44:52,445 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:44:57,546 - wireless_ap_test - ERROR - Failed to set instance name: Page.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-name\"]")
  -     - locator resolved to <input name="" id="name" type="text" placeholder="" data-v-93c725f6="" data-state="valid" test-id="input-name" class="tlt-input-field input-size"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 100ms
  -     9 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 500ms

2025-03-19 10:44:57,547 - wireless_ap_test - ERROR - Failed to configure DTS: Page.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-name\"]")
  -     - locator resolved to <input name="" id="name" type="text" placeholder="" data-v-93c725f6="" data-state="valid" test-id="input-name" class="tlt-input-field input-size"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 100ms
  -     9 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 500ms

2025-03-19 10:44:57,547 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Page.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-name\"]")
  -     - locator resolved to <input name="" id="name" type="text" placeholder="" data-v-93c725f6="" data-state="valid" test-id="input-name" class="tlt-input-field input-size"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 100ms
  -     9 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 500ms

2025-03-19 10:44:57,547 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Page.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"input-name\"]")
  -     - locator resolved to <input name="" id="name" type="text" placeholder="" data-v-93c725f6="" data-state="valid" test-id="input-name" class="tlt-input-field input-size"/>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 100ms
  -     9 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60 z-40">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 500ms

2025-03-19 10:44:57,547 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:44:57,547 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:44:57,558 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:44:57,558 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:44:57,559 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:44:57,632 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:44:58,633 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:44:58,633 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:44:58,634 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:44:58,649 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:44:58,650 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:44:59,492 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:45:02,514 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:45:02,532 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:45:02,532 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:45:03,033 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:45:04,228 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:45:05,923 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:45:05,923 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:45:05,924 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:45:07,926 - wireless_ap_test - INFO - Filled username
2025-03-19 10:45:08,058 - wireless_ap_test - INFO - Filled password
2025-03-19 10:45:08,257 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:45:08,906 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:45:09,913 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:45:11,264 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:45:11,265 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:45:12,509 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:45:12,509 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:45:12,827 - wireless_ap_test - ERROR - Failed to configure security settings: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:45:12,827 - wireless_ap_test - ERROR - Failed to configure MQTT Broker: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:45:12,827 - wireless_ap_test - ERROR - Failed to configure MQTT broker via GUI: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:45:12,827 - wireless_ap_test - ERROR - Error in mqtt_broker GUI test: Page.wait_for_timeout: Target page, context or browser has been closed
2025-03-19 10:45:12,827 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:45:12,828 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:45:12,830 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:45:13,830 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:45:13,831 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:45:13,831 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:45:13,844 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:45:13,845 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:47:07,575 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 10:47:07,576 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 10:47:07,576 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 10:47:07,577 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 10:47:07,577 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 10:47:07,577 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 10:47:07,577 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:47:07,964 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:47:09,022 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:47:10,595 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:47:10,596 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:47:10,596 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:47:12,375 - wireless_ap_test - INFO - Filled username
2025-03-19 10:47:12,511 - wireless_ap_test - INFO - Filled password
2025-03-19 10:47:12,689 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:47:13,323 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:47:14,327 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:47:15,803 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:47:15,803 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:47:16,961 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:47:16,961 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:47:18,160 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:47:19,162 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:47:19,162 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:47:20,364 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:47:20,392 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:47:20,425 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:47:20,465 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:47:20,620 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:47:20,771 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:47:22,991 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:47:22,991 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:47:23,010 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:47:23,010 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:47:23,028 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:47:23,213 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:47:24,220 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:47:24,221 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:47:24,240 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:47:24,439 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:47:24,462 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:47:24,462 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:47:24,463 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:47:25,006 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:47:25,006 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:47:25,006 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:47:26,260 - wireless_ap_test - INFO - Filled username
2025-03-19 10:47:26,402 - wireless_ap_test - INFO - Filled password
2025-03-19 10:47:26,577 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:47:27,242 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:47:28,244 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:47:29,558 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:47:29,558 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:47:30,858 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:47:30,859 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 10:47:32,872 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 10:47:32,890 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 10:47:33,411 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 10:47:36,798 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 10:47:36,798 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:47:37,647 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:47:38,832 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 10:47:39,336 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 10:47:39,336 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 10:47:40,839 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 10:47:40,839 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 10:47:40,839 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 10:47:43,244 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 10:47:43,244 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 10:47:43,244 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 10:47:43,244 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 10:47:44,146 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 10:47:44,648 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 10:47:48,524 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 10:47:50,694 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 10:47:50,695 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 10:47:53,123 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 10:47:55,045 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 10:47:57,296 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 10:47:57,296 - wireless_ap_test - INFO - Saving configuration
2025-03-19 10:48:02,554 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 10:48:02,555 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 10:48:02,555 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 10:48:03,562 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 10:48:03,562 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 10:48:03,562 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 10:48:03,563 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
22400 root      1920 S    ash -c ps | grep mosquitto
22402 root      1920 S    grep mosquitto
2025-03-19 10:48:03,584 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 10:48:03,584 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 10:48:03,585 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 10:48:03,670 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 10:48:03,750 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 10:48:03,750 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 10:48:03,750 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 10:48:03,750 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 10:48:03,750 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 10:48:03,751 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 10:48:03,751 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 10:48:13,853 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 10:48:13,853 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 10:48:13,853 - wireless_ap_test - INFO - Validation Results:
2025-03-19 10:48:13,853 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 10:48:13,854 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 10:48:13,854 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 10:48:13,854 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 10:48:13,854 - wireless_ap_test - INFO - GUI validation completed with success: False
2025-03-19 10:48:13,854 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:48:13,854 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:48:13,865 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:48:13,865 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:48:13,865 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:48:13,900 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:48:14,901 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:48:14,902 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:48:14,902 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:48:14,916 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:48:14,917 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:48:15,655 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:48:18,674 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:48:18,681 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:48:18,681 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 10:48:19,068 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 10:48:20,263 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 10:48:21,628 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 10:48:21,630 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:48:21,631 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:48:23,495 - wireless_ap_test - INFO - Filled username
2025-03-19 10:48:23,635 - wireless_ap_test - INFO - Filled password
2025-03-19 10:48:23,803 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:48:24,487 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:48:25,502 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 10:48:26,878 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 10:48:26,879 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 10:48:28,088 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 10:48:28,088 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 10:48:29,313 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 10:48:30,316 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 10:48:30,316 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 10:48:31,546 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 10:48:31,576 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 10:48:31,610 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 10:48:31,644 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 10:48:31,802 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 10:48:31,951 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 10:48:34,225 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 10:48:34,225 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 10:48:34,245 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:48:34,245 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 10:48:34,262 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 10:48:34,465 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 10:48:35,476 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 10:48:35,476 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 10:48:35,498 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 10:48:35,699 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 10:48:35,720 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 10:48:35,720 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 10:48:35,720 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 10:48:36,324 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 10:48:36,325 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 10:48:36,325 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 10:48:37,552 - wireless_ap_test - INFO - Filled username
2025-03-19 10:48:37,697 - wireless_ap_test - INFO - Filled password
2025-03-19 10:48:37,862 - wireless_ap_test - INFO - Clicked login button
2025-03-19 10:48:38,528 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 10:48:39,531 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:48:40,882 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:48:40,883 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 10:48:42,415 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 10:48:42,415 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 10:48:44,427 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 10:48:44,446 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 10:48:45,026 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 10:48:48,442 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 10:48:48,442 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 10:48:49,294 - wireless_ap_test - INFO - Clicking add button
2025-03-19 10:48:50,477 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 10:48:50,981 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 10:48:50,981 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 10:48:52,448 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 10:48:52,448 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 10:48:52,448 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 10:48:55,016 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 10:48:55,016 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 10:48:55,016 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 10:48:59,883 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 10:48:59,884 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 10:48:59,884 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 10:49:00,889 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 10:49:01,392 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 10:49:04,311 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 10:49:06,519 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 10:49:06,520 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 10:49:08,960 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 10:49:10,911 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 10:49:14,952 - wireless_ap_test - ERROR - Failed to configure server settings: Locator.wait_for: Target page, context or browser has been closed
Call log:
  - waiting for get_by_role("option", name="2", exact=True) to be visible

2025-03-19 10:49:14,952 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Target page, context or browser has been closed
Call log:
  - waiting for get_by_role("option", name="2", exact=True) to be visible

2025-03-19 10:49:14,952 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Target page, context or browser has been closed
Call log:
  - waiting for get_by_role("option", name="2", exact=True) to be visible

2025-03-19 10:49:14,952 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Target page, context or browser has been closed
Call log:
  - waiting for get_by_role("option", name="2", exact=True) to be visible

2025-03-19 10:49:14,953 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 10:49:14,953 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 10:49:14,955 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 10:49:14,956 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 10:49:14,956 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 10:49:15,029 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 10:49:16,033 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 10:49:16,034 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 10:49:16,034 - wireless_ap_test - INFO - Closing browser context
2025-03-19 10:49:16,045 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 10:49:16,045 - wireless_ap_test - INFO - Closing browser
2025-03-19 10:49:16,838 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 10:49:19,861 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 10:49:19,871 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 10:49:19,875 - wireless_ap_test - INFO - Test execution completed. Total: 5, Passed: 3, Failed: 2
2025-03-19 10:49:19,875 - wireless_ap_test - INFO - 
========================================
2025-03-19 10:49:19,875 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 10:49:19,875 - wireless_ap_test - INFO - ========================================
2025-03-19 10:49:19,875 - wireless_ap_test - INFO - 3. validation_gui_mqtt_broker_data_to_server: Validation failed
2025-03-19 10:49:19,875 - wireless_ap_test - INFO - 5. data_to_server_gui_data_to_server: Locator.wait_for: Target page, context or browser has been closed
Call log:
  - waiting for get_by_role("option", name="2", exact=True) to be visible

2025-03-19 10:49:19,875 - wireless_ap_test - INFO - ========================================
2025-03-19 11:22:03,669 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 11:22:03,669 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 11:22:03,669 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 11:22:03,670 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 11:22:03,670 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 11:22:03,670 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 11:22:03,670 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 11:22:03,961 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 11:22:04,862 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 11:22:05,984 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 11:22:05,984 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 11:22:05,984 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 11:22:07,601 - wireless_ap_test - INFO - Filled username
2025-03-19 11:22:07,725 - wireless_ap_test - INFO - Filled password
2025-03-19 11:22:07,889 - wireless_ap_test - INFO - Clicked login button
2025-03-19 11:22:08,538 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 11:22:09,541 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 11:22:10,769 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 11:22:10,769 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 11:22:11,748 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 11:22:11,748 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 11:22:12,927 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 11:22:13,929 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 11:22:13,929 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 11:22:15,099 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 11:22:15,119 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 11:22:15,140 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 11:22:15,163 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 11:22:15,303 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 11:22:15,445 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 11:22:17,658 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 11:22:17,659 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 11:22:17,675 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 11:22:17,676 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 11:22:17,688 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 11:22:17,857 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 11:22:18,867 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 11:22:18,867 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 11:22:18,886 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 11:22:19,061 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 11:22:19,075 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 11:22:19,075 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 11:22:19,075 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 11:22:19,533 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 11:22:19,534 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 11:22:19,534 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 11:22:20,682 - wireless_ap_test - INFO - Filled username
2025-03-19 11:22:20,836 - wireless_ap_test - INFO - Filled password
2025-03-19 11:22:21,000 - wireless_ap_test - INFO - Clicked login button
2025-03-19 11:22:21,625 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 11:22:22,626 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 11:22:23,833 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 11:22:23,833 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 11:22:25,048 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 11:22:25,048 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 11:22:27,055 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 11:22:27,066 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 11:22:27,484 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 11:22:30,838 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 11:22:30,838 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 11:22:31,649 - wireless_ap_test - INFO - Clicking add button
2025-03-19 11:22:32,810 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 11:22:33,313 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 11:22:33,313 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 11:22:34,693 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 11:22:34,693 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 11:22:34,694 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 11:22:37,089 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 11:22:37,089 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 11:22:37,089 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 11:22:37,089 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 11:22:37,949 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 11:22:38,451 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 11:22:42,233 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 11:22:44,389 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 11:22:44,389 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 11:22:46,767 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 11:22:48,507 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 11:22:50,749 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 11:22:50,750 - wireless_ap_test - INFO - Saving configuration
2025-03-19 11:22:55,956 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 11:22:55,956 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 11:22:55,956 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 11:22:56,862 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 11:22:56,863 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 11:22:56,863 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 11:22:56,863 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
23974 root      1920 S    ash -c ps | grep mosquitto
23976 root      1920 S    grep mosquitto
2025-03-19 11:22:56,883 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 11:22:56,883 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 11:22:56,884 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 11:22:56,967 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 11:22:57,047 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 11:22:57,047 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 11:22:57,047 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 11:22:57,047 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 11:22:57,047 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 11:22:57,047 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 11:22:57,047 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 11:30:18,986 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 11:30:18,986 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 11:30:18,987 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 11:30:18,987 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 11:30:18,988 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 11:30:18,988 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 11:30:18,988 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 11:30:19,284 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 11:30:20,170 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 11:30:21,284 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 11:30:21,285 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 11:30:21,285 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 11:30:22,910 - wireless_ap_test - INFO - Filled username
2025-03-19 11:30:23,035 - wireless_ap_test - INFO - Filled password
2025-03-19 11:30:23,200 - wireless_ap_test - INFO - Clicked login button
2025-03-19 11:30:23,830 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 11:30:24,833 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 11:30:26,062 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 11:30:26,062 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 11:30:27,028 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 11:30:27,029 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 11:30:28,221 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 11:30:29,224 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 11:30:29,224 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 11:30:30,399 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 11:30:30,425 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 11:30:30,447 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 11:30:30,470 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 11:30:30,614 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 11:30:30,757 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 11:30:32,952 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 11:30:32,952 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 11:30:32,968 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 11:30:32,968 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 11:30:32,981 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 11:30:33,150 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 11:30:34,158 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 11:30:34,158 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 11:30:34,170 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 11:30:34,324 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 11:30:34,335 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 11:30:34,335 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 11:30:34,336 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 11:30:34,818 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 11:30:34,818 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 11:30:34,818 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 11:30:35,960 - wireless_ap_test - INFO - Filled username
2025-03-19 11:30:36,092 - wireless_ap_test - INFO - Filled password
2025-03-19 11:30:36,260 - wireless_ap_test - INFO - Clicked login button
2025-03-19 11:30:36,882 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 11:30:37,883 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 11:30:39,101 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 11:30:39,101 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 11:30:40,407 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 11:30:40,407 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 11:30:42,414 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 11:30:42,424 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 11:30:42,820 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 11:30:46,163 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 11:30:46,163 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 11:30:46,971 - wireless_ap_test - INFO - Clicking add button
2025-03-19 11:30:48,135 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 11:30:48,636 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 11:30:48,636 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 11:30:50,017 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 11:30:50,017 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 11:30:50,017 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 11:30:52,396 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 11:30:52,397 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 11:30:52,397 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 11:30:52,397 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 11:30:53,255 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 11:30:53,757 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 11:30:57,572 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 11:30:59,727 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 11:30:59,727 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 11:31:02,130 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 11:31:03,881 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 11:31:06,106 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 11:31:06,106 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 11:31:15,362 - wireless_ap_test - ERROR - Failed to configure server settings: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 11:31:15,362 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 11:31:15,363 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 11:31:15,363 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 11:31:15,363 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 11:31:15,363 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 11:31:15,370 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 11:31:15,371 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 11:31:15,371 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 11:31:15,421 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 11:31:16,422 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 11:31:16,422 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 11:31:16,422 - wireless_ap_test - INFO - Closing browser context
2025-03-19 11:31:16,433 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 11:31:16,433 - wireless_ap_test - INFO - Closing browser
2025-03-19 11:31:17,039 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 11:31:20,056 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 11:31:20,061 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 11:31:20,062 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 11:31:20,320 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 11:31:21,249 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 11:31:22,343 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 11:31:22,344 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 11:31:22,344 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 11:31:23,948 - wireless_ap_test - INFO - Filled username
2025-03-19 11:31:24,072 - wireless_ap_test - INFO - Filled password
2025-03-19 11:31:24,236 - wireless_ap_test - INFO - Clicked login button
2025-03-19 11:31:24,867 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 11:31:25,870 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 11:31:27,165 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 11:31:27,165 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 11:31:28,173 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 11:31:28,173 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 11:31:29,354 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 11:31:30,356 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 11:31:30,357 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 11:31:31,539 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 11:31:31,562 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 11:31:31,583 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 11:31:31,605 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 11:31:31,747 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 11:31:31,887 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 11:31:34,088 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 11:31:34,088 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 11:31:34,107 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 11:31:34,107 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 11:31:34,119 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 11:31:34,289 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 11:31:35,297 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 11:31:35,298 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 11:31:35,317 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 11:31:35,492 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 11:31:35,504 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 11:31:35,504 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 11:31:35,504 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 11:31:36,012 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 11:31:36,013 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 11:31:36,013 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 11:31:37,126 - wireless_ap_test - INFO - Filled username
2025-03-19 11:31:37,256 - wireless_ap_test - INFO - Filled password
2025-03-19 11:31:37,411 - wireless_ap_test - INFO - Clicked login button
2025-03-19 11:31:38,050 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 11:31:39,053 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 11:31:40,248 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 11:31:40,248 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 11:31:41,462 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 11:31:41,463 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 11:31:43,469 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 11:31:43,480 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 11:31:43,904 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 11:31:47,255 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 11:31:47,255 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 11:31:48,079 - wireless_ap_test - INFO - Clicking add button
2025-03-19 11:31:49,239 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 11:31:49,740 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 11:31:49,740 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 11:31:51,149 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 11:31:51,149 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 11:31:51,149 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 11:31:53,667 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 11:31:53,668 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 11:31:53,668 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 11:31:58,221 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 11:31:58,221 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 11:31:58,221 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 11:31:59,097 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 11:31:59,599 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 11:32:02,433 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 11:32:04,632 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 11:32:04,632 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 11:32:07,011 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 11:32:08,744 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 11:32:10,979 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 11:32:10,979 - wireless_ap_test - INFO - Saving configuration
2025-03-19 11:32:16,080 - wireless_ap_test - ERROR - Failed to save configuration: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("div[test-id=\"modal-container\"] button[test-id=\"button-next\"]")

2025-03-19 11:32:16,080 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("div[test-id=\"modal-container\"] button[test-id=\"button-next\"]")

2025-03-19 11:32:16,080 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("div[test-id=\"modal-container\"] button[test-id=\"button-next\"]")

2025-03-19 11:32:16,080 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("div[test-id=\"modal-container\"] button[test-id=\"button-next\"]")

2025-03-19 11:32:16,080 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 11:32:16,080 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 11:32:16,088 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 11:32:16,088 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 11:32:16,089 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 11:32:16,141 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 11:32:17,141 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 11:32:17,141 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 11:32:17,141 - wireless_ap_test - INFO - Closing browser context
2025-03-19 11:32:17,149 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 11:32:17,149 - wireless_ap_test - INFO - Closing browser
2025-03-19 11:32:17,764 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 11:32:20,782 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 11:32:20,788 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 11:32:20,789 - wireless_ap_test - INFO - Test execution completed. Total: 4, Passed: 2, Failed: 2
2025-03-19 11:32:20,789 - wireless_ap_test - INFO - 
========================================
2025-03-19 11:32:20,789 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 11:32:20,789 - wireless_ap_test - INFO - ========================================
2025-03-19 11:32:20,789 - wireless_ap_test - INFO - 2. data_to_server_gui_data_to_server: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 11:32:20,789 - wireless_ap_test - INFO - 4. data_to_server_gui_data_to_server: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("div[test-id=\"modal-container\"] button[test-id=\"button-next\"]")

2025-03-19 11:32:20,789 - wireless_ap_test - INFO - ========================================
2025-03-19 12:37:27,594 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 12:37:27,595 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 12:37:27,595 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 12:37:27,596 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 12:37:27,596 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 12:37:27,596 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 12:37:27,596 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 12:37:27,919 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 12:37:28,794 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 12:37:29,908 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 12:37:29,909 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:37:29,909 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:37:31,487 - wireless_ap_test - INFO - Filled username
2025-03-19 12:37:31,613 - wireless_ap_test - INFO - Filled password
2025-03-19 12:37:31,777 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:37:32,447 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:37:33,451 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 12:37:34,678 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 12:37:34,678 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 12:37:35,676 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 12:37:35,676 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 12:37:36,863 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 12:37:37,864 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 12:37:37,865 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 12:37:39,053 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 12:37:39,095 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 12:37:39,137 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 12:37:39,171 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 12:37:39,317 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 12:37:39,458 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 12:37:41,648 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 12:37:41,648 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 12:37:41,663 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:37:41,663 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 12:37:41,677 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 12:37:41,844 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:37:42,854 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 12:37:42,854 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 12:37:42,872 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 12:37:43,053 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 12:37:43,077 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 12:37:43,077 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 12:37:43,077 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 12:37:43,568 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 12:37:43,568 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:37:43,568 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:37:44,700 - wireless_ap_test - INFO - Filled username
2025-03-19 12:37:44,829 - wireless_ap_test - INFO - Filled password
2025-03-19 12:37:44,986 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:37:45,622 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:37:46,624 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:37:47,831 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:37:47,831 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:37:49,075 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:37:49,075 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 12:37:51,085 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 12:37:51,095 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 12:37:51,513 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 12:37:54,859 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 12:37:54,859 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 12:37:55,668 - wireless_ap_test - INFO - Clicking add button
2025-03-19 12:37:56,831 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 12:37:57,333 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 12:37:57,333 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 12:37:58,713 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 12:37:58,713 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 12:37:58,714 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 12:38:01,095 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 12:38:01,095 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 12:38:01,095 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 12:38:01,095 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 12:38:01,961 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 12:38:02,465 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 12:38:06,268 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 12:38:08,428 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 12:38:08,428 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 12:38:10,807 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 12:38:12,559 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 12:38:14,783 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 12:38:14,783 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 12:38:18,936 - wireless_ap_test - INFO - clicked ca_dropdown
2025-03-19 12:38:18,936 - wireless_ap_test - INFO - located cafile-listbox
2025-03-19 12:38:18,936 - wireless_ap_test - ERROR - Failed to configure server settings: 'Logger' object is not callable
2025-03-19 12:38:18,936 - wireless_ap_test - ERROR - Failed to configure DTS: 'Logger' object is not callable
2025-03-19 12:38:18,937 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: 'Logger' object is not callable
2025-03-19 12:38:18,937 - wireless_ap_test - ERROR - Error in data_to_server GUI test: 'Logger' object is not callable
2025-03-19 12:38:18,937 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 12:38:18,937 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 12:38:18,946 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 12:38:18,946 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 12:38:18,946 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 12:38:18,986 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 12:38:19,987 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 12:38:19,987 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 12:38:19,987 - wireless_ap_test - INFO - Closing browser context
2025-03-19 12:38:19,996 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 12:38:19,996 - wireless_ap_test - INFO - Closing browser
2025-03-19 12:38:20,621 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 12:38:23,639 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 12:38:23,644 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 12:38:23,645 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 12:38:23,914 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 12:38:24,845 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 12:38:25,961 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 12:38:25,961 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:38:25,962 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:38:27,627 - wireless_ap_test - INFO - Filled username
2025-03-19 12:38:27,752 - wireless_ap_test - INFO - Filled password
2025-03-19 12:38:27,918 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:38:28,551 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:38:29,553 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 12:38:30,782 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 12:38:30,782 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 12:38:31,816 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 12:38:31,816 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 12:38:33,008 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 12:38:34,010 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 12:38:34,011 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 12:38:34,244 - wireless_ap_test - ERROR - Failed to configure miscellaneous settings: Page.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"tab-miscellaneous\"]")
  -     - locator resolved to <button role="tab" type="button" aria-selected="false" test-id="tab-miscellaneous" class="px-6 py-3 aria-selected:text-primary-300 aria-selected:font-semibold border-b-0 shrink-0 translate-y-px group/tab">…</button>
  -   - attempting click action
  -     - waiting for element to be visible, enabled and stable
  -     - element is visible, enabled and stable
  -     - scrolling into view if needed
  -     - done scrolling
  -     - performing click action

2025-03-19 12:38:34,244 - wireless_ap_test - ERROR - Failed to configure MQTT Broker: Page.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"tab-miscellaneous\"]")
  -     - locator resolved to <button role="tab" type="button" aria-selected="false" test-id="tab-miscellaneous" class="px-6 py-3 aria-selected:text-primary-300 aria-selected:font-semibold border-b-0 shrink-0 translate-y-px group/tab">…</button>
  -   - attempting click action
  -     - waiting for element to be visible, enabled and stable
  -     - element is visible, enabled and stable
  -     - scrolling into view if needed
  -     - done scrolling
  -     - performing click action

2025-03-19 12:38:34,244 - wireless_ap_test - ERROR - Failed to configure MQTT broker via GUI: Page.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"tab-miscellaneous\"]")
  -     - locator resolved to <button role="tab" type="button" aria-selected="false" test-id="tab-miscellaneous" class="px-6 py-3 aria-selected:text-primary-300 aria-selected:font-semibold border-b-0 shrink-0 translate-y-px group/tab">…</button>
  -   - attempting click action
  -     - waiting for element to be visible, enabled and stable
  -     - element is visible, enabled and stable
  -     - scrolling into view if needed
  -     - done scrolling
  -     - performing click action

2025-03-19 12:38:34,244 - wireless_ap_test - ERROR - Error in mqtt_broker GUI test: Page.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"tab-miscellaneous\"]")
  -     - locator resolved to <button role="tab" type="button" aria-selected="false" test-id="tab-miscellaneous" class="px-6 py-3 aria-selected:text-primary-300 aria-selected:font-semibold border-b-0 shrink-0 translate-y-px group/tab">…</button>
  -   - attempting click action
  -     - waiting for element to be visible, enabled and stable
  -     - element is visible, enabled and stable
  -     - scrolling into view if needed
  -     - done scrolling
  -     - performing click action

2025-03-19 12:38:34,244 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 12:38:34,244 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 12:38:34,247 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 12:38:35,248 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 12:38:35,248 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 12:38:35,249 - wireless_ap_test - INFO - Closing browser context
2025-03-19 12:38:35,259 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 12:38:35,259 - wireless_ap_test - INFO - Closing browser
2025-03-19 12:38:35,868 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 12:38:38,889 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 12:38:38,895 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 12:38:38,895 - wireless_ap_test - INFO - Test execution completed. Total: 3, Passed: 1, Failed: 2
2025-03-19 12:38:38,895 - wireless_ap_test - INFO - 
========================================
2025-03-19 12:38:38,895 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 12:38:38,895 - wireless_ap_test - INFO - ========================================
2025-03-19 12:38:38,895 - wireless_ap_test - INFO - 2. data_to_server_gui_data_to_server: 'Logger' object is not callable
2025-03-19 12:38:38,895 - wireless_ap_test - INFO - 3. mqtt_broker_gui_mqtt_broker: Page.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"tab-miscellaneous\"]")
  -     - locator resolved to <button role="tab" type="button" aria-selected="false" test-id="tab-miscellaneous" class="px-6 py-3 aria-selected:text-primary-300 aria-selected:font-semibold border-b-0 shrink-0 translate-y-px group/tab">…</button>
  -   - attempting click action
  -     - waiting for element to be visible, enabled and stable
  -     - element is visible, enabled and stable
  -     - scrolling into view if needed
  -     - done scrolling
  -     - performing click action

2025-03-19 12:38:38,895 - wireless_ap_test - INFO - ========================================
2025-03-19 12:40:21,823 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 12:40:21,823 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 12:40:21,823 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 12:40:21,824 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 12:40:21,824 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 12:40:21,824 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 12:40:21,824 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 12:40:22,124 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 12:40:23,034 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 12:40:24,138 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 12:40:24,138 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:40:24,139 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:40:25,709 - wireless_ap_test - INFO - Filled username
2025-03-19 12:40:25,834 - wireless_ap_test - INFO - Filled password
2025-03-19 12:40:26,002 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:40:26,661 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:40:27,665 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 12:40:28,879 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 12:40:28,879 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 12:40:29,848 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 12:40:29,848 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 12:40:31,039 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 12:40:32,043 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 12:40:32,043 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 12:40:33,212 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 12:40:33,233 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 12:40:33,253 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 12:40:33,275 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 12:40:33,420 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 12:40:33,599 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 12:40:35,806 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 12:40:35,806 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 12:40:35,823 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:40:35,823 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 12:40:35,839 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 12:40:36,010 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:40:37,021 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 12:40:37,021 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 12:40:37,038 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 12:40:37,218 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 12:40:37,230 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 12:40:37,231 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 12:40:37,231 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 12:40:37,762 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 12:40:37,762 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:40:37,762 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:40:38,890 - wireless_ap_test - INFO - Filled username
2025-03-19 12:40:39,019 - wireless_ap_test - INFO - Filled password
2025-03-19 12:40:39,188 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:40:39,829 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:40:40,830 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:40:42,047 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:40:42,047 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:40:43,258 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:40:43,258 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 12:40:45,267 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 12:40:45,278 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 12:40:45,694 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 12:40:49,041 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 12:40:49,041 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 12:40:49,851 - wireless_ap_test - INFO - Clicking add button
2025-03-19 12:40:51,013 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 12:40:51,516 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 12:40:51,516 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 12:40:52,892 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 12:40:52,892 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 12:40:52,892 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 12:40:55,272 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 12:40:55,272 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 12:40:55,272 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 12:40:55,272 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 12:40:56,131 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 12:40:56,634 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 12:41:00,413 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 12:41:02,571 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 12:41:02,571 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 12:41:04,970 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 12:41:06,694 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 12:41:08,913 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 12:41:08,913 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 12:41:13,055 - wireless_ap_test - INFO - clicked ca_dropdown
2025-03-19 12:41:13,055 - wireless_ap_test - INFO - located cafile-listbox
2025-03-19 12:41:13,055 - wireless_ap_test - INFO - ca_option: <Locator frame=<Frame name= url='https://192.168.1.1/login'> selector='[test-id="selectwrapper-mqtt_cafile-listbox"] >> internal:text="ca-file.cert.pem"i'>
2025-03-19 12:41:15,356 - wireless_ap_test - ERROR - Failed to configure server settings: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:41:15,357 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:41:15,357 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:41:15,357 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:41:15,358 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 12:41:15,358 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 12:41:15,360 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 12:41:15,360 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 12:41:15,360 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 12:41:15,365 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 12:41:16,367 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 12:41:16,367 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 12:41:16,367 - wireless_ap_test - INFO - Closing browser context
2025-03-19 12:41:16,377 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 12:41:16,378 - wireless_ap_test - INFO - Closing browser
2025-03-19 12:41:17,012 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 12:41:20,031 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 12:41:20,036 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 12:41:20,036 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 12:41:20,298 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 12:41:21,198 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 12:41:22,268 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 12:41:22,269 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:41:22,269 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:41:23,913 - wireless_ap_test - INFO - Filled username
2025-03-19 12:41:24,038 - wireless_ap_test - INFO - Filled password
2025-03-19 12:41:24,044 - wireless_ap_test - ERROR - Login failed: Page.click: Target page, context or browser has been closed
2025-03-19 12:41:24,045 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 12:41:24,047 - wireless_ap_test - ERROR - Failed to navigate to MQTT Broker page: Page.goto: Target page, context or browser has been closed
2025-03-19 12:41:24,047 - wireless_ap_test - ERROR - Failed to setup MQTT broker test: Page.goto: Target page, context or browser has been closed
2025-03-19 12:41:24,047 - wireless_ap_test - ERROR - Error in mqtt_broker GUI test: Page.goto: Target page, context or browser has been closed
2025-03-19 12:41:24,048 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 12:41:24,048 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 12:41:24,051 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 12:41:25,052 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 12:41:25,052 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 12:41:25,052 - wireless_ap_test - INFO - Closing browser context
2025-03-19 12:41:25,060 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 12:41:25,060 - wireless_ap_test - INFO - Closing browser
2025-03-19 12:44:28,665 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 12:44:28,665 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 12:44:28,665 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 12:44:28,666 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 12:44:28,666 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 12:44:28,666 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 12:44:28,666 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 12:44:28,968 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 12:44:29,925 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 12:44:31,038 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 12:44:31,040 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:44:31,040 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:44:32,677 - wireless_ap_test - INFO - Filled username
2025-03-19 12:44:32,803 - wireless_ap_test - INFO - Filled password
2025-03-19 12:44:32,966 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:44:33,600 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:44:34,603 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 12:44:35,813 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 12:44:35,814 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 12:44:36,814 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 12:44:36,814 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 12:44:38,002 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 12:44:39,005 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 12:44:39,005 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 12:44:40,179 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 12:44:40,212 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 12:44:40,235 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 12:44:40,256 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 12:44:40,401 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 12:44:40,541 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 12:44:42,741 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 12:44:42,741 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 12:44:42,760 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:44:42,760 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 12:44:42,773 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 12:44:42,967 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:44:43,978 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 12:44:43,978 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 12:44:43,994 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 12:44:44,174 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 12:44:44,186 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 12:44:44,186 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 12:44:44,186 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 12:44:44,638 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 12:44:44,639 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:44:44,639 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:44:45,776 - wireless_ap_test - INFO - Filled username
2025-03-19 12:44:45,905 - wireless_ap_test - INFO - Filled password
2025-03-19 12:44:46,063 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:44:46,715 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:44:47,717 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:44:48,922 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:44:48,922 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:44:50,154 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:44:50,154 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 12:44:52,161 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 12:44:52,176 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 12:44:52,602 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 12:44:55,955 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 12:44:55,955 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 12:44:56,765 - wireless_ap_test - INFO - Clicking add button
2025-03-19 12:44:57,925 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 12:44:58,426 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 12:44:58,427 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 12:44:59,805 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 12:44:59,805 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 12:44:59,805 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 12:45:02,178 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 12:45:02,178 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 12:45:02,178 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 12:45:02,178 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 12:45:03,038 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 12:45:03,540 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 12:45:07,319 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 12:45:09,476 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 12:45:09,476 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 12:45:11,873 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 12:45:13,600 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 12:45:15,814 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 12:45:15,814 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 12:45:19,959 - wireless_ap_test - INFO - clicked ca_dropdown
2025-03-19 12:45:19,960 - wireless_ap_test - INFO - located cafile-listbox
2025-03-19 12:45:19,960 - wireless_ap_test - INFO - ca_option: <Locator frame=<Frame name= url='https://192.168.1.1/login'> selector='[test-id="selectwrapper-mqtt_cafile-listbox"] >> internal:text="ca-file.cert.pem"i'>
2025-03-19 12:45:27,095 - wireless_ap_test - ERROR - Failed to configure server settings: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:45:27,095 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:45:27,095 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:45:27,095 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:45:27,095 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 12:45:27,095 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 12:45:27,096 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 12:45:27,096 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 12:45:27,097 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 12:45:27,102 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 12:45:28,103 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 12:45:28,103 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 12:45:28,104 - wireless_ap_test - INFO - Closing browser context
2025-03-19 12:45:28,114 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 12:45:28,114 - wireless_ap_test - INFO - Closing browser
2025-03-19 12:45:28,740 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 12:45:31,761 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 12:45:31,767 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 12:45:31,767 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 12:45:32,098 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 12:45:33,055 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 12:45:34,432 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 12:45:34,432 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:45:34,432 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:45:35,952 - wireless_ap_test - ERROR - Login failed: Page.goto: Target page, context or browser has been closed
Call log:
  - navigating to "https://192.168.1.1/login", waiting until "networkidle"

2025-03-19 12:45:35,953 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 12:45:35,954 - wireless_ap_test - ERROR - Failed to navigate to MQTT Broker page: Page.goto: Target page, context or browser has been closed
2025-03-19 12:45:35,954 - wireless_ap_test - ERROR - Failed to setup MQTT broker test: Page.goto: Target page, context or browser has been closed
2025-03-19 12:45:35,955 - wireless_ap_test - ERROR - Error in mqtt_broker GUI test: Page.goto: Target page, context or browser has been closed
2025-03-19 12:45:35,955 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 12:45:35,955 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 12:45:35,956 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 12:45:36,956 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 12:45:36,957 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 12:45:36,957 - wireless_ap_test - INFO - Closing browser context
2025-03-19 12:45:36,964 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 12:45:36,964 - wireless_ap_test - INFO - Closing browser
2025-03-19 12:45:37,625 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 12:49:37,213 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 12:49:37,214 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 12:49:37,214 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 12:49:37,214 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 12:49:37,214 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 12:49:37,215 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 12:49:37,215 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 12:49:37,511 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 12:49:38,432 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 12:49:39,670 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 12:49:39,672 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:49:39,672 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:49:41,260 - wireless_ap_test - INFO - Filled username
2025-03-19 12:49:41,387 - wireless_ap_test - INFO - Filled password
2025-03-19 12:49:41,550 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:49:42,198 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:49:43,201 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 12:49:44,416 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 12:49:44,416 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 12:49:45,410 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 12:49:45,410 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 12:49:46,606 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 12:49:47,608 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 12:49:47,608 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 12:49:48,795 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 12:49:48,816 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 12:49:48,840 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 12:49:48,863 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 12:49:49,006 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 12:49:49,152 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 12:49:51,355 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 12:49:51,355 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 12:49:51,372 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:49:51,372 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 12:49:51,384 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 12:49:51,557 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:49:52,565 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 12:49:52,565 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 12:49:52,580 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 12:49:52,758 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 12:49:52,770 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 12:49:52,770 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 12:49:52,770 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 12:49:53,256 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 12:49:53,256 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:49:53,256 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:49:54,397 - wireless_ap_test - INFO - Filled username
2025-03-19 12:49:54,531 - wireless_ap_test - INFO - Filled password
2025-03-19 12:49:54,697 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:49:55,328 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:49:56,330 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:49:57,540 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:49:57,540 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:49:58,771 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:49:58,771 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 12:50:00,779 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 12:50:00,791 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 12:50:01,265 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 12:50:04,621 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 12:50:04,621 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 12:50:05,437 - wireless_ap_test - INFO - Clicking add button
2025-03-19 12:50:06,596 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 12:50:07,098 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 12:50:07,098 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 12:50:08,491 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 12:50:08,491 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 12:50:08,491 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 12:50:10,876 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 12:50:10,876 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 12:50:10,876 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 12:50:10,876 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 12:50:11,752 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 12:50:12,254 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 12:50:16,067 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 12:50:18,223 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 12:50:18,223 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 12:50:20,621 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 12:50:22,371 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 12:50:24,596 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 12:50:24,596 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 12:50:35,948 - wireless_ap_test - ERROR - Failed to configure server settings: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile\"]")
  -     - waiting for" https://192.168.1.1/" navigation to finish...
  -     - navigated to "https://192.168.1.1/"

2025-03-19 12:50:35,949 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile\"]")
  -     - waiting for" https://192.168.1.1/" navigation to finish...
  -     - navigated to "https://192.168.1.1/"

2025-03-19 12:50:35,949 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile\"]")
  -     - waiting for" https://192.168.1.1/" navigation to finish...
  -     - navigated to "https://192.168.1.1/"

2025-03-19 12:50:35,949 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile\"]")
  -     - waiting for" https://192.168.1.1/" navigation to finish...
  -     - navigated to "https://192.168.1.1/"

2025-03-19 12:50:35,949 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 12:50:35,949 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 12:50:35,951 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 12:50:35,952 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 12:50:35,952 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 12:50:35,958 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 12:51:57,060 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 12:51:57,060 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 12:51:57,060 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 12:51:57,061 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 12:51:57,061 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 12:51:57,061 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 12:51:57,061 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 12:51:57,370 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 12:51:58,264 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 12:51:59,435 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 12:51:59,435 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:51:59,435 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:52:01,013 - wireless_ap_test - INFO - Filled username
2025-03-19 12:52:01,145 - wireless_ap_test - INFO - Filled password
2025-03-19 12:52:01,304 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:52:01,951 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:52:02,954 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 12:52:04,156 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 12:52:04,156 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 12:52:05,124 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 12:52:05,124 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 12:52:06,307 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 12:52:07,309 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 12:52:07,309 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 12:52:08,480 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 12:52:08,516 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 12:52:08,545 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 12:52:08,579 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 12:52:08,731 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 12:52:08,875 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 12:52:11,070 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 12:52:11,070 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 12:52:11,085 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:52:11,085 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 12:52:11,097 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 12:52:11,270 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:52:12,279 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 12:52:12,280 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 12:52:12,294 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 12:52:12,473 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 12:52:12,505 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 12:52:12,506 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 12:52:12,506 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 12:52:12,971 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 12:52:12,971 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:52:12,971 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:52:14,094 - wireless_ap_test - INFO - Filled username
2025-03-19 12:52:14,223 - wireless_ap_test - INFO - Filled password
2025-03-19 12:52:14,393 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:52:15,035 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:52:16,038 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:52:17,255 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:52:17,256 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:52:18,486 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:52:18,486 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 12:52:20,494 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 12:52:20,505 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 12:52:20,902 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 12:52:24,248 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 12:52:24,248 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 12:52:25,054 - wireless_ap_test - INFO - Clicking add button
2025-03-19 12:52:26,214 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 12:52:26,717 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 12:52:26,717 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 12:52:28,109 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 12:52:28,109 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 12:52:28,109 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 12:52:30,504 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 12:52:30,504 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 12:52:30,504 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 12:52:30,504 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 12:52:31,362 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 12:52:31,865 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 12:52:35,658 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 12:52:37,814 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 12:52:37,814 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 12:52:40,203 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 12:52:41,927 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 12:52:44,146 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 12:52:44,146 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 12:52:48,307 - wireless_ap_test - INFO - clicked ca_dropdown
2025-03-19 12:52:48,308 - wireless_ap_test - INFO - located cafile-listbox
2025-03-19 12:52:48,308 - wireless_ap_test - INFO - ca_option: <Locator frame=<Frame name= url='https://192.168.1.1/login'> selector='[test-id="selectwrapper-mqtt_cafile-listbox"] >> internal:text="ca-file.cert.pem"i'>
2025-03-19 12:52:51,464 - wireless_ap_test - ERROR - Failed to configure server settings: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:52:51,464 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:52:51,465 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:52:51,465 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:52:51,465 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 12:52:51,465 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 12:52:51,465 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 12:52:51,465 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 12:52:51,465 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 12:52:51,471 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 12:52:52,472 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 12:52:52,473 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 12:52:52,473 - wireless_ap_test - INFO - Closing browser context
2025-03-19 12:52:52,480 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 12:52:52,480 - wireless_ap_test - INFO - Closing browser
2025-03-19 12:52:53,141 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 12:53:17,075 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 12:53:17,076 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 12:53:17,076 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 12:53:17,076 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 12:53:17,077 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 12:53:17,077 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 12:53:17,077 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 12:53:17,380 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 12:53:18,281 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 12:53:19,395 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 12:53:19,395 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:53:19,395 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:53:20,990 - wireless_ap_test - INFO - Filled username
2025-03-19 12:53:21,121 - wireless_ap_test - INFO - Filled password
2025-03-19 12:53:21,279 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:53:21,954 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:53:22,957 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 12:53:24,179 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 12:53:24,179 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 12:53:25,161 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 12:53:25,161 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 12:53:26,352 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 12:53:27,355 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 12:53:27,355 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 12:53:28,527 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 12:53:28,551 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 12:53:28,574 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 12:53:28,595 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 12:53:28,783 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 12:53:28,924 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 12:53:31,111 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 12:53:31,111 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 12:53:31,128 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:53:31,128 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 12:53:31,143 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 12:53:31,312 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 12:53:32,327 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 12:53:32,327 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 12:53:32,347 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 12:53:32,535 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 12:53:32,549 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 12:53:32,549 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 12:53:32,549 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 12:53:32,992 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 12:53:32,992 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 12:53:32,992 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 12:53:34,113 - wireless_ap_test - INFO - Filled username
2025-03-19 12:53:34,247 - wireless_ap_test - INFO - Filled password
2025-03-19 12:53:34,406 - wireless_ap_test - INFO - Clicked login button
2025-03-19 12:53:35,030 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 12:53:36,033 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:53:37,238 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:53:37,238 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 12:53:38,547 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 12:53:38,548 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 12:53:40,555 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 12:53:40,566 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 12:53:41,040 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 12:53:44,400 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 12:53:44,400 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 12:53:45,214 - wireless_ap_test - INFO - Clicking add button
2025-03-19 12:53:46,378 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 12:53:46,879 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 12:53:46,879 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 12:53:48,265 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 12:53:48,265 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 12:53:48,265 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 12:53:50,643 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 12:53:50,644 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 12:53:50,644 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 12:53:50,644 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 12:53:51,504 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 12:53:52,006 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 12:53:55,819 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 12:53:57,979 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 12:53:57,979 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 12:54:00,375 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 12:54:02,109 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 12:54:04,337 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 12:54:04,338 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 12:54:08,548 - wireless_ap_test - INFO - clicked ca_dropdown
2025-03-19 12:54:08,548 - wireless_ap_test - INFO - located cafile-listbox
2025-03-19 12:54:08,548 - wireless_ap_test - INFO - ca_option: <Locator frame=<Frame name= url='https://192.168.1.1/login'> selector='[test-id="selectwrapper-mqtt_cafile-listbox"] >> internal:text="ca-file.cert.pem"i'>
2025-03-19 12:54:12,589 - wireless_ap_test - ERROR - Failed to configure server settings: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:54:12,589 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:54:12,589 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:54:12,589 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectwrapper-mqtt_cafile-listbox\"]").get_by_text("ca-file.cert.pem")

2025-03-19 12:54:12,589 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 12:54:12,589 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 12:54:12,589 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 12:54:12,590 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 12:54:12,590 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 12:54:12,590 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 12:54:13,591 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 12:54:13,591 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 12:54:13,591 - wireless_ap_test - INFO - Closing browser context
2025-03-19 12:54:13,604 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 12:54:13,604 - wireless_ap_test - INFO - Closing browser
2025-03-19 12:54:14,328 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:01:43,151 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:01:43,151 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:01:43,151 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:01:43,152 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:01:43,152 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:01:43,152 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:01:43,152 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:01:43,471 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:01:44,358 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:01:45,504 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:01:45,504 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:01:45,504 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:01:47,088 - wireless_ap_test - INFO - Filled username
2025-03-19 13:01:47,214 - wireless_ap_test - INFO - Filled password
2025-03-19 13:01:47,376 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:01:48,026 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:01:49,029 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:01:50,243 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:01:50,244 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:01:51,227 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:01:51,227 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:01:52,441 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:01:53,447 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:01:53,447 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:01:54,678 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:01:54,713 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:01:54,736 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:01:54,762 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:01:54,920 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:01:55,101 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:01:57,352 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:01:57,352 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 13:01:57,380 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:01:57,380 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:01:57,398 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:01:57,574 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:01:58,586 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:01:58,586 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:01:58,600 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:01:58,797 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:01:58,840 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:01:58,841 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 13:01:58,841 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:01:59,314 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:01:59,314 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:01:59,315 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:02:00,462 - wireless_ap_test - INFO - Filled username
2025-03-19 13:02:00,591 - wireless_ap_test - INFO - Filled password
2025-03-19 13:02:00,758 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:02:01,394 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:02:02,398 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:02:03,719 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:02:03,719 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:02:04,974 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:02:04,974 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:02:06,982 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:02:06,995 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:02:07,404 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:02:10,751 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 13:02:10,751 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:02:11,572 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:02:12,735 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:02:13,238 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:02:13,239 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:02:14,640 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:02:14,640 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 13:02:14,640 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 13:02:17,023 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 13:02:17,023 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 13:02:17,023 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 13:02:17,023 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:02:17,867 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:02:18,369 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:02:22,133 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:02:24,293 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:02:24,293 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:02:26,688 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:02:28,456 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:02:30,684 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:02:30,684 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:02:34,893 - wireless_ap_test - INFO - clicked ca_dropdown
2025-03-19 13:02:34,893 - wireless_ap_test - INFO - located cafile-listbox
2025-03-19 13:02:34,893 - wireless_ap_test - INFO - ca_option: <Locator frame=<Frame name= url='https://192.168.1.1/login'> selector='[test-id="selectoption-/etc/certificates/ca-file.cert.pem"]'>
2025-03-19 13:02:45,242 - wireless_ap_test - ERROR - Failed to configure server settings: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectoption-/etc/certificates/ca-file.cert.pem\"]")

2025-03-19 13:02:45,242 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectoption-/etc/certificates/ca-file.cert.pem\"]")

2025-03-19 13:02:45,242 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectoption-/etc/certificates/ca-file.cert.pem\"]")

2025-03-19 13:02:45,242 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectoption-/etc/certificates/ca-file.cert.pem\"]")

2025-03-19 13:02:45,242 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 13:02:45,242 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 13:02:45,242 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 13:02:45,242 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 13:02:45,242 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 13:02:45,242 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 13:02:46,243 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:02:46,244 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:02:46,244 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:02:46,265 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:02:46,265 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:02:46,912 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:02:49,930 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:02:49,936 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 13:02:49,936 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:02:50,203 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:02:51,147 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:02:56,002 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:02:56,002 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:02:56,002 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:02:56,003 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:02:56,003 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:02:56,003 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:02:56,003 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:02:56,316 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:02:57,229 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:02:58,363 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:02:58,363 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:02:58,364 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:03:00,000 - wireless_ap_test - INFO - Filled username
2025-03-19 13:03:00,130 - wireless_ap_test - INFO - Filled password
2025-03-19 13:03:00,288 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:03:00,931 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:03:01,934 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:03:03,167 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:03:03,167 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:03:04,159 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:03:04,159 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:03:05,347 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:03:06,349 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:03:06,349 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:03:07,517 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:03:07,547 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:03:07,570 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:03:07,594 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:03:07,734 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:03:07,872 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:03:10,068 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:03:10,068 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 13:03:10,086 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:03:10,086 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:03:10,100 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:03:10,263 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:03:11,280 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:03:11,281 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:03:11,304 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:03:11,495 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:03:11,510 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:03:11,510 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 13:03:11,510 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:03:11,959 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:03:11,959 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:03:11,960 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:03:13,103 - wireless_ap_test - INFO - Filled username
2025-03-19 13:03:13,235 - wireless_ap_test - INFO - Filled password
2025-03-19 13:03:13,392 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:03:14,039 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:03:15,040 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:03:16,329 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:03:16,329 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:03:17,554 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:03:17,555 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:03:19,561 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:03:19,570 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:03:19,983 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:03:23,340 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 13:03:23,340 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:03:24,164 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:03:25,332 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:03:25,833 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:03:25,833 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:03:27,217 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:03:27,217 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 13:03:27,217 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 13:03:29,609 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 13:03:29,609 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 13:03:29,609 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 13:03:29,609 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:03:30,470 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:03:30,972 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:03:34,785 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:03:36,945 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:03:36,945 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:03:39,338 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:03:41,079 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:03:43,295 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:03:43,295 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:03:47,487 - wireless_ap_test - INFO - clicked ca_dropdown
2025-03-19 13:03:47,487 - wireless_ap_test - INFO - located cafile-listbox
2025-03-19 13:03:47,488 - wireless_ap_test - INFO - ca_option: <Locator frame=<Frame name= url='https://192.168.1.1/login'> selector='[test-id="selectoption-/etc/certificates/ca-file.cert.pem"]'>
2025-03-19 13:03:51,439 - wireless_ap_test - ERROR - Failed to configure server settings: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectoption-/etc/certificates/ca-file.cert.pem\"]")

2025-03-19 13:03:51,439 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectoption-/etc/certificates/ca-file.cert.pem\"]")

2025-03-19 13:03:51,439 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectoption-/etc/certificates/ca-file.cert.pem\"]")

2025-03-19 13:03:51,439 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("[test-id=\"selectoption-/etc/certificates/ca-file.cert.pem\"]")

2025-03-19 13:03:51,440 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 13:03:51,440 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 13:03:51,440 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 13:03:51,440 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 13:03:51,441 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 13:03:51,441 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 13:03:52,442 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:03:52,442 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:03:52,443 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:03:52,454 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:03:52,454 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:03:53,414 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:04:49,169 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:04:49,169 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:04:49,170 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:04:49,170 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:04:49,170 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:04:49,170 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:04:49,170 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:04:49,512 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:04:50,867 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:04:52,569 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:04:52,569 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:04:52,569 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:04:54,370 - wireless_ap_test - INFO - Filled username
2025-03-19 13:04:54,500 - wireless_ap_test - INFO - Filled password
2025-03-19 13:04:54,680 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:04:55,340 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:04:56,347 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:04:57,594 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:04:57,594 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:04:58,709 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:04:58,710 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:04:59,914 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:05:00,916 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:05:00,916 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:05:02,100 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:05:02,130 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:05:02,155 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:05:02,184 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:05:02,331 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:05:02,478 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:05:04,693 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:05:04,694 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/mqtt/broker
2025-03-19 13:05:04,712 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:05:04,712 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:05:04,731 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:05:04,907 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:05:05,921 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:05:05,921 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:05:05,939 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:05:06,125 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:05:06,146 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:05:06,146 - wireless_ap_test - INFO - Successfully logged out after MQTT test
2025-03-19 13:05:06,147 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:05:06,634 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:05:06,634 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:05:06,634 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:05:07,812 - wireless_ap_test - INFO - Filled username
2025-03-19 13:05:07,944 - wireless_ap_test - INFO - Filled password
2025-03-19 13:05:08,108 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:05:08,747 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:05:09,751 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:05:11,009 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:05:11,009 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:05:12,276 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:05:12,277 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:05:14,286 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 13:05:14,286 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 13:05:14,286 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:05:15,355 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:05:16,734 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:05:17,236 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:05:17,237 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:05:18,756 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:05:18,756 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 13:05:18,756 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 13:05:21,328 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 13:05:21,328 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 13:05:21,328 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 13:05:21,328 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:05:26,046 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:05:26,550 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:05:30,677 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:05:32,891 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:05:32,891 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:05:37,418 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:06:02,477 - wireless_ap_test - ERROR - Failed to configure server settings: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("#section-server-configuration [test-id=\"input-mqtt_qos\"]")
  -     - locator resolved to <div data-v-f4396a4d="" test-id="input-mqtt_qos" class="overflow-x-hidden text-ellipsis leading-7">0</div>
  -   - attempting click action
  -     - waiting for element to be visible, enabled and stable
  -   - element was detached from the DOM, retrying
  -     - waiting for" https://192.168.1.1/" navigation to finish...
  -     - navigated to "https://192.168.1.1/"

2025-03-19 13:06:02,477 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("#section-server-configuration [test-id=\"input-mqtt_qos\"]")
  -     - locator resolved to <div data-v-f4396a4d="" test-id="input-mqtt_qos" class="overflow-x-hidden text-ellipsis leading-7">0</div>
  -   - attempting click action
  -     - waiting for element to be visible, enabled and stable
  -   - element was detached from the DOM, retrying
  -     - waiting for" https://192.168.1.1/" navigation to finish...
  -     - navigated to "https://192.168.1.1/"

2025-03-19 13:06:02,477 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("#section-server-configuration [test-id=\"input-mqtt_qos\"]")
  -     - locator resolved to <div data-v-f4396a4d="" test-id="input-mqtt_qos" class="overflow-x-hidden text-ellipsis leading-7">0</div>
  -   - attempting click action
  -     - waiting for element to be visible, enabled and stable
  -   - element was detached from the DOM, retrying
  -     - waiting for" https://192.168.1.1/" navigation to finish...
  -     - navigated to "https://192.168.1.1/"

2025-03-19 13:06:02,477 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.click: Target page, context or browser has been closed
Call log:
  - waiting for locator("#section-server-configuration [test-id=\"input-mqtt_qos\"]")
  -     - locator resolved to <div data-v-f4396a4d="" test-id="input-mqtt_qos" class="overflow-x-hidden text-ellipsis leading-7">0</div>
  -   - attempting click action
  -     - waiting for element to be visible, enabled and stable
  -   - element was detached from the DOM, retrying
  -     - waiting for" https://192.168.1.1/" navigation to finish...
  -     - navigated to "https://192.168.1.1/"

2025-03-19 13:06:02,477 - wireless_ap_test - INFO - Skipping DTS test cleanup to avoid errors with already removed clients
2025-03-19 13:06:02,477 - wireless_ap_test - INFO - Closing data_to_server page
2025-03-19 13:06:02,478 - wireless_ap_test - INFO - Closed data_to_server page successfully
2025-03-19 13:06:02,478 - wireless_ap_test - INFO - Skipping MQTT test cleanup to avoid errors with already removed clients
2025-03-19 13:06:02,478 - wireless_ap_test - INFO - Closing mqtt_broker page
2025-03-19 13:06:02,478 - wireless_ap_test - INFO - Closed mqtt_broker page successfully
2025-03-19 13:06:03,478 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:06:03,479 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:06:03,479 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:06:03,492 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:06:03,492 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:06:04,500 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:06:07,529 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:06:07,536 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 13:06:07,536 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:06:07,971 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:06:09,374 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:06:10,867 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:06:10,868 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:06:10,868 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:08:40,979 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:08:40,979 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:08:40,979 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:08:40,979 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:08:40,980 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:08:40,980 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:08:40,980 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:08:41,318 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:08:42,283 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:08:43,641 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:08:43,647 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:08:43,647 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:08:43,647 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:08:45,238 - wireless_ap_test - INFO - Filled username
2025-03-19 13:08:45,363 - wireless_ap_test - INFO - Filled password
2025-03-19 13:08:45,530 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:08:46,195 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:08:47,198 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:08:48,432 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:08:48,432 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:08:49,406 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:08:49,407 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:08:50,595 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:08:51,597 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:08:51,597 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:08:52,775 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:08:52,797 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:08:52,818 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:08:52,846 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:08:52,988 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:08:53,130 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:08:55,332 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:08:55,333 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:08:55,333 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:08:55,333 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:08:55,334 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:09:05,435 - wireless_ap_test - ERROR - Login failed: Page.goto: Timeout 10000ms exceeded.
Call log:
  - navigating to "https://192.168.1.1/login", waiting until "networkidle"

2025-03-19 13:09:05,435 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:09:06,653 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:09:06,654 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:09:07,892 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:09:07,893 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:09:09,900 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:09:09,911 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:09:10,325 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:09:13,651 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 13:09:13,651 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:09:14,475 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:09:15,643 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:09:16,144 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:09:16,144 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:09:17,528 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:09:17,528 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 13:09:17,528 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 13:09:19,917 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 13:09:19,917 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 13:09:19,918 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 13:09:19,918 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:09:20,776 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:09:21,278 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:09:25,088 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:09:27,244 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:09:27,244 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:09:29,640 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:09:31,372 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:09:33,598 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:09:33,598 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:09:37,742 - wireless_ap_test - INFO - clicked ca_dropdown
2025-03-19 13:09:37,742 - wireless_ap_test - INFO - located cafile-listbox
2025-03-19 13:09:37,742 - wireless_ap_test - INFO - ca_option: <Locator frame=<Frame name= url='https://192.168.1.1/services/data_sender#id=1'> selector='[test-id="selectoption-/etc/certificates/ca-file.cert.pem"]'>
2025-03-19 13:09:41,149 - wireless_ap_test - INFO - Saving configuration
2025-03-19 13:09:46,413 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 13:09:46,413 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 13:09:46,413 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 13:09:47,301 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:09:47,301 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:09:47,301 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:09:47,301 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
30836 root      1920 S    ash -c ps | grep mosquitto
30838 root      1920 R    grep mosquitto
2025-03-19 13:09:47,322 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:09:47,323 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:09:47,323 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:09:47,410 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:09:47,495 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:09:47,495 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:09:47,495 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:09:47,495 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:09:47,495 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:09:47,495 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:09:47,495 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:09:57,585 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:09:57,585 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:09:57,585 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:09:57,585 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:09:57,585 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:09:57,585 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:09:57,586 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 13:09:57,586 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 13:09:57,586 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 13:09:57,599 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:09:57,599 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:09:57,613 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:09:57,768 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:09:58,773 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:09:58,773 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:09:58,783 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:09:58,933 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:09:58,942 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:09:58,943 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 13:09:58,943 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 13:09:58,950 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 13:09:59,950 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:09:59,951 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:09:59,951 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:09:59,960 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:09:59,960 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:10:00,489 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:10:03,508 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:10:03,514 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 13:10:03,514 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:10:03,809 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:10:04,733 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:10:05,894 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:10:05,895 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:10:05,895 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:10:05,896 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:10:07,537 - wireless_ap_test - INFO - Filled username
2025-03-19 13:10:07,662 - wireless_ap_test - INFO - Filled password
2025-03-19 13:10:07,827 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:10:08,515 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:10:09,517 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:10:10,750 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:10:10,751 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:10:11,798 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:10:11,798 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:10:12,979 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:10:13,981 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:10:13,982 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:10:15,193 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:10:15,217 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:10:15,240 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:10:15,265 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:10:15,408 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:10:15,546 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:10:17,746 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:10:17,746 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:10:17,746 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:10:17,746 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:10:17,746 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:10:27,848 - wireless_ap_test - ERROR - Login failed: Page.goto: Timeout 10000ms exceeded.
Call log:
  - navigating to "https://192.168.1.1/login", waiting until "networkidle"

2025-03-19 13:10:27,848 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:10:29,028 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:10:29,028 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:10:30,227 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:10:30,227 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:10:32,233 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:10:32,244 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:10:32,658 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:10:35,982 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 13:10:35,982 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:10:36,802 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:10:37,968 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:10:38,470 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:10:38,470 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:10:39,846 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:10:39,846 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 13:10:39,847 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 13:10:42,447 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 13:10:42,447 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 13:10:42,447 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 13:10:47,257 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 13:10:47,257 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 13:10:47,257 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:10:48,190 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:10:48,693 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 13:10:51,552 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:10:53,728 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:10:53,728 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:10:56,146 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:10:57,887 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:11:00,120 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:11:00,120 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:11:04,269 - wireless_ap_test - INFO - clicked ca_dropdown
2025-03-19 13:11:04,269 - wireless_ap_test - INFO - located cafile-listbox
2025-03-19 13:11:04,269 - wireless_ap_test - INFO - ca_option: <Locator frame=<Frame name= url='https://192.168.1.1/services/data_sender#id=1'> selector='[test-id="selectoption-/etc/certificates/ca-file.cert.pem"]'>
2025-03-19 13:11:07,658 - wireless_ap_test - INFO - Saving configuration
2025-03-19 13:11:12,897 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 13:11:12,897 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 13:11:12,897 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 13:11:13,753 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:11:13,753 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:11:13,753 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:11:13,754 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
31297 root      1920 S    ash -c ps | grep mosquitto
31299 root      1920 R    grep mosquitto
2025-03-19 13:11:13,776 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:11:13,776 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:11:13,776 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:11:13,869 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:11:13,959 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:11:13,959 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:11:13,959 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:11:13,959 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:11:13,959 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:11:13,959 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:11:13,959 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:11:24,002 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:11:24,002 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:11:24,002 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:11:24,002 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:11:24,002 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:11:24,002 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:11:24,003 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 13:11:24,003 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 13:11:24,003 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 13:11:24,024 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:11:24,025 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:11:24,044 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:11:24,244 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:11:25,249 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:11:25,249 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:11:25,260 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:11:25,411 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:11:25,420 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:11:25,420 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 13:11:25,420 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 13:11:25,427 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 13:11:26,428 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:11:26,429 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:11:26,429 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:11:26,438 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:11:26,438 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:11:26,978 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:11:29,996 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:11:30,002 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 13:11:30,003 - wireless_ap_test - INFO - Test execution completed. Total: 6, Passed: 6, Failed: 0
2025-03-19 13:14:24,397 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type='gui', config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:14:24,398 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:14:24,398 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:14:24,398 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:14:24,399 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:14:24,399 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:14:24,399 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:14:24,703 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:14:25,590 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:14:26,740 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:14:26,744 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:14:26,745 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:14:26,745 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:14:28,418 - wireless_ap_test - INFO - Filled username
2025-03-19 13:14:28,542 - wireless_ap_test - INFO - Filled password
2025-03-19 13:14:28,713 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:14:29,384 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:14:30,388 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:14:31,614 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:14:31,615 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:14:32,628 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:14:32,628 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:14:33,807 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:14:34,809 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:14:34,809 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:14:36,005 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:14:36,028 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:14:36,051 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:14:36,077 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:14:36,223 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:14:36,365 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:14:38,583 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:14:38,583 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:14:38,587 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:14:38,588 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:14:39,964 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:14:39,964 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:14:41,201 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:14:41,201 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:14:43,231 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:14:43,322 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:14:43,900 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:14:47,248 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 13:14:47,248 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:14:48,101 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:14:49,277 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:14:49,778 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:14:49,778 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:14:51,151 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:14:51,151 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 13:14:51,151 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 13:14:53,530 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 13:14:53,531 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 13:14:53,531 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 13:14:53,531 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:14:54,399 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:14:54,901 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:14:58,714 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:15:00,874 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:15:00,874 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:15:03,254 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:15:05,134 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:16:11,638 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:16:11,638 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:16:11,638 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:16:11,639 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:16:11,639 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:16:11,639 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:16:11,639 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:16:11,937 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:16:12,837 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:16:13,980 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:16:13,986 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:16:13,987 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:16:13,987 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:16:15,878 - wireless_ap_test - INFO - Filled username
2025-03-19 13:16:16,004 - wireless_ap_test - INFO - Filled password
2025-03-19 13:16:16,164 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:16:16,812 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:16:17,814 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:16:19,032 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:16:19,032 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:16:20,068 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:16:20,068 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:16:21,289 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:16:22,291 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:16:22,291 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:16:23,467 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:16:23,485 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:16:23,503 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:16:23,522 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:16:23,661 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:16:23,794 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:16:25,982 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:16:25,982 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:16:25,991 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:16:25,991 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:16:27,376 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:16:27,376 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:16:28,655 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:16:28,655 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:16:30,665 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:16:30,678 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:16:31,098 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:16:34,446 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 13:16:34,446 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:16:35,255 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:16:36,421 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:16:36,924 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:16:36,924 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:16:38,295 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:16:38,295 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 13:16:38,295 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 13:16:40,679 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 13:16:40,679 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 13:16:40,679 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 13:16:40,679 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:16:41,530 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:16:42,030 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:16:45,875 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:16:48,033 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:16:48,033 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:16:50,429 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:16:52,172 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:16:54,414 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:16:54,414 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:17:01,955 - wireless_ap_test - INFO - Saving configuration
2025-03-19 13:17:07,218 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 13:17:07,218 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 13:17:07,218 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 13:17:08,091 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:17:08,091 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:17:08,091 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:17:08,091 - wireless_ap_test - INFO - MQTT Process Check: 13372 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
32092 root      1920 S    ash -c ps | grep mosquitto
32094 root      1920 R    grep mosquitto
2025-03-19 13:17:08,113 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:17:08,113 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:17:08,113 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:17:08,198 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:17:08,280 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:17:08,280 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:17:08,280 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:17:08,280 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:17:08,280 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:17:08,280 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:17:08,280 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:17:18,332 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:17:18,332 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:17:18,332 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:17:18,332 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:17:18,332 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:17:18,332 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:17:18,333 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 13:17:18,333 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 13:17:18,333 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 13:17:18,358 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:17:18,359 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:17:18,373 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:17:18,552 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:17:19,557 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:17:19,558 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:17:19,568 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:17:19,720 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:17:19,730 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:17:19,731 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 13:17:19,731 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 13:17:19,738 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 13:17:20,740 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:17:20,740 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:17:20,740 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:17:20,748 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:17:20,748 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:17:21,258 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:17:24,275 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:17:24,281 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 13:17:24,281 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 13:17:24,281 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 13:17:24,281 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:17:24,281 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:17:24,281 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 13:17:24,282 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 13:17:24,282 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 13:17:24,282 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:17:24,282 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:17:24,282 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 13:17:24,282 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 13:17:25,121 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 13:17:25,266 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 13:17:25,355 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 13:17:25,643 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - File name: dts
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:17:25,644 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 13:17:25,645 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 13:17:26,507 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 13:17:26,508 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 13:17:26,508 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 13:17:26,661 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 13:17:26,661 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 13:17:26,728 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 13:17:26,728 - wireless_ap_test - INFO - Configuring data collection with type: Base
2025-03-19 13:17:26,728 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 13:17:26,773 - wireless_ap_test - INFO -  VALUES: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:17:26,907 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 13:17:26,982 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 13:17:26,982 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 13:17:26,982 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 13:17:27,313 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 13:17:27,313 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 13:17:29,680 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 13:17:29,680 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 13:17:29,763 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:17:29,763 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 13:17:29,764 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 13:17:29,764 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 13:17:30,694 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:17:30,694 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:17:30,694 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:17:30,694 - wireless_ap_test - INFO - MQTT Process Check: 32170 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
32308 root      1920 S    ash -c ps | grep mosquitto
32310 root      1920 R    grep mosquitto
2025-03-19 13:17:30,717 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:17:30,718 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:17:30,718 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:17:30,804 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:17:30,888 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:17:30,888 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:17:30,888 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:17:30,889 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:17:30,889 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:17:30,889 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:17:30,889 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:17:40,930 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:17:40,930 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:17:40,930 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:17:40,930 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:17:40,930 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:17:40,930 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:17:40,931 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 13:17:40,931 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 13:17:41,668 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 13:17:41,668 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 13:17:41,692 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 13:17:41,692 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 13:17:41,692 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 13:17:41,692 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 13:17:41,739 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 13:17:41,787 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 13:17:41,831 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 13:17:41,876 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 13:17:42,134 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 13:17:42,134 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 13:17:42,134 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 13:17:42,134 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 13:17:42,135 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:17:42,136 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 13:17:42,136 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 13:17:42,136 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 13:17:42,136 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:17:42,400 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:17:42,400 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 13:17:42,400 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 13:17:42,544 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 13:17:42,544 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 13:17:42,647 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - File name: dts
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:17:42,648 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 13:17:42,649 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 13:17:42,649 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 13:17:42,649 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:17:42,892 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:17:42,892 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 13:17:42,892 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 13:17:42,892 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 13:17:42,892 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 13:17:42,892 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 13:17:42,893 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/documents/ca1-file.crt", "client_certificate": "/home/studentas/documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 13:17:42,893 - wireless_ap_test - INFO - Data type from basic config: Base
2025-03-19 13:17:42,893 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 13:17:42,893 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "Base", "type_settings": {}, "format_type": "JSON", "values": ["time", "local_time", "fw", "name", "id"]}
2025-03-19 13:17:43,067 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 13:17:43,067 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 13:17:43,067 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 13:17:43,168 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'Base', 'type_settings': {}, 'format_type': 'JSON', 'values': ['time', 'local_time', 'fw', 'name', 'id']}
2025-03-19 13:17:43,168 - wireless_ap_test - INFO - Values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:17:43,168 - wireless_ap_test - INFO - Type settings: {}
2025-03-19 13:17:43,168 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 13:17:43,168 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "members": ["time", "local_time", "fw", "name", "id"], "format": "json"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_certificates_from_device": "1", "mqtt_ca_file": "ca-file.cert.pem", "mqtt_cert_file": "ca-certificates.crt", "mqtt_key_file": "ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 13:17:43,391 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "id": "3", "format": "json", "members": ["time", "local_time", "fw", "name", "id"]}}, {"success": false, "errors": [{"source": "mqtt_key_file", "code": 103, "error": "Invalid option", "section": "2"}, {"source": "mqtt_ca_file", "code": 103, "error": "Invalid option", "section": "2"}, {"source": "mqtt_cert_file", "code": 103, "error": "Invalid option", "section": "2"}, {"source": "mqtt_certificates_from_device", "code": 103, "error": "Invalid option", "section": "2"}]}, {"success": false, "errors": [{"source": "plugin", "code": 103, "error": "Data sender output (id = 2) is missing required option: plugin", "section": "2"}]}]}
2025-03-19 13:17:43,391 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 13:17:43,572 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 13:17:43,573 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 13:17:43,573 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:17:43,573 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 13:17:43,573 - wireless_ap_test - INFO - Running validation for api tests with mqtt and dts
2025-03-19 13:17:44,490 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:17:44,490 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:17:44,490 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:17:44,490 - wireless_ap_test - INFO - MQTT Process Check: 32443 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
32513 root      1920 S    ash -c ps | grep mosquitto
32516 root      1920 S    grep mosquitto
2025-03-19 13:17:44,513 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:17:44,513 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:17:44,513 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:17:44,599 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 13:17:44,681 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:17:44,681 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 13:17:44,681 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 13:17:44,681 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 13:17:44,681 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 13:17:44,681 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 13:17:44,682 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:17:54,722 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:17:54,723 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:17:54,723 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:17:54,723 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 13:17:54,723 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:17:54,723 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 13:17:54,723 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 13:17:54,723 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 13:17:54,723 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 13:17:54,723 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 13:17:54,724 - wireless_ap_test - INFO - Delete request:
2025-03-19 13:17:54,724 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 13:17:54,798 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 13:17:54,799 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:17:54,799 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts
2025-03-19 13:17:54,799 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:17:54,799 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt
2025-03-19 13:17:54,799 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 13:17:54,799 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:17:55,070 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:17:55,941 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:17:57,104 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:17:57,104 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:17:57,104 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:17:57,105 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:17:58,713 - wireless_ap_test - INFO - Filled username
2025-03-19 13:17:58,839 - wireless_ap_test - INFO - Filled password
2025-03-19 13:17:59,005 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:17:59,634 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:18:00,636 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:18:01,906 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:18:01,906 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:18:02,905 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:18:02,906 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:18:04,089 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:18:05,090 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:18:05,090 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:18:06,259 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:18:06,282 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:18:06,308 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:18:06,330 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:18:06,475 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:18:06,613 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:18:08,808 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:18:08,808 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:18:08,808 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:18:08,808 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:18:10,124 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:18:10,124 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:18:11,350 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:18:11,350 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:18:13,358 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 13:18:13,358 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 13:18:13,358 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:18:14,176 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:18:15,349 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:18:15,850 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:18:15,850 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:18:17,221 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:18:17,221 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 13:18:17,221 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 13:18:19,722 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 13:18:19,722 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 13:18:19,722 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 13:18:24,410 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 13:18:24,411 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 13:18:24,411 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:18:25,320 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:18:25,821 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 13:18:28,708 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:18:30,881 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:18:30,882 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:18:33,323 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:18:35,114 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:18:37,335 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:18:37,335 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:18:44,878 - wireless_ap_test - INFO - Saving configuration
2025-03-19 13:18:50,117 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 13:18:50,117 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 13:18:50,117 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 13:18:50,964 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:18:50,964 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:18:50,964 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:18:50,964 - wireless_ap_test - INFO - MQTT Process Check: 464 root      1920 S    ash -c ps | grep mosquitto
  466 root      1920 S    grep mosquitto
32443 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
2025-03-19 13:18:50,986 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:18:50,986 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:18:50,986 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:18:51,072 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:18:51,155 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:18:51,155 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:18:51,155 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:18:51,155 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:18:51,155 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:18:51,155 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:18:51,155 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:19:01,199 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:19:01,199 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:19:01,199 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:19:01,199 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:19:01,200 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:19:01,200 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:19:01,200 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 13:19:01,200 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 13:19:01,200 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 13:19:01,215 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:19:01,215 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:19:01,229 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:19:01,387 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:19:02,391 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:19:02,392 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:19:02,401 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:19:02,546 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:19:02,555 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:19:02,555 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 13:19:02,555 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 13:19:02,563 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 13:19:03,563 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:19:03,564 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:19:03,564 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:19:03,571 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:19:03,571 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:19:04,104 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:19:07,122 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:19:07,128 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 13:19:07,128 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 13:19:07,128 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 13:19:07,128 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:19:07,129 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:19:07,129 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 13:19:07,129 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 13:19:07,129 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 13:19:07,129 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:19:07,129 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:19:07,129 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 13:19:07,129 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 13:19:07,964 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 13:19:08,099 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 13:19:08,184 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 13:19:08,469 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 13:19:08,470 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 13:19:09,337 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 13:19:09,337 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 13:19:09,338 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 13:19:09,495 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 13:19:09,495 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 13:19:09,562 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 13:19:09,562 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 13:19:09,562 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 13:19:09,606 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 13:19:10,013 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 13:19:10,084 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 13:19:10,084 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 13:19:10,084 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 13:19:10,407 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 13:19:10,407 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 13:19:12,773 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 13:19:12,774 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 13:19:12,865 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:19:12,865 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 13:19:12,865 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 13:19:12,865 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt copy and dts copy
2025-03-19 13:19:13,749 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:19:13,749 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:19:13,749 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:19:13,749 - wireless_ap_test - INFO - MQTT Process Check: 532 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
  700 root      1920 S    ash -c ps | grep mosquitto
  702 root      1920 S    grep mosquitto
2025-03-19 13:19:13,772 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:19:13,772 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:19:13,772 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:19:13,861 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:19:13,946 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:19:13,946 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:19:13,946 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:19:13,946 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:19:13,946 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:19:13,946 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:19:13,946 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:19:24,000 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:19:24,001 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:19:24,001 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:19:24,001 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:19:24,001 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:19:24,001 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:19:24,001 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 13:19:24,001 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 13:19:24,743 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 13:19:24,743 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 13:19:24,766 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 13:19:24,767 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 13:19:24,767 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 13:19:24,767 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 13:19:24,815 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 13:19:24,861 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 13:19:24,908 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 13:19:24,954 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 13:19:25,214 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 13:19:25,215 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 13:19:25,215 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 13:19:25,215 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts copy
2025-03-19 13:19:25,215 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 13:19:25,215 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt copy
2025-03-19 13:19:25,215 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt copy
2025-03-19 13:19:25,215 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 13:19:25,215 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 13:19:25,215 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:19:25,215 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:19:25,216 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 13:19:25,216 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 13:19:25,216 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 13:19:25,216 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:19:25,216 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 13:19:25,216 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 13:19:25,216 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 13:19:25,216 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:19:25,471 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:19:25,471 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 13:19:25,471 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 13:19:25,590 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 13:19:25,590 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 13:19:25,678 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:19:25,678 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts copy
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 13:19:25,679 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 13:19:25,680 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:19:25,917 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:19:25,917 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 13:19:25,917 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 13:19:25,917 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 13:19:25,917 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 13:19:25,917 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 13:19:25,917 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 13:19:25,917 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-19 13:19:25,917 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 13:19:25,918 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-19 13:19:26,087 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 13:19:26,087 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 13:19:26,087 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 13:19:26,173 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-19 13:19:26,173 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-19 13:19:26,173 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-19 13:19:26,173 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-19 13:19:26,174 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-19 13:19:26,174 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-19 13:19:26,174 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-19 13:19:26,337 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-19 13:19:26,338 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 13:19:26,338 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-19 13:19:26,338 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-19 13:19:26,482 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-19 13:19:26,482 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 13:19:26,482 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-19 13:19:26,482 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-19 13:19:26,633 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-19 13:19:26,633 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 13:19:26,633 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 13:19:26,634 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 13:19:26,634 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 13:19:26,634 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 13:19:26,634 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_certificates_from_device": "1", "mqtt_ca_file": "ca-file.cert.pem", "mqtt_cert_file": "ca-certificates.crt", "mqtt_key_file": "ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 13:19:26,918 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": false, "errors": [{"source": "mqtt_key_file", "code": 103, "error": "Invalid option", "section": "2"}, {"source": "mqtt_ca_file", "code": 103, "error": "Invalid option", "section": "2"}, {"source": "mqtt_cert_file", "code": 103, "error": "Invalid option", "section": "2"}, {"source": "mqtt_certificates_from_device", "code": 103, "error": "Invalid option", "section": "2"}]}, {"success": false, "errors": [{"source": "plugin", "code": 103, "error": "Data sender output (id = 2) is missing required option: plugin", "section": "2"}]}]}
2025-03-19 13:19:26,918 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 13:19:27,110 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 13:19:27,110 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 13:19:27,111 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:19:27,111 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 13:19:27,111 - wireless_ap_test - INFO - Running validation for api tests with mqtt copy and dts copy
2025-03-19 13:19:27,971 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:19:27,971 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:19:27,971 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:19:27,971 - wireless_ap_test - INFO - MQTT Process Check: 853 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
  920 root      1920 S    ash -c ps | grep mosquitto
  922 root      1920 S    grep mosquitto
2025-03-19 13:19:27,992 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:19:27,992 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:19:27,992 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:19:28,077 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 13:19:28,158 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:19:28,159 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 13:19:28,159 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 13:19:28,159 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 13:19:28,159 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 13:19:28,159 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 13:19:28,159 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:19:38,201 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:19:38,201 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:19:38,201 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:19:38,202 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 13:19:38,202 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:19:38,202 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 13:19:38,202 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 13:19:38,202 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 13:19:38,202 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 13:19:38,202 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 13:19:38,202 - wireless_ap_test - INFO - Delete request:
2025-03-19 13:19:38,202 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 13:19:38,276 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 13:19:38,276 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:19:38,276 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts copy
2025-03-19 13:19:38,276 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:19:38,276 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt copy
2025-03-19 13:19:38,276 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 13:19:38,277 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 16, Failed: 2
2025-03-19 13:19:38,277 - wireless_ap_test - INFO - 
========================================
2025-03-19 13:19:38,277 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 13:19:38,277 - wireless_ap_test - INFO - ========================================
2025-03-19 13:19:38,277 - wireless_ap_test - INFO - 9. validation_api_mqtt_dts: Validation failed
2025-03-19 13:19:38,277 - wireless_ap_test - INFO - 18. validation_api_mqtt copy_dts copy: Validation failed
2025-03-19 13:19:38,277 - wireless_ap_test - INFO - ========================================
2025-03-19 13:25:34,487 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:25:34,487 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:25:34,487 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:25:34,488 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:25:34,488 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:25:34,488 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:25:34,488 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:25:34,784 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:25:35,698 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:25:36,917 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:25:36,921 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:25:36,922 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:25:36,922 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:25:38,551 - wireless_ap_test - INFO - Filled username
2025-03-19 13:25:38,674 - wireless_ap_test - INFO - Filled password
2025-03-19 13:25:38,852 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:25:39,471 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:25:40,473 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:25:41,703 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:25:41,704 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:25:42,676 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:25:42,676 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:25:43,862 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:25:44,865 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:25:44,865 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:25:46,033 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:25:46,051 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:25:46,068 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:25:46,087 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:25:46,237 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:25:46,378 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:25:48,561 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:25:48,561 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:25:48,562 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:25:48,562 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:25:49,872 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:25:49,873 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:25:51,109 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:25:51,110 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:25:53,115 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 13:25:53,115 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 13:25:53,115 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:25:53,931 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:25:55,130 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:25:55,632 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:25:55,632 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:25:57,004 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:25:57,005 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 13:25:57,005 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 13:25:59,386 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 13:25:59,386 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 13:25:59,386 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 13:25:59,386 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:26:00,246 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:26:00,748 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:26:04,583 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:26:06,751 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:26:06,751 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:26:09,147 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:26:10,900 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:26:13,123 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:26:13,123 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:26:20,642 - wireless_ap_test - INFO - Saving configuration
2025-03-19 13:26:25,906 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 13:26:25,906 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 13:26:25,906 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 13:26:26,784 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:26:26,784 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:26:26,784 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:26:26,784 - wireless_ap_test - INFO - MQTT Process Check: 853 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 1487 root      1920 S    ash -c ps | grep mosquitto
 1489 root      1920 S    grep mosquitto
2025-03-19 13:26:26,807 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:26:26,807 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:26:26,807 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:26:26,892 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:26:26,979 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:26:26,979 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:26:26,979 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:26:26,979 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:26:26,980 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:26:26,980 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:26:26,980 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:26:37,033 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:26:37,033 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:26:37,033 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:26:37,033 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:26:37,033 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:26:37,033 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:26:37,033 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 13:26:37,034 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 13:26:37,034 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 13:26:37,049 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:26:37,049 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:26:37,063 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:26:37,251 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:26:38,257 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:26:38,257 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:26:38,268 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:26:38,412 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:26:38,426 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:26:38,426 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 13:26:38,427 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 13:26:38,435 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 13:26:39,436 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:26:39,436 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:26:39,436 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:26:39,446 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:26:39,446 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:26:39,969 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:26:42,986 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:26:42,995 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 13:26:42,995 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 13:26:42,995 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 13:26:42,995 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:26:42,996 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:26:42,996 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 13:26:42,996 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 13:26:42,996 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 13:26:42,996 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:26:42,996 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:26:42,997 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 13:26:42,997 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 13:26:43,872 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 13:26:44,011 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 13:26:44,101 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 13:26:44,397 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 13:26:44,397 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 13:26:44,397 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 13:26:44,397 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 13:26:44,397 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 13:26:44,397 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:26:44,398 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:26:44,398 - wireless_ap_test - INFO - File name: dts
2025-03-19 13:26:44,398 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 13:26:44,398 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 13:26:44,398 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:26:44,398 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:26:44,398 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 13:26:44,398 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 13:26:45,252 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 13:26:45,252 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 13:26:45,252 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 13:26:45,410 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 13:26:45,410 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 13:26:45,477 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 13:26:45,478 - wireless_ap_test - INFO - Configuring data collection with type: Base
2025-03-19 13:26:45,478 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 13:26:45,521 - wireless_ap_test - INFO -  VALUES: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:26:45,658 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 13:26:45,734 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 13:26:45,734 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 13:26:45,734 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 13:26:46,066 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 13:26:46,066 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 13:26:48,420 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 13:26:48,420 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 13:26:48,503 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:26:48,503 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 13:26:48,503 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 13:26:48,503 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 13:26:49,420 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:26:49,420 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:26:49,420 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:26:49,420 - wireless_ap_test - INFO - MQTT Process Check: 1559 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 1703 root      1920 S    ash -c ps | grep mosquitto
 1705 root      1920 S    grep mosquitto
2025-03-19 13:26:49,443 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:26:49,443 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:26:49,443 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:26:49,528 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:26:49,612 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:26:49,612 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:26:49,612 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:26:49,612 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:26:49,612 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:26:49,612 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:26:49,612 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:26:59,653 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:26:59,654 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:26:59,654 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:26:59,654 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:26:59,654 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:26:59,654 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:26:59,654 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 13:26:59,654 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 13:27:00,442 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 13:27:00,442 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 13:27:00,466 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 13:27:00,466 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 13:27:00,466 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 13:27:00,466 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 13:27:00,514 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 13:27:00,561 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 13:27:00,607 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 13:27:00,651 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 13:27:00,907 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 13:27:00,907 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 13:27:00,908 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 13:27:00,908 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 13:27:00,908 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 13:27:00,908 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 13:27:00,908 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt
2025-03-19 13:27:00,908 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 13:27:00,908 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 13:27:00,908 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:27:00,909 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:27:00,909 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 13:27:00,909 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 13:27:00,909 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 13:27:00,909 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:27:00,909 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 13:27:00,909 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 13:27:00,909 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 13:27:00,910 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:27:01,177 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:27:01,177 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 13:27:01,177 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 13:27:01,304 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 13:27:01,305 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 13:27:01,397 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:27:01,397 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:27:01,397 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:27:01,397 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 13:27:01,397 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - File name: dts
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 13:27:01,398 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:27:01,648 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:27:01,648 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 13:27:01,648 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 13:27:01,648 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 13:27:01,648 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 13:27:01,648 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 13:27:01,648 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/documents/ca1-file.crt", "client_certificate": "/home/studentas/documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 13:27:01,648 - wireless_ap_test - INFO - Data type from basic config: Base
2025-03-19 13:27:01,649 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 13:27:01,649 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "Base", "type_settings": {}, "format_type": "JSON", "values": ["time", "local_time", "fw", "name", "id"]}
2025-03-19 13:27:01,815 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 13:27:01,815 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 13:27:01,816 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 13:27:01,902 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'Base', 'type_settings': {}, 'format_type': 'JSON', 'values': ['time', 'local_time', 'fw', 'name', 'id']}
2025-03-19 13:27:01,903 - wireless_ap_test - INFO - Values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:27:01,903 - wireless_ap_test - INFO - Type settings: {}
2025-03-19 13:27:01,903 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 13:27:01,903 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "members": ["time", "local_time", "fw", "name", "id"], "format": "json"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_certificates_from_device": "1", "mqtt_ca_file": "ca-file.cert.pem", "mqtt_cert_file": "ca-certificates.crt", "mqtt_key_file": "ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 13:27:02,169 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "id": "3", "format": "json", "members": ["time", "local_time", "fw", "name", "id"]}}, {"success": false, "errors": [{"source": "mqtt_key_file", "code": 103, "error": "Invalid option", "section": "2"}, {"source": "mqtt_ca_file", "code": 103, "error": "Invalid option", "section": "2"}, {"source": "mqtt_cert_file", "code": 103, "error": "Invalid option", "section": "2"}, {"source": "mqtt_certificates_from_device", "code": 103, "error": "Invalid option", "section": "2"}]}, {"success": false, "errors": [{"source": "plugin", "code": 103, "error": "Data sender output (id = 2) is missing required option: plugin", "section": "2"}]}]}
2025-03-19 13:27:02,170 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 13:27:02,349 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 13:27:02,349 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 13:27:02,349 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:27:02,350 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 13:27:02,350 - wireless_ap_test - INFO - Running validation for api tests with mqtt and dts
2025-03-19 13:27:03,403 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:27:03,404 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:27:03,404 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:27:03,404 - wireless_ap_test - INFO - MQTT Process Check: 1849 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 1908 root      1920 S    ash -c ps | grep mosquitto
 1910 root      1920 S    grep mosquitto
2025-03-19 13:27:03,425 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:27:03,425 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:27:03,425 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:27:03,513 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 13:27:03,596 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:27:03,596 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 13:27:03,596 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 13:27:03,596 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 13:27:03,596 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 13:27:03,596 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 13:27:03,596 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:27:11,139 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:27:11,139 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:27:11,140 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:27:11,140 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:27:11,140 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:27:11,140 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:27:11,141 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:27:11,546 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:27:12,779 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:27:14,125 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:27:14,129 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:27:14,130 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:27:14,130 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:27:15,918 - wireless_ap_test - INFO - Filled username
2025-03-19 13:27:16,047 - wireless_ap_test - INFO - Filled password
2025-03-19 13:27:16,234 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:27:16,893 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:27:17,898 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:27:19,182 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:27:19,183 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:27:20,221 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:27:20,221 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:27:21,421 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:27:22,423 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:27:22,423 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:27:23,600 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:27:23,623 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:27:23,647 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:27:23,669 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:27:23,826 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:27:23,975 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:27:26,216 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:27:26,216 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:27:26,218 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:27:26,218 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:27:28,230 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:27:28,230 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:27:29,805 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:27:29,805 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:27:31,847 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:27:31,864 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:27:32,338 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:27:33,586 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 13:27:33,586 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:27:34,440 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:27:34,504 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 13:27:34,505 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 13:27:34,505 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 13:27:34,505 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 13:27:34,505 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 13:27:34,505 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 13:27:34,521 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:27:34,521 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:27:34,533 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:27:34,718 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:27:35,729 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:27:35,729 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:27:35,756 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:27:35,945 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:27:35,970 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:27:35,970 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 13:27:35,970 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 13:27:35,980 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 13:27:36,981 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:27:36,982 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:27:36,982 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:27:36,992 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:27:36,992 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:27:37,708 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:27:42,204 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:27:42,205 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:27:42,205 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:27:42,206 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:27:42,206 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:27:42,206 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:27:42,206 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:27:42,518 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:27:43,559 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:27:44,686 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:27:44,690 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:27:44,691 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:27:44,692 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:27:46,356 - wireless_ap_test - INFO - Filled username
2025-03-19 13:27:46,482 - wireless_ap_test - INFO - Filled password
2025-03-19 13:27:46,646 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:27:47,297 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:27:48,299 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:27:49,514 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:27:49,515 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:27:50,532 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:27:50,532 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:27:51,719 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:27:52,720 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:27:52,720 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:27:53,905 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:27:53,931 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:27:53,955 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:27:53,996 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:27:54,155 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:27:54,292 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:27:56,482 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:27:56,482 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:27:56,483 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:27:56,483 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:27:57,772 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:27:57,772 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:27:59,022 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:27:59,023 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:28:01,031 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:28:01,056 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:28:01,491 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:28:04,896 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 13:28:04,896 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:28:05,707 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:28:06,881 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:28:07,383 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:28:07,383 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:28:08,822 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:28:08,822 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 13:28:08,822 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 13:28:11,205 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 13:28:11,205 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 13:28:11,205 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 13:28:11,205 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:28:12,168 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:28:12,672 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:28:16,607 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:28:18,771 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:28:18,771 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:28:21,187 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:28:22,972 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:28:25,205 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:28:25,205 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:35:22,597 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:35:22,598 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:35:22,598 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:35:22,598 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:35:22,599 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:35:22,599 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:35:22,599 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:35:22,913 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:35:23,893 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:35:25,089 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:35:25,096 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:35:25,097 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:35:25,098 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:35:26,873 - wireless_ap_test - INFO - Filled username
2025-03-19 13:35:27,002 - wireless_ap_test - INFO - Filled password
2025-03-19 13:35:27,165 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:35:27,842 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:35:28,845 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:35:30,181 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:35:30,182 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:35:31,243 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:35:31,243 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:35:32,438 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:35:33,440 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:35:33,440 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:35:34,628 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:35:34,651 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:35:34,676 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:35:34,705 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:35:34,845 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:35:34,987 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:35:37,207 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:35:37,207 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:35:37,208 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:35:37,208 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:35:38,665 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:35:38,665 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:35:39,970 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:35:39,970 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:35:41,984 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:35:42,010 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:35:42,561 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:35:45,927 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 13:35:45,928 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:35:46,757 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:35:47,943 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:35:48,445 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:35:48,445 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:35:49,857 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:35:49,857 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 13:35:49,858 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 13:35:52,266 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 13:35:52,266 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 13:35:52,266 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 13:35:52,266 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:35:53,126 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:35:53,628 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:35:57,482 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:35:59,642 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:35:59,642 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:36:02,028 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:36:03,862 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:36:06,095 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:36:06,095 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:36:13,679 - wireless_ap_test - INFO - Saving configuration
2025-03-19 13:36:18,968 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 13:36:18,968 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 13:36:18,968 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 13:36:19,851 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:36:19,852 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:36:19,852 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:36:19,852 - wireless_ap_test - INFO - MQTT Process Check: 1849 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 3076 root      1920 S    ash -c ps | grep mosquitto
 3078 root      1920 S    grep mosquitto
2025-03-19 13:36:19,876 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:36:19,876 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:36:19,876 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:36:19,967 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:36:20,056 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:36:20,056 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:36:20,056 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:36:20,056 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:36:20,056 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:36:20,056 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:36:20,057 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:36:30,109 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:36:30,109 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:36:30,109 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:36:30,109 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:36:30,109 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:36:30,109 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:36:30,109 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 13:36:30,110 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 13:36:30,110 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 13:36:30,134 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:36:30,135 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:36:30,149 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:36:30,330 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:36:31,337 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:36:31,337 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:36:31,346 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:36:31,496 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:36:31,506 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:36:31,507 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 13:36:31,507 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 13:36:31,514 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 13:36:32,515 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:36:32,515 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:36:32,516 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:36:32,523 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:36:32,524 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:36:33,038 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:36:36,060 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:36:36,066 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 13:36:36,066 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 13:36:36,066 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 13:36:36,066 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:36:36,066 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:36:36,066 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 13:36:36,067 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 13:36:36,067 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 13:36:36,067 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:36:36,067 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:36:36,067 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 13:36:36,067 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 13:36:36,950 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 13:36:37,093 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 13:36:37,179 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 13:36:37,498 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 13:36:37,498 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 13:36:37,498 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 13:36:37,498 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 13:36:37,498 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 13:36:37,498 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:36:37,498 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:36:37,498 - wireless_ap_test - INFO - File name: dts
2025-03-19 13:36:37,498 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 13:36:37,498 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 13:36:37,499 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:36:37,499 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:36:37,499 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 13:36:37,499 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 13:36:38,398 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 13:36:38,398 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 13:36:38,398 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 13:36:38,552 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 13:36:38,552 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 13:36:38,615 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 13:36:38,615 - wireless_ap_test - INFO - Configuring data collection with type: Base
2025-03-19 13:36:38,615 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 13:36:38,657 - wireless_ap_test - INFO -  VALUES: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:36:38,789 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 13:36:38,861 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 13:36:38,861 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 13:36:38,861 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 13:36:39,199 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 13:36:39,199 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 13:36:41,567 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 13:36:41,567 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 13:36:41,651 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:36:41,651 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 13:36:41,651 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 13:36:41,651 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 13:36:42,527 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:36:42,527 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:36:42,527 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:36:42,528 - wireless_ap_test - INFO - MQTT Process Check: 3140 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 3292 root      1920 S    ash -c ps | grep mosquitto
 3294 root      1920 R    grep mosquitto
2025-03-19 13:36:42,551 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:36:42,551 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:36:42,551 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:36:42,639 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:36:42,724 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:36:42,724 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:36:42,724 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:36:42,724 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:36:42,724 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:36:42,724 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:36:42,724 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:36:52,766 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:36:52,766 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:36:52,767 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:36:52,767 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:36:52,767 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:36:52,767 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:36:52,767 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 13:36:52,767 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 13:36:53,528 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 13:36:53,528 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 13:36:53,556 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 13:36:53,556 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 13:36:53,556 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 13:36:53,556 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 13:36:53,604 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 13:36:53,650 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 13:36:53,699 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 13:36:53,742 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 13:36:53,998 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 13:36:53,998 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 13:36:53,998 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 13:36:53,999 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 13:36:53,999 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 13:36:53,999 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 13:36:53,999 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt
2025-03-19 13:36:53,999 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 13:36:53,999 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 13:36:53,999 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:36:53,999 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:36:53,999 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 13:36:54,000 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 13:36:54,000 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 13:36:54,000 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:36:54,000 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 13:36:54,000 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 13:36:54,000 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 13:36:54,000 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:36:54,263 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:36:54,263 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 13:36:54,264 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 13:36:54,385 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 13:36:54,385 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 13:36:54,482 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:36:54,482 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:36:54,482 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:36:54,482 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 13:36:54,482 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - File name: dts
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 13:36:54,483 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:36:54,732 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:36:54,732 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 13:36:54,732 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 13:36:54,732 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 13:36:54,732 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 13:36:54,732 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 13:36:54,732 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/documents/ca1-file.crt", "client_certificate": "/home/studentas/documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 13:36:54,732 - wireless_ap_test - INFO - Data type from basic config: Base
2025-03-19 13:36:54,732 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 13:36:54,732 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "Base", "type_settings": {}, "format_type": "JSON", "values": ["time", "local_time", "fw", "name", "id"]}
2025-03-19 13:36:54,904 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 13:36:54,904 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 13:36:54,905 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 13:36:54,991 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'Base', 'type_settings': {}, 'format_type': 'JSON', 'values': ['time', 'local_time', 'fw', 'name', 'id']}
2025-03-19 13:36:54,992 - wireless_ap_test - INFO - Values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:36:54,992 - wireless_ap_test - INFO - Type settings: {}
2025-03-19 13:36:54,992 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: 'c/etc/certificates/e/etc/certificates/r/etc/certificates/t/etc/certificates/i/etc/certificates/f/etc/certificates/i/etc/certificates/c/etc/certificates/a/etc/certificates/t/etc/certificates/e/etc/certificates/_/etc/certificates/a/etc/certificates/u/etc/certificates/t/etc/certificates/h/etc/certificates/o/etc/certificates/r/etc/certificates/i/etc/certificates/t/etc/certificates/y/etc/certificates/_/etc/certificates/f/etc/certificates/i/etc/certificates/l/etc/certificates/e'
2025-03-19 13:36:54,992 - wireless_ap_test - ERROR - Data to Server API test failed: 'c/etc/certificates/e/etc/certificates/r/etc/certificates/t/etc/certificates/i/etc/certificates/f/etc/certificates/i/etc/certificates/c/etc/certificates/a/etc/certificates/t/etc/certificates/e/etc/certificates/_/etc/certificates/a/etc/certificates/u/etc/certificates/t/etc/certificates/h/etc/certificates/o/etc/certificates/r/etc/certificates/i/etc/certificates/t/etc/certificates/y/etc/certificates/_/etc/certificates/f/etc/certificates/i/etc/certificates/l/etc/certificates/e'
2025-03-19 13:36:54,992 - wireless_ap_test - INFO - Test completed: dts - FAIL
2025-03-19 13:36:54,992 - wireless_ap_test - INFO - Running validation for api tests with mqtt and dts
2025-03-19 13:36:55,880 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:36:55,880 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:36:55,881 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:36:55,881 - wireless_ap_test - INFO - MQTT Process Check: 3435 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 3441 root      1920 S    ash -c ps | grep mosquitto
 3443 root      1920 S    grep mosquitto
2025-03-19 13:36:55,902 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:36:55,903 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:36:55,903 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:36:55,987 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 13:36:56,086 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:36:56,086 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 13:36:56,086 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 13:36:56,086 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 13:36:56,086 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 13:36:56,086 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 13:36:56,086 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:37:06,127 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:37:06,128 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:37:06,128 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:37:06,128 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 13:37:06,128 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:37:06,128 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 13:37:06,128 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 13:37:06,128 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 13:37:06,128 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 13:37:06,128 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-19 13:37:06,129 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:37:06,129 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts
2025-03-19 13:37:06,129 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:37:06,129 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt
2025-03-19 13:37:06,129 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 13:37:06,129 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:37:06,405 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:37:07,300 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:37:08,428 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:37:08,429 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:37:08,431 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:37:08,434 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:37:10,089 - wireless_ap_test - INFO - Filled username
2025-03-19 13:37:10,215 - wireless_ap_test - INFO - Filled password
2025-03-19 13:37:10,380 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:37:11,030 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:37:12,033 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:37:13,345 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:37:13,345 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:37:14,365 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:37:14,366 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:37:15,555 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:37:16,556 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:37:16,556 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:37:17,732 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:37:17,760 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:37:17,783 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:37:17,810 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:37:17,952 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:37:18,092 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:37:20,304 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:37:20,305 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:37:20,305 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:37:20,305 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:37:21,652 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:37:21,652 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:37:23,002 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:37:23,003 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:37:25,009 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:37:25,020 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:37:25,449 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:37:28,804 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 13:37:28,804 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:37:29,619 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:37:30,799 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:37:31,302 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:37:31,302 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:37:32,694 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:37:32,694 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 13:37:32,695 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 13:37:35,205 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 13:37:35,205 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 13:37:35,205 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 13:37:39,844 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 13:37:39,845 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 13:37:39,845 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:37:40,742 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:37:41,244 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 13:37:44,095 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:37:46,280 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:37:46,280 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:37:48,756 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:37:50,567 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:37:52,806 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:37:52,806 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:38:00,430 - wireless_ap_test - INFO - Saving configuration
2025-03-19 13:38:05,698 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 13:38:05,698 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 13:38:05,698 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 13:38:06,576 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:38:06,576 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:38:06,577 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:38:06,577 - wireless_ap_test - INFO - MQTT Process Check: 3435 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 3858 root      1920 S    ash -c ps | grep mosquitto
 3860 root      1920 S    grep mosquitto
2025-03-19 13:38:06,599 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:38:06,599 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:38:06,600 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:38:06,693 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:38:06,778 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:38:06,778 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:38:06,778 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:38:06,778 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:38:06,778 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:38:06,778 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:38:06,778 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:38:16,822 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:38:16,822 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:38:16,822 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:38:16,822 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:38:16,822 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:38:16,822 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:38:16,823 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 13:38:16,823 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 13:38:16,823 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 13:38:16,836 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:38:16,836 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:38:16,853 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:38:17,009 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:38:18,014 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:38:18,014 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:38:18,025 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:38:18,170 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:38:18,179 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:38:18,179 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 13:38:18,179 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 13:38:18,186 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 13:38:19,188 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:38:19,188 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:38:19,188 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:38:19,196 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:38:19,196 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:38:19,716 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:38:22,736 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:38:22,742 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 13:38:22,743 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 13:38:23,564 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 13:38:23,691 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 13:38:23,776 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 13:38:24,083 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 13:38:24,084 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 13:38:24,999 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 13:38:24,999 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 13:38:24,999 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 13:38:25,152 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 13:38:25,152 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 13:38:25,216 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 13:38:25,216 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 13:38:25,216 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 13:38:25,260 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 13:38:25,681 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 13:38:25,757 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 13:38:25,757 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 13:38:25,757 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 13:38:26,103 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 13:38:26,103 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 13:38:28,471 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 13:38:28,471 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 13:38:28,570 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:38:28,570 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 13:38:28,570 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 13:38:28,570 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt copy and dts copy
2025-03-19 13:38:29,466 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:38:29,467 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:38:29,467 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:38:29,467 - wireless_ap_test - INFO - MQTT Process Check: 3926 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 4085 root      1920 S    ash -c ps | grep mosquitto
 4087 root      1920 S    grep mosquitto
2025-03-19 13:38:29,489 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:38:29,489 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:38:29,490 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:38:29,591 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:38:29,686 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:38:29,686 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:38:29,686 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:38:29,687 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:38:29,687 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:38:29,687 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:38:29,687 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:38:39,729 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:38:39,729 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:38:39,729 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:38:39,729 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:38:39,729 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:38:39,730 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:38:39,730 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 13:38:39,730 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 13:38:40,496 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 13:38:40,496 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 13:38:40,531 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 13:38:40,531 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 13:38:40,531 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 13:38:40,531 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 13:38:40,581 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 13:38:40,630 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 13:38:40,677 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 13:38:40,723 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 13:38:40,989 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 13:38:40,989 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 13:38:40,989 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 13:38:40,989 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts copy
2025-03-19 13:38:40,989 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 13:38:40,989 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt copy
2025-03-19 13:38:40,989 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt copy
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 13:38:40,990 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:38:41,257 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:38:41,257 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 13:38:41,257 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 13:38:41,378 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 13:38:41,378 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 13:38:41,474 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:38:41,474 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:38:41,474 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:38:41,474 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 13:38:41,474 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts copy
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 13:38:41,475 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:38:41,720 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:38:41,720 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 13:38:41,720 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 13:38:41,720 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 13:38:41,721 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 13:38:41,721 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 13:38:41,721 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 13:38:41,721 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-19 13:38:41,721 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 13:38:41,721 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-19 13:38:41,891 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 13:38:41,891 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 13:38:41,891 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 13:38:41,979 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-19 13:38:41,980 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-19 13:38:41,980 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-19 13:38:41,980 - wireless_ap_test - ERROR - Failed to configure Data to Server via API: 'c/etc/certificates/e/etc/certificates/r/etc/certificates/t/etc/certificates/i/etc/certificates/f/etc/certificates/i/etc/certificates/c/etc/certificates/a/etc/certificates/t/etc/certificates/e/etc/certificates/_/etc/certificates/a/etc/certificates/u/etc/certificates/t/etc/certificates/h/etc/certificates/o/etc/certificates/r/etc/certificates/i/etc/certificates/t/etc/certificates/y/etc/certificates/_/etc/certificates/f/etc/certificates/i/etc/certificates/l/etc/certificates/e'
2025-03-19 13:38:41,980 - wireless_ap_test - ERROR - Data to Server API test failed: 'c/etc/certificates/e/etc/certificates/r/etc/certificates/t/etc/certificates/i/etc/certificates/f/etc/certificates/i/etc/certificates/c/etc/certificates/a/etc/certificates/t/etc/certificates/e/etc/certificates/_/etc/certificates/a/etc/certificates/u/etc/certificates/t/etc/certificates/h/etc/certificates/o/etc/certificates/r/etc/certificates/i/etc/certificates/t/etc/certificates/y/etc/certificates/_/etc/certificates/f/etc/certificates/i/etc/certificates/l/etc/certificates/e'
2025-03-19 13:38:41,980 - wireless_ap_test - INFO - Test completed: dts copy - FAIL
2025-03-19 13:38:41,980 - wireless_ap_test - INFO - Running validation for api tests with mqtt copy and dts copy
2025-03-19 13:38:42,927 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:38:42,927 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:38:42,927 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:38:42,927 - wireless_ap_test - INFO - MQTT Process Check: 4232 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 4239 root      1920 S    ash -c ps | grep mosquitto
 4241 root      1920 S    grep mosquitto
2025-03-19 13:38:42,950 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:38:42,950 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:38:42,950 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:38:43,047 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 13:38:43,137 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:38:43,137 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 13:38:43,137 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 13:38:43,137 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 13:38:43,137 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 13:38:43,137 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 13:38:43,137 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:38:53,186 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:38:53,186 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:38:53,186 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:38:53,186 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 13:38:53,186 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:38:53,186 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 13:38:53,186 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 13:38:53,186 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 13:38:53,187 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 13:38:53,187 - wireless_ap_test - INFO - No Data to Server configuration to clean up
2025-03-19 13:38:53,187 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:38:53,187 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts copy
2025-03-19 13:38:53,187 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:38:53,187 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt copy
2025-03-19 13:38:53,187 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 13:38:53,188 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 14, Failed: 4
2025-03-19 13:38:53,188 - wireless_ap_test - INFO - 
========================================
2025-03-19 13:38:53,188 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 13:38:53,188 - wireless_ap_test - INFO - ========================================
2025-03-19 13:38:53,188 - wireless_ap_test - INFO - 8. data_to_server_api_dts: 'c/etc/certificates/e/etc/certificates/r/etc/certificates/t/etc/certificates/i/etc/certificates/f/etc/certificates/i/etc/certificates/c/etc/certificates/a/etc/certificates/t/etc/certificates/e/etc/certificates/_/etc/certificates/a/etc/certificates/u/etc/certificates/t/etc/certificates/h/etc/certificates/o/etc/certificates/r/etc/certificates/i/etc/certificates/t/etc/certificates/y/etc/certificates/_/etc/certificates/f/etc/certificates/i/etc/certificates/l/etc/certificates/e'
2025-03-19 13:38:53,188 - wireless_ap_test - INFO - 9. validation_api_mqtt_dts: Validation failed
2025-03-19 13:38:53,188 - wireless_ap_test - INFO - 17. data_to_server_api_dts copy: 'c/etc/certificates/e/etc/certificates/r/etc/certificates/t/etc/certificates/i/etc/certificates/f/etc/certificates/i/etc/certificates/c/etc/certificates/a/etc/certificates/t/etc/certificates/e/etc/certificates/_/etc/certificates/a/etc/certificates/u/etc/certificates/t/etc/certificates/h/etc/certificates/o/etc/certificates/r/etc/certificates/i/etc/certificates/t/etc/certificates/y/etc/certificates/_/etc/certificates/f/etc/certificates/i/etc/certificates/l/etc/certificates/e'
2025-03-19 13:38:53,188 - wireless_ap_test - INFO - 18. validation_api_mqtt copy_dts copy: Validation failed
2025-03-19 13:38:53,188 - wireless_ap_test - INFO - ========================================
2025-03-19 13:50:23,262 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 13:50:23,262 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 13:50:23,263 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 13:50:23,263 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 13:50:23,263 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 13:50:23,263 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 13:50:23,263 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:50:23,581 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:50:24,587 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:50:25,770 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:50:25,775 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:50:25,776 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:50:25,776 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:50:27,418 - wireless_ap_test - INFO - Filled username
2025-03-19 13:50:27,543 - wireless_ap_test - INFO - Filled password
2025-03-19 13:50:27,707 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:50:28,341 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:50:29,343 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:50:30,593 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:50:30,593 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:50:31,577 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:50:31,577 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:50:32,765 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:50:33,767 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:50:33,768 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:50:34,960 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:50:34,995 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:50:35,027 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:50:35,060 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:50:35,215 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:50:35,352 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:50:37,544 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:50:37,544 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:50:37,545 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:50:37,545 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:50:38,885 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:50:38,886 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:50:40,213 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:50:40,213 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:50:42,220 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 13:50:42,246 - wireless_ap_test - INFO - Found existing instance with name 'test_instance3', deleting it
2025-03-19 13:50:42,731 - wireless_ap_test - ERROR - Error deleting from row: Locator.click: Error: strict mode violation: locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-delete" class="disabled:bg-transparent gap-1 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Delete").first
    2) <button disabled type="button" test-id="button-delete" class="disabled:bg-transparent gap-2 w-max text-error-100 hover:text-error-50 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka locator("div").filter(has_text=re.compile(r"^Delete$")).get_by_role("button")

Call log:
  - waiting for locator("div.min-w-0.flex.lg\\:text-primary-300 span.truncate").first.locator("../../../../../../../../..").locator("button[test-id=\"button-delete\"]")

2025-03-19 13:50:46,089 - wireless_ap_test - INFO - Successfully deleted existing instance 'test_instance3' (fallback)
2025-03-19 13:50:46,089 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:50:46,904 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:50:48,084 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:50:48,586 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:50:48,586 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:50:49,966 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:50:49,966 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 13:50:49,966 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 13:50:52,352 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 13:50:52,352 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 13:50:52,352 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 13:50:52,352 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:50:53,211 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:50:53,713 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:50:57,523 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:50:59,681 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:50:59,681 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:51:02,077 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:51:03,803 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:51:06,022 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:51:06,022 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:51:13,561 - wireless_ap_test - INFO - Saving configuration
2025-03-19 13:51:18,876 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 13:51:18,876 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 13:51:18,876 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 13:51:19,741 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:51:19,741 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:51:19,741 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:51:19,741 - wireless_ap_test - INFO - MQTT Process Check: 4232 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 4941 root      1920 S    ash -c ps | grep mosquitto
 4943 root      1920 S    grep mosquitto
2025-03-19 13:51:19,764 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:51:19,764 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:51:19,764 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:51:19,853 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:51:19,936 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:51:19,936 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:51:19,936 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:51:19,936 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:51:19,936 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:51:19,936 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:51:19,936 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:51:29,988 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:51:29,988 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:51:29,989 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:51:29,989 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:51:29,989 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:51:29,989 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:51:29,989 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 13:51:29,989 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 13:51:29,989 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 13:51:30,020 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:51:30,020 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:51:30,031 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:51:30,182 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:51:31,186 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:51:31,186 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:51:31,197 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:51:31,341 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:51:31,357 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:51:31,357 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 13:51:31,357 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 13:51:31,369 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 13:51:32,370 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:51:32,370 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:51:32,370 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:51:32,378 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:51:32,379 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:51:32,937 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:51:35,954 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:51:35,960 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 13:51:35,960 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 13:51:35,960 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 13:51:35,960 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:51:35,960 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:51:35,960 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 13:51:35,961 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 13:51:35,961 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 13:51:35,961 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:51:35,961 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:51:35,961 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 13:51:35,961 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 13:51:36,795 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 13:51:36,924 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 13:51:37,007 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 13:51:37,297 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 13:51:37,297 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 13:51:37,297 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 13:51:37,297 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 13:51:37,297 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 13:51:37,297 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:51:37,297 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:51:37,297 - wireless_ap_test - INFO - File name: dts
2025-03-19 13:51:37,297 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 13:51:37,297 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 13:51:37,298 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:51:37,298 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:51:37,298 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 13:51:37,298 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 13:51:38,285 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 13:51:38,285 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 13:51:38,285 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 13:51:38,433 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 13:51:38,433 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 13:51:38,496 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 13:51:38,496 - wireless_ap_test - INFO - Configuring data collection with type: Base
2025-03-19 13:51:38,496 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 13:51:38,538 - wireless_ap_test - INFO -  VALUES: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:51:38,666 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 13:51:38,737 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 13:51:38,737 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 13:51:38,737 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 13:51:39,069 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 13:51:39,069 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 13:51:41,434 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 13:51:41,434 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 13:51:41,518 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:51:41,518 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 13:51:41,518 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 13:51:41,518 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 13:51:42,379 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:51:42,380 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:51:42,380 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:51:42,380 - wireless_ap_test - INFO - MQTT Process Check: 5012 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 5156 root      1920 S    ash -c ps | grep mosquitto
 5158 root      1920 S    grep mosquitto
2025-03-19 13:51:42,402 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:51:42,402 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:51:42,402 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:51:42,496 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:51:42,592 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:51:42,592 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:51:42,593 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:51:42,593 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:51:42,593 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:51:42,593 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:51:42,593 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:51:52,636 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:51:52,636 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:51:52,636 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:51:52,636 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:51:52,636 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:51:52,636 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:51:52,637 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 13:51:52,637 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 13:51:53,392 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 13:51:53,392 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 13:51:53,415 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 13:51:53,415 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 13:51:53,415 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 13:51:53,415 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 13:51:53,463 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 13:51:53,509 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 13:51:53,554 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 13:51:53,600 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 13:51:53,854 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 13:51:53,854 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 13:51:53,855 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 13:51:53,855 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 13:51:53,855 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 13:51:53,855 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 13:51:53,855 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt
2025-03-19 13:51:53,855 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 13:51:53,855 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 13:51:53,855 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:51:53,855 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:51:53,855 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 13:51:53,856 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 13:51:53,856 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 13:51:53,856 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:51:53,856 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 13:51:53,856 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 13:51:53,856 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 13:51:53,856 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:51:54,130 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:51:54,130 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 13:51:54,130 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 13:51:54,259 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 13:51:54,259 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 13:51:54,354 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:51:54,355 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:51:54,355 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:51:54,355 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 13:51:54,355 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts
2025-03-19 13:51:54,355 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 13:51:54,355 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 13:51:54,355 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:51:54,355 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:51:54,355 - wireless_ap_test - INFO - File name: dts
2025-03-19 13:51:54,356 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 13:51:54,356 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 13:51:54,356 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:51:54,356 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 13:51:54,356 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 13:51:54,356 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 13:51:54,356 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:51:54,602 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:51:54,602 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 13:51:54,602 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 13:51:54,602 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 13:51:54,602 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 13:51:54,603 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 13:51:54,603 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/documents/ca1-file.crt", "client_certificate": "/home/studentas/documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 13:51:54,603 - wireless_ap_test - INFO - Data type from basic config: Base
2025-03-19 13:51:54,603 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 13:51:54,603 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "Base", "type_settings": {}, "format_type": "JSON", "values": ["time", "local_time", "fw", "name", "id"]}
2025-03-19 13:51:54,778 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 13:51:54,778 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 13:51:54,778 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 13:51:54,864 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'Base', 'type_settings': {}, 'format_type': 'JSON', 'values': ['time', 'local_time', 'fw', 'name', 'id']}
2025-03-19 13:51:54,865 - wireless_ap_test - INFO - Values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 13:51:54,865 - wireless_ap_test - INFO - Type settings: {}
2025-03-19 13:51:54,865 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 13:51:54,865 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "members": ["time", "local_time", "fw", "name", "id"], "format": "json"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/certificates/ca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 13:51:55,092 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "id": "3", "format": "json", "members": ["time", "local_time", "fw", "name", "id"]}}, {"success": false, "errors": [{"source": "mqtt_certfile", "code": 103, "value": "/etc/certificates/ca-certificates.crt", "error": "Provided file does not exist in the device", "section": "2"}]}, {"success": false, "errors": [{"source": "plugin", "code": 103, "error": "Data sender output (id = 2) is missing required option: plugin", "section": "2"}]}]}
2025-03-19 13:51:55,093 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 13:51:55,268 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 13:51:55,268 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 13:51:55,268 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:51:55,268 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 13:51:55,268 - wireless_ap_test - INFO - Running validation for api tests with mqtt and dts
2025-03-19 13:51:56,168 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:51:56,169 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:51:56,169 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:51:56,169 - wireless_ap_test - INFO - MQTT Process Check: 5298 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 5354 root      1920 S    ash -c ps | grep mosquitto
 5358 root      1920 S    grep mosquitto
2025-03-19 13:51:56,190 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:51:56,190 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:51:56,190 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:51:56,273 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 13:51:56,354 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:51:56,354 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 13:51:56,354 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 13:51:56,354 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 13:51:56,354 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 13:51:56,354 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 13:51:56,355 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:52:06,400 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:52:06,400 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:52:06,400 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:52:06,400 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 13:52:06,400 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:52:06,400 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 13:52:06,400 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 13:52:06,400 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 13:52:06,401 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 13:52:06,401 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 13:52:06,401 - wireless_ap_test - INFO - Delete request:
2025-03-19 13:52:06,401 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 13:52:06,474 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 13:52:06,475 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:52:06,475 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts
2025-03-19 13:52:06,475 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:52:06,475 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt
2025-03-19 13:52:06,475 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 13:52:06,475 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 13:52:06,756 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 13:52:07,672 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 13:52:08,879 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 13:52:08,879 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:52:08,880 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 13:52:08,880 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 13:52:10,469 - wireless_ap_test - INFO - Filled username
2025-03-19 13:52:10,595 - wireless_ap_test - INFO - Filled password
2025-03-19 13:52:10,757 - wireless_ap_test - INFO - Clicked login button
2025-03-19 13:52:11,397 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 13:52:12,402 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 13:52:13,674 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 13:52:13,674 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 13:52:14,659 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 13:52:14,659 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 13:52:15,849 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 13:52:16,850 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 13:52:16,850 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 13:52:18,021 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 13:52:18,044 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 13:52:18,069 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 13:52:18,090 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 13:52:18,237 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 13:52:18,378 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 13:52:20,581 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 13:52:20,581 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 13:52:20,581 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:52:20,581 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:52:21,886 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:52:21,886 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 13:52:23,141 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 13:52:23,141 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 13:52:25,148 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 13:52:25,148 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 13:52:25,148 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 13:52:25,992 - wireless_ap_test - INFO - Clicking add button
2025-03-19 13:52:27,166 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 13:52:27,668 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 13:52:27,668 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 13:52:29,042 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 13:52:29,042 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 13:52:29,042 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 13:52:31,542 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 13:52:31,542 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 13:52:31,542 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 13:52:36,112 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 13:52:36,112 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 13:52:36,112 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 13:52:36,987 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 13:52:37,490 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 13:52:40,384 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 13:52:42,560 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 13:52:42,560 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 13:52:45,008 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 13:52:46,801 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 13:52:49,022 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 13:52:49,022 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 13:52:56,543 - wireless_ap_test - INFO - Saving configuration
2025-03-19 13:53:01,778 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 13:53:01,778 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 13:53:01,778 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 13:53:02,642 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:53:02,642 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:53:02,642 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:53:02,642 - wireless_ap_test - INFO - MQTT Process Check: 5298 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 5755 root      1920 S    ash -c ps | grep mosquitto
 5757 root      1920 S    grep mosquitto
2025-03-19 13:53:02,664 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:53:02,664 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:53:02,664 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:53:02,749 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:53:02,832 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:53:02,832 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:53:02,833 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:53:02,833 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:53:02,833 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:53:02,833 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:53:02,833 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:53:12,875 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:53:12,875 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:53:12,875 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:53:12,875 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:53:12,876 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:53:12,876 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:53:12,876 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 13:53:12,876 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 13:53:12,876 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 13:53:12,893 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:53:12,893 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 13:53:12,906 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 13:53:13,057 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 13:53:14,062 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 13:53:14,062 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 13:53:14,071 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 13:53:14,228 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 13:53:14,237 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 13:53:14,237 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 13:53:14,238 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 13:53:14,245 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 13:53:15,247 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 13:53:15,247 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 13:53:15,247 - wireless_ap_test - INFO - Closing browser context
2025-03-19 13:53:15,255 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 13:53:15,255 - wireless_ap_test - INFO - Closing browser
2025-03-19 13:53:15,784 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 13:53:18,802 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 13:53:18,808 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 13:53:18,809 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 13:53:19,648 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 13:53:19,779 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 13:53:19,863 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 13:53:20,149 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 13:53:20,150 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 13:53:20,151 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 13:53:21,071 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 13:53:21,071 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 13:53:21,071 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 13:53:21,228 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 13:53:21,229 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 13:53:21,296 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 13:53:21,296 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 13:53:21,296 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 13:53:21,340 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 13:53:21,755 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 13:53:21,826 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 13:53:21,826 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 13:53:21,826 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 13:53:22,155 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 13:53:22,155 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 13:53:24,520 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 13:53:24,520 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 13:53:24,605 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:53:24,606 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 13:53:24,606 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 13:53:24,606 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt copy and dts copy
2025-03-19 13:53:25,499 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:53:25,499 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:53:25,499 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:53:25,499 - wireless_ap_test - INFO - MQTT Process Check: 5824 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 5982 root      1920 S    ash -c ps | grep mosquitto
 5984 root      1920 S    grep mosquitto
2025-03-19 13:53:25,522 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:53:25,522 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:53:25,522 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:53:25,611 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 13:53:25,697 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:53:25,697 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 13:53:25,697 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 13:53:25,697 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 13:53:25,697 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 13:53:25,697 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 13:53:25,697 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:53:35,739 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:53:35,739 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:53:35,739 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:53:35,739 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 13:53:35,740 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:53:35,740 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 13:53:35,740 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 13:53:35,740 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 13:53:36,496 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 13:53:36,496 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 13:53:36,527 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 13:53:36,527 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 13:53:36,527 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 13:53:36,527 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 13:53:36,578 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 13:53:36,629 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 13:53:36,684 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 13:53:36,738 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 13:53:37,040 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 13:53:37,040 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts copy
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt copy
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt copy
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 13:53:37,041 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:53:37,042 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 13:53:37,042 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 13:53:37,042 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 13:53:37,042 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:53:37,299 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:53:37,299 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 13:53:37,299 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 13:53:37,420 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 13:53:37,420 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 13:53:37,517 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts copy
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 13:53:37,518 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 13:53:37,519 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 13:53:37,519 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 13:53:37,519 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 13:53:37,772 - wireless_ap_test - INFO - API authentication successful
2025-03-19 13:53:37,772 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 13:53:37,772 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 13:53:37,772 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 13:53:37,772 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 13:53:37,772 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 13:53:37,772 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 13:53:37,772 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-19 13:53:37,772 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 13:53:37,772 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-19 13:53:37,940 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 13:53:37,940 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 13:53:37,940 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 13:53:38,029 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-19 13:53:38,029 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-19 13:53:38,029 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-19 13:53:38,029 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-19 13:53:38,029 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-19 13:53:38,029 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-19 13:53:38,029 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-19 13:53:38,181 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-19 13:53:38,181 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 13:53:38,181 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-19 13:53:38,181 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-19 13:53:38,324 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-19 13:53:38,324 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 13:53:38,324 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-19 13:53:38,324 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-19 13:53:38,475 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-19 13:53:38,476 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 13:53:38,476 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 13:53:38,476 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 13:53:38,476 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 13:53:38,476 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 13:53:38,476 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/certificates/ca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 13:53:38,746 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": false, "errors": [{"source": "mqtt_certfile", "code": 103, "value": "/etc/certificates/ca-certificates.crt", "error": "Provided file does not exist in the device", "section": "2"}]}, {"success": false, "errors": [{"source": "plugin", "code": 103, "error": "Data sender output (id = 2) is missing required option: plugin", "section": "2"}]}]}
2025-03-19 13:53:38,746 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 13:53:38,922 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 13:53:38,922 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 13:53:38,922 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 13:53:38,922 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 13:53:38,922 - wireless_ap_test - INFO - Running validation for api tests with mqtt copy and dts copy
2025-03-19 13:53:39,793 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 13:53:39,793 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 13:53:39,793 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 13:53:39,793 - wireless_ap_test - INFO - MQTT Process Check: 6123 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 6200 root      1920 S    ash -c ps | grep mosquitto
 6202 root      1920 S    grep mosquitto
2025-03-19 13:53:39,814 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 13:53:39,814 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 13:53:39,814 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 13:53:39,897 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 13:53:39,979 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 13:53:39,979 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 13:53:39,979 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 13:53:39,980 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 13:53:39,980 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 13:53:39,980 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 13:53:39,980 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 13:53:50,024 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 13:53:50,024 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 13:53:50,024 - wireless_ap_test - INFO - Validation Results:
2025-03-19 13:53:50,024 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 13:53:50,024 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 13:53:50,024 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 13:53:50,024 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 13:53:50,025 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 13:53:50,025 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 13:53:50,025 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 13:53:50,025 - wireless_ap_test - INFO - Delete request:
2025-03-19 13:53:50,025 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 13:53:50,099 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 13:53:50,099 - wireless_ap_test - INFO - API connection closed
2025-03-19 13:53:50,099 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts copy
2025-03-19 13:53:50,099 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 13:53:50,099 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt copy
2025-03-19 13:53:50,099 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 13:53:50,100 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 16, Failed: 2
2025-03-19 13:53:50,100 - wireless_ap_test - INFO - 
========================================
2025-03-19 13:53:50,100 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 13:53:50,100 - wireless_ap_test - INFO - ========================================
2025-03-19 13:53:50,100 - wireless_ap_test - INFO - 9. validation_api_mqtt_dts: Validation failed
2025-03-19 13:53:50,100 - wireless_ap_test - INFO - 18. validation_api_mqtt copy_dts copy: Validation failed
2025-03-19 13:53:50,100 - wireless_ap_test - INFO - ========================================
2025-03-19 14:13:19,374 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 14:13:19,375 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 14:13:19,375 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 14:13:19,375 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 14:13:19,376 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 14:13:19,376 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 14:13:19,376 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:13:19,682 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:13:20,652 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:13:21,917 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:13:21,920 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:13:21,920 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:13:21,921 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:13:29,728 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 14:13:29,729 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 14:13:29,729 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 14:13:29,729 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 14:13:29,729 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 14:13:29,730 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 14:13:29,730 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:13:30,045 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:13:31,111 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:13:32,591 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:13:32,598 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:13:32,599 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:13:32,600 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:13:34,571 - wireless_ap_test - INFO - Filled username
2025-03-19 14:13:34,713 - wireless_ap_test - INFO - Filled password
2025-03-19 14:13:34,918 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:13:35,610 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:13:36,617 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:13:38,293 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:13:38,293 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:13:39,389 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:13:39,389 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:13:40,583 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:13:41,586 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:13:41,587 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:13:42,779 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:13:42,809 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:13:42,852 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:13:42,889 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:13:43,043 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:13:43,185 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:13:45,388 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:13:45,389 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:13:45,389 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:13:45,390 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:13:46,708 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:13:46,709 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:13:48,035 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:13:48,035 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:13:50,045 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 14:13:50,069 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:13:50,070 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:13:50,925 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:13:51,000 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 14:13:51,000 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 14:13:51,000 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 14:13:51,000 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 14:13:51,000 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:13:51,000 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 14:13:51,014 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:13:51,014 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:13:51,026 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:13:51,182 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:13:52,187 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 14:13:52,187 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 14:13:52,199 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 14:13:52,347 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 14:13:52,355 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 14:13:52,355 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 14:13:52,356 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:13:52,363 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:13:53,364 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:13:53,365 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:13:53,365 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:13:53,377 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:13:53,378 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:13:54,031 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:13:57,048 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:13:57,054 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 14:13:57,054 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:13:57,054 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:13:57,054 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:13:57,055 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:13:57,055 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:13:57,055 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:13:57,055 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:13:57,055 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:13:57,055 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:13:57,055 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:13:57,056 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:13:57,908 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:13:58,038 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:13:58,123 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:13:58,417 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:13:58,417 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:13:58,417 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 14:13:58,417 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:13:58,418 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:13:58,418 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:13:58,418 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:13:58,418 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:13:58,418 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:13:58,418 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:13:58,418 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:13:58,418 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:13:58,418 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:13:58,418 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:13:59,322 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 14:13:59,322 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:13:59,323 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:13:59,470 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:13:59,470 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:13:59,534 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 14:13:59,534 - wireless_ap_test - INFO - Configuring data collection with type: Base
2025-03-19 14:13:59,534 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:13:59,578 - wireless_ap_test - INFO -  VALUES: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:13:59,705 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 14:13:59,774 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 14:13:59,774 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:13:59,774 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:14:00,091 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 14:14:00,091 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:14:34,382 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 14:14:34,382 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 14:14:34,382 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 14:14:34,383 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 14:14:34,383 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 14:14:34,383 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 14:14:34,383 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:14:34,856 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:14:36,141 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:14:38,047 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:14:38,057 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:14:38,058 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:14:38,059 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:14:40,146 - wireless_ap_test - INFO - Filled username
2025-03-19 14:14:40,305 - wireless_ap_test - INFO - Filled password
2025-03-19 14:14:40,543 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:14:41,212 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:14:42,220 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:14:43,750 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:14:43,750 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:14:44,926 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:14:44,927 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:14:46,156 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:14:47,158 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:14:47,158 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:14:48,353 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:14:48,376 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:14:48,405 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:14:48,440 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:14:48,615 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:14:48,764 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:14:50,995 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:14:50,995 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:14:50,996 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:14:50,997 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:14:52,327 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:14:52,327 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:14:53,676 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:14:53,676 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:14:55,684 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 14:14:55,684 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:14:55,684 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:14:56,608 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:14:57,785 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 14:14:58,287 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 14:14:58,287 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 14:14:59,712 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 14:14:59,713 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 14:14:59,713 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 14:15:02,251 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 14:15:02,251 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 14:15:02,251 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 14:15:02,251 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 14:15:03,154 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 14:15:03,655 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:15:09,338 - wireless_ap_test - ERROR - Failed to configure values: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"checkbox-data_sender.input.3.edit.3_members-data_sender.input.3.edit.3_members-select-time-checkbox\"]") to be visible

2025-03-19 14:15:09,338 - wireless_ap_test - ERROR - Failed to configure data collection: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"checkbox-data_sender.input.3.edit.3_members-data_sender.input.3.edit.3_members-select-time-checkbox\"]") to be visible

2025-03-19 14:15:09,338 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"checkbox-data_sender.input.3.edit.3_members-data_sender.input.3.edit.3_members-select-time-checkbox\"]") to be visible

2025-03-19 14:15:09,338 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"checkbox-data_sender.input.3.edit.3_members-data_sender.input.3.edit.3_members-select-time-checkbox\"]") to be visible

2025-03-19 14:15:09,338 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"checkbox-data_sender.input.3.edit.3_members-data_sender.input.3.edit.3_members-select-time-checkbox\"]") to be visible

2025-03-19 14:15:09,338 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:15:09,338 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender#id=5
2025-03-19 14:15:09,363 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:15:09,363 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:15:09,377 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:15:14,480 - wireless_ap_test - ERROR - Failed to click dropdown with [test-id="header-main-expand-dropdown"]: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first
  -     - locator resolved to <div data-open="false" data-v-67e6f636="" test-id="header-main-expand-dropdown">…</div>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 100ms
  -     9 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 500ms

2025-03-19 14:15:14,486 - wireless_ap_test - INFO - Checking dropdown selector: button[test-id="header-main-expand-dropdown"]
2025-03-19 14:15:14,486 - wireless_ap_test - INFO - Dropdown button count: 0
2025-03-19 14:15:14,500 - wireless_ap_test - INFO - Checking dropdown selector: div[test-id="header-main-expand-dropdown"] button
2025-03-19 14:15:14,501 - wireless_ap_test - INFO - Dropdown button count: 2
2025-03-19 14:15:14,533 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("div[test-id=\"header-main-expand-dropdown\"] button").first

2025-03-19 14:15:19,634 - wireless_ap_test - ERROR - Failed to click dropdown with div[test-id="header-main-expand-dropdown"] button: Locator.click: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("div[test-id=\"header-main-expand-dropdown\"] button").first
  -     - locator resolved to <button type="button" data-v-67e6f636="" class="max-lg:hidden group/icon flex items-center gap-1 rounded-full hover:bg-gray-tlt-500">…</button>
  -   - attempting click action
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -     - waiting 20ms
  -     2 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 100ms
  -     9 × waiting for element to be visible, enabled and stable
  -       - element is visible, enabled and stable
  -       - scrolling into view if needed
  -       - done scrolling
  -       - <div data-v-b5ad5fc5="" test-id="modal-backdrop" class="fixed inset-0 z-20 grid grid-cols-1 place-items-center bg-black/60">…</div> intercepts pointer events
  -     - retrying click action
  -       - waiting 500ms

2025-03-19 14:15:19,634 - wireless_ap_test - ERROR - Could not click user dropdown
2025-03-19 14:15:19,653 - wireless_ap_test - ERROR - Overall logout process failed: Failed to open user dropdown
2025-03-19 14:15:19,654 - wireless_ap_test - ERROR - Error during logout: Failed to open user dropdown
2025-03-19 14:15:19,654 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:15:19,666 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:15:20,666 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:15:20,666 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:15:20,667 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:15:20,676 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:15:20,676 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:15:21,546 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:15:24,566 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:15:24,573 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 14:15:24,573 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:15:24,573 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:15:24,573 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:15:24,573 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:15:24,573 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:15:24,574 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:15:24,574 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:15:24,574 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:15:24,574 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:15:24,574 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:15:24,574 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:15:25,476 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:15:25,604 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:15:25,686 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:15:25,981 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:15:25,982 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:15:25,982 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 14:15:25,982 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:15:25,982 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:15:25,983 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:15:25,983 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:15:25,983 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:15:25,983 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:15:25,983 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:15:25,983 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:15:25,983 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:15:25,983 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:15:25,983 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:15:26,897 - wireless_ap_test - INFO - Using section IDs: collection=6, output=7, input=8
2025-03-19 14:15:26,897 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:15:26,898 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:15:27,048 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:15:27,048 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:15:27,113 - wireless_ap_test - INFO - Configured period settings via SSH for section 6
2025-03-19 14:15:27,113 - wireless_ap_test - INFO - Configuring data collection with type: Base
2025-03-19 14:15:27,113 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:15:27,157 - wireless_ap_test - INFO -  VALUES: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:15:27,287 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 8
2025-03-19 14:15:27,357 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 6
2025-03-19 14:15:27,357 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:15:27,358 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:15:27,674 - wireless_ap_test - INFO - Configured server settings via SSH for section 7
2025-03-19 14:15:27,675 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:15:29,976 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 14:15:29,976 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 14:15:30,059 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:15:30,059 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 14:15:30,059 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 14:15:30,059 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 14:15:30,951 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:15:30,952 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:15:30,952 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:15:30,952 - wireless_ap_test - INFO - MQTT Process Check: 7630 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 7767 root      1920 S    ash -c ps | grep mosquitto
 7769 root      1920 S    grep mosquitto
2025-03-19 14:15:30,983 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 5
2025-03-19 14:15:30,983 - wireless_ap_test - INFO - Section 5 is of type: collection
2025-03-19 14:15:30,983 - wireless_ap_test - INFO - Final DTS sections: {'collection': '5'}
2025-03-19 14:15:31,071 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.5.period='60'
2025-03-19 14:15:31,155 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.5.name='test_instance3'
2025-03-19 14:15:31,155 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 14:15:31,155 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 14:15:31,155 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 14:15:31,155 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 14:15:31,155 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 14:15:31,155 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:15:41,251 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:15:41,251 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:15:41,251 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:15:41,251 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 14:15:41,251 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:15:41,251 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 14:15:41,251 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 14:15:41,252 - wireless_ap_test - INFO - SSH validation completed with success: False
2025-03-19 14:15:41,252 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 14:15:41,992 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 14:15:41,992 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 14:15:42,014 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 14:15:42,014 - wireless_ap_test - INFO - Added section 5 (type: collection) for deletion
2025-03-19 14:15:42,014 - wireless_ap_test - INFO - Added section 7 (type: input) for deletion
2025-03-19 14:15:42,014 - wireless_ap_test - INFO - Added section 6 (type: output) for deletion
2025-03-19 14:15:42,014 - wireless_ap_test - INFO - Added section 8 (type: input) for deletion
2025-03-19 14:15:42,060 - wireless_ap_test - INFO - Deleted data_sender.7 (type: input)
2025-03-19 14:15:42,104 - wireless_ap_test - INFO - Deleted data_sender.5 (type: collection)
2025-03-19 14:15:42,148 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 14:15:42,191 - wireless_ap_test - INFO - Deleted data_sender.6 (type: output)
2025-03-19 14:15:42,235 - wireless_ap_test - INFO - Deleted data_sender.8 (type: input)
2025-03-19 14:15:42,488 - wireless_ap_test - INFO - Cleaned up 5 Data to Server sections
2025-03-19 14:15:42,488 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 14:15:42,489 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 14:15:42,489 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 14:15:42,489 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 14:15:42,489 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 14:15:42,489 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt
2025-03-19 14:15:42,489 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 14:15:42,489 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 14:15:42,489 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:15:42,489 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:15:42,490 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:15:42,490 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 14:15:42,490 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 14:15:42,490 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:15:42,490 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 14:15:42,490 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 14:15:42,490 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 14:15:42,490 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:15:42,758 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:15:42,758 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 14:15:42,758 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 14:15:42,883 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 14:15:42,883 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 14:15:42,975 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:15:42,975 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:15:42,975 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:15:42,975 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:15:42,975 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts
2025-03-19 14:15:42,975 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 14:15:42,976 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:15:43,235 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:15:43,235 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 14:15:43,235 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 14:15:43,235 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 14:15:43,235 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 14:15:43,236 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 14:15:43,236 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/documents/ca1-file.crt", "client_certificate": "/home/studentas/documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 14:15:43,236 - wireless_ap_test - INFO - Data type from basic config: Base
2025-03-19 14:15:43,236 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 14:15:43,236 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "Base", "type_settings": {}, "format_type": "JSON", "values": ["time", "local_time", "fw", "name", "id"]}
2025-03-19 14:15:43,454 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 14:15:43,454 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 14:15:43,454 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 14:15:43,581 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'Base', 'type_settings': {}, 'format_type': 'JSON', 'values': ['time', 'local_time', 'fw', 'name', 'id']}
2025-03-19 14:15:43,581 - wireless_ap_test - INFO - Values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:15:43,581 - wireless_ap_test - INFO - Type settings: {}
2025-03-19 14:15:43,581 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 14:15:43,581 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "members": ["time", "local_time", "fw", "name", "id"], "format": "json"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/ca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 14:15:43,810 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "id": "3", "format": "json", "members": ["time", "local_time", "fw", "name", "id"]}}, {"success": false, "errors": [{"source": "mqtt_certfile", "code": 103, "value": "/etc/ssl/ca-certificates.crt", "error": "File path can only start with: /etc/vuci-uploads/ or /etc/certificates/ or /etc/ssl/certs/", "section": "2"}]}, {"success": false, "errors": [{"source": "plugin", "code": 103, "error": "Data sender output (id = 2) is missing required option: plugin", "section": "2"}]}]}
2025-03-19 14:15:43,813 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 14:15:44,007 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 14:15:44,007 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 14:15:44,007 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:15:44,007 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 14:15:44,007 - wireless_ap_test - INFO - Running validation for api tests with mqtt and dts
2025-03-19 14:15:44,908 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:15:44,909 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:15:44,909 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:15:44,909 - wireless_ap_test - INFO - MQTT Process Check: 7916 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 7976 root      1920 S    ash -c ps | grep mosquitto
 7978 root      1920 S    grep mosquitto
2025-03-19 14:15:44,930 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:15:44,930 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:15:44,930 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:15:45,013 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 14:15:45,093 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:15:45,094 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 14:15:45,094 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 14:15:45,094 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 14:15:45,094 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 14:15:45,094 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 14:15:45,094 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:15:55,135 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:15:55,135 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:15:55,135 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:15:55,135 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 14:15:55,135 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:15:55,135 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 14:15:55,135 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 14:15:55,136 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 14:15:55,136 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 14:15:55,136 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 14:15:55,136 - wireless_ap_test - INFO - Delete request:
2025-03-19 14:15:55,136 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 14:15:55,207 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 14:15:55,207 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:15:55,207 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts
2025-03-19 14:15:55,207 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:15:55,208 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt
2025-03-19 14:15:55,208 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 14:15:55,208 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:15:55,491 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:15:56,406 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:15:57,562 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:15:57,562 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:15:57,562 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:15:57,562 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:15:59,193 - wireless_ap_test - INFO - Filled username
2025-03-19 14:15:59,317 - wireless_ap_test - INFO - Filled password
2025-03-19 14:15:59,478 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:16:00,100 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:16:01,103 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:16:02,361 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:16:02,361 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:16:03,365 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:16:03,365 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:16:04,551 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:16:05,552 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:16:05,552 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:16:06,735 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:16:06,772 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:16:06,804 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:16:06,831 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:16:06,986 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:16:07,141 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:16:09,344 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:16:09,344 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:16:09,344 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:16:09,344 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:16:10,669 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:16:10,669 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:16:11,919 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:16:11,919 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:16:13,926 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 14:16:13,926 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:16:13,926 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:16:14,761 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:16:15,930 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 14:16:16,432 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 14:16:16,432 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 14:16:17,807 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 14:16:17,808 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 14:16:17,808 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 14:16:20,288 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 14:16:20,288 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 14:16:20,288 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 14:16:24,890 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 14:16:24,890 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 14:16:24,890 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 14:16:25,763 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 14:16:26,266 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 14:16:29,148 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 14:16:31,325 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 14:16:31,325 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 14:16:33,756 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 14:16:35,566 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 14:16:37,785 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 14:16:37,785 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 14:16:45,320 - wireless_ap_test - INFO - Saving configuration
2025-03-19 14:16:50,554 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 14:16:50,554 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 14:16:50,554 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 14:16:51,407 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:16:51,407 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:16:51,408 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:16:51,408 - wireless_ap_test - INFO - MQTT Process Check: 7916 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 8370 root      1920 S    ash -c ps | grep mosquitto
 8372 root      1920 S    grep mosquitto
2025-03-19 14:16:51,430 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:16:51,430 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:16:51,430 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:16:51,516 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:16:51,602 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:16:51,603 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:16:51,603 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:16:51,603 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:16:51,603 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:16:51,603 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:16:51,603 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:17:01,644 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:17:01,644 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:17:01,644 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:17:01,644 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:17:01,644 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:17:01,644 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:17:01,645 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 14:17:01,645 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:17:01,645 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 14:17:01,659 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:17:01,659 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:17:01,673 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:17:01,817 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:17:02,822 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 14:17:02,822 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 14:17:02,832 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 14:17:02,980 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 14:17:02,988 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 14:17:02,988 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 14:17:02,988 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:17:02,996 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:17:03,997 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:17:03,997 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:17:03,998 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:17:04,005 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:17:04,005 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:17:04,521 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:17:07,540 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:17:07,545 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 14:17:07,545 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:17:07,545 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:17:07,545 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:17:07,546 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:17:07,546 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 14:17:07,546 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:17:07,546 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:17:07,546 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:17:07,546 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:17:07,546 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:17:07,546 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:17:08,380 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:17:08,519 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:17:08,606 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:17:08,906 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:17:08,906 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:17:08,907 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:17:09,779 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 14:17:09,780 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:17:09,780 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:17:09,935 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:17:09,935 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:17:10,003 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 14:17:10,003 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 14:17:10,003 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:17:10,049 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 14:17:10,476 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 14:17:10,549 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 14:17:10,549 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:17:10,549 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:17:10,880 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 14:17:10,880 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:17:13,248 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 14:17:13,248 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 14:17:13,340 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:17:13,340 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 14:17:13,340 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 14:17:13,340 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt copy and dts copy
2025-03-19 14:17:14,269 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:17:14,269 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:17:14,269 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:17:14,269 - wireless_ap_test - INFO - MQTT Process Check: 8439 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 8606 root      1920 S    ash -c ps | grep mosquitto
 8608 root      1920 S    grep mosquitto
2025-03-19 14:17:14,292 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:17:14,292 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:17:14,292 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:17:14,387 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:17:14,476 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:17:14,476 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:17:14,476 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:17:14,476 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:17:14,476 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:17:14,476 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:17:14,476 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:17:24,531 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:17:24,532 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:17:24,532 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:17:24,532 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:17:24,532 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:17:24,532 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:17:24,532 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 14:17:24,532 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 14:17:25,300 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 14:17:25,300 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 14:17:25,326 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 14:17:25,326 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 14:17:25,326 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 14:17:25,326 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 14:17:25,379 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 14:17:25,431 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 14:17:25,478 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 14:17:25,525 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 14:17:25,783 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 14:17:25,783 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 14:17:25,784 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 14:17:25,784 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts copy
2025-03-19 14:17:25,784 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 14:17:25,784 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt copy
2025-03-19 14:17:25,784 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt copy
2025-03-19 14:17:25,784 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 14:17:25,784 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 14:17:25,784 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:17:25,784 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:17:25,784 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 14:17:25,785 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 14:17:25,785 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 14:17:25,785 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:17:25,785 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 14:17:25,785 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 14:17:25,785 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 14:17:25,785 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:17:26,043 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:17:26,043 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 14:17:26,043 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 14:17:26,163 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 14:17:26,163 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts copy
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 14:17:26,257 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 14:17:26,258 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:17:26,258 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 14:17:26,258 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 14:17:26,258 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 14:17:26,258 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:17:26,501 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:17:26,501 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 14:17:26,501 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 14:17:26,501 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 14:17:26,501 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 14:17:26,501 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 14:17:26,501 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 14:17:26,501 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-19 14:17:26,501 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 14:17:26,501 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-19 14:17:26,688 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 14:17:26,688 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 14:17:26,688 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 14:17:26,776 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-19 14:17:26,777 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-19 14:17:26,777 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-19 14:17:26,777 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-19 14:17:26,777 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-19 14:17:26,777 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-19 14:17:26,777 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-19 14:17:26,956 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-19 14:17:26,956 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 14:17:26,956 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-19 14:17:26,956 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-19 14:17:27,121 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-19 14:17:27,122 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 14:17:27,122 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-19 14:17:27,122 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-19 14:17:27,283 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-19 14:17:27,283 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 14:17:27,284 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 14:17:27,284 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 14:17:27,284 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 14:17:27,284 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 14:17:27,284 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/ca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 14:17:27,536 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": false, "errors": [{"source": "mqtt_certfile", "code": 103, "value": "/etc/ssl/ca-certificates.crt", "error": "File path can only start with: /etc/vuci-uploads/ or /etc/certificates/ or /etc/ssl/certs/", "section": "2"}]}, {"success": false, "errors": [{"source": "plugin", "code": 103, "error": "Data sender output (id = 2) is missing required option: plugin", "section": "2"}]}]}
2025-03-19 14:17:27,536 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 14:17:27,706 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 14:17:27,707 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 14:17:27,707 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:17:27,707 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 14:17:27,707 - wireless_ap_test - INFO - Running validation for api tests with mqtt copy and dts copy
2025-03-19 14:17:28,567 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:17:28,567 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:17:28,567 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:17:28,567 - wireless_ap_test - INFO - MQTT Process Check: 8741 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 8818 root      1920 S    ash -c ps | grep mosquitto
 8820 root      1920 S    grep mosquitto
2025-03-19 14:17:28,589 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:17:28,589 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:17:28,589 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:17:28,672 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 14:17:28,754 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:17:28,754 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 14:17:28,754 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 14:17:28,754 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 14:17:28,754 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 14:17:28,754 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 14:17:28,754 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:17:38,796 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:17:38,796 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:17:38,796 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:17:38,796 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 14:17:38,796 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:17:38,796 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 14:17:38,796 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 14:17:38,797 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 14:17:38,797 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 14:17:38,797 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 14:17:38,797 - wireless_ap_test - INFO - Delete request:
2025-03-19 14:17:38,797 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 14:17:38,868 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 14:17:38,869 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:17:38,869 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts copy
2025-03-19 14:17:38,869 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:17:38,869 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt copy
2025-03-19 14:17:38,869 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 14:17:38,870 - wireless_ap_test - INFO - Test execution completed. Total: 17, Passed: 13, Failed: 4
2025-03-19 14:17:38,870 - wireless_ap_test - INFO - 
========================================
2025-03-19 14:17:38,870 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 14:17:38,870 - wireless_ap_test - INFO - ========================================
2025-03-19 14:17:38,870 - wireless_ap_test - INFO - 2. data_to_server_gui_data_to_server: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("[test-id=\"checkbox-data_sender.input.3.edit.3_members-data_sender.input.3.edit.3_members-select-time-checkbox\"]") to be visible

2025-03-19 14:17:38,870 - wireless_ap_test - INFO - 5. validation_ssh_mqtt_dts: Validation failed
2025-03-19 14:17:38,870 - wireless_ap_test - INFO - 8. validation_api_mqtt_dts: Validation failed
2025-03-19 14:17:38,870 - wireless_ap_test - INFO - 17. validation_api_mqtt copy_dts copy: Validation failed
2025-03-19 14:17:38,870 - wireless_ap_test - INFO - ========================================
2025-03-19 14:20:19,938 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 14:20:19,938 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 14:20:19,939 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 14:20:19,939 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 14:20:19,939 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 14:20:19,939 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 14:20:19,939 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:20:20,242 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:20:21,218 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:20:22,371 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:20:22,379 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:20:22,380 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:20:22,380 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:20:24,072 - wireless_ap_test - INFO - Filled username
2025-03-19 14:20:24,199 - wireless_ap_test - INFO - Filled password
2025-03-19 14:20:24,359 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:20:24,992 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:20:25,997 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:20:27,228 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:20:27,228 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:20:28,203 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:20:28,203 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:20:29,380 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:20:30,382 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:20:30,383 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:20:31,555 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:20:31,584 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:20:31,608 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:20:31,631 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:20:31,772 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:20:31,917 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:20:34,128 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:20:34,128 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:20:34,129 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:20:34,129 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:20:35,410 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:20:35,411 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:20:36,651 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:20:36,651 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:20:38,658 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 14:20:38,658 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:20:38,658 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:20:39,552 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:20:40,730 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 14:20:41,232 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 14:20:41,232 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 14:20:42,617 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 14:20:42,617 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 14:20:42,618 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 14:20:44,996 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 14:20:44,996 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 14:20:44,996 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 14:20:44,996 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 14:20:45,875 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 14:20:46,378 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:20:50,195 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 14:20:52,357 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 14:20:52,357 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 14:20:54,737 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 14:20:56,503 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 14:20:58,728 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 14:20:58,728 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 14:21:06,239 - wireless_ap_test - INFO - Saving configuration
2025-03-19 14:21:11,505 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 14:21:11,505 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 14:21:11,505 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 14:21:12,369 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:21:12,370 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:21:12,370 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:21:12,370 - wireless_ap_test - INFO - MQTT Process Check: 8741 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 9269 root      1920 S    ash -c ps | grep mosquitto
 9271 root      1920 S    grep mosquitto
2025-03-19 14:21:12,392 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:21:12,392 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:21:12,393 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:21:12,478 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:21:12,560 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:21:12,560 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:21:12,560 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:21:12,560 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:21:12,560 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:21:12,560 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:21:12,560 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:21:22,614 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:21:22,614 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:21:22,614 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:21:22,614 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:21:22,614 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:21:22,614 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:21:22,614 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 14:21:22,615 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:21:22,615 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 14:21:22,628 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:21:22,628 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:21:22,641 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:21:22,802 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:21:23,808 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 14:21:23,808 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 14:21:23,818 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 14:21:23,968 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 14:21:23,985 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 14:21:23,986 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 14:21:23,986 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:21:23,994 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:21:24,994 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:21:24,994 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:21:24,994 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:21:25,002 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:21:25,003 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:21:25,538 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:21:28,556 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:21:28,562 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 14:21:28,562 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:21:28,562 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:21:28,562 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:21:28,562 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:21:28,562 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:21:28,563 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:21:28,563 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:21:28,563 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:21:28,563 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:21:28,563 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:21:28,564 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:21:29,398 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:21:29,526 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:21:29,608 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:21:29,892 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:21:29,892 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:21:29,892 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:21:29,893 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:21:30,769 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 14:21:30,769 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:21:30,769 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:21:30,921 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:21:30,921 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:21:30,985 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 14:21:30,986 - wireless_ap_test - INFO - Configuring data collection with type: Base
2025-03-19 14:21:30,986 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:21:31,028 - wireless_ap_test - INFO -  VALUES: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:21:31,155 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 14:21:31,225 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 14:21:31,225 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:21:31,225 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:21:31,543 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 14:21:31,543 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:21:33,897 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 14:21:33,897 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 14:21:33,980 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:21:33,980 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 14:21:33,980 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 14:21:33,980 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 14:21:34,875 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:21:34,875 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:21:34,875 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:21:34,875 - wireless_ap_test - INFO - MQTT Process Check: 9342 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 9485 root      1920 S    ash -c ps | grep mosquitto
 9487 root      1920 S    grep mosquitto
2025-03-19 14:21:34,898 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:21:34,898 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:21:34,898 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:21:34,986 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:21:35,069 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:21:35,069 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:21:35,070 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:21:35,070 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:21:35,070 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:21:35,070 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:21:35,070 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:21:45,110 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:21:45,110 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:21:45,110 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:21:45,110 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:21:45,111 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:21:45,111 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:21:45,111 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 14:21:45,111 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 14:21:45,849 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 14:21:45,849 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 14:21:45,873 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 14:21:45,873 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 14:21:45,873 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 14:21:45,873 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 14:21:45,921 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 14:21:45,968 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 14:21:46,016 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 14:21:46,061 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 14:21:46,316 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 14:21:46,316 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 14:21:46,316 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 14:21:46,316 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 14:21:46,317 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 14:21:46,317 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 14:21:46,317 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt
2025-03-19 14:21:46,317 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 14:21:46,317 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 14:21:46,317 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:21:46,317 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:21:46,317 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:21:46,317 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 14:21:46,318 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 14:21:46,318 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:21:46,318 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 14:21:46,318 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 14:21:46,318 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 14:21:46,318 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:21:46,575 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:21:46,575 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 14:21:46,576 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 14:21:46,699 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 14:21:46,699 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 14:21:46,802 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:21:46,802 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:21:46,802 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:21:46,802 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:21:46,802 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts
2025-03-19 14:21:46,802 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 14:21:46,802 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 14:21:46,802 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:21:46,802 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:21:46,802 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:21:46,803 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 14:21:46,803 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 14:21:46,803 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:21:46,803 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 14:21:46,803 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 14:21:46,803 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 14:21:46,803 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:21:47,104 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:21:47,104 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 14:21:47,104 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 14:21:47,104 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 14:21:47,104 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 14:21:47,104 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 14:21:47,104 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/documents/ca1-file.crt", "client_certificate": "/home/studentas/documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 14:21:47,104 - wireless_ap_test - INFO - Data type from basic config: Base
2025-03-19 14:21:47,104 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 14:21:47,105 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "Base", "type_settings": {}, "format_type": "JSON", "values": ["time", "local_time", "fw", "name", "id"]}
2025-03-19 14:21:47,289 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 14:21:47,289 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 14:21:47,289 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 14:21:47,377 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'Base', 'type_settings': {}, 'format_type': 'JSON', 'values': ['time', 'local_time', 'fw', 'name', 'id']}
2025-03-19 14:21:47,377 - wireless_ap_test - INFO - Values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:21:47,377 - wireless_ap_test - INFO - Type settings: {}
2025-03-19 14:21:47,377 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 14:21:47,377 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "members": ["time", "local_time", "fw", "name", "id"], "format": "json"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certsca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 14:21:47,602 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "id": "3", "format": "json", "members": ["time", "local_time", "fw", "name", "id"]}}, {"success": false, "errors": [{"source": "mqtt_certfile", "code": 103, "value": "/etc/ssl/certsca-certificates.crt", "error": "File path can only start with: /etc/vuci-uploads/ or /etc/certificates/ or /etc/ssl/certs/", "section": "2"}]}, {"success": false, "errors": [{"source": "plugin", "code": 103, "error": "Data sender output (id = 2) is missing required option: plugin", "section": "2"}]}]}
2025-03-19 14:21:47,602 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 14:21:47,786 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 14:21:47,787 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 14:21:47,787 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:21:47,787 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 14:21:47,787 - wireless_ap_test - INFO - Running validation for api tests with mqtt and dts
2025-03-19 14:21:48,677 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:21:48,677 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:21:48,677 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:21:48,678 - wireless_ap_test - INFO - MQTT Process Check: 9632 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
 9681 root      1920 S    ash -c ps | grep mosquitto
 9685 root      1920 S    grep mosquitto
2025-03-19 14:21:48,699 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:21:48,699 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:21:48,699 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:21:48,794 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 14:21:48,875 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:21:48,875 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 14:21:48,875 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 14:21:48,875 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 14:21:48,875 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 14:21:48,875 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 14:21:48,875 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:21:58,918 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:21:58,918 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:21:58,919 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:21:58,919 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 14:21:58,919 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:21:58,919 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 14:21:58,919 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 14:21:58,919 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 14:21:58,919 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 14:21:58,919 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 14:21:58,919 - wireless_ap_test - INFO - Delete request:
2025-03-19 14:21:58,920 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 14:21:58,991 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 14:21:58,991 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:21:58,991 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts
2025-03-19 14:21:58,991 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:21:58,991 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt
2025-03-19 14:21:58,991 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 14:21:58,991 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:21:59,255 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:22:00,150 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:22:01,364 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:22:01,365 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:22:01,365 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:22:01,365 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:22:02,933 - wireless_ap_test - INFO - Filled username
2025-03-19 14:22:03,057 - wireless_ap_test - INFO - Filled password
2025-03-19 14:22:03,221 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:22:03,855 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:22:04,858 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:22:06,119 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:22:06,119 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:22:07,106 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:22:07,106 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:22:08,289 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:22:09,291 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:22:09,292 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:22:10,462 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:22:10,524 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:22:10,582 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:22:10,633 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:22:10,779 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:22:10,914 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:22:13,114 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:22:13,114 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:22:13,114 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:22:13,114 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:22:14,413 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:22:14,413 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:22:15,668 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:22:15,668 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:22:17,675 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 14:22:17,675 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:22:17,675 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:22:18,612 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:22:19,781 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 14:22:20,282 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 14:22:20,282 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 14:22:21,651 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 14:22:21,651 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 14:22:21,652 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 14:22:24,153 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 14:22:24,154 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 14:22:24,154 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 14:22:28,726 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 14:22:28,726 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 14:22:28,726 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 14:22:29,598 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 14:22:30,100 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 14:22:33,014 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 14:22:35,194 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 14:22:35,194 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 14:22:37,599 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 14:22:39,359 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 14:22:41,574 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 14:22:41,574 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 14:22:49,099 - wireless_ap_test - INFO - Saving configuration
2025-03-19 14:22:54,332 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 14:22:54,333 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 14:22:54,333 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 14:22:55,184 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:22:55,184 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:22:55,184 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:22:55,184 - wireless_ap_test - INFO - MQTT Process Check: 9632 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
10084 root      1920 S    ash -c ps | grep mosquitto
10086 root      1920 S    grep mosquitto
2025-03-19 14:22:55,206 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:22:55,206 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:22:55,206 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:22:55,293 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:22:55,376 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:22:55,376 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:22:55,376 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:22:55,376 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:22:55,376 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:22:55,376 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:22:55,376 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:23:05,425 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:23:05,426 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:23:05,426 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:23:05,426 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:23:05,426 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:23:05,426 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:23:05,426 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 14:23:05,426 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:23:05,426 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 14:23:05,441 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:23:05,442 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:23:05,457 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:23:05,609 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:23:06,614 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 14:23:06,614 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 14:23:06,624 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 14:23:06,776 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 14:23:06,786 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 14:23:06,786 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 14:23:06,786 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:23:06,794 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:23:07,795 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:23:07,795 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:23:07,795 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:23:07,802 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:23:07,802 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:23:08,310 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:23:11,330 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:23:11,336 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 14:23:11,336 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:23:11,336 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:23:11,336 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:23:11,337 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:23:11,337 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 14:23:11,337 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:23:11,337 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:23:11,337 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:23:11,337 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:23:11,337 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:23:11,337 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:23:12,159 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:23:12,298 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:23:12,390 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:23:12,689 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:23:12,689 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 14:23:12,689 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 14:23:12,689 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:23:12,689 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:23:12,689 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:23:12,690 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:23:12,690 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 14:23:12,690 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:23:12,690 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:23:12,690 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:23:12,690 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:23:12,690 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:23:12,690 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:23:13,560 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 14:23:13,560 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:23:13,560 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:23:13,713 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:23:13,713 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:23:13,777 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 14:23:13,777 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 14:23:13,777 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:23:13,819 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 14:23:14,247 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 14:23:14,323 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 14:23:14,323 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:23:14,323 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:23:14,657 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 14:23:14,657 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:23:17,022 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 14:23:17,022 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 14:23:17,109 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:23:17,110 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 14:23:17,110 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 14:23:17,110 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt copy and dts copy
2025-03-19 14:23:17,979 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:23:17,979 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:23:17,979 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:23:17,980 - wireless_ap_test - INFO - MQTT Process Check: 10153 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
10312 root      1920 S    ash -c ps | grep mosquitto
10314 root      1920 R    grep mosquitto
2025-03-19 14:23:18,002 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:23:18,002 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:23:18,002 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:23:18,092 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:23:18,177 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:23:18,178 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:23:18,178 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:23:18,178 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:23:18,178 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:23:18,178 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:23:18,178 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:23:28,219 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:23:28,220 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:23:28,220 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:23:28,220 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:23:28,220 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:23:28,220 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:23:28,220 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 14:23:28,220 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 14:23:28,960 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 14:23:28,960 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 14:23:28,984 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 14:23:28,984 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 14:23:28,984 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 14:23:28,984 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 14:23:29,037 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 14:23:29,087 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 14:23:29,134 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 14:23:29,179 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 14:23:29,438 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 14:23:29,438 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 14:23:29,438 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 14:23:29,438 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts copy
2025-03-19 14:23:29,438 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 14:23:29,438 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt copy
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt copy
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 14:23:29,439 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:23:29,692 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:23:29,692 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 14:23:29,692 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 14:23:29,812 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 14:23:29,812 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 14:23:29,903 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts copy
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:23:29,904 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 14:23:29,905 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 14:23:29,905 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 14:23:29,905 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:23:30,145 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:23:30,145 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 14:23:30,145 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 14:23:30,145 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 14:23:30,145 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 14:23:30,145 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 14:23:30,146 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 14:23:30,146 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-19 14:23:30,146 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 14:23:30,146 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-19 14:23:30,325 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 14:23:30,325 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 14:23:30,325 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 14:23:30,415 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-19 14:23:30,415 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-19 14:23:30,416 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-19 14:23:30,416 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-19 14:23:30,416 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-19 14:23:30,416 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-19 14:23:30,416 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-19 14:23:30,591 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-19 14:23:30,591 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 14:23:30,591 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-19 14:23:30,591 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-19 14:23:30,742 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-19 14:23:30,742 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 14:23:30,742 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-19 14:23:30,742 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-19 14:23:30,902 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-19 14:23:30,903 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 14:23:30,903 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 14:23:30,903 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 14:23:30,903 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 14:23:30,903 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 14:23:30,903 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certsca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 14:23:31,158 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": false, "errors": [{"source": "mqtt_certfile", "code": 103, "value": "/etc/ssl/certsca-certificates.crt", "error": "File path can only start with: /etc/vuci-uploads/ or /etc/certificates/ or /etc/ssl/certs/", "section": "2"}]}, {"success": false, "errors": [{"source": "plugin", "code": 103, "error": "Data sender output (id = 2) is missing required option: plugin", "section": "2"}]}]}
2025-03-19 14:23:31,158 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 14:23:31,331 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 14:23:31,331 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 14:23:31,331 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:23:31,331 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 14:23:31,331 - wireless_ap_test - INFO - Running validation for api tests with mqtt copy and dts copy
2025-03-19 14:23:32,195 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:23:32,195 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:23:32,195 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:23:32,195 - wireless_ap_test - INFO - MQTT Process Check: 10463 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
10530 root      1920 S    ash -c ps | grep mosquitto
10532 root      1920 S    grep mosquitto
2025-03-19 14:23:32,216 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:23:32,216 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:23:32,216 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:23:32,302 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 14:23:32,382 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:23:32,382 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 14:23:32,382 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 14:23:32,382 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 14:23:32,382 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 14:23:32,383 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 14:23:32,383 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:23:42,424 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:23:42,424 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:23:42,424 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:23:42,424 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 14:23:42,424 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:23:42,424 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 14:23:42,424 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 14:23:42,425 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 14:23:42,425 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 14:23:42,425 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 14:23:42,425 - wireless_ap_test - INFO - Delete request:
2025-03-19 14:23:42,425 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 14:23:42,502 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 14:23:42,502 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:23:42,502 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts copy
2025-03-19 14:23:42,502 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:23:42,502 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt copy
2025-03-19 14:23:42,502 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 14:23:42,503 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 16, Failed: 2
2025-03-19 14:23:42,503 - wireless_ap_test - INFO - 
========================================
2025-03-19 14:23:42,503 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 14:23:42,503 - wireless_ap_test - INFO - ========================================
2025-03-19 14:23:42,503 - wireless_ap_test - INFO - 9. validation_api_mqtt_dts: Validation failed
2025-03-19 14:23:42,503 - wireless_ap_test - INFO - 18. validation_api_mqtt copy_dts copy: Validation failed
2025-03-19 14:23:42,503 - wireless_ap_test - INFO - ========================================
2025-03-19 14:24:34,638 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 14:24:34,638 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 14:24:34,638 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 14:24:34,639 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 14:24:34,639 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 14:24:34,639 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 14:24:34,639 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:24:34,941 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:24:35,916 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:24:37,072 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:24:37,077 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:24:37,078 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:24:37,078 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:24:38,661 - wireless_ap_test - INFO - Filled username
2025-03-19 14:24:38,788 - wireless_ap_test - INFO - Filled password
2025-03-19 14:24:38,951 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:24:39,598 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:24:40,601 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:24:41,812 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:24:41,812 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:24:42,757 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:24:42,757 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:24:43,949 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:24:44,952 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:24:44,952 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:24:46,138 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:24:46,169 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:24:46,200 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:24:46,234 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:24:46,393 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:24:46,531 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:24:48,727 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:24:48,727 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:24:48,728 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:24:48,728 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:24:50,091 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:24:50,092 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:24:51,314 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:24:51,314 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:24:53,321 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 14:24:53,321 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:24:53,321 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:24:54,147 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:24:55,324 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 14:24:55,828 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 14:24:55,828 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 14:24:57,216 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 14:24:57,216 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 14:24:57,216 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 14:24:59,601 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 14:24:59,601 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 14:24:59,601 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 14:24:59,601 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 14:25:00,461 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 14:25:00,963 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:25:04,757 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 14:25:06,918 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 14:25:06,918 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 14:25:09,313 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 14:25:11,072 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 14:25:13,289 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 14:25:13,289 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 14:25:20,809 - wireless_ap_test - INFO - Saving configuration
2025-03-19 14:25:26,078 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 14:25:26,078 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 14:25:26,078 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 14:25:26,951 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:25:26,951 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:25:26,951 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:25:26,951 - wireless_ap_test - INFO - MQTT Process Check: 10463 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
10937 root      1920 S    ash -c ps | grep mosquitto
10939 root      1920 S    grep mosquitto
2025-03-19 14:25:26,974 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:25:26,975 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:25:26,975 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:25:27,066 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:25:27,155 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:25:27,155 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:25:27,155 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:25:27,155 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:25:27,155 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:25:27,155 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:25:27,155 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:25:37,206 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:25:37,207 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:25:37,207 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:25:37,207 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:25:37,207 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:25:37,207 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:25:37,208 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 14:25:37,208 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:25:37,208 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 14:25:37,226 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:25:37,227 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:25:37,242 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:25:37,432 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:25:38,441 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 14:25:38,441 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 14:25:38,459 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 14:25:38,626 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 14:25:38,650 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 14:25:38,650 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 14:25:38,651 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:25:38,664 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:25:39,666 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:25:39,666 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:25:39,667 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:25:39,684 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:25:39,685 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:25:40,534 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:25:43,561 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:25:43,566 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 14:25:43,566 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:25:43,566 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:25:43,567 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:25:43,567 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:25:43,567 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:25:43,567 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:25:43,567 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:25:43,567 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:25:43,568 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:25:43,568 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:25:43,568 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:25:44,445 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:25:44,578 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:25:44,661 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:25:44,951 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:25:44,952 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:25:44,952 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 14:25:44,952 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:25:44,952 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:25:44,952 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:25:44,952 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:25:44,952 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:25:44,952 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:25:44,952 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:25:44,953 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:25:44,953 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:25:44,953 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:25:44,953 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:25:45,845 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 14:25:45,845 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:25:45,845 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:25:46,001 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:25:46,001 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:25:46,066 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 14:25:46,066 - wireless_ap_test - INFO - Configuring data collection with type: Base
2025-03-19 14:25:46,066 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:25:46,110 - wireless_ap_test - INFO -  VALUES: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:25:46,237 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 14:25:46,307 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 14:25:46,308 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:25:46,308 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:25:46,627 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 14:25:46,627 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:25:48,992 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 14:25:48,992 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 14:25:49,075 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:25:49,075 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 14:25:49,075 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 14:25:49,075 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 14:25:49,976 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:25:49,976 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:25:49,976 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:25:49,976 - wireless_ap_test - INFO - MQTT Process Check: 11008 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
11152 root      1920 S    ash -c ps | grep mosquitto
11154 root      1920 R    grep mosquitto
2025-03-19 14:25:49,999 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:25:49,999 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:25:49,999 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:25:50,086 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:25:50,169 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:25:50,169 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:25:50,169 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:25:50,169 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:25:50,169 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:25:50,170 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:25:50,170 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:26:00,250 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:26:00,250 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:26:00,251 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:26:00,251 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:26:00,251 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:26:00,251 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:26:00,251 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 14:26:00,251 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 14:26:00,995 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 14:26:00,995 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 14:26:01,018 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 14:26:01,018 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 14:26:01,018 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 14:26:01,018 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 14:26:01,064 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 14:26:01,111 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 14:26:01,155 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 14:26:01,200 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 14:26:01,454 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 14:26:01,454 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 14:26:01,454 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 14:26:01,454 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 14:26:01,454 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 14:26:01,454 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 14:26:01,455 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 14:26:01,456 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 14:26:01,456 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:26:01,709 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:26:01,709 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 14:26:01,709 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 14:26:01,827 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 14:26:01,827 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 14:26:01,919 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:26:01,919 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:26:01,919 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:26:01,919 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 14:26:01,920 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:26:02,156 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:26:02,156 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 14:26:02,156 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 14:26:02,156 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 14:26:02,156 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 14:26:02,156 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 14:26:02,156 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/documents/ca1-file.crt", "client_certificate": "/home/studentas/documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 14:26:02,156 - wireless_ap_test - INFO - Data type from basic config: Base
2025-03-19 14:26:02,156 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 14:26:02,156 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "Base", "type_settings": {}, "format_type": "JSON", "values": ["time", "local_time", "fw", "name", "id"]}
2025-03-19 14:26:02,322 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 14:26:02,323 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 14:26:02,323 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 14:26:02,406 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'Base', 'type_settings': {}, 'format_type': 'JSON', 'values': ['time', 'local_time', 'fw', 'name', 'id']}
2025-03-19 14:26:02,406 - wireless_ap_test - INFO - Values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:26:02,406 - wireless_ap_test - INFO - Type settings: {}
2025-03-19 14:26:02,406 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 14:26:02,407 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "members": ["time", "local_time", "fw", "name", "id"], "format": "json"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 14:26:03,837 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "id": "3", "format": "json", "members": ["time", "local_time", "fw", "name", "id"]}}, {"success": true, "data": {"mqtt_qos": "2", "mqtt_tls": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_use_credentials": "0", "mqtt_client_id": "test_client", "mqtt_cafile:file_size": 591, "mqtt_device_files": "1", "mqtt_topic": "test/topic123", ".type": "output", "mqtt_insecure": "1", "id": "2", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem", "mqtt_keyfile:file_size": 522, "mqtt_port": "1883", "mqtt_host": "test.mosquitto.org", "mqtt_certfile:file_size": 219342}}, {"success": false, "errors": [{"source": "mqtt_tls", "code": 103, "error": "Data sender output (id = 2) is missing required option: mqtt_tls_type", "section": "2"}]}]}
2025-03-19 14:26:03,837 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 14:26:04,011 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 14:26:04,011 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 14:26:04,011 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:26:04,011 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 14:26:04,011 - wireless_ap_test - INFO - Running validation for api tests with mqtt and dts
2025-03-19 14:26:04,866 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:26:04,866 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:26:04,866 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:26:04,866 - wireless_ap_test - INFO - MQTT Process Check: 11299 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
11361 root      1920 S    ash -c ps | grep mosquitto
11363 root      1920 S    grep mosquitto
2025-03-19 14:26:04,888 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:26:04,888 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:26:04,888 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:26:04,974 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 14:26:05,055 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:26:05,055 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 14:26:05,056 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 14:26:05,056 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 14:26:05,056 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 14:26:05,056 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 14:26:05,056 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:26:15,097 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:26:15,097 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:26:15,097 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:26:15,097 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 14:26:15,097 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:26:15,097 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 14:26:15,097 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 14:26:15,097 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 14:26:15,098 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 14:26:15,098 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 14:26:15,098 - wireless_ap_test - INFO - Delete request:
2025-03-19 14:26:15,098 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 14:26:15,174 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 14:26:15,174 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:26:15,174 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts
2025-03-19 14:26:15,174 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:26:15,175 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt
2025-03-19 14:26:15,175 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 14:26:15,175 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:26:15,453 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:26:16,401 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:26:17,592 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:26:17,592 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:26:17,592 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:26:17,592 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:26:19,257 - wireless_ap_test - INFO - Filled username
2025-03-19 14:26:19,383 - wireless_ap_test - INFO - Filled password
2025-03-19 14:26:19,550 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:26:20,185 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:26:21,188 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:26:22,444 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:26:22,444 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:26:23,427 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:26:23,427 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:26:24,626 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:26:25,627 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:26:25,628 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:26:26,810 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:26:26,832 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:26:26,851 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:26:26,873 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:26:27,013 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:26:27,149 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:26:29,336 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:26:29,336 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:26:29,336 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:26:29,336 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:26:30,619 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:26:30,620 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:26:31,868 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:26:31,868 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:26:33,874 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 14:26:33,874 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:26:33,874 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:26:34,823 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:26:36,004 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 14:26:36,507 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 14:26:36,507 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 14:26:37,870 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 14:26:37,870 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 14:26:37,870 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 14:26:40,385 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 14:26:40,385 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 14:26:40,385 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 14:26:44,975 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 14:26:44,975 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 14:26:44,975 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 14:26:45,866 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 14:26:46,368 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 14:26:49,216 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 14:26:51,394 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 14:26:51,394 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 14:26:53,841 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 14:26:55,665 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 14:26:57,885 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 14:26:57,885 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 14:27:05,438 - wireless_ap_test - INFO - Saving configuration
2025-03-19 14:27:10,678 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 14:27:10,678 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 14:27:10,678 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 14:27:11,532 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:27:11,532 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:27:11,532 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:27:11,533 - wireless_ap_test - INFO - MQTT Process Check: 11299 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
11752 root      1920 S    ash -c ps | grep mosquitto
11754 root      1920 R    grep mosquitto
2025-03-19 14:27:11,557 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:27:11,557 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:27:11,557 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:27:11,644 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:27:11,728 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:27:11,728 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:27:11,729 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:27:11,729 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:27:11,729 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:27:11,729 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:27:11,729 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:27:21,771 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:27:21,771 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:27:21,771 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:27:21,771 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:27:21,771 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:27:21,771 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:27:21,772 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 14:27:21,772 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:27:21,772 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 14:27:21,788 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:27:21,788 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:27:21,801 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:27:21,951 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:27:22,957 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 14:27:22,957 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 14:27:22,966 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 14:27:23,116 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 14:27:23,125 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 14:27:23,126 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 14:27:23,126 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:27:23,133 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:27:24,134 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:27:24,134 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:27:24,134 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:27:24,143 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:27:24,143 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:27:24,659 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:27:27,679 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:27:27,684 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:27:27,685 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:27:28,515 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:27:28,650 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:27:28,734 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:27:29,024 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:27:29,024 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 14:27:29,024 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 14:27:29,024 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:27:29,024 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:27:29,024 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:27:29,024 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:27:29,024 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 14:27:29,024 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:27:29,024 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:27:29,025 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:27:29,025 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:27:29,025 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:27:29,025 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:27:29,901 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 14:27:29,901 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:27:29,901 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:27:30,063 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:27:30,063 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:27:30,134 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 14:27:30,134 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 14:27:30,134 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:27:30,181 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 14:27:30,611 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 14:27:30,684 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 14:27:30,684 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:27:30,684 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:27:31,022 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 14:27:31,022 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:27:33,386 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 14:27:33,387 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 14:27:33,494 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:27:33,494 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 14:27:33,494 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 14:27:33,494 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt copy and dts copy
2025-03-19 14:27:34,368 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:27:34,368 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:27:34,368 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:27:34,368 - wireless_ap_test - INFO - MQTT Process Check: 11823 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
11982 root      1920 S    ash -c ps | grep mosquitto
11984 root      1920 R    grep mosquitto
2025-03-19 14:27:34,392 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:27:34,392 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:27:34,392 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:27:34,482 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:27:34,570 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:27:34,570 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:27:34,570 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:27:34,570 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:27:34,570 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:27:34,570 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:27:34,570 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:27:44,616 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:27:44,616 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:27:44,616 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:27:44,616 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:27:44,616 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:27:44,616 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:27:44,616 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 14:27:44,617 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 14:27:45,369 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 14:27:45,369 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 14:27:45,393 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 14:27:45,393 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 14:27:45,394 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 14:27:45,394 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 14:27:45,443 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 14:27:45,489 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 14:27:45,536 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 14:27:45,581 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 14:27:45,848 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 14:27:45,848 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts copy
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt copy
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt copy
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:27:45,849 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 14:27:45,850 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 14:27:45,850 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 14:27:45,850 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:27:46,104 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:27:46,104 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 14:27:46,105 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 14:27:46,226 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 14:27:46,226 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 14:27:46,318 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:27:46,318 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:27:46,318 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:27:46,318 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 14:27:46,318 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts copy
2025-03-19 14:27:46,318 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 14:27:46,318 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 14:27:46,318 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:27:46,319 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:27:46,319 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 14:27:46,319 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 14:27:46,319 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 14:27:46,319 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:27:46,319 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 14:27:46,319 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 14:27:46,319 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 14:27:46,319 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:27:46,557 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:27:46,557 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 14:27:46,557 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 14:27:46,557 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 14:27:46,557 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 14:27:46,557 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 14:27:46,558 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 14:27:46,558 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-19 14:27:46,558 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 14:27:46,558 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-19 14:27:46,735 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 14:27:46,735 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 14:27:46,736 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 14:27:46,823 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-19 14:27:46,823 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-19 14:27:46,823 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-19 14:27:46,823 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-19 14:27:46,823 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-19 14:27:46,823 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-19 14:27:46,823 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-19 14:27:46,989 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-19 14:27:46,989 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 14:27:46,989 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-19 14:27:46,989 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-19 14:27:47,133 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-19 14:27:47,133 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 14:27:47,133 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-19 14:27:47,134 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-19 14:27:47,298 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-19 14:27:47,298 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 14:27:47,298 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 14:27:47,298 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 14:27:47,298 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 14:27:47,298 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 14:27:47,298 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 14:27:48,730 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_qos": "2", "mqtt_tls": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_use_credentials": "0", "mqtt_client_id": "test_client", "mqtt_cafile:file_size": 591, "mqtt_device_files": "1", "mqtt_topic": "test/topic123", ".type": "output", "mqtt_insecure": "1", "id": "2", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem", "mqtt_keyfile:file_size": 522, "mqtt_port": "1883", "mqtt_host": "test.mosquitto.org", "mqtt_certfile:file_size": 219342}}, {"success": false, "errors": [{"source": "mqtt_tls", "code": 103, "error": "Data sender output (id = 2) is missing required option: mqtt_tls_type", "section": "2"}]}]}
2025-03-19 14:27:48,730 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 14:27:48,904 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{".type": "collection", "id": "1", "output": "2", "period": "60", "input": ["3"], "format": "json", "name": "test_instance3", "timer": "period"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input1", "id": "3", "format": "json"}], "servers": [{"id": "2", ".type": "output", "name": "test_instance3_output"}]}
2025-03-19 14:27:48,904 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 14:27:48,904 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:27:48,904 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 14:27:48,905 - wireless_ap_test - INFO - Running validation for api tests with mqtt copy and dts copy
2025-03-19 14:27:49,761 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:27:49,761 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:27:49,761 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:27:49,761 - wireless_ap_test - INFO - MQTT Process Check: 12134 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
12202 root      1920 S    ash -c ps | grep mosquitto
12204 root      1920 S    grep mosquitto
2025-03-19 14:27:49,782 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:27:49,782 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:27:49,782 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:27:49,865 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='60'
2025-03-19 14:27:49,948 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:27:49,948 - wireless_ap_test - INFO - Data to Server Enabled Check: 
2025-03-19 14:27:49,948 - wireless_ap_test - INFO - MQTT Server Check: 
2025-03-19 14:27:49,948 - wireless_ap_test - INFO - MQTT Topic Check: 
2025-03-19 14:27:49,948 - wireless_ap_test - INFO - MQTT Client ID Check: 
2025-03-19 14:27:49,949 - wireless_ap_test - INFO - MQTT QoS Check: 
2025-03-19 14:27:49,949 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:27:59,994 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:27:59,994 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:27:59,994 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:27:59,994 - wireless_ap_test - INFO - Overall Success: False
2025-03-19 14:27:59,994 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:27:59,994 - wireless_ap_test - INFO - DTS Success: False
2025-03-19 14:27:59,994 - wireless_ap_test - INFO - DTS Failures: ['DTS not enabled', "server (expected 'test.mosquitto.org', got '')", "topic (expected 'test/topic123', got '')", "client_id (expected 'test_client', got '')", "QoS (expected '2', got '')", 'no MQTT message received']
2025-03-19 14:27:59,994 - wireless_ap_test - INFO - API validation completed with success: False
2025-03-19 14:27:59,994 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 14:27:59,995 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 14:27:59,995 - wireless_ap_test - INFO - Delete request:
2025-03-19 14:27:59,995 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 14:28:00,067 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 14:28:00,067 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:28:00,067 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts copy
2025-03-19 14:28:00,067 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:28:00,067 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt copy
2025-03-19 14:28:00,067 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 14:28:00,068 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 16, Failed: 2
2025-03-19 14:28:00,068 - wireless_ap_test - INFO - 
========================================
2025-03-19 14:28:00,068 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 14:28:00,068 - wireless_ap_test - INFO - ========================================
2025-03-19 14:28:00,068 - wireless_ap_test - INFO - 9. validation_api_mqtt_dts: Validation failed
2025-03-19 14:28:00,068 - wireless_ap_test - INFO - 18. validation_api_mqtt copy_dts copy: Validation failed
2025-03-19 14:28:00,068 - wireless_ap_test - INFO - ========================================
2025-03-19 14:34:14,363 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 14:34:14,363 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 14:34:14,364 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 14:34:14,364 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 14:34:14,365 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 14:34:14,365 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 14:34:14,365 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:34:14,767 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:34:16,132 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:34:17,586 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:34:17,590 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:34:17,591 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:34:17,592 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:34:19,508 - wireless_ap_test - INFO - Filled username
2025-03-19 14:34:19,654 - wireless_ap_test - INFO - Filled password
2025-03-19 14:34:19,879 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:34:20,575 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:34:21,581 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:34:23,407 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:34:23,408 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:34:24,611 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:34:24,611 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:34:25,910 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:34:26,912 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:34:26,913 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:34:28,198 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:34:28,269 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:34:28,313 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:34:28,368 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:34:28,570 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:34:28,729 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:34:31,053 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:34:31,053 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:34:31,054 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:34:31,054 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:34:32,436 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:34:32,436 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:34:33,899 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:34:33,899 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:34:35,907 - wireless_ap_test - INFO - Found 2 existing instances
2025-03-19 14:34:35,933 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:34:35,933 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:34:36,792 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:34:36,863 - wireless_ap_test - ERROR - Failed to click add button: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 14:34:36,863 - wireless_ap_test - ERROR - Failed to configure DTS: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 14:34:36,863 - wireless_ap_test - ERROR - Failed to configure Data to Server via GUI: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 14:34:36,863 - wireless_ap_test - ERROR - Error in data_to_server GUI test: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 14:34:36,864 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:34:36,864 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 14:34:36,876 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:34:36,876 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:34:36,888 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:34:37,042 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:34:38,048 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 14:34:38,048 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 14:34:38,058 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 14:34:38,208 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 14:34:38,216 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 14:34:38,217 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 14:34:38,217 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:34:38,223 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:34:39,224 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:34:39,224 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:34:39,224 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:34:39,233 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:34:39,233 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:34:39,822 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:34:42,841 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:34:42,846 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 14:34:42,847 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:34:42,847 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:34:42,847 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:34:42,847 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:34:42,847 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:34:42,847 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:34:42,847 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:34:42,848 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:34:42,848 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:34:42,848 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:34:42,848 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:34:43,702 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:34:43,828 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:34:43,911 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:34:44,202 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:34:44,202 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:34:44,202 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 14:34:44,202 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:34:44,202 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:34:44,202 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:34:44,202 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:34:44,203 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:34:44,203 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:34:44,203 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:34:44,203 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:34:44,203 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:34:44,203 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:34:44,203 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:34:45,114 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 14:34:45,114 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:34:45,114 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:34:45,263 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:34:45,263 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:34:45,327 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 14:34:45,327 - wireless_ap_test - INFO - Configuring data collection with type: Base
2025-03-19 14:34:45,327 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:34:45,369 - wireless_ap_test - INFO -  VALUES: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:34:45,497 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 14:34:45,567 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 14:34:45,567 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:34:45,567 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:34:45,888 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 14:34:45,888 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:34:48,235 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 14:34:48,236 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 14:34:48,321 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:34:48,321 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 14:34:48,321 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 14:34:48,321 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 14:34:49,198 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:34:49,198 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:34:49,198 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:34:49,199 - wireless_ap_test - INFO - MQTT Process Check: 12760 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
12911 root      1920 S    ash -c ps | grep mosquitto
12913 root      1920 S    grep mosquitto
2025-03-19 14:34:49,220 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 3
2025-03-19 14:34:49,221 - wireless_ap_test - INFO - Section 3 is of type: input
2025-03-19 14:34:49,221 - wireless_ap_test - INFO - Using hardcoded section IDs from logs
2025-03-19 14:34:49,221 - wireless_ap_test - INFO - Final DTS sections: {'collection': '2', 'output': '3', 'input': '5'}
2025-03-19 14:34:49,308 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.2.period='5'
2025-03-19 14:34:49,393 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.2.name='test_instance3'
2025-03-19 14:34:49,393 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.2.enabled='1'
2025-03-19 14:34:49,393 - wireless_ap_test - INFO - MQTT Server Check: data_sender.3.mqtt_host='test.mosquitto.org'
2025-03-19 14:34:49,393 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.3.mqtt_topic='test/topic123'
2025-03-19 14:34:49,393 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.3.mqtt_client_id='test_client'
2025-03-19 14:34:49,393 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.3.mqtt_qos='2'
2025-03-19 14:34:49,393 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:34:59,443 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:34:59,443 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:34:59,443 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:34:59,443 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:34:59,443 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:34:59,444 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:34:59,444 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 14:34:59,444 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 14:35:00,201 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 14:35:00,201 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 14:35:00,224 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 14:35:00,224 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 14:35:00,224 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 14:35:00,224 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 14:35:00,280 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 14:35:00,325 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 14:35:00,369 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 14:35:00,413 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 14:35:00,668 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 14:35:00,668 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 14:35:00,668 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 14:35:00,668 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 14:35:00,668 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 14:35:00,668 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 14:35:00,668 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt
2025-03-19 14:35:00,669 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 14:35:00,669 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 14:35:00,669 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:35:00,669 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:35:00,669 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:35:00,669 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 14:35:00,669 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 14:35:00,669 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:35:00,669 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 14:35:00,670 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 14:35:00,670 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 14:35:00,670 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:35:00,939 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:35:00,939 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 14:35:00,939 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 14:35:01,069 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 14:35:01,069 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 14:35:01,162 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:35:01,162 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 14:35:01,163 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 14:35:01,164 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:35:01,407 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:35:01,407 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 14:35:01,407 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 14:35:01,407 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 14:35:01,408 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 14:35:01,408 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 14:35:01,408 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/documents/ca1-file.crt", "client_certificate": "/home/studentas/documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 14:35:01,408 - wireless_ap_test - INFO - Data type from basic config: Base
2025-03-19 14:35:01,408 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 14:35:01,408 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "Base", "type_settings": {}, "format_type": "JSON", "values": ["time", "local_time", "fw", "name", "id"]}
2025-03-19 14:35:01,580 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 14:35:01,580 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 14:35:01,580 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 14:35:01,664 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'Base', 'type_settings': {}, 'format_type': 'JSON', 'values': ['time', 'local_time', 'fw', 'name', 'id']}
2025-03-19 14:35:01,664 - wireless_ap_test - INFO - Values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:35:01,664 - wireless_ap_test - INFO - Type settings: {}
2025-03-19 14:35:01,664 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 14:35:01,664 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "members": ["time", "local_time", "fw", "name", "id"], "format": "json"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_tls_type": "cert", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 14:35:03,094 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "id": "3", "format": "json", "members": ["time", "local_time", "fw", "name", "id"]}}, {"success": true, "data": {"mqtt_device_files": "1", "mqtt_tls": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_use_credentials": "0", "mqtt_tls_type": "cert", "mqtt_client_id": "test_client", "mqtt_cafile:file_size": 591, ".type": "output", "mqtt_topic": "test/topic123", "mqtt_insecure": "1", "id": "2", "mqtt_qos": "2", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem", "mqtt_keyfile:file_size": 522, "mqtt_port": "1883", "mqtt_host": "test.mosquitto.org", "mqtt_certfile:file_size": 219342}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-19 14:35:03,094 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 14:35:03,837 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input_test_instance3", "id": "3", "format": "json", "members": ["time", "local_time", "fw", "name", "id"]}], "servers": [{"mqtt_device_files": "1", "mqtt_tls": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_use_credentials": "0", "mqtt_tls_type": "cert", "mqtt_client_id": "test_client", "mqtt_cafile:file_size": 591, ".type": "output", "mqtt_topic": "test/topic123", "mqtt_insecure": "1", "id": "2", "mqtt_qos": "2", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem", "mqtt_keyfile:file_size": 522, "mqtt_port": "1883", "mqtt_host": "test.mosquitto.org", "mqtt_certfile:file_size": 219342}]}
2025-03-19 14:35:03,837 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 14:35:03,837 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:35:03,837 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 14:35:03,837 - wireless_ap_test - INFO - Running validation for api tests with mqtt and dts
2025-03-19 14:35:04,762 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:35:04,762 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:35:04,762 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:35:04,762 - wireless_ap_test - INFO - MQTT Process Check: 13040 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13170 root      1920 S    ash -c ps | grep mosquitto
13172 root      1920 S    grep mosquitto
2025-03-19 14:35:04,784 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:35:04,785 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:35:04,785 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:35:04,877 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:35:04,968 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:35:04,968 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:35:04,968 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:35:04,968 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:35:04,968 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:35:04,968 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:35:04,968 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:35:15,022 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:35:15,022 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:35:15,022 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:35:15,022 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:35:15,022 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:35:15,022 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:35:15,023 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-19 14:35:15,023 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 14:35:15,023 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 14:35:15,023 - wireless_ap_test - INFO - Delete request:
2025-03-19 14:35:15,023 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 14:35:15,099 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 14:35:15,099 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:35:15,099 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts
2025-03-19 14:35:15,099 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:35:15,099 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt
2025-03-19 14:35:15,099 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 14:35:15,099 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:35:15,372 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:35:16,293 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:35:17,478 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:35:17,478 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:35:17,478 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:35:17,478 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:35:19,157 - wireless_ap_test - INFO - Filled username
2025-03-19 14:35:19,285 - wireless_ap_test - INFO - Filled password
2025-03-19 14:35:19,452 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:35:20,111 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:35:21,113 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:35:22,356 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:35:22,356 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:35:23,330 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:35:23,330 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:35:24,513 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:35:25,514 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:35:25,514 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:35:26,739 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:35:26,774 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:35:26,799 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:35:26,829 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:35:26,982 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:35:27,134 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:35:29,350 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:35:29,350 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:35:29,350 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:35:29,350 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:35:30,664 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:35:30,664 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:35:31,930 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:35:31,930 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:35:33,974 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 14:35:33,974 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:35:33,975 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:35:34,864 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:35:36,032 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 14:35:36,535 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 14:35:36,535 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 14:35:37,928 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 14:35:37,928 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 14:35:37,928 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 14:35:40,407 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 14:35:40,407 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 14:35:40,407 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 14:35:45,018 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 14:35:45,018 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 14:35:45,018 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 14:35:45,895 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 14:35:46,397 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 14:35:49,228 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 14:35:51,399 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 14:35:51,399 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 14:35:53,837 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 14:35:55,665 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 14:35:57,902 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 14:35:57,902 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 14:36:05,443 - wireless_ap_test - INFO - Saving configuration
2025-03-19 14:36:10,675 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 14:36:10,675 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 14:36:10,675 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 14:36:11,554 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:36:11,555 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:36:11,555 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:36:11,555 - wireless_ap_test - INFO - MQTT Process Check: 13040 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13571 root      1920 S    ash -c ps | grep mosquitto
13573 root      1920 S    grep mosquitto
2025-03-19 14:36:11,576 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:36:11,576 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:36:11,576 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:36:11,662 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:36:11,746 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:36:11,746 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:36:11,746 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:36:11,746 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:36:11,746 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:36:11,746 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:36:11,746 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:36:22,820 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:36:22,820 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:36:22,820 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:36:22,820 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:36:22,821 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:36:22,821 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:36:22,821 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 14:36:22,821 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:36:22,821 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 14:36:22,836 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:36:22,836 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:36:22,845 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:36:22,989 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:36:23,995 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 14:36:23,995 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 14:36:24,006 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 14:36:24,149 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 14:36:24,160 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 14:36:24,160 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 14:36:24,160 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:36:24,168 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:36:25,169 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:36:25,169 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:36:25,170 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:36:25,177 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:36:25,178 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:36:25,725 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:36:28,743 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:36:28,749 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 14:36:28,749 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:36:28,749 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:36:28,749 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:36:28,749 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:36:28,749 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 14:36:28,749 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:36:28,749 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:36:28,750 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:36:28,750 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:36:28,750 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:36:28,750 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:36:29,605 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:36:29,738 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:36:29,827 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:36:30,113 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:36:30,114 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 14:36:30,114 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 14:36:30,114 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:36:30,114 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:36:30,114 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:36:30,114 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:36:30,114 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 14:36:30,114 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:36:30,114 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:36:30,114 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:36:30,115 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:36:30,115 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:36:30,115 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:36:31,012 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 14:36:31,012 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:36:31,012 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:36:31,167 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:36:31,167 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:36:31,229 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 14:36:31,230 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 14:36:31,230 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:36:31,272 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 14:36:31,670 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 14:36:31,742 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 14:36:31,742 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:36:31,742 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:36:32,081 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 14:36:32,081 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:36:34,457 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 14:36:34,457 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 14:36:34,541 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:36:34,542 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 14:36:34,542 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 14:36:34,542 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt copy and dts copy
2025-03-19 14:36:35,412 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:36:35,412 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:36:35,412 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:36:35,412 - wireless_ap_test - INFO - MQTT Process Check: 13640 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
13799 root      1920 S    ash -c ps | grep mosquitto
13801 root      1920 S    grep mosquitto
2025-03-19 14:36:35,435 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:36:35,435 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:36:35,435 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:36:35,523 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:36:35,609 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:36:35,609 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:36:35,610 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:36:35,610 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:36:35,610 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:36:35,610 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:36:35,610 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:36:45,651 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:36:45,651 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:36:45,651 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:36:45,651 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:36:45,651 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:36:45,651 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:36:45,652 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 14:36:45,652 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 14:36:46,410 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 14:36:46,410 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 14:36:46,438 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 14:36:46,438 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 14:36:46,438 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 14:36:46,438 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 14:36:46,488 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 14:36:46,537 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 14:36:46,587 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 14:36:46,634 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 14:36:46,903 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 14:36:46,903 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 14:36:46,904 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 14:36:46,904 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts copy
2025-03-19 14:36:46,904 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 14:36:46,904 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt copy
2025-03-19 14:36:46,904 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt copy
2025-03-19 14:36:46,904 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 14:36:46,904 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 14:36:46,904 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:36:46,904 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:36:46,904 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 14:36:46,905 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 14:36:46,905 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 14:36:46,905 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:36:46,905 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 14:36:46,905 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 14:36:46,905 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 14:36:46,905 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:36:47,181 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:36:47,181 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 14:36:47,181 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 14:36:47,320 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 14:36:47,320 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 14:36:47,412 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:36:47,412 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:36:47,412 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts copy
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 14:36:47,413 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:36:47,660 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:36:47,660 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 14:36:47,660 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 14:36:47,660 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 14:36:47,661 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 14:36:47,661 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 14:36:47,661 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 14:36:47,661 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-19 14:36:47,661 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 14:36:47,661 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-19 14:36:47,834 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 14:36:47,834 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 14:36:47,834 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 14:36:47,921 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-19 14:36:47,922 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-19 14:36:47,922 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-19 14:36:47,922 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-19 14:36:47,922 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-19 14:36:47,922 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-19 14:36:47,922 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-19 14:36:48,076 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-19 14:36:48,076 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 14:36:48,077 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-19 14:36:48,077 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-19 14:36:48,220 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-19 14:36:48,220 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 14:36:48,220 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-19 14:36:48,220 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-19 14:36:48,371 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-19 14:36:48,371 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 14:36:48,371 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 14:36:48,371 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 14:36:48,371 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 14:36:48,371 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 14:36:48,372 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_tls_type": "cert", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 14:36:49,796 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_device_files": "1", "mqtt_tls": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_use_credentials": "0", "mqtt_tls_type": "cert", "mqtt_client_id": "test_client", "mqtt_cafile:file_size": 591, ".type": "output", "mqtt_topic": "test/topic123", "mqtt_insecure": "1", "id": "2", "mqtt_qos": "2", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem", "mqtt_keyfile:file_size": 522, "mqtt_port": "1883", "mqtt_host": "test.mosquitto.org", "mqtt_certfile:file_size": 219342}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-19 14:36:49,796 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 14:36:50,570 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_device_files": "1", "mqtt_tls": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_use_credentials": "0", "mqtt_tls_type": "cert", "mqtt_client_id": "test_client", "mqtt_cafile:file_size": 591, ".type": "output", "mqtt_topic": "test/topic123", "mqtt_insecure": "1", "id": "2", "mqtt_qos": "2", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem", "mqtt_keyfile:file_size": 522, "mqtt_port": "1883", "mqtt_host": "test.mosquitto.org", "mqtt_certfile:file_size": 219342}]}
2025-03-19 14:36:50,570 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 14:36:50,570 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:36:50,570 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 14:36:50,570 - wireless_ap_test - INFO - Running validation for api tests with mqtt copy and dts copy
2025-03-19 14:36:51,460 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:36:51,460 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:36:51,460 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:36:51,460 - wireless_ap_test - INFO - MQTT Process Check: 13944 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
14075 root      1920 S    ash -c ps | grep mosquitto
14077 root      1920 S    grep mosquitto
2025-03-19 14:36:51,484 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:36:51,484 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:36:51,484 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:36:51,574 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:36:51,661 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:36:51,661 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:36:51,662 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:36:51,662 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:36:51,662 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:36:51,662 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:36:51,662 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:37:01,705 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:37:01,705 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:37:01,705 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:37:01,705 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:37:01,705 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:37:01,706 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:37:01,706 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-19 14:37:01,706 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 14:37:01,706 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 14:37:01,706 - wireless_ap_test - INFO - Delete request:
2025-03-19 14:37:01,706 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 14:37:01,778 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 14:37:01,778 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:37:01,779 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts copy
2025-03-19 14:37:01,779 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:37:01,779 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt copy
2025-03-19 14:37:01,779 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 14:37:01,779 - wireless_ap_test - INFO - Test execution completed. Total: 17, Passed: 16, Failed: 1
2025-03-19 14:37:01,780 - wireless_ap_test - INFO - 
========================================
2025-03-19 14:37:01,780 - wireless_ap_test - INFO - FAILED TESTS SUMMARY:
2025-03-19 14:37:01,780 - wireless_ap_test - INFO - ========================================
2025-03-19 14:37:01,780 - wireless_ap_test - INFO - 2. data_to_server_gui_data_to_server: Locator.wait_for: Error: strict mode violation: locator("button[test-id=\"button-add\"]") resolved to 2 elements:
    1) <button type="button" test-id="button-add" class="disabled:bg-transparent gap-2 w-max text-primary-300 hover:text-primary-250 text-body-secondary font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none add-button lg:ml-8 mt-3">…</button> aka get_by_role("button", name="+ New data input")
    2) <button type="button" data-v-3fa1688d="" test-id="button-add" class="disabled:bg-gray-tlt-600 gap-2 gap-2 w-max text-white bg-primary-300 hover:bg-primary-250 active:bg-primary-250 py-1.5 text-body-secondary px-4 font-semibold rounded aria-disabled:cursor-default transition-colors disabled:text-gray-tlt-300 flex items-center font-sans shrink-0 h-max focus-visible:outline-2 focus-visible:outline-primary-300 outline-none">…</button> aka get_by_role("button", name="Add")

Call log:
  - waiting for locator("button[test-id=\"button-add\"]") to be visible

2025-03-19 14:37:01,780 - wireless_ap_test - INFO - ========================================
2025-03-19 14:38:21,257 - wireless_ap_test - INFO - Starting tests with arguments: Namespace(test_type=None, config='config/device_config.json', scenario_dir='config/test_scenarios')
2025-03-19 14:38:21,257 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt
2025-03-19 14:38:21,258 - wireless_ap_test - INFO - Loaded MQTT scenario: mqtt copy
2025-03-19 14:38:21,258 - wireless_ap_test - INFO - Loaded DTS scenario: dts
2025-03-19 14:38:21,258 - wireless_ap_test - INFO - Loaded DTS scenario: dts copy
2025-03-19 14:38:21,259 - wireless_ap_test - INFO - Will run 2 scenario pairs
2025-03-19 14:38:21,259 - wireless_ap_test - INFO - Running tests for scenario pair 1/2: MQTT=mqtt, DTS=dtsMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:38:21,719 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:38:22,872 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:38:24,379 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:38:24,387 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:38:24,388 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:38:24,388 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:38:26,228 - wireless_ap_test - INFO - Filled username
2025-03-19 14:38:26,360 - wireless_ap_test - INFO - Filled password
2025-03-19 14:38:26,540 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:38:27,229 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:38:28,233 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:38:29,599 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:38:29,599 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:38:30,750 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:38:30,750 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:38:31,970 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:38:32,973 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:38:32,973 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:38:34,190 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:38:34,224 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:38:34,257 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:38:34,290 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:38:34,448 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:38:34,607 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:38:36,852 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:38:36,852 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:38:36,853 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:38:36,853 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:38:38,202 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:38:38,202 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:38:39,543 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:38:39,543 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:38:41,551 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 14:38:41,551 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:38:41,551 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:38:42,455 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:38:43,626 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 14:38:44,128 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 14:38:44,128 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 14:38:45,549 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 14:38:45,549 - wireless_ap_test - INFO - Setting data type to: Base
2025-03-19 14:38:45,549 - wireless_ap_test - INFO - Mapped data type Base to test-id: base
2025-03-19 14:38:47,999 - wireless_ap_test - INFO - Successfully set data type to: Base
2025-03-19 14:38:47,999 - wireless_ap_test - INFO - Configuring type-specific settings for Base
2025-03-19 14:38:47,999 - wireless_ap_test - INFO - Successfully configured type-specific settings for Base
2025-03-19 14:38:47,999 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 14:38:48,913 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 14:38:49,416 - wireless_ap_test - INFO - Configuring values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:38:53,436 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 14:38:55,618 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 14:38:55,619 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 14:38:58,062 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 14:38:59,985 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 14:39:02,239 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 14:39:02,239 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 14:39:10,112 - wireless_ap_test - INFO - Saving configuration
2025-03-19 14:39:15,445 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 14:39:15,445 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 14:39:15,445 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 14:39:16,302 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:39:16,302 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:39:16,302 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:39:16,302 - wireless_ap_test - INFO - MQTT Process Check: 13944 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
14547 root      1920 S    ash -c ps | grep mosquitto
14549 root      1920 S    grep mosquitto
2025-03-19 14:39:16,324 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:39:16,324 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:39:16,325 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:39:16,412 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:39:16,501 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:39:16,501 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:39:16,501 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:39:16,501 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:39:16,501 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:39:16,501 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:39:16,501 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:39:26,545 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:39:26,545 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:39:26,545 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:39:26,545 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:39:26,545 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:39:26,545 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:39:26,545 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 14:39:26,546 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:39:26,546 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 14:39:26,561 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:39:26,561 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:39:26,575 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:39:26,729 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:39:27,734 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 14:39:27,734 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 14:39:27,744 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 14:39:27,888 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 14:39:27,898 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 14:39:27,898 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 14:39:27,898 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:39:27,911 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:39:28,911 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:39:28,912 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:39:28,912 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:39:28,920 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:39:28,920 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:39:29,439 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:39:32,459 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:39:32,465 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt
2025-03-19 14:39:32,465 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:39:32,465 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:39:32,465 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:39:32,465 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:39:32,465 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:39:32,466 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:39:32,466 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:39:32,466 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:39:32,466 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:39:32,466 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:39:32,466 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:39:33,295 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:39:33,429 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:39:33,516 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:39:33,831 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:39:33,832 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:39:33,832 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts
2025-03-19 14:39:33,832 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:39:33,832 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:39:33,832 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:39:33,832 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:39:33,832 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:39:33,832 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:39:33,833 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:39:33,833 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:39:33,833 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:39:33,833 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:39:33,833 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:39:34,735 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 14:39:34,735 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:39:34,735 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:39:34,884 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:39:34,884 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:39:34,951 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 14:39:34,952 - wireless_ap_test - INFO - Configuring data collection with type: Base
2025-03-19 14:39:34,952 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:39:34,997 - wireless_ap_test - INFO -  VALUES: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:39:35,131 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 14:39:35,206 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 14:39:35,206 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:39:35,206 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:39:35,548 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 14:39:35,548 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:39:37,918 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 14:39:37,918 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 14:39:38,001 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:39:38,001 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 14:39:38,001 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 14:39:38,001 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt and dts
2025-03-19 14:39:38,892 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:39:38,892 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:39:38,892 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:39:38,892 - wireless_ap_test - INFO - MQTT Process Check: 14618 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
14762 root      1920 S    ash -c ps | grep mosquitto
14764 root      1920 S    grep mosquitto
2025-03-19 14:39:38,915 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:39:38,916 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:39:38,916 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:39:39,003 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:39:39,087 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:39:39,087 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:39:39,087 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:39:39,087 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:39:39,087 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:39:39,087 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:39:39,087 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:39:49,132 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:39:49,132 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:39:49,132 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:39:49,132 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:39:49,132 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:39:49,132 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:39:49,132 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 14:39:49,132 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 14:39:49,891 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 14:39:49,891 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 14:39:49,918 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 14:39:49,918 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 14:39:49,918 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 14:39:49,918 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 14:39:49,964 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 14:39:50,010 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 14:39:50,064 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 14:39:50,108 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 14:39:50,366 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 14:39:50,366 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 14:39:50,366 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 14:39:50,366 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts
2025-03-19 14:39:50,366 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 14:39:50,366 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt
2025-03-19 14:39:50,366 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt
2025-03-19 14:39:50,366 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 14:39:50,367 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 14:39:50,367 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:39:50,367 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:39:50,367 - wireless_ap_test - INFO - File name: mqtt
2025-03-19 14:39:50,367 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 14:39:50,367 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 14:39:50,367 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:39:50,367 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 14:39:50,367 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 14:39:50,368 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 14:39:50,368 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:39:50,629 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:39:50,629 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 14:39:50,629 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 14:39:50,767 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 14:39:50,768 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 14:39:50,858 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:39:50,858 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:39:50,858 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:39:50,858 - wireless_ap_test - INFO - Test completed: mqtt - SUCCESS
2025-03-19 14:39:50,858 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - File name: dts
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 14:39:50,859 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:39:51,099 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:39:51,100 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 14:39:51,100 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 14:39:51,100 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 14:39:51,100 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 14:39:51,100 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 14:39:51,100 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/documents/ca1-file.crt", "client_certificate": "/home/studentas/documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 14:39:51,100 - wireless_ap_test - INFO - Data type from basic config: Base
2025-03-19 14:39:51,100 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 14:39:51,100 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "Base", "type_settings": {}, "format_type": "JSON", "values": ["time", "local_time", "fw", "name", "id"]}
2025-03-19 14:39:51,270 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 14:39:51,270 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 14:39:51,270 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 14:39:51,356 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'Base', 'type_settings': {}, 'format_type': 'JSON', 'values': ['time', 'local_time', 'fw', 'name', 'id']}
2025-03-19 14:39:51,356 - wireless_ap_test - INFO - Values: ['time', 'local_time', 'fw', 'name', 'id']
2025-03-19 14:39:51,356 - wireless_ap_test - INFO - Type settings: {}
2025-03-19 14:39:51,356 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 14:39:51,356 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "members": ["time", "local_time", "fw", "name", "id"], "format": "json"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_tls_type": "cert", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 14:39:52,774 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"plugin": "base", ".type": "input", "name": "input_test_instance3", "id": "3", "format": "json", "members": ["time", "local_time", "fw", "name", "id"]}}, {"success": true, "data": {"mqtt_device_files": "1", "mqtt_tls": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_use_credentials": "0", "mqtt_tls_type": "cert", "mqtt_client_id": "test_client", "mqtt_cafile:file_size": 591, ".type": "output", "mqtt_topic": "test/topic123", "mqtt_insecure": "1", "id": "2", "mqtt_qos": "2", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem", "mqtt_keyfile:file_size": 522, "mqtt_port": "1883", "mqtt_host": "test.mosquitto.org", "mqtt_certfile:file_size": 219342}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-19 14:39:52,775 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 14:39:53,539 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"plugin": "base", ".type": "input", "name": "input_test_instance3", "id": "3", "format": "json", "members": ["time", "local_time", "fw", "name", "id"]}], "servers": [{"mqtt_device_files": "1", "mqtt_tls": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_use_credentials": "0", "mqtt_tls_type": "cert", "mqtt_client_id": "test_client", "mqtt_cafile:file_size": 591, ".type": "output", "mqtt_topic": "test/topic123", "mqtt_insecure": "1", "id": "2", "mqtt_qos": "2", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem", "mqtt_keyfile:file_size": 522, "mqtt_port": "1883", "mqtt_host": "test.mosquitto.org", "mqtt_certfile:file_size": 219342}]}
2025-03-19 14:39:53,540 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 14:39:53,540 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:39:53,540 - wireless_ap_test - INFO - Test completed: dts - SUCCESS
2025-03-19 14:39:53,540 - wireless_ap_test - INFO - Running validation for api tests with mqtt and dts
2025-03-19 14:39:54,423 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:39:54,423 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:39:54,423 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:39:54,423 - wireless_ap_test - INFO - MQTT Process Check: 14895 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
15027 root      1920 S    ash -c ps | grep mosquitto
15029 root      1920 S    grep mosquitto
2025-03-19 14:39:54,447 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:39:54,447 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:39:54,447 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:39:54,538 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:39:54,625 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:39:54,626 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:39:54,626 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:39:54,626 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:39:54,626 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:39:54,626 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:39:54,626 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:40:04,669 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:40:04,669 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:40:04,669 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:40:04,669 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:40:04,669 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:40:04,669 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:40:04,669 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-19 14:40:04,670 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 14:40:04,670 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 14:40:04,670 - wireless_ap_test - INFO - Delete request:
2025-03-19 14:40:04,670 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 14:40:04,746 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 14:40:04,746 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:40:04,746 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts
2025-03-19 14:40:04,746 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:40:04,746 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt
2025-03-19 14:40:04,746 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 14:40:04,746 - wireless_ap_test - INFO - Running tests for scenario pair 2/2: MQTT=mqtt copy, DTS=dts copyMQTT=mqtt_broker, DTS=data_to_server
2025-03-19 14:40:05,025 - wireless_ap_test - INFO - Launching browser for GUI tests
2025-03-19 14:40:05,931 - wireless_ap_test - INFO - Creating a single shared page for both GUI tests
2025-03-19 14:40:07,085 - wireless_ap_test - INFO - Running mqtt_broker GUI test for scenario mqtt_broker
2025-03-19 14:40:07,086 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:40:07,086 - wireless_ap_test - INFO - Attempting to navigate to router...
2025-03-19 14:40:07,086 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/login
2025-03-19 14:40:08,702 - wireless_ap_test - INFO - Filled username
2025-03-19 14:40:08,824 - wireless_ap_test - INFO - Filled password
2025-03-19 14:40:08,990 - wireless_ap_test - INFO - Clicked login button
2025-03-19 14:40:09,659 - wireless_ap_test - INFO - Login successful - reached overview page
2025-03-19 14:40:10,661 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/mqtt/broker
2025-03-19 14:40:11,933 - wireless_ap_test - INFO - MQTT Broker page loaded
2025-03-19 14:40:11,933 - wireless_ap_test - INFO - {'port': '1883', 'anonymous_access': True, 'remote_access': True, 'security': {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}, 'security3': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': False, 'device_certificates': {'ca_file': '/home/studentas/documents/ca1-file.crt', 'certificate_file': '/home/studentas/documents/certificate1-file.crt', 'key_file': '/home/studentas/documents/key1-file.crt'}}, 'TLS_version': 'tlsv1.1'}, 'security1': {'TLS/SSL': True, 'certificates': {'tls_type': 'Pre-Shared-Key based', 'pre-shared-key': 'Paswoord', 'identity': 'ideeeentity'}, 'TLS_version': 'tls1.1'}, 'security2': {'TLS/SSL': True, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': True, 'device_certificates': {'ca_file': 'C:/users/user/documents/ca-file.crt', 'certificate_file': 'C:/users/user/documents/certificate-file.crt', 'key_file': 'C:/users/user/documents/key-file.crt'}}, 'TLS_version': 'tls1.1'}, 'miscellaneous': {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}, 'validation': {'timeout': 30, 'retry_interval': 5, 'max_retries': 3}}
2025-03-19 14:40:13,014 - wireless_ap_test - INFO - Security config: {'TLS/SSL': False, 'certificates': {'tls_type': 'Certificate based', 'require_certificate': False, 'certificate_files_from_device': True, 'device_certificates': {'ca_file': 'ca-file.cert.pem', 'certificate_file': 'ca-certificates.crt', 'key_file': 'ca-file.key.pem'}}, 'TLS_version': 'tlsv1.1'}
2025-03-19 14:40:13,015 - wireless_ap_test - INFO - Clicking Security tab
2025-03-19 14:40:14,192 - wireless_ap_test - INFO - TLS/SSL already in desired state: False
2025-03-19 14:40:15,192 - wireless_ap_test - INFO - Miscellaneous config: {'acl_file': {'acl_file_location': '/home/studentas/Documents/acl_file.acl', 'rules': ['# General access rules', 'topic read home/sensors/#', 'topic write home/commands/#', 'user admin', 'topic readwrite #']}, 'password_file': {'password_file_location': '/home/studentas/Documents/password_file.txt', 'users': {'admin': 'AdminPassword123!', 'sensor_reader': 'ReadOnlyAccess456', 'command_user': 'WriteCommands789'}}, 'persistence': True, 'allow_anonymous': True, 'max_queued_messages': 1000, 'maximum_packet_size': 1048576}
2025-03-19 14:40:15,192 - wireless_ap_test - INFO - Clicking Miscellaneous tab
2025-03-19 14:40:16,374 - wireless_ap_test - INFO - ACL file already uploaded. Skipping upload.
2025-03-19 14:40:16,405 - wireless_ap_test - INFO - Password file already uploaded. Skipping upload.
2025-03-19 14:40:16,433 - wireless_ap_test - INFO - Persistence already in desired state: True
2025-03-19 14:40:16,461 - wireless_ap_test - INFO - Anonymous access already in desired state: True
2025-03-19 14:40:16,610 - wireless_ap_test - INFO - Set max queued messages to 1000
2025-03-19 14:40:16,755 - wireless_ap_test - INFO - Set max packet size to 1048576
2025-03-19 14:40:18,947 - wireless_ap_test - INFO - MQTT broker configured via GUI
2025-03-19 14:40:18,947 - wireless_ap_test - INFO - Running data_to_server GUI test for scenario data_to_server
2025-03-19 14:40:18,947 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:40:18,947 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:40:20,208 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:40:20,208 - wireless_ap_test - INFO - Navigating to https://192.168.1.1/services/data_sender
2025-03-19 14:40:21,473 - wireless_ap_test - INFO - Successfully navigated to Data to Server page
2025-03-19 14:40:21,473 - wireless_ap_test - INFO - Checking for existing instance with name: test_instance3
2025-03-19 14:40:23,483 - wireless_ap_test - INFO - Found 0 existing instances
2025-03-19 14:40:23,483 - wireless_ap_test - INFO - No instance with name 'test_instance3' found or unable to delete it
2025-03-19 14:40:23,483 - wireless_ap_test - INFO - Setting instance name: test_instance3
2025-03-19 14:40:24,337 - wireless_ap_test - INFO - Clicking add button
2025-03-19 14:40:25,505 - wireless_ap_test - INFO - Successfully clicked add button
2025-03-19 14:40:26,006 - wireless_ap_test - INFO - Configuring data collection
2025-03-19 14:40:26,006 - wireless_ap_test - INFO - Setting data collection name to: input
2025-03-19 14:40:27,374 - wireless_ap_test - INFO - Successfully set collection name to: input
2025-03-19 14:40:27,374 - wireless_ap_test - INFO - Setting data type to: MQTT
2025-03-19 14:40:27,375 - wireless_ap_test - INFO - Mapped data type MQTT to test-id: mqtt
2025-03-19 14:40:29,864 - wireless_ap_test - INFO - Successfully set data type to: MQTT
2025-03-19 14:40:29,864 - wireless_ap_test - INFO - Configuring type-specific settings for MQTT
2025-03-19 14:40:29,864 - wireless_ap_test - INFO - Configuring MQTT input settings
2025-03-19 14:40:34,560 - wireless_ap_test - INFO - Successfully configured MQTT input settings
2025-03-19 14:40:34,560 - wireless_ap_test - INFO - Successfully configured type-specific settings for MQTT
2025-03-19 14:40:34,560 - wireless_ap_test - INFO - Setting format type to: JSON
2025-03-19 14:40:35,474 - wireless_ap_test - INFO - Successfully set format type to: JSON
2025-03-19 14:40:35,977 - wireless_ap_test - INFO - Configuring values: ['data', 'topic', 'retain']
2025-03-19 14:40:38,868 - wireless_ap_test - INFO - Successfully configured values
2025-03-19 14:40:41,046 - wireless_ap_test - INFO - Detected period configuration
2025-03-19 14:40:41,047 - wireless_ap_test - INFO - Configuring period: 5
2025-03-19 14:40:43,500 - wireless_ap_test - INFO - Configuring server settings
2025-03-19 14:40:45,293 - wireless_ap_test - INFO - Clicked QoS dropdown
2025-03-19 14:40:47,537 - wireless_ap_test - INFO - Successfully set QoS
2025-03-19 14:40:47,537 - wireless_ap_test - INFO - Turning on secure connection switch
2025-03-19 14:40:55,073 - wireless_ap_test - INFO - Saving configuration
2025-03-19 14:41:00,311 - wireless_ap_test - INFO - Successfully saved configuration
2025-03-19 14:41:00,311 - wireless_ap_test - INFO - Data to Server configured via GUI
2025-03-19 14:41:00,311 - wireless_ap_test - INFO - Running validation after GUI tests for mqtt_broker and data_to_server
2025-03-19 14:41:01,185 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:41:01,185 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:41:01,185 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:41:01,185 - wireless_ap_test - INFO - MQTT Process Check: 14895 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
15420 root      1920 S    ash -c ps | grep mosquitto
15422 root      1920 S    grep mosquitto
2025-03-19 14:41:01,207 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:41:01,207 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:41:01,207 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:41:01,292 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:41:01,377 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:41:01,377 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:41:01,377 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:41:01,377 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:41:01,377 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:41:01,378 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:41:01,378 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:41:11,429 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:41:11,429 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:41:11,429 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:41:11,429 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:41:11,429 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:41:11,429 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:41:11,430 - wireless_ap_test - INFO - GUI validation completed with success: True
2025-03-19 14:41:11,430 - wireless_ap_test - INFO - Logging out after completing both tests
2025-03-19 14:41:11,430 - wireless_ap_test - INFO - Current URL before logout: https://192.168.1.1/services/data_sender
2025-03-19 14:41:11,445 - wireless_ap_test - INFO - Checking dropdown selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:41:11,445 - wireless_ap_test - INFO - Dropdown button count: 1
2025-03-19 14:41:11,458 - wireless_ap_test - ERROR - Failed to get button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-main-expand-dropdown\"]").first

2025-03-19 14:41:11,611 - wireless_ap_test - INFO - Successfully clicked dropdown with selector: [test-id="header-main-expand-dropdown"]
2025-03-19 14:41:12,615 - wireless_ap_test - INFO - Checking logout selector: [test-id="header-logout"]
2025-03-19 14:41:12,615 - wireless_ap_test - INFO - Logout button count: 1
2025-03-19 14:41:12,625 - wireless_ap_test - ERROR - Failed to get logout button details: Locator.is_enabled: Error: Element is not an <input>, <textarea>, <select> or [contenteditable] and does not have a role allowing [aria-readonly]
Call log:
  - waiting for locator("[test-id=\"header-logout\"]").first

2025-03-19 14:41:12,773 - wireless_ap_test - INFO - Successfully clicked logout with selector: [test-id="header-logout"]
2025-03-19 14:41:12,781 - wireless_ap_test - INFO - Logout process completed successfully
2025-03-19 14:41:12,781 - wireless_ap_test - INFO - Successfully logged out after all GUI tests
2025-03-19 14:41:12,781 - wireless_ap_test - INFO - Closing shared browser page
2025-03-19 14:41:12,787 - wireless_ap_test - INFO - Closed shared browser page successfully
2025-03-19 14:41:13,788 - wireless_ap_test - INFO - Cleaning up browser resources...
2025-03-19 14:41:13,789 - wireless_ap_test - ERROR - Error accessing pages: 'list' object is not callable
2025-03-19 14:41:13,789 - wireless_ap_test - INFO - Closing browser context
2025-03-19 14:41:13,797 - wireless_ap_test - INFO - Browser context closed successfully
2025-03-19 14:41:13,797 - wireless_ap_test - INFO - Closing browser
2025-03-19 14:41:14,325 - wireless_ap_test - INFO - Browser closed successfully
2025-03-19 14:41:17,344 - wireless_ap_test - INFO - Browser cleanup completed
2025-03-19 14:41:17,351 - wireless_ap_test - INFO - Running MQTT broker ssh test for scenario mqtt copy
2025-03-19 14:41:17,351 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.ssh_test
2025-03-19 14:41:17,351 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: mqtt_broker
2025-03-19 14:41:17,351 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:41:17,351 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:41:17,351 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 14:41:17,351 - wireless_ap_test - INFO - Looking for class: MQTTBrokerSSHTest
2025-03-19 14:41:17,352 - wireless_ap_test - INFO - Found test class: MQTTBrokerSSHTest
2025-03-19 14:41:17,352 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:41:17,352 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=mqtt_broker
2025-03-19 14:41:17,352 - wireless_ap_test - INFO - MQTTBrokerSSHTest initialized with scenario: mqtt_broker
2025-03-19 14:41:17,352 - wireless_ap_test - INFO - Running test for mqtt_broker with ssh
2025-03-19 14:41:18,239 - wireless_ap_test - INFO - Configured basic MQTT settings via SSH
2025-03-19 14:41:18,378 - wireless_ap_test - INFO - Configured MQTT security settings via SSH
2025-03-19 14:41:18,473 - wireless_ap_test - INFO - Configured MQTT miscellaneous settings via SSH
2025-03-19 14:41:18,772 - wireless_ap_test - INFO - Applied MQTT configuration changes via SSH
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - Running Data to Server ssh test for scenario dts copy
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.ssh_test
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - Test parameters - Type: ssh, Directory: data_to_server
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - Looking for class: DataToServerSSHTest
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - Found test class: DataToServerSSHTest
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - BaseTestScenario.__init__ called with scenario_name=data_to_server
2025-03-19 14:41:18,773 - wireless_ap_test - INFO - Running test for data_to_server with ssh
2025-03-19 14:41:18,774 - wireless_ap_test - INFO - SSH DTS: Run function started.
2025-03-19 14:41:19,657 - wireless_ap_test - INFO - Using section IDs: collection=2, output=3, input=4
2025-03-19 14:41:19,657 - wireless_ap_test - INFO - SSH DTS: configure_dts function started.
2025-03-19 14:41:19,659 - wireless_ap_test - INFO - Instance name: test_instance3
2025-03-19 14:41:19,810 - wireless_ap_test - INFO - Using legacy period configuration...
2025-03-19 14:41:19,810 - wireless_ap_test - INFO - SSH DTS: _configure_period function started.
2025-03-19 14:41:19,874 - wireless_ap_test - INFO - Configured period settings via SSH for section 2
2025-03-19 14:41:19,875 - wireless_ap_test - INFO - Configuring data collection with type: MQTT
2025-03-19 14:41:19,875 - wireless_ap_test - INFO - SSH DTS: _configure_data_collection function started.
2025-03-19 14:41:19,918 - wireless_ap_test - INFO -  VALUES: ['data', 'topic', 'retain']
2025-03-19 14:41:20,354 - wireless_ap_test - INFO - Configured data collection settings via SSH for section 4
2025-03-19 14:41:20,432 - wireless_ap_test - INFO - Assigned sender_id 2 to collection 2
2025-03-19 14:41:20,432 - wireless_ap_test - INFO - Configuring server with address: test.mosquitto.org
2025-03-19 14:41:20,433 - wireless_ap_test - INFO - SSH DTS: _configure_server function started.
2025-03-19 14:41:20,782 - wireless_ap_test - INFO - Configured server settings via SSH for section 3
2025-03-19 14:41:20,782 - wireless_ap_test - INFO - SSH DTS: _apply_changes function started.
2025-03-19 14:41:23,146 - wireless_ap_test - INFO - Applied Data to Server configuration changes via SSH
2025-03-19 14:41:23,146 - wireless_ap_test - INFO - SSH DTS: _verify_configuration function started.
2025-03-19 14:41:23,237 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:41:23,237 - wireless_ap_test - INFO - Calling cleanup in SSH DTS test finally block
2025-03-19 14:41:23,237 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 14:41:23,238 - wireless_ap_test - INFO - Running validation for ssh tests with mqtt copy and dts copy
2025-03-19 14:41:24,145 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:41:24,145 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:41:24,145 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:41:24,145 - wireless_ap_test - INFO - MQTT Process Check: 15489 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
15648 root      1920 S    ash -c ps | grep mosquitto
15650 root      1920 S    grep mosquitto
2025-03-19 14:41:24,168 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:41:24,168 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:41:24,168 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:41:24,258 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:41:24,344 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:41:24,345 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:41:24,345 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:41:24,345 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:41:24,345 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:41:24,345 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:41:24,345 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:41:34,387 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:41:34,388 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:41:34,388 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:41:34,388 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:41:34,388 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:41:34,388 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:41:34,388 - wireless_ap_test - INFO - SSH validation completed with success: True
2025-03-19 14:41:34,388 - wireless_ap_test - INFO - DataToServerSSHTest: Starting explicit cleanup process
2025-03-19 14:41:35,143 - wireless_ap_test - INFO - Forcing cleanup with validator._cleanup_configuration
2025-03-19 14:41:35,144 - wireless_ap_test - INFO - Wireless Validator: _cleanup_configuration function started.
2025-03-19 14:41:35,168 - wireless_ap_test - INFO - Added section 1 (type: collection) for deletion
2025-03-19 14:41:35,168 - wireless_ap_test - INFO - Added section 3 (type: input) for deletion
2025-03-19 14:41:35,168 - wireless_ap_test - INFO - Added section 2 (type: output) for deletion
2025-03-19 14:41:35,168 - wireless_ap_test - INFO - Added section 4 (type: input) for deletion
2025-03-19 14:41:35,218 - wireless_ap_test - INFO - Deleted data_sender.4 (type: input)
2025-03-19 14:41:35,266 - wireless_ap_test - INFO - Deleted data_sender.3 (type: input)
2025-03-19 14:41:35,312 - wireless_ap_test - INFO - Deleted data_sender.2 (type: output)
2025-03-19 14:41:35,356 - wireless_ap_test - INFO - Deleted data_sender.1 (type: collection)
2025-03-19 14:41:35,614 - wireless_ap_test - INFO - Cleaned up 4 Data to Server sections
2025-03-19 14:41:35,614 - wireless_ap_test - INFO - Successfully cleaned up Data to Server configuration
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - SSH connection closed for DataToServerSSHTest
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Cleanup completed for Data to Server ssh test - dts copy
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - SSH connection closed for MQTTBrokerSSHTest
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Cleanup completed for MQTT broker ssh test - mqtt copy
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Running MQTT broker api test for scenario mqtt copy
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Importing module: src.test_scenarios.mqtt_broker.api_test
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: mqtt_broker
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Scenario name: mqtt_broker
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - File name: mqtt copy
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Looking for class: MQTTBrokerAPITest
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Found test class: MQTTBrokerAPITest
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - Running test for mqtt_broker with api
2025-03-19 14:41:35,615 - wireless_ap_test - INFO - API MQTT: Run function started.
2025-03-19 14:41:35,616 - wireless_ap_test - INFO - MQTT Broker API Test: Setting up test environment
2025-03-19 14:41:35,616 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:41:35,868 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:41:35,869 - wireless_ap_test - INFO - MQTT Broker API Test: Executing test
2025-03-19 14:41:35,869 - wireless_ap_test - INFO - API MQTT: configure_mqtt_broker function started.
2025-03-19 14:41:35,997 - wireless_ap_test - INFO - MQTT Broker configuration updated successfully
2025-03-19 14:41:35,997 - wireless_ap_test - INFO - API MQTT: verify_configuration function started.
2025-03-19 14:41:36,089 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:41:36,089 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Test completed: mqtt copy - SUCCESS
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Running Data to Server api test for scenario dts copy
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Importing module: src.test_scenarios.data_to_server.api_test
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Test parameters - Type: api, Directory: data_to_server
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Scenario config keys: ['scenario_name', 'description', 'config', 'file_name']
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Scenario name: data_to_server
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - File name: dts copy
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Looking for class: DataToServerAPITest
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Found test class: DataToServerAPITest
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Creating test instance with device_config and scenario_config
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Running test for data_to_server with api
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - API DTS: Run function started.
2025-03-19 14:41:36,090 - wireless_ap_test - INFO - Data to Server API Test: Setting up test environment
2025-03-19 14:41:36,091 - wireless_ap_test - INFO - Authenticating to API: https://192.168.1.1/api/login
2025-03-19 14:41:36,329 - wireless_ap_test - INFO - API authentication successful
2025-03-19 14:41:36,329 - wireless_ap_test - INFO - Data to Server API Test: Executing test
2025-03-19 14:41:36,330 - wireless_ap_test - INFO - API DTS: configure_dts function started.
2025-03-19 14:41:36,330 - wireless_ap_test - INFO - Available collection configurations: ['collection_config2', 'collection_config']
2025-03-19 14:41:36,330 - wireless_ap_test - INFO - Selected collection config: {"period": 5, "retry": true}
2025-03-19 14:41:36,330 - wireless_ap_test - INFO - Available server configurations: ['server_config']
2025-03-19 14:41:36,330 - wireless_ap_test - INFO - Selected server config: {"server_address": "test.mosquitto.org", "port": 1883, "keepalive": 30, "topic": "test/topic123", "client_id": "test_client", "QoS": 2, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": true, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "use_credentials": false, "username": "username", "password": "password"}
2025-03-19 14:41:36,330 - wireless_ap_test - INFO - Data type from basic config: MQTT
2025-03-19 14:41:36,330 - wireless_ap_test - INFO - Using direct configuration key: data_config
2025-03-19 14:41:36,330 - wireless_ap_test - INFO - Selected data_config: {"name": "input", "type": "MQTT", "type_settings": {"server_address": "test.mosquitto.org", "port": 1338, "keepalive": 30, "topic": "test", "client_id": 3, "QoS": 1, "enable_secure_connection": true, "secure_connection": {"allow_insecure_connection": true, "certificate_files_from_device": false, "device_certificates": {"certificate_authority_file": "ca-file.cert.pem", "client_certificate": "ca-certificates.crt", "client_private_keyfile": "ca-file.key.pem"}, "certificate_authority_file": "/home/studentas/Documents/ca1-file.crt", "client_certificate": "/home/studentas/Documents/certificate1-file.crt", "client_private_keyfile": "/home/studentas/Documents/key1-file.crt"}, "username": "username", "password": "password"}, "format_type": "JSON", "values": ["data", "topic", "retain"]}
2025-03-19 14:41:36,500 - wireless_ap_test - INFO - Current Data to Server configurations: {"collections": [], "data_inputs": [], "servers": []}
2025-03-19 14:41:36,500 - wireless_ap_test - INFO - No existing collections found. Starting with ID 1.
2025-03-19 14:41:36,500 - wireless_ap_test - INFO - Next available IDs: {'collection_id': 1, 'data_id': 3, 'server_id': 2}
2025-03-19 14:41:36,587 - wireless_ap_test - INFO - Data config: {'name': 'input', 'type': 'MQTT', 'type_settings': {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}, 'format_type': 'JSON', 'values': ['data', 'topic', 'retain']}
2025-03-19 14:41:36,587 - wireless_ap_test - INFO - Values: ['data', 'topic', 'retain']
2025-03-19 14:41:36,587 - wireless_ap_test - INFO - Type settings: {'server_address': 'test.mosquitto.org', 'port': 1338, 'keepalive': 30, 'topic': 'test', 'client_id': 3, 'QoS': 1, 'enable_secure_connection': True, 'secure_connection': {'allow_insecure_connection': True, 'certificate_files_from_device': False, 'device_certificates': {'certificate_authority_file': 'ca-file.cert.pem', 'client_certificate': 'ca-certificates.crt', 'client_private_keyfile': 'ca-file.key.pem'}, 'certificate_authority_file': '/home/studentas/Documents/ca1-file.crt', 'client_certificate': '/home/studentas/Documents/certificate1-file.crt', 'client_private_keyfile': '/home/studentas/Documents/key1-file.crt'}, 'username': 'username', 'password': 'password'}
2025-03-19 14:41:36,587 - wireless_ap_test - INFO - Uploading custom MQTT certificates before configuration
2025-03-19 14:41:36,587 - wireless_ap_test - INFO - Uploading custom MQTT certificates for collection 1, data 3
2025-03-19 14:41:36,588 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/ca1-file.crt
2025-03-19 14:41:36,588 - wireless_ap_test - INFO - Uploading mqtt_in_cafile certificate file: ca1-file.crt
2025-03-19 14:41:36,746 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_cafile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt"}}
2025-03-19 14:41:36,746 - wireless_ap_test - INFO - Got path from response for mqtt_in_cafile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 14:41:36,747 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/certificate1-file.crt
2025-03-19 14:41:36,747 - wireless_ap_test - INFO - Uploading mqtt_in_certfile certificate file: certificate1-file.crt
2025-03-19 14:41:36,889 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_certfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt"}}
2025-03-19 14:41:36,889 - wireless_ap_test - INFO - Got path from response for mqtt_in_certfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 14:41:36,889 - wireless_ap_test - INFO - Reading certificate from path: /home/studentas/Documents/key1-file.crt
2025-03-19 14:41:36,889 - wireless_ap_test - INFO - Uploading mqtt_in_keyfile certificate file: key1-file.crt
2025-03-19 14:41:37,039 - wireless_ap_test - INFO - Certificate upload result for mqtt_in_keyfile: {"success": true, "data": {"path": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}}
2025-03-19 14:41:37,039 - wireless_ap_test - INFO - Got path from response for mqtt_in_keyfile: /etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 14:41:37,039 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_cafile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt
2025-03-19 14:41:37,039 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_certfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt
2025-03-19 14:41:37,039 - wireless_ap_test - INFO - Added uploaded certificate path to configuration: mqtt_in_keyfile=/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt
2025-03-19 14:41:37,040 - wireless_ap_test - INFO - Adding collection update to request batch
2025-03-19 14:41:37,040 - wireless_ap_test - INFO - Sending combined API request: {"data": [{"method": "PUT", "data": {"plugin": "mqtt", ".type": "input", "name": "input_test_instance3", "members": ["data", "topic", "retain"], "format": "json", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_port": "1338", "mqtt_in_keepalive": "30", "mqtt_in_topic": "test", "mqtt_in_client_id": "3", "mqtt_in_qos": "1", "mqtt_in_tls": "1", "mqtt_in_insecure": "1", "mqtt_in_tls_type": "cert", "mqtt_device_files": "0", "mqtt_in_username": "username", "mqtt_in_password": "password", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt"}, "endpoint": "/api/data_to_server/collections/config/1/data/3"}, {"method": "PUT", "data": {".type": "output", "plugin": "mqtt", "mqtt_qos": "2", "mqtt_tls": "1", "mqtt_use_credentials": "0", "mqtt_host": "test.mosquitto.org", "mqtt_port": "1883", "mqtt_keepalive": "30", "mqtt_topic": "test/topic123", "mqtt_client_id": "test_client", "http_tls": "", "http_host": "", "http_header": "", "mqtt_tls_type": "cert", "mqtt_insecure": "1", "mqtt_device_files": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem"}, "endpoint": "/api/data_to_server/collections/config/1/servers/2"}, {"method": "PUT", "data": {".type": "collection", "period": "5", "format": "json", "name": "test_instance3", "timer": "period", "enabled": "1", "retry": "1", "retry_count": "3", "retry_timeout": "10"}, "endpoint": "/api/data_to_server/collections/config/1"}]}
2025-03-19 14:41:38,458 - wireless_ap_test - INFO - Combined API request result: {"success": true, "data": [{"success": true, "data": {"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}}, {"success": true, "data": {"mqtt_device_files": "1", "mqtt_tls": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_use_credentials": "0", "mqtt_tls_type": "cert", "mqtt_client_id": "test_client", "mqtt_cafile:file_size": 591, ".type": "output", "mqtt_topic": "test/topic123", "mqtt_insecure": "1", "id": "2", "mqtt_qos": "2", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem", "mqtt_keyfile:file_size": 522, "mqtt_port": "1883", "mqtt_host": "test.mosquitto.org", "mqtt_certfile:file_size": 219342}}, {"success": true, "data": {"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}}]}
2025-03-19 14:41:38,459 - wireless_ap_test - INFO - API DTS: verify_configuration function started.
2025-03-19 14:41:39,192 - wireless_ap_test - INFO - Current configurations for verification: {"collections": [{"enabled": "1", ".type": "collection", "retry": "1", "id": "1", "retry_count": "3", "output": "2", "name": "test_instance3", "input": ["3"], "timer": "period", "format": "json", "retry_timeout": "10", "period": "5"}], "data_inputs": [{"mqtt_device_files": "0", "mqtt_in_cafile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_cafileca1_file.crt", ".type": "input", "mqtt_in_port": "1338", "mqtt_in_certfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_certfilecertificate1_file.crt", "mqtt_in_certfile:file_size": 1172, "mqtt_in_insecure": "1", "mqtt_in_username": "username", "format": "json", "mqtt_in_qos": "1", "mqtt_in_tls_type": "cert", "mqtt_in_keyfile:file_size": 1704, "mqtt_in_keyfile": "/etc/vuci-uploads/cbid.data_sender.3.mqtt_in_keyfilekey1_file.crt", "id": "3", "mqtt_in_cafile:file_size": 1172, "members": ["data", "topic", "retain"], "mqtt_in_client_id": "3", "mqtt_in_host": "test.mosquitto.org", "mqtt_in_topic": "test", "name": "input_test_instance3", "mqtt_in_password": "password", "plugin": "mqtt", "mqtt_in_keepalive": "30", "mqtt_in_tls": "1"}], "servers": [{"mqtt_device_files": "1", "mqtt_tls": "1", "mqtt_cafile": "/etc/certificates/ca-file.cert.pem", "mqtt_certfile": "/etc/ssl/certs/ca-certificates.crt", "mqtt_use_credentials": "0", "mqtt_tls_type": "cert", "mqtt_client_id": "test_client", "mqtt_cafile:file_size": 591, ".type": "output", "mqtt_topic": "test/topic123", "mqtt_insecure": "1", "id": "2", "mqtt_qos": "2", "mqtt_keepalive": "30", "plugin": "mqtt", "name": "test_instance3_output", "mqtt_keyfile": "/etc/certificates/ca-file.key.pem", "mqtt_keyfile:file_size": 522, "mqtt_port": "1883", "mqtt_host": "test.mosquitto.org", "mqtt_certfile:file_size": 219342}]}
2025-03-19 14:41:39,192 - wireless_ap_test - INFO - Found collection with name test_instance3, ID: 1
2025-03-19 14:41:39,192 - wireless_ap_test - INFO - Configuration verification successful
2025-03-19 14:41:39,192 - wireless_ap_test - INFO - Test completed: dts copy - SUCCESS
2025-03-19 14:41:39,192 - wireless_ap_test - INFO - Running validation for api tests with mqtt copy and dts copy
2025-03-19 14:41:40,148 - wireless_ap_test - INFO - MQTT Broker Enabled Check: mosquitto.mqtt.enabled='1'
2025-03-19 14:41:40,149 - wireless_ap_test - INFO - MQTT Port Check: mosquitto.mqtt.local_port='1883'
2025-03-19 14:41:40,149 - wireless_ap_test - INFO - MQTT Anonymous Access Check: mosquitto.mqtt.anonymous_access='1'
2025-03-19 14:41:40,149 - wireless_ap_test - INFO - MQTT Process Check: 15802 root      4708 S    /usr/sbin/mosquitto -c /tmp/mosquitto.conf
15924 root      1920 S    ash -c ps | grep mosquitto
15926 root      1920 S    grep mosquitto
2025-03-19 14:41:40,172 - wireless_ap_test - INFO - Found DTS section with name 'test_instance3': 1
2025-03-19 14:41:40,172 - wireless_ap_test - INFO - Section 1 is of type: collection
2025-03-19 14:41:40,172 - wireless_ap_test - INFO - Final DTS sections: {'collection': '1'}
2025-03-19 14:41:40,262 - wireless_ap_test - INFO - Data to Server Period Check: data_sender.1.period='5'
2025-03-19 14:41:40,347 - wireless_ap_test - INFO - Data to Server Instance Check: data_sender.1.name='test_instance3'
2025-03-19 14:41:40,347 - wireless_ap_test - INFO - Data to Server Enabled Check: data_sender.1.enabled='1'
2025-03-19 14:41:40,347 - wireless_ap_test - INFO - MQTT Server Check: data_sender.2.mqtt_host='test.mosquitto.org'
2025-03-19 14:41:40,347 - wireless_ap_test - INFO - MQTT Topic Check: data_sender.2.mqtt_topic='test/topic123'
2025-03-19 14:41:40,347 - wireless_ap_test - INFO - MQTT Client ID Check: data_sender.2.mqtt_client_id='test_client'
2025-03-19 14:41:40,347 - wireless_ap_test - INFO - MQTT QoS Check: data_sender.2.mqtt_qos='2'
2025-03-19 14:41:40,347 - wireless_ap_test - INFO - Running command: mosquitto_sub -v -h test.mosquitto.org -p 1883 -t test/topic123 -C 1 -W 10
2025-03-19 14:41:50,393 - wireless_ap_test - ERROR - MQTT Subscription Errors: Timed out
2025-03-19 14:41:50,394 - wireless_ap_test - ERROR - No message received within timeout period
2025-03-19 14:41:50,394 - wireless_ap_test - INFO - Validation Results:
2025-03-19 14:41:50,394 - wireless_ap_test - INFO - Overall Success: True
2025-03-19 14:41:50,394 - wireless_ap_test - INFO - MQTT Broker Success: True
2025-03-19 14:41:50,394 - wireless_ap_test - INFO - DTS Success: True
2025-03-19 14:41:50,394 - wireless_ap_test - INFO - API validation completed with success: True
2025-03-19 14:41:50,394 - wireless_ap_test - INFO - Data to Server API Test: Cleaning up
2025-03-19 14:41:50,394 - wireless_ap_test - INFO - Cleaning up Data to Server configuration with ID: 1
2025-03-19 14:41:50,394 - wireless_ap_test - INFO - Delete request:
2025-03-19 14:41:50,395 - wireless_ap_test - INFO - {'data': ['1']}
2025-03-19 14:41:50,471 - wireless_ap_test - INFO - Deleted Data to Server configuration result: {"success": true, "data": [{"id": "1"}]}
2025-03-19 14:41:50,472 - wireless_ap_test - INFO - API connection closed
2025-03-19 14:41:50,472 - wireless_ap_test - INFO - Cleanup completed for Data to Server api test - dts copy
2025-03-19 14:41:50,472 - wireless_ap_test - INFO - MQTT Broker API Test: Cleaning up
2025-03-19 14:41:50,472 - wireless_ap_test - INFO - Cleanup completed for MQTT broker api test - mqtt copy
2025-03-19 14:41:50,472 - wireless_ap_test - INFO - --------------------------------------------------------------------------------
2025-03-19 14:41:50,473 - wireless_ap_test - INFO - Test execution completed. Total: 18, Passed: 18, Failed: 0
